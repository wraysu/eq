// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://@sbaseurl@/jsapi/jsapi/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/lang","dojo/_base/array","jimu/utils"],function(k,f,l){function g(a,c){var b=null;a&&a.fields&&f.some(a.fields,function(a){if(a.name.toLowerCase()===c.toLowerCase())return b=a,!0});return b}function h(a,c,b){var e=null;if(a&&a.attributes)for(var d in a.attributes)if(a.attributes.hasOwnProperty(d)&&"function"!==typeof a.attributes[d]&&d.toLowerCase()===c.toLowerCase()){e=b?a.attributes[d]=b:a.attributes[d];break}return e}return{getFieldInfosFromWebmap:function(a,c){var b=null;(a=
c.getLayerInfoByTopLayerId(a))&&(a=a.getPopupInfo())&&a.fieldInfos&&(b=k.clone(a.fieldInfos));b&&f.forEach(b,function(a){a.format&&a.format.dateFormat&&a.format.dateFormat.toLowerCase()&&0<=a.format.dateFormat.toLowerCase().indexOf("time")&&(a.format.time=!0)});return b},getLocaleDateTime:function(a){return l.localizeDate(new Date(a),{fullYear:!0,formatLength:"medium"})},getAttrByFieldKey:function(a,c){return h(a,c)},setAttrByFieldKey:function(a,c,b){return h(a,c,b)},ignoreCaseToGetFieldKey:function(a,
c){var b=null;if(a=g(a,c))b=a.name;return b},ignoreCaseToGetFieldObject:function(a,c){return g(a,c)}}});