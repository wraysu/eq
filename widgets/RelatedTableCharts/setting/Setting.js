// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://@sbaseurl@/jsapi/jsapi/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/RelatedTableCharts/setting/LayerChooser":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array dojo/promise/all dojo/Deferred dojo/on dojo/dom-class dojo/text!./LayerChooser.html jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox esri/request jimu/dijit/Message dojo/domReady!".split(" "),function(f,k,l,p,g,c,d,b,a,e,h,q,n,r){return f([k,l],{baseClass:"jimu-widget-RelatedTableCharts-setting",
templateString:e,selectRouteURL:null,agolFlag:!1,serviceFlag:!1,_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],startup:function(){this.inherited(arguments)},postCreate:function(){this._createPolygonChooserArgs();this.own(b(this.cancelButton,"click",p.hitch(this,function(a){this.onCancleClick(a)})));this.own(b(this.okButton,"click",p.hitch(this,this._onOKButtonClicked)))},_getGeometryType:function(a){switch(a){case "esriGeometryPolygon":return"polygon";
case "esriGeometryPolyline":return"polyline";case "esriGeometryPoint":return"point";default:return"*"}},_createPolygonChooserArgs:function(){var a;a=[];var d;a.push(this.geometryType);a=h.createFeaturelayerFilter(a,!1);d=h.createQueryableLayerFilter();a={multiple:!1,createMapResponse:this.map.webMapResponse,showLayerTypes:["FeatureLayer"],filter:h.andCombineFilters([a,d])};a=new h(a);a=new q({layerChooser:a});a.placeAt(this.itemSelectDiv);a.startup();this.own(b(a,"selection-change",p.hitch(this,this._createRelatedTableOptions)))},
_createRelatedTableOptions:function(b){var r=[],e,t;b&&0<b.length?(this.polygonLayer=b[0],this.polygonLayerInfo={url:this.polygonLayer.url,geometryType:this._getGeometryType(this.polygonLayer.geometryType),supportsDistinct:!1},this.polygonLayer.advancedQueryCapabilities&&this.polygonLayer.advancedQueryCapabilities.supportsDistinct&&(this.polygonLayerInfo.supportsDistinct=!0),this.polygonLayer.fields&&(this.polygonLayerInfo.fields=p.clone(this.polygonLayer.fields)),this.polygonLayerInfo.layerId=this.polygonLayer.layerId?
this.polygonLayer.layerId:this.polygonLayer.url.substr(this.polygonLayer.url.lastIndexOf("/")+1,this.polygonLayer.url.length),t=this.polygonLayer.url.substr(0,this.polygonLayer.url.lastIndexOf("/")+1),this.polygonLayerInfo.baseURL=t,this.polygonLayerInfo=p.mixin(this.polygonLayerInfo,this._getLayerDetailsFromMap(t,this.polygonLayerInfo.layerId)),this.relatedTableInfo=[],e=[],g.forEach(this.polygonLayer.relationships,p.hitch(this,function(a){var b=new d;e.push(b);n({url:t+a.relatedTableId,content:{f:"json"},
handleAs:"json"}).then(p.hitch(this,function(a){b.resolve(a)}),p.hitch(this,function(){b.resolve()}))})),c(e).then(p.hitch(this,function(b){var d,c;for(c=0;c<b.length;c++)b[c].fields&&(d=g.some(b[c].fields,p.hitch(this,function(a){return 0<=this._numberFieldTypes.indexOf(a.type)})))&&(d={url:t+b[c].id,baseURL:t,relationShipId:this.polygonLayer.relationships[c].id,layerId:b[c].id,title:this.polygonLayer.relationships[c].name},d.fields=p.clone(b[c].fields),d=p.mixin(d,this._getLayerDetailsFromMap(t,
b[c].id)),d=p.mixin(d,this._getLayerDetailsFromMapTables(t,b[c].id)),d.title&&(this.relatedTableInfo[r.length]=d,r.push({label:this.relatedTableInfo[r.length].title,value:r.length})));0<r.length?(this.relationshipSelect.options.length=0,r[0].selected=!0,this.relationshipSelect.addOption(r),a.remove(this.okButton,"jimu-state-disabled")):this._resetRelatedLayerSelector()}),p.hitch(this,function(){this._resetRelatedLayerSelector()}))):this._resetRelatedLayerSelector()},_resetRelatedLayerSelector:function(){this.relationshipSelect.value=
"";this.relationshipSelect.options.length=0;this.relationshipSelect.addOption({value:"",label:"",selected:!0});a.add(this.okButton,"jimu-state-disabled")},_getLayerDetailsFromMap:function(a,b){var d={};this.map&&this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.operationalLayers&&g.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,p.hitch(this,function(c){c.layerObject&&("ArcGISMapServiceLayer"===
c.layerType||"ArcGISTiledMapServiceLayer"===c.layerType?a.substring(0,a.length-1)===c.url&&(g.forEach(c.resourceInfo.layers,p.hitch(this,function(a){a.id===parseInt(b,10)&&(d.title=a.name)})),g.forEach(c.layers,p.hitch(this,function(a){a.id===parseInt(b,10)&&(a.name&&(d.title=a.name),d.popupInfo=a.popupInfo,a.layerDefinition&&a.layerDefinition.definitionExpression&&(d.definitionExpression=a.layerDefinition.definitionExpression))}))):c.url.replace(/.*?:\/\//g,"")===(a+b).replace(/.*?:\/\//g,"")&&(d.title=
c.title,d.popupInfo=c.popupInfo,c.layerDefinition&&c.layerDefinition.definitionExpression&&(d.definitionExpression=c.layerDefinition.definitionExpression)))}));return d},_getLayerDetailsFromMapTables:function(a,b){var d={};this.map&&this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.tables&&g.forEach(this.map.webMapResponse.itemInfo.itemData.tables,p.hitch(this,function(c){c.url.replace(/.*?:\/\//g,"")===
(a+b).replace(/.*?:\/\//g,"")&&(d.title=c.title,d.popupInfo=c.popupInfo,c.layerDefinition&&c.layerDefinition.definitionExpression&&(d.definitionExpression=c.layerDefinition.definitionExpression))}));return d},_onOKButtonClicked:function(){var b;if(!a.contains(this.okButton,"jimu-state-disabled"))if(this.polygonLayerInfo){if(""===this.relationshipSelect.value)return this._errorMessage(this.nls.layerChooser.errorInSelectingRelatedLayer),!1;b={polygonLayerInfo:this.polygonLayerInfo,relatedLayerInfo:this.relatedTableInfo[this.relationshipSelect.value]};
this.onOkClick(b)}else return this._errorMessage(this.nls.layerChooser.errorInSelectingPolygonLayer),!1},_errorMessage:function(a){(new r({message:a})).message=a},onOkClick:function(a){return a},onCancleClick:function(a){return a}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A){var B=l([p,g,c,k],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);n.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new A({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=q.hitch(this,this.basicFilter);this.filter=B.andCombineFilters([this.basicFilter,
this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var c=new b;this.onlyShowVisible?c.resolve(a.isShowInMap()):c.resolve(!0);return c},filter:function(a){a=new b;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return r.map(a,q.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),b=[];r.forEach(a,q.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),
b.push(a))}));return b},getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;v.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(q.hitch(this,function(a){this.layerInfosObj=a;this.own(f(this.layerInfosObj,"layerInfosChanged",q.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(f(this.layerInfosObj,"layerInfosIsShowInMapChanged",
q.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();n.setStyle(this.errorTipSection,"display","block");var b=[];this.onlyShowWebMapLayers?(b=a.getLayerInfoArrayOfWebmap(),b=b.concat(a.getTableInfoArrayOfWebmap())):(b=a.getLayerInfoArray(),
b=b.concat(a.getTableInfoArray()));0!==b.length&&(n.setStyle(this.errorTipSection,"display","none"),r.forEach(b,q.hitch(this,function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(q.hitch(this,function(){this._addItem("root",a)}),q.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});r.forEach(a,q.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,b){var c=null,
d=b.getLayerType(),e=this.filter(b);h({layerType:d,valid:e}).then(q.hitch(this,function(d){if(d.valid){var e=q.hitch(this,function(r,e){this._id++;c={name:b.title||"",parent:a,layerInfo:b,type:d.layerType,layerClass:b.layerObject.declaredClass,id:this._id.toString(),isLeaf:r,hasChildren:e};this._store.add(c)}),t=b.getSubLayers(),m=0===t.length;m?e(m,!1):(t=r.map(t,q.hitch(this,function(a){return this.filter(a)})),h(t).then(q.hitch(this,function(a){(a=r.some(a,function(a){return a}))&&e(m,a)})))}}))},
_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var b=this._getRootItem(),b=new d({data:[b],getChildren:function(a){return this.query({parent:a.id})}});this._store=new a(b);b=new e({store:this._store,query:{id:"root"},mayHaveChildren:q.hitch(this,this._mayHaveChildren)});this.tree=new m({multiple:this.multiple,model:b,showRoot:!1,isLeafItem:q.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:q.hitch(this,function(a,b){"root"!==
a.id&&this._onTreeOpen(a,b)}),onClick:q.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:q.hitch(this,function(a,b){var c=null;if(!a||"root"===a.id)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},r=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(a=this._getIconImageName(a,b))d.backgroundImage="url("+r+"/css/images/"+a+")",c=d;return c}),getTooltip:q.hitch(this,
function(a){return this.displayTooltipForTreeNode?a.layerInfo.title:""})});n.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,b){var c="";"ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type?c=b?"mapserver_open.png":"mapserver_close.png":"GroupLayer"===a.type?c=b?"group_layer2.png":"group_layer1.png":"FeatureLayer"===a.type?(a=t.getTypeByGeometryType(a.layerInfo.layerObject.geometryType),
"point"===a?c="point_layer1.png":"polyline"===a?c="line_layer1.png":"polygon"===a&&(c="polygon_layer1.png")):c="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===a.type?"image_layer.png":b?"mapserver_open.png":"mapserver_close.png";return c},_onTreeOpen:function(a,b){if("root"!==a.id){var c=[];b=[];c=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),b=r.map(c,q.hitch(this,function(a){return a.getLayerObject()})),h(b).then(q.hitch(this,function(){this.domNode&&
(r.forEach(c,q.hitch(this,function(b){this._addItem(a.id,b)})),a.checked=!0,this.shelter.hide())}),q.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,b,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});B.createFilterByLayerType=function(a){q.isArrayLike(a)||(a=[]);return function(c){var d=new b;if(0===a.length)d.resolve(!0);else{var r=[];c.traversal(function(a){r.push(a.getLayerType())});
h(r).then(function(b){for(var c=0;c<b.length;c++)for(var r=0;r<a.length;r++)if(b[c]===a[r]){d.resolve(!0);return}d.resolve(!1)},function(a){console.error(a);d.reject(a)})}return d}};B.createFeaturelayerFilter=function(a,b,c,d){var e=["point","polyline","polygon"];a&&0<a.length?(a=r.filter(a,function(a){return 0<=e.indexOf(a)}),0===a.length&&(a=e)):a=e;return function(e){var m=e.getLayerType();e=e.getLayerObject();return h({layerType:m,layerObject:e}).then(function(e){var m=e.layerType;e=e.layerObject;
if("ArcGISDynamicMapServiceLayer"===m||"ArcGISTiledMapServiceLayer"===m||"GroupLayer"===m||"FeatureCollection"===m)return!0;if("FeatureLayer"===m){var m=t.getTypeByGeometryType(e.geometryType),m=0<=r.indexOf(a,m),h=B._shouldPassStatisticsCheck(d,e);return e.url?(e=t.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),m&&e&&h):b&&m}return"Table"===m?(m=t.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),e=B._shouldPassStatisticsCheck(d,e),c&&m&&e):!1})}};B.createImageServiceLayerFilter=function(a,
b){return function(c){var d=c.getLayerType();c=c.getLayerObject();return h({layerType:d,layerObject:c}).then(function(c){var d=c.layerType,e=c.layerObject;return"ArcGISImageServiceLayer"===d||"ArcGISImageServiceVectorLayer"===d?a?t.isImageServiceSupportQuery(c.layerObject.capabilities)?b?B._shouldPassStatisticsCheck(b,e):!0:!1:!0:!1})}};B._shouldPassStatisticsCheck=function(a,b){return a?(a=!1,a=b.advancedQueryCapabilities?!!b.advancedQueryCapabilities.supportsStatistics:!!b.supportsStatistics):!0};
B.createQueryableLayerFilter=function(a){var b=B.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,a);a=B.createImageServiceLayerFilter(!0,a);return B.orCombineFilters([b,a])};B.andCombineFilters=function(a){return B._combineFilters(a,!0)};B.orCombineFilters=function(a){return B._combineFilters(a,!1)};B._combineFilters=function(a,c){return function(d){var e=new b,m=r.map(a,function(a){return a(d)});h(m).then(function(a){var b=!1,b=c?r.every(a,function(a){return a}):r.some(a,function(a){return a});
e.resolve(b)},function(a){console.error(a);e.reject(a)});return e}};return B})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(f,k,l,p,g,c,d){return l("dijit.tree.ObjectStoreModel",d,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(b){g.mixin(this,b);this.childrenCache={}},getRoot:function(b,a){if(this.root)b(this.root);else{var d=this.store.query(this.query);
d.then&&this.own(d);c(d,g.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];b(this.root);d.observe&&d.observe(g.hitch(this,function(a){this.onChange(a)}),!0)}),a)}},mayHaveChildren:function(){return!0},getChildren:function(b,a,d){var e=this.store.getIdentity(b);if(this.childrenCache[e])c(this.childrenCache[e],a,d);else{var q=this.childrenCache[e]=this.store.getChildren(b);q.then&&this.own(q);
q.observe&&this.own(q.observe(g.hitch(this,function(a,d,e){this.onChange(a);d!=e&&c(q,g.hitch(this,"onChildrenChange",b))}),!0));c(q,a,d)}},isItem:function(){return!0},getIdentity:function(b){return this.store.getIdentity(b)},getLabel:function(b){return b[this.labelAttr]},newItem:function(b,a,c,d){return this.store.put(b,{parent:a,before:d})},pasteItem:function(b,a,c,d,q,n){var e=new p;if(a===c&&!d&&!n)return e.resolve(!0),e;a&&!d?this.getChildren(a,g.hitch(this,function(d){d=[].concat(d);var r=f.indexOf(d,
b);d.splice(r,1);this.onChildrenChange(a,d);e.resolve(this.store.put(b,{overwrite:!0,parent:c,oldParent:a,before:n}))})):e.resolve(this.store.put(b,{overwrite:!0,parent:c,oldParent:a,before:n}));return e},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t){var m=f([r._TreeNode,q],{templateString:p,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=c.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=c.toDom('\x3cinput type\x3d"checkbox" /\x3e');c.addClass(this.checkNode,"jimu-tree-check-node");c.place(this.checkNode,this.contentNode,
"first");this.own(h(this.checkNode,"click",g.hitch(this,this._onClick)));this.isLeaf?this.groupId?c.setStyle(this.checkNode,"display","none"):c.setStyle(this.checkNode,"display","inline"):c.setStyle(this.checkNode,"display","none");this.isLeaf?c.addClass(this.domNode,"jimu-tree-leaf-node"):c.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,c.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=
!1,c.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(g.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;
this.inherited(arguments)}});return f([r,q],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+t.getRandomString()},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree");this.own(e.before(this,"onClick",g.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&c.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},
getAllItems:function(){var a=this.getAllTreeNodeWidgets();return d.map(a,g.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=d.filter(a,g.hitch(this,function(a){return a.checkNode.checked}));return d.map(a,g.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=d.map(b,g.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return d.filter(b,
g.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),c=0;c<b.length;c++){var d=n.byNode(b[c]);if(d.item.id.toString()===a.toString())return d}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return d.filter(a,g.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return d.map(a,g.hitch(this,function(a){return n.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return a(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new m(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",
{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,b,d){b.isLeaf&&(c.hasClass(d.target||d.srcElement,"jimu-tree-check-node")||(this.multiple?b.toggleSelect():this.selectNodeWidget(b)));return arguments},_onCheckNodeClick:function(a,c,d){!this.multiple&&c&&this.unselectAllLeafNodeWidgets();b.stop(d);this.focusNode(a);setTimeout(g.hitch(this,function(){c?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,
a,d)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();d.forEach(a,g.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A,B,J,u,Q,L,O,I,D,w,x,S,F,E,G,M,y,N){function z(a){return m.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var C=p("dijit._TreeNode",[I,D,w,x,S],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);n("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:E,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";e.set(this.domNode,
"backgroundPosition",b+" 0px");e.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);f.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,c,d){var r="_"+c+"Class";c+="Node";var m=this[r];this[r]=this.tree["get"+d+"Class"](a,this.isExpanded);b.replace(this[c],this[r]||"",m||"");e.set(this[c],this.tree["get"+d+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;b.toggle(this.domNode,"dijitTreeIsRoot",a);b.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var c=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;b.replace(this.expandoNode,c[a],c);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return z(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");b.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=q.wipeIn({node:this.containerNode,duration:O.defaultDuration}),c=this._expandDeferred=new g(function(){a.stop()});k.after(a,"onEnd",function(){c.resolve(!0)},!0);a.play();return z(c)},collapse:function(){if(this._collapseDeferred)return z(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");b.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=q.wipeOut({node:this.containerNode,duration:O.defaultDuration}),c=this._collapseDeferred=new g(function(){a.stop()});k.after(a,"onEnd",
function(){c.resolve(!0)},!0);a.play();return z(c)},indent:0,setChildItems:function(a){var b=this.tree,e=b.model,r=[],m=b.focusedChild,t=this.getChildren();f.forEach(t,function(a){w.prototype.removeChild.call(this,a)},this);this.defer(function(){f.forEach(t,function(a){if(!a._destroyed&&!a.getParent()){var c=function(a){var d=e.getIdentity(a.item),r=b._itemNodesMap[d];1==r.length?delete b._itemNodesMap[d]:(d=f.indexOf(r,a),-1!=d&&r.splice(d,1));f.forEach(a.getChildren(),c)};b.dndController.removeTreeNode(a);
c(a);if(b.persist){var r=f.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),t;for(t in b._openedNodes)t.substr(0,r.length)==r&&delete b._openedNodes[t];b._saveExpandedNodes()}b.lastFocusedChild&&!d.isDescendant(b.lastFocusedChild.domNode,b.domNode)&&delete b.lastFocusedChild;m&&!d.isDescendant(m.domNode,b.domNode)&&b.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,f.forEach(a,function(a){var c=e.getIdentity(a),d=b._itemNodesMap[c],
m;if(d)for(var t=0;t<d.length;t++)if(d[t]&&!d[t].getParent()){m=d[t];m.set("indent",this.indent+1);break}m||(m=this.tree._createTreeNode({item:a,tree:b,isExpandable:e.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),d?d.push(m):b._itemNodesMap[c]=[m]);this.addChild(m);(this.tree.autoExpand||this.tree._state(m))&&r.push(b._expandNode(m))},this),f.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=c(r);this.tree._startPaint(a);return z(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());f.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");b.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){Q.focus(this.focusNode)}});n("dojo-bidi")&&C.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),f.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this))}});var P=p("dijit.Tree",[I,F,D,S],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:G,persist:!1,autoExpand:!1,dndController:N,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){A.publish(this.id,m.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new g;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(v(this.containerNode,
v.selector(".dijitTreeNode",B.enter),function(b){a._onNodeMouseEnter(L.byNode(this),b)}),v(this.containerNode,v.selector(".dijitTreeNode",B.leave),function(b){a._onNodeMouseLeave(L.byNode(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow",u.press),function(b){a._onNodePress(L.getEnclosingWidget(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow",u),function(b){a._onClick(L.getEnclosingWidget(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(L.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(k.after(this.model,"onChange",m.hitch(this,"_onItemChange"),!0),k.after(this.model,"onChildrenChange",m.hitch(this,"_onItemChildrenChange"),!0),k.after(this.model,"onDelete",m.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){m.isString(this.dndController)&&(this.dndController=m.getObject(this.dndController));for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=z(this.pendingCommandsPromise);this.onLoadDeferred.then(m.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;r.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=m.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=m.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)}));this.model=new y(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(m.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(m.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),m.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=m.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(m.hitch(this,function(){var c=
f.map(a,function(a){return!a||m.isString(a)?a:b.model.getIdentity(a)}),d=[];f.forEach(c,function(a){d=d.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?z(this.set("paths",[a]).then(function(a){return a[0]})):z(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,c){var e=a.shift(),r=f.filter(c,function(a){return a.getIdentity()==e})[0];if(r)return a.length?d._expandNode(r).then(function(){return b(a,
r.getChildren())}):r;throw new P.PathError("Could not expand path at "+e);}var d=this;return z(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return c(f.map(a,function(a){a=f.map(a,function(a){return a&&m.isObject(a)?d.model.getIdentity(a):a});if(a.length)return b(a,[d.rootNode]);throw new P.PathError("Empty path");}))}).then(function(a){d.set("selectedNodes",a);return d.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(d){return b._expandNode(d).then(function(){var b=f.filter(d.getChildren()||[],function(a){return a.isExpandable});return c(f.map(b,a))})}var b=this;return z(a(this.rootNode))},collapseAll:function(){function a(d){var e=f.filter(d.getChildren()||[],function(a){return a.isExpandable}),e=c(f.map(e,a));return!d.isExpanded||d==b.rootNode&&!b.showRoot?e:e.then(function(){return b._collapseNode(d)})}var b=this;return z(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){(a=this._getNext(b))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a,b){if(a=b.getPreviousSibling())for(b=a;b.isExpandable&&b.isExpanded&&
b.hasChildren();)b=b.getChildren(),b=b[b.length-1];else if(a=b.getParent(),this.showRoot||a!==this.rootNode)b=a;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){b.isExpandable&&b.isExpanded?this._collapseNode(b):(a=b.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},focusLastChild:function(){var a=this._getLast();
a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,b){return d.isDescendant(a,
b.expandoNode)||d.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,c,d){var e=this.isExpandoNode(b.target,a);a.isExpandable&&(c||e)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[d](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=
a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){r.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){r.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&
delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,c=a.item,d=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new g,b.getChildren(c,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(d,": error loading "+a.label+" children: ",
b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(m.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var c=this.getLabel(a),d=this.getTooltip(a);f.forEach(b,function(b){b.set({item:a,
label:c,tooltip:d});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){a=this.model.getIdentity(a);(a=this._itemNodesMap[a])&&f.forEach(a,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(f.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!d.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&
!d.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=l(this.cookieName);a&&f.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var c=f.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=
!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);l(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!m.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},
resize:function(b){b&&a.setMarginBox(this.domNode,b);this._nodePixelIndent=a.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(m.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=m.hitch(this,function(){this._outstandingPaintOperations--;
0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});J(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new C(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):
this.focusFirstChild()}});n("dojo-bidi")&&P.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});P.PathError=h("TreePathError");P._TreeNode=C;return P})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(f,k,l,p){return l("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,
constructor:function(g){p.mixin(this,g);this.connects=[];g=this.store;if(!g.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");g.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([k.after(g,"onNew",p.hitch(this,"onNewItem"),!0),k.after(g,"onDelete",p.hitch(this,"onDeleteItem"),!0),k.after(g,"onSet",p.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var g;g=this.connects.pop();)g.remove()},getRoot:function(g,
c){this.root?g(this.root):this.store.fetch({query:this.query,onComplete:p.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];g(this.root)}),onError:c})},mayHaveChildren:function(g){return f.some(this.childrenAttrs,function(c){return this.store.hasAttribute(g,c)},this)},getChildren:function(g,c,d){var b=this.store;if(b.isItemLoaded(g)){for(var a=[],e=0;e<this.childrenAttrs.length;e++)var h=
b.getValues(g,this.childrenAttrs[e]),a=a.concat(h);var q=0;this.deferItemLoadingUntilExpand||f.forEach(a,function(a){b.isItemLoaded(a)||q++});0==q?c(a):f.forEach(a,function(e,t){b.isItemLoaded(e)||b.loadItem({item:e,onItem:function(b){a[t]=b;0==--q&&c(a)},onError:d})})}else{var n=p.hitch(this,arguments.callee);b.loadItem({item:g,onItem:function(a){n(a,c,d)},onError:d})}},isItem:function(g){return this.store.isItem(g)},fetchItemByIdentity:function(g){this.store.fetchItemByIdentity(g)},getIdentity:function(g){return this.store.getIdentity(g)},
getLabel:function(g){return this.labelAttr?this.store.getValue(g,this.labelAttr):this.store.getLabel(g)},newItem:function(g,c,d){var b={parent:c,attribute:this.childrenAttrs[0]},a;this.newItemIdAttr&&g[this.newItemIdAttr]?this.fetchItemByIdentity({identity:g[this.newItemIdAttr],scope:this,onItem:function(e){e?this.pasteItem(e,null,c,!0,d):(a=this.store.newItem(g,b))&&void 0!=d&&this.pasteItem(a,c,c,!1,d)}}):(a=this.store.newItem(g,b))&&void 0!=d&&this.pasteItem(a,c,c,!1,d)},pasteItem:function(g,c,
d,b,a){var e=this.store,h=this.childrenAttrs[0];c&&f.forEach(this.childrenAttrs,function(a){if(e.containsValue(c,a,g)){if(!b){var d=f.filter(e.getValues(c,a),function(a){return a!=g});e.setValues(c,a,d)}h=a}});if(d)if("number"==typeof a){var q=e.getValues(d,h).slice();q.splice(a,0,g);e.setValues(d,h,q)}else e.setValues(d,h,e.getValues(d,h).concat(g))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(g,c){c&&this.getChildren(c.item,p.hitch(this,function(d){this.onChildrenChange(c.item,
d)}))},onDeleteItem:function(g){this.onDelete(g)},onSetItem:function(g,c){if(-1!=f.indexOf(this.childrenAttrs,c))this.getChildren(g,p.hitch(this,function(c){this.onChildrenChange(g,c)}));else this.onChange(g)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(f,k,l,p,g){return k("dijit.tree.ForestStoreModel",g,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(c){this.root=
{store:this,root:!0,id:c.rootId,label:c.rootLabel,children:c.rootChildren}},mayHaveChildren:function(c){return c===this.root||this.inherited(arguments)},getChildren:function(c,d,b){c===this.root?this.root.children?d(this.root.children):this.store.fetch({query:this.query,onComplete:p.hitch(this,function(a){this.root.children=a;d(a)}),onError:b}):this.inherited(arguments)},isItem:function(c){return c===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(c){if(c.identity==this.root.id){var d=
c.scope||l.global;c.onItem&&c.onItem.call(d,this.root)}else this.inherited(arguments)},getIdentity:function(c){return c===this.root?this.root.id:this.inherited(arguments)},getLabel:function(c){return c===this.root?this.root.label:this.inherited(arguments)},newItem:function(c,d,b){return d===this.root?(this.onNewRootItem(c),this.store.newItem(c)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(c,d,b,a,e){if(d===this.root&&!a)this.onLeaveRoot(c);this.inherited(arguments,[c,
d===this.root?null:d,b===this.root?null:b,a,e]);if(b===this.root)this.onAddToRoot(c)},onAddToRoot:function(c){console.log(this,": item ",c," added to root")},onLeaveRoot:function(c){console.log(this,": item ",c," removed from root")},_requeryTop:function(){var c=this.root.children||[];this.store.fetch({query:this.query,onComplete:p.hitch(this,function(d){this.root.children=d;if(c.length!=d.length||f.some(c,function(b,a){return d[a]!=b}))this.onChildrenChange(this.root,d)})})},onNewItem:function(c,
d){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(c){-1!=f.indexOf(this.root.children,c)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(c,d,b,a){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(f,k,l,p,g,c,d,b,a,e,h){return k("dijit.tree._dndSelector",
h,{constructor:function(){this.selection={};this.anchor=null;this.events.push(b(this.tree.domNode,a.press,p.hitch(this,"onMouseDown")),b(this.tree.domNode,a.release,p.hitch(this,"onMouseUp")),b(this.tree.domNode,a.move,p.hitch(this,"onMouseMove")),b(this.tree.domNode,e.press,p.hitch(this,"onClickPress")),b(this.tree.domNode,e.release,p.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,c;for(c in b)a.push(b[c]);return a},selectNone:function(){this.setSelection([]);
return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(a){var b=f.filter(this.getSelectedTreeNodes(),function(b){return!c.isDescendant(b.domNode,a.domNode)});this.setSelection(b);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=this.getSelectedTreeNodes();f.forEach(this._setDifference(b,
a),p.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));f.forEach(this._setDifference(a,b),p.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){f.forEach(b,function(a){a.__exclude__=!0});a=f.filter(a,function(a){return!a.__exclude__});f.forEach(b,function(a){delete a.__exclude__});return a},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=
[],c=[];f.forEach(a,function(a){var d=a.getTreePath();c.push(a);b.push(d)},this);a=f.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,this.current))){"mousedown"==a.type&&d.isLeft(a)&&a.preventDefault();
var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var c=g.getCopyKeyState(a),e=b.id;this.singular||a.shiftKey||!this.selection[e]?(this._doDeselect=!1,this.userSelect(b,c,a.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,g.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,
b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);a=doc.createRange();a.setStartBefore(b);return c.compareBoundaryPoints(c.END_TO_END,a)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,b,c){if(this.singular)this.anchor==
a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);c=this.anchor;0>b?b=c:(b=a,a=c);for(c=[];b!=a;)c.push(b),b=this.tree._getNext(b);c.push(a);this.setSelection(c)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,b){b=b||l.global;for(var c in this.selection)a.call(b,
this.getItem(c),c,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(f,k,l,p,g,c){return k("dijit.tree._dndContainer",null,{constructor:function(d,b){this.tree=d;this.node=d.domNode;p.mixin(this,b);this.containerState="";l.add(this.node,"dojoDndContainer");this.events=[g(this.node,c.enter,p.hitch(this,"onOverEvent")),g(this.node,c.leave,p.hitch(this,"onOutEvent")),f.after(this.tree,"_onNodeMouseEnter",
p.hitch(this,"onMouseOver"),!0),f.after(this.tree,"_onNodeMouseLeave",p.hitch(this,"onMouseOut"),!0),g(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,b){var a="dojoDnd"+c;c=c.toLowerCase()+"State";l.replace(this.node,a+b,a+this[c]);this[c]=b},_addItemClass:function(c,b){l.add(c,"dojoDndItem"+
b)},_removeItemClass:function(c,b){l.remove(c,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),function(f,k,l,
p,g,c,d,b,a,e,h){return f([b,a,g],{templateString:e,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,postCreate:function(){this.inherited(arguments);this.layerInfosObj=h.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(p(this.layerChooser,
"tree-click",k.hitch(this,this._onTreeClick)));this.own(p(this.layerChooser,"update",k.hitch(this,this._onLayerChooserUpdate)));this.own(p(document.body,"click",k.hitch(this,this._onBodyClicked)))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(a){var b=new c;if(a){var d=this.layerInfosObj.getLayerInfoById(a.id);d?this.layerChooser.filter(d).then(k.hitch(this,
function(c){c?(this._onSelectNewItem({layerInfo:d,name:d.title,url:a.url}),b.resolve(!0)):b.resolve(!1)}),k.hitch(this,function(){b.resolve(!1)})):b.resolve(!1)}else this._onSelectNewItem(null),b.resolve(!0);return b},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(a){a=a.target||a.srcElement;a===this.domNode||l.isDescendant(a,this.domNode)||a===this.layerChooser.domNode||l.isDescendant(a,this.layerChooser.domNode)||
this.hideLayerChooser()},_onDropDownClick:function(a){a.stopPropagation();a.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():this.showLayerChooser()},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";d.open({parent:this,popup:this.layerChooser,around:this.domNode});var a=this.layerChooser.domNode.parentNode;a&&l.addClass(a,"jimu-layer-chooser-from-map-withdropbox-popup");
this._isLayerChooserShow=!0},hideLayerChooser:function(){d.close(this.layerChooser);this._isLayerChooserShow=!1},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(a){var b=k.getObject("layerInfo.id",!1,this._selectedItem)||-1,c=k.getObject("layerInfo.id",!1,a)||-1,b=b!==c;this._selectedItem=a;this.hideLayerChooser();a=k.getObject("layerInfo.title",
!1,this._selectedItem)||"";this.layerNameNode.innerHTML=a;l.setAttr(this.layerNameNode,"title",a);a=k.getObject("layerInfo.layerObject",!1,this._selectedItem);b&&this.emit("selection-change",[a])},_onTreeClick:function(){var a=this._getSelectedItems();this._onSelectNewItem(0<a.length?a[0]:null)}})})},"widgets/RelatedTableCharts/setting/ChartSetting":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/on dojo/Evented dojo/text!./ChartSetting.html jimu/dijit/TabContainer3 ./ChartThemeSelector ./FieldSelector jimu/dijit/ColorPicker dojo/dom-class dojo/query dojo/_base/Color dojo/_base/array esri/tasks/query esri/tasks/QueryTask dojo/dom-style jimu/dijit/Message ../ChartLayout dijit/popup dojox/charting/themes/GreySkies jimu/dijit/SimpleTable jimu/utils jimu/dijit/Popup dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/CheckBox jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A,B,J,u,Q,L,O,I,D,w,x){return c([f,k,l,a],{baseClass:"jimu-widget-RelatedTableCharts-setting",templateString:e,_widgets:[],_stringFieldType:"esriFieldTypeString",_oidFieldType:"esriFieldTypeOID",_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],tr:null,layerDetails:null,config:{},_chartColorType:{singleColor:"SingleColor",byThemeColor:"ColorByTheme",byFieldValue:"ColorByFieldValue"},selectedNode:null,
fieldColorPicker:null,defaultColor:"#000000",_editor:null,_displayFieldsTable:null,constructor:function(){this._widgets=[]},startup:function(){this.inherited(arguments)},postCreate:function(){this._createColorByFieldTable();this._initSelf();this._initChartDescInput()},destroy:function(){this.tr=null;delete this.tr;A.forEach(this._widgets,function(a){a.destroy()});this._widgets=[];this.inherited(arguments)},getConfig:function(a){var b={sectionTitle:"",chartTitle:"",description:"",chartType:"",dataSeriesField:"",
labelField:"",chartColor:{},labelXAxis:"",labelYAxis:""};if(a&&""===this.sectionTitleTextBox.get("value"))return this._errorMessage(this.nls.errMsgSectionTitle),!1;b.sectionTitle=this.sectionTitleTextBox.get("value");b.chartTitle=this.chartTitleTextBox.get("value");b.description=this.chartDescriptionInput.value;b.chartType=this._getChartType();if(a&&this.rdoColorByFieldValue.checked&&"esriCTEmptyOption"===this.ColorByFieldValueDropdown.value)return this._errorMessage(this.nls.errMsgFieldByValue),
!1;b.chartColor=d.clone(this._getChartColorConfig());if("PolarChart"!==b.chartType)b.dataSeriesField=this.dataSeriesFieldDropdown.get("value"),b.labelField=this.labelSeriesFieldDropdown.get("value"),b.labelXAxis=this.xAxisTextBox.get("value"),b.labelYAxis=this.yAxisTextBox.get("value");else{var c={},e,r=0,m;m=this._displayFieldsTable.getData();b.polarChartConfig={};for(e=0;e<m.length;e++)a={},m[e].isVisible&&(a.fieldName=m[e].fieldName,a.alias=m[e].alias,a.isVisible=m[e].isVisible,c[m[e].fieldName]=
a,r++);if(3>r)return this._errorMessage(this.nls.errMsgPolarFieldsRequired),!1;b.showPolygonFill=this.polarChartFillColor.getValue();b.polarChartConfig=c}return b},setConfig:function(a){if(a){a.sectionTitle&&""!==a.sectionTitle?this.sectionTitleTextBox.set("value",a.sectionTitle):this.sectionTitleTextBox.set("value",this.layerDetails.polygonLayerInfo.title);a.chartTitle&&this.chartTitleTextBox.set("value",a.chartTitle);if(a.description){var b;b=a.description.replace(/&quot;/g,"");this.chartDescriptionInput.value=
w.stripHTML(b)}a.chartType?this._setChartType(a.chartType):this._setChartType("BarChart");a.dataSeriesField&&this.dataSeriesFieldDropdown.set("value",a.dataSeriesField);a.labelField&&this.labelSeriesFieldDropdown.set("value",a.labelField);a.chartColor&&this._setChartColorType(a.chartColor,a.chartType);this.polarChartFillColor.setValue(a.showPolygonFill);a.labelXAxis&&this.xAxisTextBox.set("value",a.labelXAxis);a.labelYAxis&&this.yAxisTextBox.set("value",a.labelYAxis);this._onChartTypeChanged()}else this.sectionTitleTextBox.set("value",
this.layerDetails.polygonLayerInfo.title)},_createColorByFieldTable:function(){this.colorByFieldTable=new D({fields:[{name:this.nls.fieldColorColor,title:this.nls.fieldColorColor,"class":"label",type:"empty",width:"60px"},{name:this.nls.fieldColorLabel,title:this.nls.fieldColorLabel,"class":"label",type:"empty"}]},this.colorByFieldTablePanel);this.colorByFieldTable.startup()},_errorMessage:function(a){(new Q({message:a})).message=a},_getChartType:function(){var a;this.rdoBarChart.get("checked")?a=
"BarChart":this.rdoPieChart.get("checked")?a="PieChart":this.rdoPolarChart.get("checked")&&(a="PolarChart");return a},_setChartType:function(a){"BarChart"===a?this.rdoBarChart.set("checked",!0):"PieChart"===a?this.rdoPieChart.set("checked",!0):this.rdoPolarChart.set("checked",!0)},_initSelf:function(){this.colorPicker.setColor(new v(this.defaultColor));this._initFieldSelectors();this._createRelatedLayerFieldOptions(this.dataSeriesFieldDropdown,!1,this._numberFieldTypes);this._createRelatedLayerFieldOptions(this.labelSeriesFieldDropdown,
!0,null);this._createFieldColorPicker();this.chartThemeSelector||(this.chartThemeSelector=this._createThemeSelector(this.themeSelectorDiv));b(this.colorPicker,"click",d.hitch(this,function(){this.rdoSingleColor.set("checked",!0)}));b(this.themeSelectorDiv,"click",d.hitch(this,function(){this.rdoColorByTheme.set("checked",!0)}));b(this.ColorByFieldValueDropdown,"click",d.hitch(this,function(){this.rdoColorByFieldValue.set("checked",!0)}));this.layerDetails.polygonLayerInfo.supportsDistinct&&(t.remove(this.colorByFieldContainer,
"esriCTHidden"),this._createColorByFieldSelector());this._createPolarChartFieldsGrid()},_createPolarChartFieldsGrid:function(){this._displayFieldsTable=new D({fields:[{name:"isVisible",title:this.nls.visibilityText,type:"checkbox","class":"update",width:"100px"},{name:"fieldName",title:this.nls.fieldNameText,type:"text",width:"230px"},{name:"alias",title:this.nls.aliasNameText,type:"text",editable:"true",width:"230px"}],selectable:!1});this._displayFieldsTable.placeAt(this.polarChartFieldInfos);this._displayFieldsTable.startup();
this._createFieldsRows()},_createFieldsRows:function(){var a,b,c,d="",e="";a=this.layerDetails.relatedLayerInfo.fields;b=this.config&&this.config.polarChartConfig;for(c=0;c<a.length;c++)-1!==this._numberFieldTypes.indexOf(a[c].type)&&(b&&b.hasOwnProperty(a[c].name)?(d=b[a[c].name].isVisible,e=b[a[c].name].alias):(d=a[c].isVisible,e=a[c].alias),this._displayFieldsTable.addRow({isVisible:""===d?!1:d,fieldName:a[c].name,alias:""===e?a[c].name:e}))},_createFieldColorPicker:function(){this.fieldColorPicker=
new r;this.fieldColorPicker.startup();b(this.fieldColorPicker.tooltipDialog,"close",d.hitch(this,function(){var a;t.contains(this.selectedNode.parentElement.parentElement,"jimu-state-active")&&(a=m(".jimu-state-active",this.colorByFieldTableContainer),0<a.length&&a.removeClass("jimu-state-active"))}));b(this.fieldColorPicker,"change",d.hitch(this,function(){var a,b=this.fieldColorPicker.color.toHex();a=m(".jimu-state-active .fieldColorPicker",this.colorByFieldTableContainer);0<a.length?t.contains(this.selectedNode.parentElement.parentElement,
"jimu-state-active")?A.forEach(a,d.hitch(this,function(a){u.set(a,"backgroundColor",b);p.set(a.parentElement.parentElement,"field_Color",b)})):(u.set(this.selectedNode,"backgroundColor",b),p.set(this.selectedNode.parentElement.parentElement,"field_Color",b)):(u.set(this.selectedNode,"backgroundColor",b),p.set(this.selectedNode.parentElement.parentElement,"field_Color",b))}))},_onChartColorChanged:function(){this.rdoColorByFieldValue.get("checked")?("esriCTEmptyOption"!==this.ColorByFieldValueDropdown.value&&
t.remove(this.colorByFieldTableContainer,"esriCTHidden"),this.polarChartFillColor.setStatus(!0)):(this.rdoColorByTheme.get("checked")?(this.polarChartFillColor.check(),this.polarChartFillColor.setStatus(!1)):this.polarChartFillColor.setStatus(!0),t.add(this.colorByFieldTableContainer,"esriCTHidden"))},_setChartColorType:function(a){a&&a.colorType&&(this.rdoSingleColor.set("checked",!1),a.colorType===this._chartColorType.singleColor?(this.rdoSingleColor.set("checked",!0),this.colorPicker.setColor(new v(a.colorInfo))):
a.colorType===this._chartColorType.byThemeColor?(this.rdoColorByTheme.set("checked",!0),this.config.chartColor&&this.config.chartColor.colorType===this._chartColorType.byThemeColor&&this.chartThemeSelector&&setTimeout(d.hitch(this,function(){this.chartThemeSelector.selectTheme(a.colorInfo)}),500)):a.colorType===this._chartColorType.byFieldValue&&(this.rdoColorByFieldValue.set("checked",!0),this.ColorByFieldValueDropdown.set("value",a.colorInfo.layerField),t.remove(this.colorByFieldTableContainer,
"esriCTHidden")))},_initTabs:function(){var a,c;a={title:this.nls.settingTabTitle,content:this.settingsTabNode};c={title:this.nls.layoutTabTitle,content:this.layoutTabNode};this.tab=new h({tabs:[a,c]});this.tab.placeAt(this.tabDiv);this.own(b(this.tab,"tabChanged",d.hitch(this,function(a){a===c.title&&this._updatePreview()})))},_updatePreview:function(){var a;a={chartConfig:this.getConfig(),isPreview:!0};a.chartConfig&&("esriCTEmptyOption"===a.chartConfig.labelField&&(a.chartConfig.labelField=" "),
a.chartData=this._createStaticDataForLayout(a.chartConfig.chartType,a.chartConfig.labelField,a.chartConfig.dataSeriesField),a=new L({config:a}),a.startup(),new x({titleLabel:this.nls.viewLayoutLabel,width:800,height:450,content:a}))},_createStaticDataForLayout:function(a,b,c){var d={chartSeries:[],chartLabels:[],selectedTheme:I};switch(a){case "BarChart":d.chartSeries=[{y:65},{y:35},{y:40},{y:55},{y:50}];d.chartLabels=[{value:1,y:65,text:""},{value:2,y:35,text:""},{value:3,y:40,text:""},{value:4,
y:55,text:""},{value:5,y:50,text:""}];d.fill="#7989a0";break;case "PieChart":d.chartSeries=[{y:65,text:"{"+c+" %}"},{y:35,text:"{"+b+"}"}];d.chartLabels=[{value:1,y:65},{value:2,y:35}];break;case "PolarChart":var e=this._displayFieldsTable.getData(),r;d.chartSeries=[];for(b=0;5>b;b++){c={};r={};for(a=0;a<e.length;a++)e[a].isVisible&&(c[e[a].alias]=20);r[b]={data:c};d.chartSeries.push(r)}}return d},_initFieldSelectors:function(){this._createFieldSelector(this.titleFieldSelectorDiv,this.chartTitleTextBox,
this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.descriptionFieldSelectorDiv,this.chartDescriptionInput,this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.xAxisFieldSelectorDiv,this.xAxisTextBox,this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.yAxisFieldSelectorDiv,this.yAxisTextBox,this.layerDetails.polygonLayerInfo.fields)},_createFieldSelector:function(a,b,c){a=new n({fields:c,showOnlyNumericFields:!1,hideOnSelect:!0},g.create("div",
{},a));a.onSelect=d.hitch(this,function(a){a=p.get(b,"value")+"{"+a.name+"}";b.set?b.set("value",a):p.set(b,"value",a)});this._widgets.push(a);return a},_createThemeSelector:function(a){a=new q({nls:this.nls},g.create("div",{},a));this._widgets.push(a);a.startup();return a},_onSectionTitleChanged:function(){this.emit("sectionTitleChanged",this.sectionTitleTextBox.get("value"))},showMainLoadingIndicator:function(){this.emit("showLoadingIndicator")},hideMainLoadingIndicator:function(){this.emit("hideLoadingIndicator")},
_onChartTypeChanged:function(){this.rdoPolarChart.get("checked")?(t.add(this.labelSection,"esriCTHidden"),t.add(this.axisSection,"esriCTHidden"),t.remove(this.polarChartSection,"esriCTHidden")):(t.remove(this.labelSection,"esriCTHidden"),t.add(this.polarChartSection,"esriCTHidden"),this.rdoPieChart.get("checked")?t.add(this.axisSection,"esriCTHidden"):t.remove(this.axisSection,"esriCTHidden"))},_createRelatedLayerFieldOptions:function(a,b,c){var d={},e,r;if((e=this.layerDetails.relatedLayerInfo.fields)&&
0<e.length)for(b&&a.addOption({value:"esriCTEmptyOption",label:this.nls.defaultFieldSelectLabel,selected:!0}),r=0;r<e.length;r++)d=!0,c&&0>c.indexOf(e[r].type)&&(d=!1),d&&(d={value:e[r].name,label:e[r].name,selected:!1},0!==r||b||(d.selected=!0),a.addOption(d))},_createColorByFieldSelector:function(){this._createRelatedLayerFieldOptions(this.ColorByFieldValueDropdown,!0);b(this.ColorByFieldValueDropdown,"change",d.hitch(this,function(a){this.showMainLoadingIndicator();"esriCTEmptyOption"===a?(this._removeTableRows(),
t.add(this.colorByFieldTableContainer,"esriCTHidden"),this.hideMainLoadingIndicator()):this._getDistintValueForLayerField(a)}))},_getDistintValueForLayerField:function(a){var b,c;this._selectedUniqueValues=[];b=new J(this.layerDetails.relatedLayerInfo.url);c=new B;c.where="1\x3d1";c.returnDistinctValues=!0;c.returnGeometry=!1;c.outFields=[a];b.execute(c,d.hitch(this,function(b){A.forEach(b.features,d.hitch(this,function(b){this._selectedUniqueValues.push(b.attributes[a])}));0<this._selectedUniqueValues.length&&
b.fields&&0<b.fields.length&&b.fields[0].type?(b=d.clone(b.fields[0]),1<this._selectedUniqueValues.length&&this._sortUniqueValueData(b.type),this._createTableRows(b)):(this._errorMessage(this.nls.errMsgFieldValuesNotFound),this.hideMainLoadingIndicator())}),d.hitch(this,function(){this._errorMessage(this.nls.errMsgFieldValuesNotFound);this.hideMainLoadingIndicator()}))},_removeTableRows:function(){var a,b;if((a=this.colorByFieldTable.getRows())&&0<a.length)for(b=0;b<a.length;b++)this.colorByFieldTable.deleteRow(a[b])},
_createTableRows:function(a){var c,e;this._removeTableRows();t.remove(this.colorByFieldTableContainer,"esriCTHidden");A.forEach(this._selectedUniqueValues,d.hitch(this,function(r){var t,h;t=this.colorByFieldTable.addRow({});h=r;t.success&&t.tr&&("esriFieldTypeDate"===a.type&&(h=this._getLocaleFormatedDate(r)),c=t.tr,e=m(".simple-table-cell",c),this._createColorPicker(c,r,e[0]),this._createLabelFields(h,e[1]));c&&b(c,"click",d.hitch(this,function(a){this._toggleRowSelection(a.currentTarget)}))}));
this.hideMainLoadingIndicator()},_toggleRowSelection:function(a){t.contains(a,"jimu-state-active")?t.remove(a,"jimu-state-active"):t.add(a,"jimu-state-active")},_createLabelFields:function(a,b){g.create("label",{innerHTML:a,title:a},b)},_createColorPicker:function(a,c,e){var r;e=g.create("div",{"class":"fieldColorPicker"},e);r=this.config&&this.config.chartColor&&this.config.chartColor.colorInfo&&this.config.chartColor.colorInfo.layerFieldValues&&this.config.chartColor.colorInfo.layerFieldValues[c]?
this.config.chartColor.colorInfo.layerFieldValues[c]:this.defaultColor;u.set(e,"backgroundColor",r);p.set(a,"fieldVal",c);p.set(a,"field_Color",r);b(e,"click",d.hitch(this,function(a){a.stopPropagation();a.preventDefault();this.selectedNode=a.currentTarget;var b=p.get(this.selectedNode.parentElement.parentElement,"field_Color");this.fieldColorPicker.setColor(new v(b));this.fieldColorPicker.picker.setColor((new v(b)).toHex(),!0);O.open({popup:this.fieldColorPicker.tooltipDialog,around:a.currentTarget})}))},
_getColorByFieldValue:function(){var a,b={},c={},d;d=this.colorByFieldTable.getRows();for(a=0;a<d.length;a++)c[p.get(d[a],"fieldVal")]=p.get(d[a],"field_Color");b.layerFieldValues=c;b.layerField=this.ColorByFieldValueDropdown.value;return b},_getChartColorConfig:function(){var a={};this.rdoSingleColor.checked?(a.colorType=this._chartColorType.singleColor,a.colorInfo=this.colorPicker.getColor().toHex()):this.rdoColorByTheme.checked?(a.colorType=this._chartColorType.byThemeColor,a.colorInfo=this.chartThemeSelector.selectedTheme):
this.rdoColorByFieldValue.checked&&(a.colorType=this._chartColorType.byFieldValue,a.colorInfo=this._getColorByFieldValue());return a},_sortUniqueValueData:function(a){"esriFieldTypeString"===a?this._selectedUniqueValues.sort():this._selectedUniqueValues.sort(d.hitch(this,function(a,b){return a-b}))},_getLocaleFormatedDate:function(a){return(new Date(a)).toLocaleDateString()},_initChartDescInput:function(){this.own(b(this.chartDescriptionInput,"keydown, change",d.hitch(this,function(){this.chartDescriptionInput.style.height=
"auto";this.chartDescriptionInput.style.height=this.chartDescriptionInput.scrollHeight+"px"})))}})})},"widgets/RelatedTableCharts/setting/ChartThemeSelector":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/text!./ChartThemeSelector.html dojo/_base/lang dojox/charting/Chart2D dojo/on dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/_base/array".split(" "),function(f,k,l,p,g,c,d,b,a,e,h){return f([k,l],{baseClass:"jimu-widget-RelatedTableCharts-setting",
templateString:p,selectedTheme:null,themes:[],postCreate:function(){this._setThemes();this.themes&&0<this.themes.length&&(this.selectedTheme=g.clone(this.themes[0]),this._createThemeList())},destroy:function(){this.inherited(arguments)},_setThemes:function(){this.themes=[{themeDisplayName:this.nls.ThemeSelector.themeAdobebricks,className:"dojox/charting/themes/Adobebricks",themeName:"Adobebricks"},{themeDisplayName:this.nls.ThemeSelector.themeAlgae,className:"dojox/charting/themes/Algae",themeName:"Algae"},
{themeDisplayName:this.nls.ThemeSelector.themeBahamation,className:"dojox/charting/themes/Bahamation",themeName:"Bahamation"},{themeDisplayName:this.nls.ThemeSelector.themeBlueDusk,className:"dojox/charting/themes/BlueDusk",themeName:"BlueDusk"},{themeDisplayName:this.nls.ThemeSelector.themeCubanShirts,className:"dojox/charting/themes/CubanShirts",themeName:"CubanShirts"},{themeDisplayName:this.nls.ThemeSelector.themeDesert,className:"dojox/charting/themes/Desert",themeName:"Desert"},{themeDisplayName:this.nls.ThemeSelector.themeDistinctive,
className:"dojox/charting/themes/Distinctive",themeName:"Distinctive"},{themeDisplayName:this.nls.ThemeSelector.themeDollar,className:"dojox/charting/themes/Dollar",themeName:"Dollar"},{themeDisplayName:this.nls.ThemeSelector.themeGrasshopper,className:"dojox/charting/themes/Grasshopper",themeName:"Grasshopper"},{themeDisplayName:this.nls.ThemeSelector.themeGrasslands,className:"dojox/charting/themes/Grasslands",themeName:"Grasslands"},{themeDisplayName:this.nls.ThemeSelector.themeGreySkies,className:"dojox/charting/themes/GreySkies",
themeName:"GreySkies"},{themeDisplayName:this.nls.ThemeSelector.themeHarmony,className:"dojox/charting/themes/Harmony",themeName:"Harmony"},{themeDisplayName:this.nls.ThemeSelector.themeIndigoNation,className:"dojox/charting/themes/IndigoNation",themeName:"IndigoNation"},{themeDisplayName:this.nls.ThemeSelector.themeIreland,className:"dojox/charting/themes/Ireland",themeName:"Ireland"},{themeDisplayName:this.nls.ThemeSelector.themeMiamiNice,className:"dojox/charting/themes/MiamiNice",themeName:"MiamiNice"},
{themeDisplayName:this.nls.ThemeSelector.themeMinty,className:"dojox/charting/themes/Minty",themeName:"Minty"},{themeDisplayName:this.nls.ThemeSelector.themePurpleRain,className:"dojox/charting/themes/PurpleRain",themeName:"PurpleRain"},{themeDisplayName:this.nls.ThemeSelector.themeRoyalPurples,className:"dojox/charting/themes/RoyalPurples",themeName:"RoyalPurples"},{themeDisplayName:this.nls.ThemeSelector.themeSageToLime,className:"dojox/charting/themes/SageToLime",themeName:"SageToLime"},{themeDisplayName:this.nls.ThemeSelector.themeTufte,
className:"dojox/charting/themes/Tufte",themeName:"Tufte"},{themeDisplayName:this.nls.ThemeSelector.themeWatersEdge,className:"dojox/charting/themes/WatersEdge",themeName:"WatersEdge"},{themeDisplayName:this.nls.ThemeSelector.themeWetlandText,className:"dojox/charting/themes/Wetland",themeName:"Wetland"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitblue,className:"dojox/charting/themes/PlotKit/blue",themeName:"PlotKit.blue"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitcyan,className:"dojox/charting/themes/PlotKit/cyan",
themeName:"PlotKit.cyan"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitgreen,className:"dojox/charting/themes/PlotKit/green",themeName:"PlotKit.green"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitorange,className:"dojox/charting/themes/PlotKit/orange",themeName:"PlotKit.orange"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitpurple,className:"dojox/charting/themes/PlotKit/purple",themeName:"PlotKit.purple"},{themeDisplayName:this.nls.ThemeSelector.themePlotKitred,className:"dojox/charting/themes/PlotKit/red",
themeName:"PlotKit.red"}]},_onDropDownClick:function(){"none"===b.get(this.themeChooseNode,"display")?this.showChooseNode():this.hideChooseNode()},showChooseNode:function(){b.set(this.themeChooseNode,"display","")},hideChooseNode:function(){b.set(this.themeChooseNode,"display","none")},_createThemeList:function(){var b=[];h.forEach(this.themes,function(a){b.push(a.className)});require(b,g.hitch(this,function(){h.forEach(this.themes,g.hitch(this,function(b){var c,t,m;c=e.create("div",{"class":"esriCTThemeItem",
title:b.themeDisplayName},this.themeList);a.set(c,"themeDisplayName",b.themeDisplayName);a.set(c,"themeClass",b.className);a.set(c,"themeName",b.themeName);d(c,"click",g.hitch(this,function(){var b={themeDisplayName:a.get(c,"themeDisplayName"),className:a.get(c,"themeClass"),themeName:a.get(c,"themeName")};this.selectTheme(b)}));t=dojo.create("div",{"class":"esriCTThemeChart"},c);m=dojo.create("div",{"class":"esriCTThemeName"},c);t=e.create("div",{},t);e.create("div",{className:"title",innerHTML:b.themeDisplayName},
m);this._createChart(b.themeName,t)}));this.selectTheme(this.selectedTheme)}))},_createChart:function(a,b){b=e.create("div",{className:"chart"},b);b=new c(b);b.setTheme(dojo.getObject("dojox.charting.themes."+a));b.addPlot("default",{type:"Pie",radius:11,labels:!1,radGrad:"vml"===dojox.gfx.renderer?"fan":"native"});b.addSeries("Series A",[.35,.25,.42,.53,.69]);b.render()},selectTheme:function(b){this.selectedThemeChart&&e.empty(this.selectedThemeChart);this.selectedTheme={themeDisplayName:b.themeDisplayName||
b.themeName,className:b.className,themeName:b.themeName};this._createChart(b.themeName,this.selectedThemeChart);a.set(this.selectedThemeName,"innerHTML",this.selectedTheme.themeDisplayName);this.hideChooseNode();this.onThemeSelect(this.selectedTheme)},onThemeSelect:function(a){}})})},"dojox/charting/Chart2D":function(){define("dojo/_base/kernel dojo/_base/lang .. ./Chart ./axis2d/Default ./axis2d/Invisible ./plot2d/Default ./plot2d/Lines ./plot2d/Areas ./plot2d/Markers ./plot2d/MarkersOnly ./plot2d/Scatter ./plot2d/Stacked ./plot2d/StackedLines ./plot2d/StackedAreas ./plot2d/Columns ./plot2d/StackedColumns ./plot2d/ClusteredColumns ./plot2d/Bars ./plot2d/StackedBars ./plot2d/ClusteredBars ./plot2d/Grid ./plot2d/Pie ./plot2d/Bubble ./plot2d/Candlesticks ./plot2d/OHLC ./plot2d/Spider".split(" "),
function(f,k,l,p){f.deprecated("dojox.charting.Chart2D","Use dojox.charting.Chart instead and require all other components explicitly","2.0");return k.setObject("dojox.charting.Chart2D",p)})},"dojox/charting/Chart":function(){define("../main dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-style dojo/dom dojo/dom-geometry dojo/dom-construct dojo/_base/Color dojo/sniff ./Element ./SimpleTheme ./Series ./axis2d/common dojox/gfx/shape dojox/gfx dojo/has!dojo-bidi?./bidi/Chart dojox/lang/functional dojox/lang/functional/fold dojox/lang/functional/reversed".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A){function B(a,b){a&&b&&(a.min=Math.min(a.min,b.min),a.max=Math.max(a.max,b.max));return a||b}function J(a,b){var c={},d={};l.forEach(a,function(a){var b=c[a.name]=a.getSeriesStats();a.hAxis&&(d[a.hAxis]=B(d[a.hAxis],{min:b.hmin,max:b.hmax}));a.vAxis&&(d[a.vAxis]=B(d[a.vAxis],{min:b.vmin,max:b.vmax}))});l.forEach(a,function(a){var e=c[a.name];if(a.hAxis){var r=d[a.hAxis];e.hmin=r.min;e.hmax=r.max}a.vAxis&&(r=d[a.vAxis],e.vmin=r.min,e.vmax=r.max);a.initializeScalers(b,
e)})}var u=k.getObject("charting",!0,f),Q=A.lambda("item.clear()"),L=A.lambda("item.purgeGroup()"),O=A.lambda("item.destroy()"),I=A.lambda("item.dirty \x3d false"),D=A.lambda("item.dirty \x3d true"),w=A.lambda("item.name"),x={l:10,t:10,r:10,b:10};f=p(e("dojo-bidi")?"dojox.charting.NonBidiChart":"dojox.charting.Chart",null,{constructor:function(a,b){b||(b={});this.margins=b.margins||x;this._customMargins=!!b.margins;this.stroke=b.stroke;this.fill=b.fill;this.delayInMs=b.delayInMs||200;this.title=b.title;
this.titleGap=b.titleGap;this.titlePos=b.titlePos;this.titleFont=b.titleFont;this.titleFontColor=b.titleFontColor;this.titleAlign=b.titleAlign;this.chartTitle=null;this.htmlLabels=!0;"htmlLabels"in b&&(this.htmlLabels=b.htmlLabels);this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=!0;this.node=c.byId(a);a=d.getMarginBox(a);this.surface=m.createSurface(this.node,a.w||400,a.h||300);-1==this.surface.declaredClass.indexOf("vml")&&(this._nativeClip=!0)},destroy:function(){l.forEach(this.series,
O);l.forEach(this.stack,O);A.forIn(this.axes,O);this.surface.destroy();this.chartTitle&&this.chartTitle.tagName&&b.destroy(this.chartTitle)},getCoords:function(){var a=this.node,b=g.getComputedStyle(a),b=d.getMarginBox(a,b),a=d.position(a,!0);b.x=a.x;b.y=a.y;return b},setTheme:function(a){this.theme=a.clone();this._customMargins||(this.margins=this.theme.chart.margins||x);this.dirty=!0;return this},addAxis:function(a,b){var c=b&&b.type||"Default";if("string"==typeof c){if(!u.axis2d||!u.axis2d[c])throw Error("Can't find axis: "+
c+" - Check require() dependencies.");b=new u.axis2d[c](this,b)}else b=new c(this,b);b.name=a;b.dirty=!0;a in this.axes&&this.axes[a].destroy();this.axes[a]=b;this.dirty=!0;return this},getAxis:function(a){return this.axes[a]},removeAxis:function(a){a in this.axes&&(this.axes[a].destroy(),delete this.axes[a],this.dirty=!0);return this},addPlot:function(a,b){var c=b&&b.type||"Default";if("string"==typeof c){if(!u.plot2d||!u.plot2d[c])throw Error("Can't find plot: "+c+" - didn't you forget to dojo.require() it?");
b=new u.plot2d[c](this,b)}else b=new c(this,b);b.name=a;b.dirty=!0;a in this.plots?(this.stack[this.plots[a]].destroy(),this.stack[this.plots[a]]=b):(this.plots[a]=this.stack.length,this.stack.push(b));this.dirty=!0;return this},getPlot:function(a){return this.stack[this.plots[a]]},removePlot:function(a){if(a in this.plots){var b=this.plots[a];delete this.plots[a];this.stack[b].destroy();this.stack.splice(b,1);A.forIn(this.plots,function(a,c,d){a>b&&(d[c]=a-1)});var c=l.filter(this.series,function(b){return b.plot!=
a});c.length<this.series.length&&(l.forEach(this.series,function(b){b.plot==a&&b.destroy()}),this.runs={},l.forEach(c,function(a,b){this.runs[a.plot]=b},this),this.series=c);this.dirty=!0}return this},getPlotOrder:function(){return A.map(this.stack,w)},setPlotOrder:function(a){var b={},c=A.filter(a,function(a){if(!(a in this.plots)||a in b)return!1;b[a]=1;return!0},this);c.length<this.stack.length&&A.forEach(this.stack,function(a){a=a.name;a in b||c.push(a)});a=A.map(c,function(a){return this.stack[this.plots[a]]},
this);A.forEach(a,function(a,b){this.plots[a.name]=b},this);this.stack=a;this.dirty=!0;return this},movePlotToFront:function(a){if(a in this.plots){var b=this.plots[a];if(b){var c=this.getPlotOrder();c.splice(b,1);c.unshift(a);return this.setPlotOrder(c)}}return this},movePlotToBack:function(a){if(a in this.plots){var b=this.plots[a];if(b<this.stack.length-1){var c=this.getPlotOrder();c.splice(b,1);c.push(a);return this.setPlotOrder(c)}}return this},addSeries:function(a,b,c){b=new n(this,b,c);b.name=
a;a in this.runs?(this.series[this.runs[a]].destroy(),this.series[this.runs[a]]=b):(this.runs[a]=this.series.length,this.series.push(b));this.dirty=!0;!("ymin"in b)&&"min"in b&&(b.ymin=b.min);!("ymax"in b)&&"max"in b&&(b.ymax=b.max);return this},getSeries:function(a){return this.series[this.runs[a]]},removeSeries:function(a){if(a in this.runs){var b=this.runs[a];delete this.runs[a];this.series[b].destroy();this.series.splice(b,1);A.forIn(this.runs,function(a,c,d){a>b&&(d[c]=a-1)});this.dirty=!0}return this},
updateSeries:function(a,b,c){a in this.runs&&(a=this.series[this.runs[a]],a.update(b),c?this.dirty=!0:(this._invalidateDependentPlots(a.plot,!1),this._invalidateDependentPlots(a.plot,!0)));return this},getSeriesOrder:function(a){return A.map(A.filter(this.series,function(b){return b.plot==a}),w)},setSeriesOrder:function(a){var b,c={},d=A.filter(a,function(a){if(!(a in this.runs)||a in c)return!1;var d=this.series[this.runs[a]];if(b){if(d.plot!=b)return!1}else b=d.plot;c[a]=1;return!0},this);A.forEach(this.series,
function(a){var e=a.name;e in c||a.plot!=b||d.push(e)});this.series=A.map(d,function(a){return this.series[this.runs[a]]},this).concat(A.filter(this.series,function(a){return a.plot!=b}));A.forEach(this.series,function(a,b){this.runs[a.name]=b},this);this.dirty=!0;return this},moveSeriesToFront:function(a){if(a in this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[0])return c.splice(b,1),c.unshift(a),this.setSeriesOrder(c)}return this},moveSeriesToBack:function(a){if(a in
this.runs){var b=this.runs[a],c=this.getSeriesOrder(this.series[b].plot);if(a!=c[c.length-1])return c.splice(b,1),c.push(a),this.setSeriesOrder(c)}return this},resize:function(a,b){switch(arguments.length){case 1:d.setMarginBox(this.node,a);break;case 2:d.setMarginBox(this.node,{w:a,h:b})}var c=d.getMarginBox(this.node),e=this.surface.getDimensions();return e.width!=c.w||e.height!=c.h?(this.surface.setDimensions(c.w,c.h),this.dirty=!0,this.render()):this},getGeometry:function(){var a={};A.forIn(this.axes,
function(b){b.initialized()&&(a[b.name]={name:b.name,vertical:b.vertical,scaler:b.scaler,ticks:b.ticks})});return a},setAxisWindow:function(a,b,c,d){var e=this.axes[a];e&&(e.setWindow(b,c),l.forEach(this.stack,function(b){if(b.hAxis==a||b.vAxis==a)b.zoom=d}));return this},setWindow:function(a,b,c,d,e){"plotArea"in this||this.calculateGeometry();A.forIn(this.axes,function(e){var r,m;r=e.getScaler().bounds;m=r.span/(r.upper-r.lower);e.vertical?(r=b,m=d/m/r):(r=a,m=c/m/r);e.setWindow(r,m)});l.forEach(this.stack,
function(a){a.zoom=e});return this},zoomIn:function(a,b,c){var d=this.axes[a];if(d){var d=d.getScaler().bounds,e=Math.min(b[0],b[1]),r=Math.max(b[0],b[1]),e=b[0]<d.lower?d.lower:e,r=b[1]>d.upper?d.upper:r;this.setAxisWindow(a,(d.upper-d.lower)/(r-e),e-d.lower);c?this.delayedRender():this.render()}},calculateGeometry:function(){if(this.dirty)return this.fullGeometry();var a=l.filter(this.stack,function(a){return a.dirty||a.hAxis&&this.axes[a.hAxis].dirty||a.vAxis&&this.axes[a.vAxis].dirty},this);J(a,
this.plotArea);return this},fullGeometry:function(){this._makeDirty();l.forEach(this.stack,Q);this.theme||this.setTheme(new q);l.forEach(this.series,function(a){if(!(a.plot in this.plots)){if(!u.plot2d||!u.plot2d.Default)throw Error("Can't find plot: Default - didn't you forget to dojo.require() it?");var b=new u.plot2d.Default(this,{});b.name=a.plot;this.plots[a.plot]=this.stack.length;this.stack.push(b)}this.stack[this.plots[a.plot]].addSeries(a)},this);l.forEach(this.stack,function(a){a.assignAxes&&
a.assignAxes(this.axes)},this);var a=this.dim=this.surface.getDimensions();a.width=m.normalizedLength(a.width);a.height=m.normalizedLength(a.height);A.forIn(this.axes,Q);J(this.stack,a);var b=this.offsets={l:0,r:0,t:0,b:0},c=this;A.forIn(this.axes,function(a){e("dojo-bidi")&&c._resetLeftBottom(a);A.forIn(a.getOffsets(),function(a,c){b[c]=Math.max(a,b[c])})});if(this.title){this.titleGap=0==this.titleGap?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||
"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";this.titleAlign=this.titleAlign||this.theme&&this.theme.chart&&this.theme.chart.titleAlign||"middle";var d=m.normalizedLength(m.splitFontString(this.titleFont).size);b["top"==this.titlePos?"t":"b"]+=d+this.titleGap}A.forIn(this.margins,function(a,c){b[c]+=a});this.plotArea={width:a.width-b.l-b.r,height:a.height-b.t-b.b};A.forIn(this.axes,Q);J(this.stack,
this.plotArea);return this},render:function(){this._delayedRenderHandle&&(clearTimeout(this._delayedRenderHandle),this._delayedRenderHandle=null);this.theme&&this.theme.clear();if(this.dirty)return this.fullRender();this.calculateGeometry();A.forEachRev(this.stack,function(a){a.render(this.dim,this.offsets)},this);A.forIn(this.axes,function(a){a.render(this.dim,this.offsets)},this);this._makeClean();return this},fullRender:function(){this.fullGeometry();var a=this.offsets,c=this.dim,d=Math.max(0,
c.width-a.l-a.r),e=Math.max(0,c.height-a.t-a.b);l.forEach(this.series,L);A.forIn(this.axes,L);l.forEach(this.stack,L);var r=this.surface.children;if(t.dispose)for(var m=0;m<r.length;++m)t.dispose(r[m]);this.chartTitle&&this.chartTitle.tagName&&b.destroy(this.chartTitle);this.surface.clear();this.chartTitle=null;this._renderChartBackground(c,a);this._renderPlotBackground(c,a,d,e);A.foldr(this.stack,function(b,d){return d.render(c,a),0},0);this._nativeClip||this._renderChartBackground(c,a);this.title&&
this._renderTitle(c,a);A.forIn(this.axes,function(b){b.render(c,a)});this._makeClean();return this},_renderTitle:function(a,b){var c="canvas"==m.renderer&&this.htmlLabels||!e("ie")&&!e("opera")&&this.htmlLabels?"html":"gfx",d=m.normalizedLength(m.splitFontString(this.titleFont).size),t=m._base._getTextBox(this.title,{font:this.titleFont}),h=this.titleAlign,v=e("dojo-bidi")&&this.isRightToLeft(),u=a.width/2;"edge"===h?(h="left",u=v?a.width-(b.r+t.w):b.l):"middle"!=h&&(v&&(h="left"===h?"right":"left"),
"left"===h?u=this.margins.l:"right"===h&&(h="left",u=a.width-(this.margins.l+t.w)));this.chartTitle=r.createText[c](this,this.surface,u,"top"==this.titlePos?d+this.margins.t:a.height-this.margins.b,h,this.title,this.titleFont,this.titleFontColor)},_renderChartBackground:function(b,c){var d=this.theme,e,r=void 0!==this.fill?this.fill:d.chart&&d.chart.fill,d=void 0!==this.stroke?this.stroke:d.chart&&d.chart.stroke;if("inherit"==r)for(e=this.node,r=new a(g.get(e,"backgroundColor"));0==r.a&&e!=document.documentElement;)r=
new a(g.get(e,"backgroundColor")),e=e.parentNode;r&&(this._nativeClip?(r=h.prototype._shapeFill(h.prototype._plotFill(r,b),{x:0,y:0,width:b.width+1,height:b.height+1}),this.surface.createRect({width:b.width+1,height:b.height+1}).setFill(r)):(r=h.prototype._plotFill(r,b,c),c.l&&(e={x:0,y:0,width:c.l,height:b.height+1},this.surface.createRect(e).setFill(h.prototype._shapeFill(r,e))),c.r&&(e={x:b.width-c.r,y:0,width:c.r+1,height:b.height+2},this.surface.createRect(e).setFill(h.prototype._shapeFill(r,
e))),c.t&&(e={x:0,y:0,width:b.width+1,height:c.t},this.surface.createRect(e).setFill(h.prototype._shapeFill(r,e))),c.b&&(e={x:0,y:b.height-c.b,width:b.width+1,height:c.b+2},this.surface.createRect(e).setFill(h.prototype._shapeFill(r,e)))));d&&this.surface.createRect({width:b.width-1,height:b.height-1}).setStroke(d)},_renderPlotBackground:function(a,b,c,d){var e=this.theme,r=e.plotarea&&e.plotarea.fill,e=e.plotarea&&e.plotarea.stroke,m={x:b.l-1,y:b.t-1,width:c+2,height:d+2};r&&(r=h.prototype._shapeFill(h.prototype._plotFill(r,
a,b),m),this.surface.createRect(m).setFill(r));e&&this.surface.createRect({x:b.l,y:b.t,width:c+1,height:d+1}).setStroke(e)},delayedRender:function(){this._delayedRenderHandle||(this._delayedRenderHandle=setTimeout(k.hitch(this,function(){this.render()}),this.delayInMs));return this},connectToPlot:function(a,b,c){return a in this.plots?this.stack[this.plots[a]].connect(b,c):null},fireEvent:function(a,b,c){if(a in this.runs){var d=this.series[this.runs[a]].plot;d in this.plots&&(d=this.stack[this.plots[d]])&&
d.fireEvent(a,b,c)}return this},_makeClean:function(){l.forEach(this.axes,I);l.forEach(this.stack,I);l.forEach(this.series,I);this.dirty=!1},_makeDirty:function(){l.forEach(this.axes,D);l.forEach(this.stack,D);l.forEach(this.series,D);this.dirty=!0},_invalidateDependentPlots:function(a,b){if(a in this.plots){var c=this.stack[this.plots[a]],d=b?"vAxis":"hAxis";c[d]?(a=this.axes[c[d]])&&a.dependOnData()&&(a.dirty=!0,l.forEach(this.stack,function(a){a[d]&&a[d]==c[d]&&(a.dirty=!0)})):c.dirty=!0}},setDir:function(a){return this},
_resetLeftBottom:function(a){},formatTruncatedLabel:function(a,b,c){}});return e("dojo-bidi")?p("dojox.charting.Chart",[f,v]):f})},"dojox/charting/Element":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/shape"],function(f,k,l,p,g){return l("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:!0,renderingOptions:null,constructor:function(c,d){this.chart=c;this.group=null;this.htmlElements=[];this.dirty=!0;this.trailingSymbol=
"...";this._events=[];d&&d.renderingOptions&&(this.renderingOptions=d.renderingOptions)},purgeGroup:function(){this.destroyHtmlElements();if(this.group){this.getGroup().removeShape();var c=this.getGroup().children;if(g.dispose)for(var d=0;d<c.length;++d)g.dispose(c[d],!0);this.getGroup().rawNode&&k.empty(this.getGroup().rawNode);this.getGroup().clear();g.dispose&&g.dispose(this.getGroup(),!0);this.getGroup()!=this.group&&(this.group.rawNode&&k.empty(this.group.rawNode),this.group.clear(),g.dispose&&
g.dispose(this.group,!0));this.group=null}this.dirty=!0;this._events.length&&(f.forEach(this._events,function(b){b.shape.disconnect(b.handle)}),this._events=[]);return this},cleanGroup:function(c){this.destroyHtmlElements();c||(c=this.chart.surface);if(this.group){var d;c=this.getGroup().children;if(g.dispose)for(var b=0;b<c.length;++b)g.dispose(c[b],!0);this.getGroup().rawNode&&(d=this.getGroup().bgNode,k.empty(this.getGroup().rawNode));this.getGroup().clear();d&&this.getGroup().rawNode.appendChild(d)}else if(this.group=
c.createGroup(),this.renderingOptions&&this.group.rawNode&&"http://www.w3.org/2000/svg"==this.group.rawNode.namespaceURI)for(b in this.renderingOptions)this.group.rawNode.setAttribute(b,this.renderingOptions[b]);this.dirty=!0;return this},getGroup:function(){return this.group},destroyHtmlElements:function(){this.htmlElements.length&&(f.forEach(this.htmlElements,k.destroy),this.htmlElements=[])},destroy:function(){this.purgeGroup()},overrideShape:function(c,d){},getTextWidth:function(c,d){return p._base._getTextBox(c,
{font:d}).w||0},getTextWithLimitLength:function(c,d,b,a){if(!c||0>=c.length)return{text:"",truncated:a||!1};if(!b||0>=b)return{text:c,truncated:a||!1};var e=c.substring(0,1)+this.trailingSymbol,h=this.getTextWidth(e,d);if(b<=h)return{text:e,truncated:!0};if(this.getTextWidth(c,d)<=b)return{text:c,truncated:a||!1};a=0;for(e=c.length;a<e;){if(2>=e-a){for(;this.getTextWidth(c.substring(0,a)+this.trailingSymbol,d)>b;)--a;return{text:c.substring(0,a)+this.trailingSymbol,truncated:!0}}h=a+Math.round(.618*
(e-a));this.getTextWidth(c.substring(0,h),d)<b?a=h:e=h}},getTextWithLimitCharCount:function(c,d,b,a){return!c||0>=c.length?{text:"",truncated:a||!1}:!b||0>=b||c.length<=b?{text:c,truncated:a||!1}:{text:c.substring(0,b)+this.trailingSymbol,truncated:!0}},_plotFill:function(c,d,b){if(!c||!c.type||!c.space)return c;var a=c.space,e;switch(c.type){case "linear":if("plot"===a||"shapeX"===a||"shapeY"===a){c=p.makeParameters(p.defaultLinearGradient,c);c.space=a;if("plot"===a||"shapeX"===a)e=d.height-b.t-
b.b,c.y1=b.t+e*c.y1/100,c.y2=b.t+e*c.y2/100;if("plot"===a||"shapeY"===a)e=d.width-b.l-b.r,c.x1=b.l+e*c.x1/100,c.x2=b.l+e*c.x2/100}break;case "radial":"plot"===a&&(c=p.makeParameters(p.defaultRadialGradient,c),c.space=a,a=d.width-b.l-b.r,d=d.height-b.t-b.b,c.cx=b.l+a*c.cx/100,c.cy=b.t+d*c.cy/100,c.r=c.r*Math.sqrt(a*a+d*d)/200);break;case "pattern":if("plot"===a||"shapeX"===a||"shapeY"===a){c=p.makeParameters(p.defaultPattern,c);c.space=a;if("plot"===a||"shapeX"===a)e=d.height-b.t-b.b,c.y=b.t+e*c.y/
100,c.height=e*c.height/100;if("plot"===a||"shapeY"===a)e=d.width-b.l-b.r,c.x=b.l+e*c.x/100,c.width=e*c.width/100}}return c},_shapeFill:function(c,d){if(!c||!c.space)return c;var b=c.space,a;switch(c.type){case "linear":if("shape"===b||"shapeX"===b||"shapeY"===b){c=p.makeParameters(p.defaultLinearGradient,c);c.space=b;if("shape"===b||"shapeX"===b)a=d.width,c.x1=d.x+a*c.x1/100,c.x2=d.x+a*c.x2/100;if("shape"===b||"shapeY"===b)a=d.height,c.y1=d.y+a*c.y1/100,c.y2=d.y+a*c.y2/100}break;case "radial":"shape"===
b&&(c=p.makeParameters(p.defaultRadialGradient,c),c.space=b,c.cx=d.x+d.width/2,c.cy=d.y+d.height/2,c.r=c.r*d.width/200);break;case "pattern":if("shape"===b||"shapeX"===b||"shapeY"===b){c=p.makeParameters(p.defaultPattern,c);c.space=b;if("shape"===b||"shapeX"===b)a=d.width,c.x=d.x+a*c.x/100,c.width=a*c.width/100;if("shape"===b||"shapeY"===b)a=d.height,c.y=d.y+a*c.y/100,c.height=a*c.height/100}}return c},_pseudoRadialFill:function(c,d,b,a,e){if(!c||"radial"!==c.type||"shape"!==c.space)return c;var h=
c.space;c=p.makeParameters(p.defaultRadialGradient,c);c.space=h;if(4>arguments.length)return c.cx=d.x,c.cy=d.y,c.r=c.r*b/100,c;h=5>arguments.length?a:(e+a)/2;return{type:"linear",x1:d.x,y1:d.y,x2:d.x+c.r*b*Math.cos(h)/100,y2:d.y+c.r*b*Math.sin(h)/100,colors:c.colors}}})})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(f,k,l,p,g,c,d,b,a,e){function h(a,
b){if(!q)return a.splice(b,1);var c=a.length;if(c){for(;b<c;)a[b]=a[b+1],b++;a.length--}}var q=!!g("chrome"),n=f.shape={};n.Shape=l("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(g("gfxRegistry")){var a=n.register(this);this.getUID=function(){return a}}},destroy:function(){g("gfxRegistry")&&n.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=
null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var a=this.getBoundingBox();if(!a)return null;var b=this._getRealMatrix();return[e.multiplyPoint(b,a.x,a.y),e.multiplyPoint(b,a.x+a.width,a.y),
e.multiplyPoint(b,a.x+a.width,a.y+a.height),e.multiplyPoint(b,a.x,a.y+a.height)]},getEventSource:function(){return this.rawNode},setClip:function(a){this.clip=a},getClip:function(){return this.clip},setShape:function(a){this.shape=f.makeParameters(this.shape,a);this.bbox=null;return this},setFill:function(a){if(!a)return this.fillStyle=null,this;var b=null;if("object"==typeof a&&"type"in a)switch(a.type){case "linear":b=f.makeParameters(f.defaultLinearGradient,a);break;case "radial":b=f.makeParameters(f.defaultRadialGradient,
a);break;case "pattern":b=f.makeParameters(f.defaultPattern,a)}else b=f.normalizeColor(a);this.fillStyle=b;return this},setStroke:function(b){if(!b)return this.strokeStyle=null,this;if("string"==typeof b||k.isArray(b)||b instanceof a)b={color:b};b=this.strokeStyle=f.makeParameters(f.defaultStroke,b);b.color=f.normalizeColor(b.color);return this},setTransform:function(a){this.matrix=e.clone(a?e.normalize(a):e.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var a=
this.getParent();a&&(a._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var a=this.getParent();a&&(a._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(a){return a?this.setTransform([this.matrix,a]):this},applyLeftTransform:function(a){return a?this.setTransform([a,this.matrix]):this},applyTransform:function(a){return a?this.setTransform([this.matrix,a]):this},removeShape:function(a){this.parent&&
this.parent.remove(this,a);return this},_setParent:function(a,b){this.parent=a;return this._updateParentMatrix(b)},_updateParentMatrix:function(a){this.parentMatrix=a?e.clone(a):null;return this._applyTransform()},_getRealMatrix:function(){for(var a=this.matrix,b=this.parent;b;)b.matrix&&(a=e.multiply(b.matrix,a)),b=b.parent;return a}});n._eventsProcessing={on:function(a,b){return c(this.getEventSource(),a,n.fixCallback(this,f.fixTarget,b))},connect:function(a,b,c){"on"==a.substring(0,2)&&(a=a.substring(2));
return this.on(a,c?k.hitch(b,c):b)},disconnect:function(a){return a.remove()}};n.fixCallback=function(a,b,c,d){d||(d=c,c=null);if(k.isString(d)){c=c||p.global;if(!c[d])throw['dojox.gfx.shape.fixCallback: scope["',d,'"] is null (scope\x3d"',c,'")'].join("");return function(e){return b(e,a)?c[d].apply(c,arguments||[]):void 0}}return c?function(e){return b(e,a)?d.apply(c,arguments||[]):void 0}:function(e){return b(e,a)?d.apply(c,arguments):void 0}};k.extend(n.Shape,n._eventsProcessing);n.Container={_init:function(){this.children=
[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(a){var b=a.getParent();b&&b.remove(a,!0);this.children.push(a);return a._setParent(this,this._getRealMatrix())},remove:function(a,b){for(var c=0;c<this.children.length;++c)if(this.children[c]==a){b||(a.parent=null,a.parentMatrix=null);h(this.children,c);break}return this},clear:function(a){for(var b,c=0;c<this.children.length;++c)b=this.children[c],b.parent=null,b.parentMatrix=null,a&&b.destroy();this.children=
[];return this},getBoundingBox:function(){if(this.children){var a=null;d.forEach(this.children,function(b){var c=b.getBoundingBox();c&&((b=b.getTransform())&&(c=e.multiplyRectangle(b,c)),a?(a.x=Math.min(a.x,c.x),a.y=Math.min(a.y,c.y),a.endX=Math.max(a.endX,c.x+c.width),a.endY=Math.max(a.endY,c.y+c.height)):a={x:c.x,y:c.y,endX:c.x+c.width,endY:c.y+c.height})});a&&(a.width=a.endX-a.x,a.height=a.endY-a.y);return a}return null},_moveChildToFront:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==
a){h(this.children,b);this.children.push(a);break}return this},_moveChildToBack:function(a){for(var b=0;b<this.children.length;++b)if(this.children[b]==a){h(this.children,b);this.children.unshift(a);break}return this}};n.Surface=l("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){d.forEach(this._nodes,b.destroy);this._nodes=[];d.forEach(this._events,function(a){a&&a.remove()});this._events=[];this.rawNode=null;
if(g("ie"))for(;this._parent.lastChild;)b.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(a){},whenLoaded:function(a,b){var d=k.hitch(a,b);if(this.isLoaded)d(this);else c.once(this,"load",function(a){d(a)})}});k.extend(n.Surface,n._eventsProcessing);n.Rect=l("dojox.gfx.shape.Rect",n.Shape,{constructor:function(a){this.shape=f.getDefault("Rect");this.rawNode=
a},getBoundingBox:function(){return this.shape}});n.Ellipse=l("dojox.gfx.shape.Ellipse",n.Shape,{constructor:function(a){this.shape=f.getDefault("Ellipse");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-a.rx,y:a.cy-a.ry,width:2*a.rx,height:2*a.ry}}return this.bbox}});n.Circle=l("dojox.gfx.shape.Circle",n.Shape,{constructor:function(a){this.shape=f.getDefault("Circle");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:a.cx-
a.r,y:a.cy-a.r,width:2*a.r,height:2*a.r}}return this.bbox}});n.Line=l("dojox.gfx.shape.Line",n.Shape,{constructor:function(a){this.shape=f.getDefault("Line");this.rawNode=a},getBoundingBox:function(){if(!this.bbox){var a=this.shape;this.bbox={x:Math.min(a.x1,a.x2),y:Math.min(a.y1,a.y2),width:Math.abs(a.x2-a.x1),height:Math.abs(a.y2-a.y1)}}return this.bbox}});n.Polyline=l("dojox.gfx.shape.Polyline",n.Shape,{constructor:function(a){this.shape=f.getDefault("Polyline");this.rawNode=a},setShape:function(a,
b){a&&a instanceof Array?(this.inherited(arguments,[{points:a}]),b&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[a]);return this},_normalizePoints:function(){var a=this.shape.points,b=a&&a.length;if(b&&"number"==typeof a[0]){for(var c=[],d=0;d<b;d+=2)c.push({x:a[d],y:a[d+1]});this.shape.points=c}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var a=this.shape.points,b=a.length,c=a[0],d=c.x,e=c.y,h=c.x,q=c.y,u=1;u<b;++u)c=
a[u],d>c.x&&(d=c.x),h<c.x&&(h=c.x),e>c.y&&(e=c.y),q<c.y&&(q=c.y);this.bbox={x:d,y:e,width:h-d,height:q-e}}return this.bbox}});n.Image=l("dojox.gfx.shape.Image",n.Shape,{constructor:function(a){this.shape=f.getDefault("Image");this.rawNode=a},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});n.Text=l(n.Shape,{constructor:function(a){this.fontStyle=null;this.shape=f.getDefault("Text");this.rawNode=a},getFont:function(){return this.fontStyle},
setFont:function(a){this.fontStyle="string"==typeof a?f.splitFontString(a):f.makeParameters(f.defaultFont,a);this._setFont();return this},getBoundingBox:function(){var a=null;this.getShape().text&&(a=f._base._computeTextBoundingBox(this));return a}});n.Creator={createShape:function(a){switch(a.type){case f.defaultPath.type:return this.createPath(a);case f.defaultRect.type:return this.createRect(a);case f.defaultCircle.type:return this.createCircle(a);case f.defaultEllipse.type:return this.createEllipse(a);
case f.defaultLine.type:return this.createLine(a);case f.defaultPolyline.type:return this.createPolyline(a);case f.defaultImage.type:return this.createImage(a);case f.defaultText.type:return this.createText(a);case f.defaultTextPath.type:return this.createTextPath(a)}return null},createGroup:function(){return this.createObject(f.Group)},createRect:function(a){return this.createObject(f.Rect,a)},createEllipse:function(a){return this.createObject(f.Ellipse,a)},createCircle:function(a){return this.createObject(f.Circle,
a)},createLine:function(a){return this.createObject(f.Line,a)},createPolyline:function(a){return this.createObject(f.Polyline,a)},createImage:function(a){return this.createObject(f.Image,a)},createText:function(a){return this.createObject(f.Text,a)},createPath:function(a){return this.createObject(f.Path,a)},createTextPath:function(a){return this.createObject(f.TextPath,{}).setText(a)},createObject:function(a,b){return null}};return n})},"dojox/charting/SimpleTheme":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/Color dojox/lang/utils dojox/gfx/gradutils".split(" "),
function(f,k,l,p,g,c){var d=l("dojox.charting.SimpleTheme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(b){b=b||{};var a=d.defaultTheme;k.forEach("chart plotarea axis grid series marker indicator".split(" "),function(c){this[c]=f.delegate(a[c],b[c])},this);b.seriesThemes&&b.seriesThemes.length?(this.colors=null,this.seriesThemes=b.seriesThemes.slice(0)):(this.seriesThemes=null,this.colors=(b.colors||d.defaultColors).slice(0));this.markerThemes=null;b.markerThemes&&b.markerThemes.length&&
(this.markerThemes=b.markerThemes.slice(0));this.markers=b.markers?f.clone(b.markers):f.delegate(d.defaultMarkers);this.noGradConv=b.noGradConv;this.noRadialConv=b.noRadialConv;b.reverseFills&&this.reverseFills();this._current=0;this._buildMarkerArray()},clone:function(){var b=new this.constructor({chart:this.chart,plotarea:this.plotarea,axis:this.axis,grid:this.grid,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,
markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv,pieInnerRadius:this.pieInnerRadius});k.forEach("clone clear next skip addMixin post getTick".split(" "),function(a){this.hasOwnProperty(a)&&(b[a]=this[a])},this);return b},clear:function(){this._current=0},next:function(b,a,c){var d=g.merge,e;if(this.colors){e=f.delegate(this.series);var d=f.delegate(this.marker),n=new p(this.colors[this._current%this.colors.length]),r;e.stroke&&e.stroke.color?(e.stroke=f.delegate(e.stroke),
r=new p(e.stroke.color),e.stroke.color=new p(n),e.stroke.color.a=r.a):e.stroke={color:n};d.stroke&&d.stroke.color?(d.stroke=f.delegate(d.stroke),r=new p(d.stroke.color),d.stroke.color=new p(n),d.stroke.color.a=r.a):d.stroke={color:n};!e.fill||e.fill.type?e.fill=n:(r=new p(e.fill),e.fill=new p(n),e.fill.a=r.a);!d.fill||d.fill.type?d.fill=n:(r=new p(d.fill),d.fill=new p(n),d.fill.a=r.a)}else e=this.seriesThemes?d(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series,d=this.markerThemes?
d(this.marker,this.markerThemes[this._current%this.markerThemes.length]):e;e={series:e,marker:d,symbol:d&&d.symbol||this._markers[this._current%this._markers.length]};++this._current;a&&(e=this.addMixin(e,b,a));c&&(e=this.post(e,b));return e},skip:function(){++this._current},addMixin:function(b,a,c,d){if(f.isArray(c))k.forEach(c,function(c){b=this.addMixin(b,a,c)},this);else{var e={};"color"in c&&("line"==a||"area"==a?(f.setObject("series.stroke.color",c.color,e),f.setObject("marker.stroke.color",
c.color,e)):f.setObject("series.fill",c.color,e));k.forEach("stroke outline shadow fill filter font fontColor labelWiring".split(" "),function(a){var b="marker"+a.charAt(0).toUpperCase()+a.substr(1),d=b in c;a in c&&(f.setObject("series."+a,c[a],e),d||f.setObject("marker."+a,c[a],e));d&&f.setObject("marker."+a,c[b],e)});"marker"in c&&(e.symbol=c.marker,e.symbol=c.marker);b=g.merge(b,e)}d&&(b=this.post(b,a));return b},post:function(b,a){var c=b.series.fill,d;return!this.noGradConv&&this.shapeSpaces[c.space]&&
"linear"==c.type&&("bar"==a?d={x1:c.y1,y1:c.x1,x2:c.y2,y2:c.x2}:this.noRadialConv||"shape"!=c.space||"slice"!=a&&"circle"!=a||(d={type:"radial",cx:0,cy:0,r:100}),d)?g.merge(b,{series:{fill:d}}):b},getTick:function(b,a){var c=this.axis.tick;b+="Tick";var d=g.merge;c?this.axis[b]&&(c=d(c,this.axis[b])):c=this.axis[b];a&&(c?a[b]&&(c=d(c,a[b])):c=a[b]);return c},inspectObjects:function(b){k.forEach("chart plotarea axis grid series marker indicator".split(" "),function(a){b(this[a])},this);this.seriesThemes&&
k.forEach(this.seriesThemes,b);this.markerThemes&&k.forEach(this.markerThemes,b)},reverseFills:function(){this.inspectObjects(function(b){b&&b.fill&&(b.fill=c.reverse(b.fill))})},addMarker:function(b,a){this.markers[b]=a;this._buildMarkerArray()},setMarkers:function(b){this.markers=b;this._buildMarkerArray()},_buildMarkerArray:function(){this._markers=[];for(var b in this.markers)this._markers.push(this.markers[b])}});f.mixin(d,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",
DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333",titleAlign:"middle"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",
font:"normal normal normal 7pt Tahoma",fontColor:"#333",labelGap:4},majorTick:{width:1,length:6},minorTick:{width:.8,length:3},microTick:{width:.5,length:1},title:{gap:15,font:"normal normal normal 11pt Tahoma",fontColor:"#333",orientation:"axis"}},series:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},
shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:.1,color:"#ccc"},lineShadow:null,lineFill:null,stroke:{width:1.5,color:"#333"},outline:{width:.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:.1,color:"#ccc"},markerShadow:null}}});
return d})},"dojox/lang/utils":function(){define(["..","dojo/_base/lang"],function(f,k){var l=k.getObject("lang.utils",!0,f),p={},g=Object.prototype.toString,c=function(c){if(c)switch(g.call(c)){case "[object Array]":return c.slice(0);case "[object Object]":return k.delegate(c)}return c};k.mixin(l,{coerceType:function(c,b){switch(typeof c){case "number":return Number(eval("("+b+")"));case "string":return String(b);case "boolean":return!!eval("("+b+")")}return eval("("+b+")")},updateWithObject:function(d,
b,a){if(!b)return d;for(var e in d)if(e in b&&!(e in p)){var h=d[e];h&&"object"==typeof h?l.updateWithObject(h,b[e],a):d[e]=a?l.coerceType(h,b[e]):c(b[e])}return d},updateWithPattern:function(d,b,a,e){if(!b||!a)return d;for(var h in a)h in b&&!(h in p)&&(d[h]=e?l.coerceType(a[h],b[h]):c(b[h]));return d},merge:function(c,b){if(b){var a=g.call(c),d=g.call(b),h,q;switch(d){case "[object Array]":if(d==a){a=Array(Math.max(c.length,b.length));h=0;for(d=a.length;h<d;++h)a[h]=l.merge(c[h],b[h]);return a}return b.slice(0);
case "[object Object]":if(d==a&&c){a=k.delegate(c);for(h in b)h in c?(d=c[h],q=b[h],q!==d&&(a[h]=l.merge(d,q))):a[h]=k.clone(b[h]);return a}return k.clone(b)}}return b}});return l})},"dojox/gfx/gradutils":function(){define(["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(f,k,l,p){function g(c,d){if(0>=c)return d[0].color;var b=d.length;if(1<=c)return d[b-1].color;for(var a=0;a<b;++a){var e=d[a];if(e.offset>=c)return a?(d=d[a-1],p.blendColors(new p(d.color),new p(e.color),(c-d.offset)/
(e.offset-d.offset))):e.color}return d[b-1].color}f=f.gradutils={};f.getColor=function(c,d){var b;if(c){switch(c.type){case "linear":b=l.rotate(-Math.atan2(c.y2-c.y1,c.x2-c.x1));var a=l.project(c.x2-c.x1,c.y2-c.y1);d=l.multiplyPoint(a,d);var e=l.multiplyPoint(a,c.x1,c.y1),a=l.multiplyPoint(a,c.x2,c.y2),a=l.multiplyPoint(b,a.x-e.x,a.y-e.y).x;b=l.multiplyPoint(b,d.x-e.x,d.y-e.y).x/a;break;case "radial":b=d.x-c.cx,d=d.y-c.cy,b=Math.sqrt(b*b+d*d)/c.r}return g(b,c.colors)}return new p(c||[0,0,0,0])};f.reverse=
function(c){if(c)switch(c.type){case "linear":case "radial":if(c=k.delegate(c),c.colors){for(var d=c.colors,b=d.length,a=0,e,h=c.colors=Array(d.length);a<b;++a)e=d[a],h[a]={offset:1-e.offset,color:e.color};h.sort(function(a,b){return a.offset-b.offset})}}return c};return f})},"dojox/charting/Series":function(){define(["dojo/_base/lang","dojo/_base/declare","./Element"],function(f,k,l){return k("dojox.charting.Series",l,{constructor:function(l,g,c){f.mixin(this,c);"string"!=typeof this.plot&&(this.plot=
"default");this.update(g)},clear:function(){this.dyn={}},update:function(l){f.isArray(l)?this.data=l:(this.source=l,this.data=this.source.data,this.source.setSeriesObject&&this.source.setSeriesObject(this));this.dirty=!0;this.clear()}})})},"dojox/charting/axis2d/common":function(){define(["dojo/_base/lang","dojo/_base/window","dojo/dom-geometry","dojox/gfx","dojo/has"],function(f,k,l,p,g){var c=f.getObject("dojox.charting.axis2d.common",!0),d=function(b){b.marginLeft="0px";b.marginTop="0px";b.marginRight=
"0px";b.marginBottom="0px";b.paddingLeft="0px";b.paddingTop="0px";b.paddingRight="0px";b.paddingBottom="0px";b.borderLeftWidth="0px";b.borderTopWidth="0px";b.borderRightWidth="0px";b.borderBottomWidth="0px"};return f.mixin(c,{createText:{gfx:function(b,a,c,d,q,n,r,t){return a.createText({x:c,y:d,text:n,align:q}).setFont(r).setFill(t)},html:function(b,a,c,h,q,n,r,t,m){a=k.doc.createElement("div");var e=a.style,A;b.getTextDir&&(a.dir=b.getTextDir(n));d(e);e.font=r;a.innerHTML=String(n).replace(/\s/g,
"\x26nbsp;");e.color=t;e.position="absolute";e.left="-10000px";k.body().appendChild(a);var B=p.normalizedLength(p.splitFontString(r).size);m||(a.getBoundingClientRect?(A=a.getBoundingClientRect(),A=A.width||A.right-A.left):A=l.getMarginBox(a).w);"rtl"==a.dir&&(c+=m?m:A);k.body().removeChild(a);e.position="relative";if(m)switch(e.width=m+"px",q){case "middle":e.textAlign="center";e.left=c-m/2+"px";break;case "end":e.textAlign="right";e.left=c-m+"px";break;default:e.left=c+"px",e.textAlign="left"}else switch(q){case "middle":e.left=
Math.floor(c-A/2)+"px";break;case "end":e.left=Math.floor(c-A)+"px";break;default:e.left=Math.floor(c)+"px"}e.top=Math.floor(h-B)+"px";e.whiteSpace="nowrap";m=k.doc.createElement("div");e=m.style;d(e);e.width="0px";e.height="0px";m.appendChild(a);b.node.insertBefore(m,b.node.firstChild);g("dojo-bidi")&&b.htmlElementsRegistry.push([m,c,h,q,n,r,t]);return m}}})})},"dojox/lang/functional":function(){define(["./functional/lambda","./functional/array","./functional/object"],function(f){return f})},"dojox/lang/functional/lambda":function(){define(["../..",
"dojo/_base/lang","dojo/_base/array"],function(f,k,l){var p=k.getObject("lang.functional",!0,f),g={},c=1<"ab".split(/a*/).length?String.prototype.split:function(a){var b=this.split.call(this,a);(a=a.exec(this))&&0==a.index&&b.unshift("");return b},d=function(a){var b=[],d=c.call(a,/\s*->\s*/m);if(1<d.length)for(;d.length;)a=d.pop(),b=d.pop().split(/\s*,\s*|\s+/m),d.length&&d.push("(function("+b.join(", ")+"){ return ("+a+"); })");else if(a.match(/\b_\b/))b=["_"];else{var d=a.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),
q=a.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(d||q)d&&(b.push("$1"),a="$1"+a),q&&(b.push("$2"),a+="$2");else{var d=a.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],n={};l.forEach(d,
function(a){n.hasOwnProperty(a)||(b.push(a),n[a]=1)})}}return{args:b,body:a}},b=function(a){return a.length?function(){var b=a.length-1,c=p.lambda(a[b]).apply(this,arguments);for(--b;0<=b;--b)c=p.lambda(a[b]).call(this,c);return c}:function(a){return a}};k.mixin(p,{rawLambda:function(a){return d(a)},buildLambda:function(a){a=d(a);return"function("+a.args.join(",")+"){return ("+a.body+");}"},lambda:function(a){if("function"==typeof a)return a;if(a instanceof Array)return b(a);if(g.hasOwnProperty(a))return g[a];
var c=d(a);return g[a]=new Function(c.args,"return ("+c.body+");")},clearLambdaCache:function(){g={}}});return p})},"dojox/lang/functional/array":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","./lambda"],function(f,k,l,p){var g={};k.mixin(p,{filter:function(c,d,b){"string"==typeof c&&(c=c.split(""));b=b||f.global;d=p.lambda(d);var a=[],e,h,q;if(k.isArray(c))for(h=0,q=c.length;h<q;++h)e=c[h],d.call(b,e,h,c)&&a.push(e);else if("function"==typeof c.hasNext&&"function"==
typeof c.next)for(h=0;c.hasNext();)e=c.next(),d.call(b,e,h++,c)&&a.push(e);else for(h in c)h in g||(e=c[h],d.call(b,e,h,c)&&a.push(e));return a},forEach:function(c,d,b){"string"==typeof c&&(c=c.split(""));b=b||f.global;d=p.lambda(d);var a,e;if(k.isArray(c))for(a=0,e=c.length;a<e;d.call(b,c[a],a,c),++a);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(a=0;c.hasNext();d.call(b,c.next(),a++,c));else for(a in c)a in g||d.call(b,c[a],a,c);return b},map:function(c,d,b){"string"==typeof c&&
(c=c.split(""));b=b||f.global;d=p.lambda(d);var a,e,h;if(k.isArray(c))for(a=Array(e=c.length),h=0;h<e;a[h]=d.call(b,c[h],h,c),++h);else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(a=[],h=0;c.hasNext();a.push(d.call(b,c.next(),h++,c)));else for(h in a=[],c)h in g||a.push(d.call(b,c[h],h,c));return a},every:function(c,d,b){"string"==typeof c&&(c=c.split(""));b=b||f.global;d=p.lambda(d);var a,e;if(k.isArray(c))for(a=0,e=c.length;a<e;++a){if(!d.call(b,c[a],a,c))return!1}else if("function"==
typeof c.hasNext&&"function"==typeof c.next)for(a=0;c.hasNext();){if(!d.call(b,c.next(),a++,c))return!1}else for(a in c)if(!(a in g||d.call(b,c[a],a,c)))return!1;return!0},some:function(c,d,b){"string"==typeof c&&(c=c.split(""));b=b||f.global;d=p.lambda(d);var a,e;if(k.isArray(c))for(a=0,e=c.length;a<e;++a){if(d.call(b,c[a],a,c))return!0}else if("function"==typeof c.hasNext&&"function"==typeof c.next)for(a=0;c.hasNext();){if(d.call(b,c.next(),a++,c))return!0}else for(a in c)if(!(a in g)&&d.call(b,
c[a],a,c))return!0;return!1}});return p})},"dojox/lang/functional/object":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(f,k,l){var p={};k.mixin(l,{keys:function(g){var c=[],d;for(d in g)d in p||c.push(d);return c},values:function(g){var c=[],d;for(d in g)d in p||c.push(g[d]);return c},filterIn:function(g,c,d){d=d||f.global;c=l.lambda(c);var b={},a,e;for(e in g)e in p||(a=g[e],c.call(d,a,e,g)&&(b[e]=a));return b},forIn:function(g,c,d){d=d||f.global;c=l.lambda(c);for(var b in g)b in
p||c.call(d,g[b],b,g);return d},mapIn:function(g,c,d){d=d||f.global;c=l.lambda(c);var b={},a;for(a in g)a in p||(b[a]=c.call(d,g[a],a,g));return b}});return l})},"dojox/lang/functional/fold":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(f,k,l,p){var g={};f.mixin(p,{foldl:function(c,d,b,a){"string"==typeof c&&(c=c.split(""));a=a||l.global;d=p.lambda(d);var e,h;if(f.isArray(c))for(e=0,h=c.length;e<h;b=d.call(a,b,c[e],e,c),++e);else if("function"==typeof c.hasNext&&
"function"==typeof c.next)for(e=0;c.hasNext();b=d.call(a,b,c.next(),e++,c));else for(e in c)e in g||(b=d.call(a,b,c[e],e,c));return b},foldl1:function(c,d,b){"string"==typeof c&&(c=c.split(""));b=b||l.global;d=p.lambda(d);var a,e,h;if(f.isArray(c))for(a=c[0],e=1,h=c.length;e<h;a=d.call(b,a,c[e],e,c),++e);else if("function"==typeof c.hasNext&&"function"==typeof c.next){if(c.hasNext())for(a=c.next(),e=1;c.hasNext();a=d.call(b,a,c.next(),e++,c));}else for(e in h=!0,c)e in g||(h?(a=c[e],h=!1):a=d.call(b,
a,c[e],e,c));return a},foldr:function(c,d,b,a){"string"==typeof c&&(c=c.split(""));a=a||l.global;d=p.lambda(d);for(var e=c.length;0<e;--e,b=d.call(a,b,c[e],e,c));return b},foldr1:function(c,d,b){"string"==typeof c&&(c=c.split(""));b=b||l.global;d=p.lambda(d);for(var a=c.length,e=c[a-1],a=a-1;0<a;--a,e=d.call(b,e,c[a],a,c));return e},reduce:function(c,d,b){return 3>arguments.length?p.foldl1(c,d):p.foldl(c,d,b)},reduceRight:function(c,d,b){return 3>arguments.length?p.foldr1(c,d):p.foldr(c,d,b)},unfold:function(c,
d,b,a,e){e=e||l.global;d=p.lambda(d);b=p.lambda(b);c=p.lambda(c);for(var h=[];!c.call(e,a);h.push(d.call(e,a)),a=b.call(e,a));return h}})})},"dojox/lang/functional/reversed":function(){define(["dojo/_base/lang","dojo/_base/kernel","./lambda"],function(f,k,l){f.mixin(l,{filterRev:function(f,g,c){"string"==typeof f&&(f=f.split(""));c=c||k.global;g=l.lambda(g);for(var d=[],b,a=f.length-1;0<=a;--a)b=f[a],g.call(c,b,a,f)&&d.push(b);return d},forEachRev:function(f,g,c){"string"==typeof f&&(f=f.split(""));
c=c||k.global;g=l.lambda(g);for(var d=f.length-1;0<=d;g.call(c,f[d],d,f),--d);},mapRev:function(f,g,c){"string"==typeof f&&(f=f.split(""));c=c||k.global;g=l.lambda(g);for(var d=f.length,b=Array(d),d=d-1,a=0;0<=d;b[a++]=g.call(c,f[d],d,f),--d);return b},everyRev:function(f,g,c){"string"==typeof f&&(f=f.split(""));c=c||k.global;g=l.lambda(g);for(var d=f.length-1;0<=d;--d)if(!g.call(c,f[d],d,f))return!1;return!0},someRev:function(f,g,c){"string"==typeof f&&(f=f.split(""));c=c||k.global;g=l.lambda(g);
for(var d=f.length-1;0<=d;--d)if(g.call(c,f[d],d,f))return!0;return!1}});return l})},"dojox/charting/axis2d/Default":function(){define("dojo/_base/lang dojo/_base/array dojo/sniff dojo/_base/declare dojo/_base/connect dojo/dom-geometry ./Invisible ../scaler/linear ./common dojox/gfx dojox/lang/utils dojox/lang/functional dojo/has!dojo-bidi?../bidi/axis2d/Default".split(" "),function(f,k,l,p,g,c,d,b,a,e,h,q,n){d=p(l("dojo-bidi")?"dojox.charting.axis2d.NonBidiDefault":"dojox.charting.axis2d.Default",
d,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0,majorLabels:!0,minorTicks:!0,minorLabels:!0,microTicks:!1,rotation:0,htmlLabels:!0,enableCache:!1,dropLabels:!0,labelSizeChange:!1,position:"leftOrBottom"},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",
title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(a,b){this.opt=f.clone(this.defaultParams);h.updateWithObject(this.opt,b);h.updateWithPattern(this.opt,b,this.optionalParams);this.opt.enableCache&&(this._textFreePool=[],this._lineFreePool=[],this._textUsePool=[],this._lineUsePool=[]);this._invalidMaxLabelSize=!0;b&&"position"in b||(this.opt.position=this.opt.leftBottom?"leftOrBottom":"rightOrTop");this.renderingOptions={"shape-rendering":"crispEdges"}},setWindow:function(a,
b){a!=this.scale&&(this._invalidMaxLabelSize=!0);return this.inherited(arguments)},_groupLabelWidth:function(a,b,c){if(!a.length)return 0;50<a.length&&(a.length=50);f.isObject(a[0])&&(a=q.map(a,function(a){return a.text}));c&&(a=q.map(a,function(a){return 0==f.trim(a).length?"":a.substring(0,c)+this.trailingSymbol},this));a=a.join("\x3cbr\x3e");return e._base._getTextBox(a,{font:b}).w||0},_getMaxLabelSize:function(a,c,d,e,h,q){if(null==this._maxLabelSize&&6==arguments.length){var m=this.opt;this.scaler.minMinorStep=
this._prevMinMinorStep=0;var t=f.clone(m);delete t.to;delete t.from;var r=b.buildScaler(a,c,d,t,m.to-m.from);r.minMinorStep=0;this._majorStart=r.major.start;m=b.buildTicks(r,m);if(q&&m){var v=r=0,n=function(a){a.label&&this.push(a.label)},g=[];this.opt.majorLabels&&(k.forEach(m.major,n,g),r=this._groupLabelWidth(g,h,t.maxLabelCharCount),t.maxLabelSize&&(r=Math.min(t.maxLabelSize,r)));g=[];this.opt.dropLabels&&this.opt.minorLabels&&(k.forEach(m.minor,n,g),v=this._groupLabelWidth(g,h,t.maxLabelCharCount),
t.maxLabelSize&&(v=Math.min(t.maxLabelSize,v)));this._maxLabelSize={majLabelW:r,minLabelW:v,majLabelH:q,minLabelH:q}}else this._maxLabelSize=null}return this._maxLabelSize},calculate:function(a,c,d){this.inherited(arguments);this.scaler.minMinorStep=this._prevMinMinorStep;if((this._invalidMaxLabelSize||d!=this._oldSpan)&&Infinity!=a&&-Infinity!=c){this._invalidMaxLabelSize=!1;this.opt.labelSizeChange&&(this._maxLabelSize=null);this._oldSpan=d;var m=this.opt,t=this.chart.theme.axis,r=m.rotation%360,
h=this.chart.theme.axis.tick.labelGap,u=m.font||t.majorTick&&t.majorTick.font||t.tick&&t.tick.font,t=u?e.normalizedLength(e.splitFontString(u).size):0,u=this._getMaxLabelSize(a,c,d,r,u,t);"number"!=typeof h&&(h=4);if(u&&m.dropLabels){var m=Math.abs(Math.cos(r*Math.PI/180)),q=Math.abs(Math.sin(r*Math.PI/180));0>r&&(r+=360);switch(r){case 0:case 180:this.vertical?r=t:(r=u.majLabelW,t=u.minLabelW);break;case 90:case 270:this.vertical?(r=u.majLabelW,t=u.minLabelW):r=t;break;default:r=this.vertical?Math.min(u.majLabelW,
t/m):Math.min(u.majLabelW,t/q),t=Math.min(Math.sqrt(u.minLabelW*u.minLabelW+t*t),this.vertical?t*m+u.minLabelW*q:u.minLabelW*m+t*q)}this.scaler.minMinorStep=this._prevMinMinorStep=Math.max(r,t)+h;this._skipInterval=this.scaler.minMinorStep<=this.scaler.minor.tick*this.scaler.bounds.scale?0:Math.floor((r+h)/(this.scaler.major.tick*this.scaler.bounds.scale))}else this._skipInterval=0}this.ticks=b.buildTicks(this.scaler,this.opt);return this},getOffsets:function(){var a={l:0,r:0,t:0,b:0};if(!this.scaler)return a;
var b=this.opt,c=this.chart.theme.axis,d=this.chart.theme.axis.tick.labelGap,h=b.titleFont||c.title&&c.title.font,c=0==b.titleGap?0:b.titleGap||c.title&&c.title.gap,q=this.chart.theme.getTick("major",b),n=this.chart.theme.getTick("minor",b),h=h?e.normalizedLength(e.splitFontString(h).size):0,u=b.rotation%360,g=b.position,f="rightOrTop"!==g,l=Math.abs(Math.cos(u*Math.PI/180)),k=Math.abs(Math.sin(u*Math.PI/180));this.trailingSymbol=void 0===b.trailingSymbol||null===b.trailingSymbol?this.trailingSymbol:
b.trailingSymbol;"number"!=typeof d&&(d=4);0>u&&(u+=360);var p=this._getMaxLabelSize();if(p){var w=Math.ceil(Math.max(p.majLabelW,p.minLabelW))+1,x=Math.ceil(Math.max(p.majLabelH,p.minLabelH))+1;if(this.vertical)switch(p=f?"l":"r",u){case 0:case 180:a[p]="center"===g?0:w;a.t=a.b=x/2;break;case 90:case 270:a[p]=x;a.t=a.b=w/2;break;default:45>=u||180<u&&225>=u?(a[p]=x*k/2+w*l,a[f?"t":"b"]=x*l/2+w*k,a[f?"b":"t"]=x*l/2):315<u||180>u&&135<u?(a[p]=x*k/2+w*l,a[f?"b":"t"]=x*l/2+w*k,a[f?"t":"b"]=x*l/2):90>
u||180<u&&270>u?(a[p]=x*k+w*l,a[f?"t":"b"]=x*l+w*k):(a[p]=x*k+w*l,a[f?"b":"t"]=x*l+w*k)}else switch(p=f?"b":"t",u){case 0:case 180:a[p]="center"===g?0:x;a.l=a.r=w/2;break;case 90:case 270:a[p]=w;a.l=a.r=x/2;break;default:45<=u&&90>=u||225<=u&&270>=u?(a[p]=x*l/2+w*k,a[f?"r":"l"]=x*k/2+w*l,a[f?"l":"r"]=x*k/2):90<=u&&135>=u||270<=u&&315>=u?(a[p]=x*l/2+w*k,a[f?"l":"r"]=x*k/2+w*l,a[f?"r":"l"]=x*k/2):45>u||180<u&&225>u?(a[p]=x*l+w*k,a[f?"r":"l"]=x*k+w*l):(a[p]=x*l+w*k,a[f?"l":"r"]=x*k+w*l)}a[p]="center"===
g?0:a[p]+(d+Math.max(0<q.length?q.length:0,0<n.length?n.length:0)+(b.title?h+c:0))}return a},cleanGroup:function(a){this.opt.enableCache&&this.group&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._textFreePool=this._textFreePool.concat(this._textUsePool),this._textUsePool=[]);this.inherited(arguments)},createText:function(b,c,d,e,h,q,n,u,f){if(!this.opt.enableCache||"html"==b)return a.createText[b](this.chart,c,d,e,h,q,n,u,f);0<this._textFreePool.length?
(b=this._textFreePool.pop(),b.setShape({x:d,y:e,text:q,align:h}),c.add(b)):b=a.createText[b](this.chart,c,d,e,h,q,n,u);this._textUsePool.push(b);return b},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(c);return c},render:function(c,d){var m,h,t,r,q,u,n,f,g,p,D,w,x,S,F=this._isRtl();if(!this.dirty||!this.scaler)return this;var E=this.opt;g=this.chart.theme.axis;
var G=E.position,M="rightOrTop"!==G,y=E.rotation%360,N=0,z,C,N=this.chart.theme.axis.tick.labelGap,P=E.font||g.majorTick&&g.majorTick.font||g.tick&&g.tick.font,K=E.titleFont||g.title&&g.title.font,H=E.fontColor||g.majorTick&&g.majorTick.fontColor||g.tick&&g.tick.fontColor||"black",T=E.titleFontColor||g.title&&g.title.fontColor||"black";q=0==E.titleGap?0:E.titleGap||g.title&&g.title.gap||15;var R=E.titleOrientation||g.title&&g.title.orientation||"axis",X=this.chart.theme.getTick("major",E),W=this.chart.theme.getTick("minor",
E),aa=this.chart.theme.getTick("micro",E),ga="stroke"in E?E.stroke:g.stroke,V=P?e.normalizedLength(e.splitFontString(P).size):0;u=Math.abs(Math.cos(y*Math.PI/180));z=Math.abs(Math.sin(y*Math.PI/180));var da=K?e.normalizedLength(e.splitFontString(K).size):0;"number"!=typeof N&&(N=4);0>y&&(y+=360);var ca=this._getMaxLabelSize(),ca=ca&&ca.majLabelW;if(this.vertical){x=c.height-d.b;S=void 0;D=d.t;w=void 0;g=(c.height-d.b+d.t)/2;p=void 0;z=V*z+(ca||0)*u+N+Math.max(0<X.length?X.length:0,0<W.length?W.length:
0)+da+q;n=0;f=-1;h=m=0;q=1;u=0;t=N;r=0;switch(y){case 0:C="end";h=.4*V;break;case 90:C="middle";m=-V;break;case 180:C="start";h=.4*-V;break;case 270:C="middle";break;default:45>y?(C="end",h=.4*V):90>y?(C="end",h=.4*V):135>y?C="start":225>y?(C="start",h=.4*-V):270>y?(C="start",m=M?0:.4*V):315>y?(C="end",m=M?0:.4*V):(C="end",h=.4*V)}if(M)S=w="center"===G?c.width/2:d.l,N=R&&"away"==R?90:270,p=d.l-z+(270==N?da:0),q=-1,t=-t;else switch(S=w=c.width-d.r,N=R&&"axis"==R?90:270,p=c.width-d.r+z-(270==N?0:da),
C){case "start":C="end";break;case "end":C="start";break;case "middle":m+=V}}else{S=d.l;x=void 0;w=c.width-d.r;D=void 0;p=(c.width-d.r+d.l)/2;g=void 0;z=V*u+(ca||0)*z+N+Math.max(0<X.length?X.length:0,0<W.length?W.length:0)+da+q;n=F?-1:1;q=h=m=f=0;u=1;t=0;r=N;switch(y){case 0:C="middle";h=V;break;case 90:C="start";m=.4*-V;break;case 180:C="middle";break;case 270:C="end";m=.4*V;break;default:45>y?(C="start",h=M?V:0):135>y?(C="start",m=.4*-V):180>y?(C="start",h=M?0:-V):225>y?(C="end",h=M?0:-V):315>y?
(C="end",h=M?.4*V:0):(C="end",h=M?V:0)}if(M)x=D="center"===G?c.height/2:c.height-d.b,N=R&&"axis"==R?180:0,g=c.height-d.b+z-(N?da:0);else switch(x=D=d.t,N=R&&"away"==R?180:0,g=d.t-z+(N?0:da),u=-1,r=-r,C){case "start":C="end";break;case "end":C="start";break;case "middle":h-=V}}this.cleanGroup();var U=this.group;c=this.scaler;d=this.ticks;var ea=b.getTransformerFromModel(this.scaler),Z=E.title&&N||y||!this.opt.htmlLabels||l("ie")||l("opera")?"gfx":"html",Y=q*X.length,ba=u*X.length,fa=this._skipInterval;
U.createLine({x1:S,y1:x,x2:w,y2:D}).setStroke(ga);E.title&&(K=a.createText[Z](this.chart,U,p,g,"middle",E.title,K,T),"html"==Z?this.htmlElements.push(K):K.setTransform(e.matrix.rotategAt(N,p,g)));if(null==d)return this.dirty=!1,this;var ia=0<d.major.length?(d.major[0].value-this._majorStart)/c.major.tick:0,ha=this.opt.majorLabels;k.forEach(d.major,function(a,b){var c=ea(a.value),d=(F?w:S)+n*c,c=x+f*c;b+=ia;this.createLine(U,{x1:d,y1:c,x2:d+Y,y2:c+ba}).setStroke(X);if(a.label&&(!fa||0==(b-(1+fa))%
(1+fa))){var u=E.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,P,E.maxLabelCharCount):{text:a.label,truncated:!1},u=E.maxLabelSize?this.getTextWithLimitLength(u.text,P,E.maxLabelSize,u.truncated):u;b=this.createText(Z,U,d+(0<X.length?Y:0)+t+(y?0:m),c+(0<X.length?ba:0)+r+(y?0:h),C,u.text,P,H);u.truncated&&this.chart.formatTruncatedLabel(b,a.label,Z);u.truncated&&this.labelTooltip(b,this.chart,a.label,u.text,P,Z);"html"==Z?this.htmlElements.push(b):y&&b.setTransform([{dx:m,dy:h},e.matrix.rotategAt(y,
d+(0<X.length?Y:0)+t,c+(0<X.length?ba:0)+r)])}},this);Y=q*W.length;ba=u*W.length;ha=this.opt.minorLabels&&c.minMinorStep<=c.minor.tick*c.bounds.scale;k.forEach(d.minor,function(a){var b=ea(a.value),c=(F?w:S)+n*b,d=x+f*b;this.createLine(U,{x1:c,y1:d,x2:c+Y,y2:d+ba}).setStroke(W);if(ha&&a.label){var u=E.maxLabelCharCount?this.getTextWithLimitCharCount(a.label,P,E.maxLabelCharCount):{text:a.label,truncated:!1},u=E.maxLabelSize?this.getTextWithLimitLength(u.text,P,E.maxLabelSize,u.truncated):u,b=this.createText(Z,
U,c+(0<W.length?Y:0)+t+(y?0:m),d+(0<W.length?ba:0)+r+(y?0:h),C,u.text,P,H);u.truncated&&this.chart.formatTruncatedLabel(b,a.label,Z);u.truncated&&this.labelTooltip(b,this.chart,a.label,u.text,P,Z);"html"==Z?this.htmlElements.push(b):y&&b.setTransform([{dx:m,dy:h},e.matrix.rotategAt(y,c+(0<W.length?Y:0)+t,d+(0<W.length?ba:0)+r)])}},this);Y=q*aa.length;ba=u*aa.length;k.forEach(d.micro,function(a){var b=ea(a.value);a=S+n*b;b=x+f*b;this.createLine(U,{x1:a,y1:b,x2:a+Y,y2:b+ba}).setStroke(aa)},this);this.dirty=
!1;return this},labelTooltip:function(a,b,d,h,q,n){var m=["dijit/Tooltip"],t={type:"rect"},r=["above","below"];h=e._base._getTextBox(h,{font:q}).w||0;q=q?e.normalizedLength(e.splitFontString(q).size):0;"html"==n?(f.mixin(t,c.position(a.firstChild,!0)),t.width=Math.ceil(h),t.height=Math.ceil(q),this._events.push({shape:dojo,handle:g.connect(a.firstChild,"onmouseover",this,function(a){require(m,function(a){a.show(d,t,r)})})}),this._events.push({shape:dojo,handle:g.connect(a.firstChild,"onmouseout",
this,function(a){require(m,function(a){a.hide(t)})})})):(n=a.getShape(),b=b.getCoords(),t=f.mixin(t,{x:n.x-h/2,y:n.y}),t.x+=b.x,t.y+=b.y,t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=Math.ceil(h),t.height=Math.ceil(q),this._events.push({shape:a,handle:a.connect("onmouseenter",this,function(a){require(m,function(a){a.show(d,t,r)})})}),this._events.push({shape:a,handle:a.connect("onmouseleave",this,function(a){require(m,function(a){a.hide(t)})})}))},_isRtl:function(){return!1}});return l("dojo-bidi")?
p("dojox.charting.axis2d.Default",[d,n]):d})},"dojox/charting/axis2d/Invisible":function(){define(["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/lang/utils"],function(f,k,l,p,g){return k("dojox.charting.axis2d.Invisible",l,{defaultParams:{vertical:!1,fixUpper:"none",fixLower:"none",natural:!1,leftBottom:!0,includeZero:!1,fixed:!0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1},constructor:function(c,d){this.opt=f.clone(this.defaultParams);
g.updateWithObject(this.opt,d);g.updateWithPattern(this.opt,d,this.optionalParams)},dependOnData:function(){return!("min"in this.opt)||!("max"in this.opt)},clear:function(){delete this.scaler;delete this.ticks;this.dirty=!0;return this},initialized:function(){return"scaler"in this&&!(this.dirty&&this.dependOnData())},setWindow:function(c,d){this.scale=c;this.offset=d;return this.clear()},getWindowScale:function(){return"scale"in this?this.scale:1},getWindowOffset:function(){return"offset"in this?
this.offset:0},calculate:function(c,d,b,a){if(this.initialized())return this;var e=this.opt;this.labels=e.labels;this.scaler=(a||p).buildScaler(c,d,b,e);var h=this.scaler.bounds;"scale"in this&&(e.from=h.lower+this.offset,e.to=(h.upper-h.lower)/this.scale+e.from,!isFinite(e.from)||isNaN(e.from)||!isFinite(e.to)||isNaN(e.to)||e.to-e.from>=h.upper-h.lower?(delete e.from,delete e.to,delete this.scale,delete this.offset):(e.from<h.lower?(e.to+=h.lower-e.from,e.from=h.lower):e.to>h.upper&&(e.from+=h.upper-
e.to,e.to=h.upper),this.offset=e.from-h.lower),this.scaler=(a||p).buildScaler(c,d,b,e),h=this.scaler.bounds,1==this.scale&&0==this.offset&&(delete this.scale,delete this.offset));return this},getScaler:function(){return this.scaler},getTicks:function(){return this.ticks}})})},"dojox/charting/axis2d/Base":function(){define(["dojo/_base/declare","../Element"],function(f,k){return f("dojox.charting.axis2d.Base",k,{constructor:function(f,p){this.vertical=p&&p.vertical;this.opt={};this.opt.min=p&&p.min;
this.opt.max=p&&p.max},clear:function(){return this},initialized:function(){return!1},calculate:function(f,p,g){return this},getScaler:function(){return null},getTicks:function(){return null},getOffsets:function(){return{l:0,r:0,t:0,b:0}},render:function(f,p){this.dirty=!1;return this},isNullValue:function(f){return!1},naturalBaseline:0})})},"dojox/charting/scaler/linear":function(){define(["dojo/_base/lang","./common"],function(f,k){function l(c,b){c=c.toLowerCase();for(var a=b.length-1;0<=a;--a)if(c===
b[a])return!0;return!1}var p=f.getObject("dojox.charting.scaler.linear",!0),g=k.getNumericLabel,c=function(c,b,a,e,h,q,n){a=f.delegate(a);e||("major"==a.fixUpper&&(a.fixUpper="minor"),"major"==a.fixLower&&(a.fixLower="minor"));h||("minor"==a.fixUpper&&(a.fixUpper="micro"),"minor"==a.fixLower&&(a.fixLower="micro"));q||("micro"==a.fixUpper&&(a.fixUpper="none"),"micro"==a.fixLower&&(a.fixLower="none"));var d=l(a.fixLower,["major"])?Math.floor(a.min/e)*e:l(a.fixLower,["minor"])?Math.floor(a.min/h)*h:
l(a.fixLower,["micro"])?Math.floor(a.min/q)*q:a.min,t=l(a.fixUpper,["major"])?Math.ceil(a.max/e)*e:l(a.fixUpper,["minor"])?Math.ceil(a.max/h)*h:l(a.fixUpper,["micro"])?Math.ceil(a.max/q)*q:a.max;a.useMin&&(c=d);a.useMax&&(b=t);var m=!e||a.useMin&&l(a.fixLower,["major"])?c:Math.ceil(c/e)*e,v=!h||a.useMin&&l(a.fixLower,["major","minor"])?c:Math.ceil(c/h)*h,g=!q||a.useMin&&l(a.fixLower,["major","minor","micro"])?c:Math.ceil(c/q)*q,B=e?(a.useMax&&l(a.fixUpper,["major"])?Math.round((b-m)/e):Math.floor((b-
m)/e))+1:0,J=h?(a.useMax&&l(a.fixUpper,["major","minor"])?Math.round((b-v)/h):Math.floor((b-v)/h))+1:0;a=q?(a.useMax&&l(a.fixUpper,["major","minor","micro"])?Math.round((b-g)/q):Math.floor((b-g)/q))+1:0;var u=h?Math.round(e/h):0,Q=q?Math.round(h/q):0,k=e?Math.floor(Math.log(e)/Math.LN10):0,O=h?Math.floor(Math.log(h)/Math.LN10):0,I=n/(b-c);isFinite(I)||(I=1);return{bounds:{lower:d,upper:t,from:c,to:b,scale:I,span:n},major:{tick:e,start:m,count:B,prec:k},minor:{tick:h,start:v,count:J,prec:O},micro:{tick:q,
start:g,count:a,prec:0},minorPerMajor:u,microPerMinor:Q,scaler:p}};return f.mixin(p,{buildScaler:function(d,b,a,e,h,q){var n={fixUpper:"none",fixLower:"none",natural:!1};e&&("fixUpper"in e&&(n.fixUpper=String(e.fixUpper)),"fixLower"in e&&(n.fixLower=String(e.fixLower)),"natural"in e&&(n.natural=!!e.natural));q=!q||3>q?3:q;"min"in e&&(d=e.min);"max"in e&&(b=e.max);e.includeZero&&(0<d&&(d=0),0>b&&(b=0));n.min=d;n.useMin=!0;n.max=b;n.useMax=!0;"from"in e&&(d=e.from,n.useMin=!1);"to"in e&&(b=e.to,n.useMax=
!1);if(b<=d)return c(d,b,n,0,0,0,a);h||(h=b-d);h=Math.floor(Math.log(h)/Math.LN10);h=e&&"majorTickStep"in e?e.majorTickStep:Math.pow(10,h);var r=0,t=0,m;if(e&&"minorTickStep"in e)r=e.minorTickStep;else{do{r=h/10;if(!n.natural||.9<r)if(m=c(d,b,n,h,r,0,a),m.bounds.scale*m.minor.tick>q)break;r=h/5;if(!n.natural||.9<r)if(m=c(d,b,n,h,r,0,a),m.bounds.scale*m.minor.tick>q)break;r=h/2;if(!n.natural||.9<r)if(m=c(d,b,n,h,r,0,a),m.bounds.scale*m.minor.tick>q)break;return c(d,b,n,h,0,0,a)}while(0)}if(e&&"microTickStep"in
e)t=e.microTickStep,m=c(d,b,n,h,r,t,a);else{do{t=r/10;if(!n.natural||.9<t)if(m=c(d,b,n,h,r,t,a),3<m.bounds.scale*m.micro.tick)break;t=r/5;if(!n.natural||.9<t)if(m=c(d,b,n,h,r,t,a),3<m.bounds.scale*m.micro.tick)break;t=r/2;if(!n.natural||.9<t)if(m=c(d,b,n,h,r,t,a),3<m.bounds.scale*m.micro.tick)break;t=0}while(0)}return t?m:c(d,b,n,h,r,0,a)},buildTicks:function(c,b){var a,d,h,q=c.major.start,n=c.minor.start,r=c.micro.start;if(b.microTicks&&c.micro.tick)a=c.micro.tick,d=r;else if(b.minorTicks&&c.minor.tick)a=
c.minor.tick,d=n;else if(c.major.tick)a=c.major.tick,d=q;else return null;var t=1/c.bounds.scale;if(c.bounds.to<=c.bounds.from||isNaN(t)||!isFinite(t)||0>=a||isNaN(a)||!isFinite(a))return null;for(var m=[],v=[],f=[];d<=c.bounds.to+t;)Math.abs(q-d)<a/2?(h={value:q},b.majorLabels&&(h.label=g(q,c.major.prec,b)),m.push(h),q+=c.major.tick,n+=c.minor.tick):Math.abs(n-d)<a/2?(b.minorTicks&&(h={value:n},b.minorLabels&&c.minMinorStep<=c.minor.tick*c.bounds.scale&&(h.label=g(n,c.minor.prec,b)),v.push(h)),n+=
c.minor.tick):b.microTicks&&f.push({value:r}),r+=c.micro.tick,d+=a;return{major:m,minor:v,micro:f}},getTransformerFromModel:function(c){var b=c.bounds.from,a=c.bounds.scale;return function(c){return(c-b)*a}},getTransformerFromPlot:function(c){var b=c.bounds.from,a=c.bounds.scale;return function(c){return c/a+b}}})})},"dojox/charting/scaler/common":function(){define(["dojo/_base/lang"],function(f){var k=function(g,c){return Math.abs(g-c)<=1E-6*(Math.abs(g)+Math.abs(c))},l=f.getObject("dojox.charting.scaler.common",
!0),p={};return f.mixin(l,{doIfLoaded:function(g,c,d){if(void 0===p[g])try{p[g]=require(g)}catch(b){p[g]=null}return p[g]?c(p[g]):d()},getNumericLabel:function(g,c,d){var b="";l.doIfLoaded("dojo/number",function(a){b=(d.fixed?a.format(g,{places:0>c?-c:0}):a.format(g))||""},function(){b=d.fixed?g.toFixed(0>c?-c:0):g.toString()});if(d.labelFunc){var a=d.labelFunc(b,g,c);if(a)return a}if(d.labels){for(var a=d.labels,e=0,h=a.length;e<h;){var q=Math.floor((e+h)/2);a[q].value<g?e=q+1:h=q}if(e<a.length&&
k(a[e].value,g))return a[e].text;--e;if(0<=e&&e<a.length&&k(a[e].value,g))return a[e].text;e+=2;if(e<a.length&&k(a[e].value,g))return a[e].text}return b}})})},"dojox/charting/plot2d/Default":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(f,k,l,p,g,c,d,b,a,e,h){var q=a.lambda("item.purgeGroup()");return k("dojox.charting.plot2d.Default",
[g,c],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",zeroLine:0},constructor:function(a,b){this.opt=f.clone(f.mixin(this.opt,this.defaultParams));e.updateWithObject(this.opt,b);e.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate},
createPath:function(a,b,c){var d;this.opt.enableCache&&0<a._pathFreePool.length?(d=a._pathFreePool.pop(),d.setShape(c),b.add(d)):d=b.createPath(c);this.opt.enableCache&&a._pathUsePool.push(d);return d},buildSegments:function(a,b){a=this.series[a];for(var c=b?Math.min(a.data.length,Math.ceil(this._hScaler.bounds.to)):a.data.length,d=null,e=[],h=b?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0;h<c;h++)if(!this.isNullValue(a.data[h]))d||(d=[],e.push({index:h,rseg:d})),d.push(b&&a.data[h].hasOwnProperty("y")?
a.data[h].y:a.data[h]);else if(!this.opt.interpolate||b)d=null;return e},render:function(a,c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents();this.dirty=this.isDirty();var e;this.dirty&&(l.forEach(this.series,q),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),e=this.getGroup(),b.forEachRev(this.series,function(a){a.cleanGroup(e)}));for(var m=this.chart.theme,r,n,g=this.events(),J=0;J<this.series.length;J++){var u=this.series[J];if(this.dirty||
u.dirty)if(u.cleanGroup(),this.opt.enableCache&&(u._pathFreePool=(u._pathFreePool?u._pathFreePool:[]).concat(u._pathUsePool?u._pathUsePool:[]),u._pathUsePool=[]),u.data.length){var Q=m.next(this.opt.areas?"area":"line",[this.opt,u],!0),k,O=this._hScaler.scaler.getTransformerFromModel(this._hScaler),I=this._vScaler.scaler.getTransformerFromModel(this._vScaler),D=this._eventSeries[u.name]=Array(u.data.length);e=u.group;if(u.hidden){this.opt.lines&&(u.dyn.stroke=Q.series.stroke);if(u.markers||void 0===
u.markers&&this.opt.markers)u.dyn.markerFill=Q.marker.fill,u.dyn.markerStroke=Q.marker.stroke,u.dyn.marker=Q.symbol;this.opt.areas&&(u.dyn.fill=Q.series.fill)}else{for(var w=l.some(u.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),x=this.buildSegments(J,w),S=0;S<x.length;S++){var F=x[S];k=w?l.map(F.rseg,function(b,d){return{x:O(d+F.index+1)+c.l,y:a.height-c.b-I(b),data:b}},this):l.map(F.rseg,function(b){return{x:O(b.x)+c.l,y:a.height-c.b-I(b.y),data:b}},this);if(w&&this.opt.interpolate)for(;S<
x.length;)S++,(F=x[S])&&(k=k.concat(l.map(F.rseg,function(b,d){return{x:O(d+F.index+1)+c.l,y:a.height-c.b-I(b),data:b}},this)));var E=this.opt.tension?d.curve(k,this.opt.tension):"";if(this.opt.areas&&1<k.length){var G=this._plotFill(Q.series.fill,a,c),M=f.clone(k),y=a.height-c.b;isNaN(this.opt.zeroLine)||(y=Math.max(c.t,Math.min(a.height-c.b-I(this.opt.zeroLine),y)));this.opt.tension?u.dyn.fill=e.createPath(E+" "+("L"+M[M.length-1].x+","+y+" L"+M[0].x+","+y+" L"+M[0].x+","+M[0].y)).setFill(G).getFill():
(M.push({x:k[k.length-1].x,y:y}),M.push({x:k[0].x,y:y}),M.push(k[0]),u.dyn.fill=e.createPolyline(M).setFill(G).getFill())}if(this.opt.lines||this.opt.markers)r=Q.series.stroke,Q.series.outline&&(n=u.dyn.outline=d.makeStroke(Q.series.outline),n.width=2*n.width+(r&&r.width||0));this.opt.markers&&(u.dyn.marker=Q.symbol);var N=null,z=null,C=null;if(r&&Q.series.shadow&&1<k.length){var P=Q.series.shadow,G=l.map(k,function(a){return{x:a.x+P.dx,y:a.y+P.dy}});this.opt.lines&&(u.dyn.shadow=this.opt.tension?
e.createPath(d.curve(G,this.opt.tension)).setStroke(P).getStroke():e.createPolyline(G).setStroke(P).getStroke());this.opt.markers&&Q.marker.shadow&&(P=Q.marker.shadow,C=l.map(G,function(a){return this.createPath(u,e,"M"+a.x+" "+a.y+" "+Q.symbol).setStroke(P).setFill(P.color)},this))}if(this.opt.lines&&1<k.length){var K;n&&(u.dyn.outline=this.opt.tension?e.createPath(E).setStroke(n).getStroke():e.createPolyline(k).setStroke(n).getStroke());u.dyn.stroke=this.opt.tension?(K=e.createPath(E)).setStroke(r).getStroke():
(K=e.createPolyline(k)).setStroke(r).getStroke();K.setFilter&&Q.series.filter&&K.setFilter(Q.series.filter)}E=null;if(this.opt.markers){var H=Q,N=Array(k.length),z=Array(k.length);n=null;H.marker.outline&&(n=d.makeStroke(H.marker.outline),n.width=2*n.width+(H.marker.stroke?H.marker.stroke.width:0));l.forEach(k,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var c="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&c.push(this.opt.styleFunc(a.data));H=m.addMixin(Q,"marker",c,!0)}else H=
m.post(Q,"marker");a="M"+a.x+" "+a.y+" "+H.symbol;n&&(z[b]=this.createPath(u,e,a).setStroke(n));N[b]=this.createPath(u,e,a).setStroke(H.marker.stroke).setFill(H.marker.fill)},this);u.dyn.markerFill=H.marker.fill;u.dyn.markerStroke=H.marker.stroke;!E&&this.opt.labels&&(E=N[0].getBoundingBox());g?l.forEach(N,function(a,b){a={element:"marker",index:b+F.index,run:u,shape:a,outline:z[b]||null,shadow:C&&C[b]||null,cx:k[b].x,cy:k[b].y};w?(a.x=b+F.index+1,a.y=u.data[b+F.index]):(a.x=F.rseg[b].x,a.y=u.data[b+
F.index].y);this._connectEvents(a);D[b+F.index]=a},this):delete this._eventSeries[u.name]}if(this.opt.labels){var T=E?E.width:2,R=E?E.height:2;l.forEach(k,function(a,b){if(this.opt.styleFunc||"number"!=typeof a.data){var c="number"!=typeof a.data?[a.data]:[];this.opt.styleFunc&&c.push(this.opt.styleFunc(a.data));H=m.addMixin(Q,"marker",c,!0)}else H=m.post(Q,"marker");this.createLabel(e,F.rseg[b],{x:a.x-T/2,y:a.y-R/2,width:T,height:R},H)},this)}}u.dirty=!1}}else u.dirty=!1,m.skip();else m.skip(),this._reconnectEvents(u.name)}p("dojo-bidi")&&
this._checkOrientation(this.group,a,c);this.animate&&(r=this.getGroup(),h.animateTransform(f.delegate({shape:r,duration:1200,transform:[{name:"translate",start:[0,a.height-c.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play());this.dirty=!1;return this}})})},"dojox/charting/plot2d/CartesianBase":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/has ./Base ../scaler/primitive dojox/gfx dojox/gfx/fx dojox/lang/utils".split(" "),function(f,
k,l,p,g,c,d,b,a){var e=function(){return!1};return k("dojox.charting.plot2d.CartesianBase",g,{baseParams:{hAxis:"x",vAxis:"y",labels:!1,labelOffset:10,fixed:!0,precision:1,labelStyle:"inside",htmlLabels:!0,omitLabels:!0,labelFunc:null},constructor:function(b,c){this.axes=["hAxis","vAxis"];this.zoom=null;this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};this.hAxis=c&&c.hAxis||"x";this.vAxis=c&&c.vAxis||"y";this.series=[];this.opt=f.clone(this.baseParams);a.updateWithObject(this.opt,
c)},clear:function(){this.inherited(arguments);this._vAxis=this._hAxis=null;return this},cleanGroup:function(a,b){this.inherited(arguments);if(!b&&this.chart._nativeClip){var c=this.chart.offsets,d=this.chart.dim;this.group.setClip({x:c.l,y:c.t,width:Math.max(0,d.width-c.l-c.r),height:Math.max(0,d.height-c.t-c.b)});this._clippedGroup||(this._clippedGroup=this.group.createGroup())}},purgeGroup:function(){this.inherited(arguments);this._clippedGroup=null},getGroup:function(){return this._clippedGroup||
this.group},setAxis:function(a){a&&(this[a.vertical?"_vAxis":"_hAxis"]=a);return this},toPage:function(a){var b=this._hAxis,c=this._vAxis,d=b.getScaler(),e=c.getScaler(),m=d.scaler.getTransformerFromModel(d),h=e.scaler.getTransformerFromModel(e),g=this.chart.getCoords(),f=this.chart.offsets,J=this.chart.dim,d=function(a){var d={};d.x=m(a[b.name])+g.x+f.l;d.y=g.y+J.height-f.b-h(a[c.name]);return d};return a?d(a):d},toData:function(a){var b=this._hAxis,c=this._vAxis,d=b.getScaler(),e=c.getScaler(),
m=d.scaler.getTransformerFromPlot(d),h=e.scaler.getTransformerFromPlot(e),g=this.chart.getCoords(),f=this.chart.offsets,J=this.chart.dim,d=function(a){var d={};d[b.name]=m(a.x-g.x-f.l);d[c.name]=h(g.y+J.height-a.y-f.b);return d};return a?d(a):d},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty},createLabel:function(a,b,c,e){if(this.opt.labels){var h,m=this.opt.labelFunc?this.opt.labelFunc.apply(this,[b,this.opt.fixed,this.opt.precision]):this._getLabel(isNaN(b.y)?
b:b.y);if("inside"==this.opt.labelStyle){var r=d._base._getTextBox(m,{font:e.series.font});b=c.x+c.width/2;h=c.y+c.height/2+r.h/4;if(r.w>c.width||r.h>c.height)return}else b=c.x+c.width/2,h=c.y-this.opt.labelOffset;this.renderLabel(a,b,h,m,e,"inside"==this.opt.labelStyle)}},performZoom:function(a,c){var d=this._vAxis.scale||1,e=this._hAxis.scale||1;a=a.height-c.b;var h=this._hScaler.bounds,h=(h.from-h.lower)*h.scale,m=this._vScaler.bounds,m=(m.from-m.lower)*m.scale,q=d/this.lastWindow.vscale,g=e/this.lastWindow.hscale,
B=(this.lastWindow.xoffset-h)/(1==this.lastWindow.hscale?e:this.lastWindow.hscale),J=(m-this.lastWindow.yoffset)/(1==this.lastWindow.vscale?d:this.lastWindow.vscale),u=this.getGroup();c=b.animateTransform(f.delegate({shape:u,duration:1200,transform:[{name:"translate",start:[0,0],end:[c.l*(1-g),a*(1-q)]},{name:"scale",start:[1,1],end:[g,q]},{name:"original"},{name:"translate",start:[0,0],end:[B,J]}]},this.zoom));f.mixin(this.lastWindow,{vscale:d,hscale:e,xoffset:h,yoffset:m});this.zoomQueue.push(c);
l.connect(c,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();0<this.zoomQueue.length&&this.zoomQueue[0].play()});1==this.zoomQueue.length&&this.zoomQueue[0].play();return this},initializeScalers:function(a,b){this._hAxis?(this._hAxis.initialized()||this._hAxis.calculate(b.hmin,b.hmax,a.width),this._hScaler=this._hAxis.getScaler()):this._hScaler=c.buildScaler(b.hmin,b.hmax,a.width);this._vAxis?(this._vAxis.initialized()||this._vAxis.calculate(b.vmin,b.vmax,a.height),this._vScaler=this._vAxis.getScaler()):
this._vScaler=c.buildScaler(b.vmin,b.vmax,a.height);return this},isNullValue:function(a){if(null===a||"undefined"==typeof a)return!0;var b=this._hAxis?this._hAxis.isNullValue:e,c=this._vAxis?this._vAxis.isNullValue:e;return"number"==typeof a?b(1)||c(a):b(isNaN(a.x)?1:a.x)||null===a.y||c(a.y)}})})},"dojox/charting/plot2d/Base":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojox/gfx ../Element ./common ../axis2d/common dojo/has".split(" "),function(f,k,l,p,g,c,d,b){f=f("dojox.charting.plot2d.Base",
g,{constructor:function(a,b){b&&b.tooltipFunc&&(this.tooltipFunc=b.tooltipFunc)},clear:function(){this.series=[];this.dirty=!0;return this},setAxis:function(a){return this},assignAxes:function(a){k.forEach(this.axes,function(b){this[b]&&this.setAxis(a[this[b]])},this)},addSeries:function(a){this.series.push(a);return this},getSeriesStats:function(){return c.collectSimpleStats(this.series,l.hitch(this,"isNullValue"))},calculateAxes:function(a){this.initializeScalers(a,this.getSeriesStats());return this},
initializeScalers:function(){return this},isDataDirty:function(){return k.some(this.series,function(a){return a.dirty})},render:function(a,b){return this},renderLabel:function(a,b,c,q,g,r,t){a=d.createText[this.opt.htmlLabels&&"vml"!=p.renderer?"html":"gfx"](this.chart,a,b,c,t?t:"middle",q,g.series.font,g.series.fontColor);r&&(this.opt.htmlLabels&&"vml"!=p.renderer?a.style.pointerEvents="none":a.rawNode&&(a.rawNode.style.pointerEvents="none"));this.opt.htmlLabels&&"vml"!=p.renderer&&this.htmlElements.push(a);
return a},getRequiredColors:function(){return this.series.length},_getLabel:function(a){return c.getLabel(a,this.opt.fixed,this.opt.precision)}});b("dojo-bidi")&&f.extend({_checkOrientation:function(a,b,c){this.chart.applyMirroring(this.group,b,c)}});return f})},"dojox/charting/plot2d/common":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),function(f,k,l,p,g,c){var d=f.getObject("dojox.charting.plot2d.common",!0);return f.mixin(d,
{doIfLoaded:c.doIfLoaded,makeStroke:function(b){if(!b)return b;if("string"==typeof b||b instanceof l)b={color:b};return p.makeParameters(p.defaultStroke,b)},augmentColor:function(b,a){b=new l(b);a=new l(a);a.a=b.a;return a},augmentStroke:function(b,a){if(b=d.makeStroke(b))b.color=d.augmentColor(b.color,a);return b},augmentFill:function(b,a){new l(a);return"string"==typeof b||b instanceof l?d.augmentColor(b,a):b},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,
hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(b,a){for(var c=f.delegate(d.defaultStats),h=0;h<b.length;++h)for(var q=b[h],g=0;g<q.data.length;g++)if(!a(q.data[g])){if("number"==typeof q.data[g]){var g=c.vmin,r=c.vmax;k.forEach(q.data,function(b,d){a(b)||(d+=1,isNaN(b)&&(b=0),c.hmin=Math.min(c.hmin,d),c.hmax=Math.max(c.hmax,d),c.vmin=Math.min(c.vmin,b),c.vmax=Math.max(c.vmax,b))})}else{var t=c.hmin,m=c.hmax,g=c.vmin,r=c.vmax;"xmin"in q&&"xmax"in q&&"ymin"in q&&"ymax"in q||k.forEach(q.data,
function(b,d){a(b)||(d="x"in b?b.x:d+1,b=b.y,isNaN(d)&&(d=0),isNaN(b)&&(b=0),c.hmin=Math.min(c.hmin,d),c.hmax=Math.max(c.hmax,d),c.vmin=Math.min(c.vmin,b),c.vmax=Math.max(c.vmax,b))});"xmin"in q&&(c.hmin=Math.min(t,q.xmin));"xmax"in q&&(c.hmax=Math.max(m,q.xmax))}"ymin"in q&&(c.vmin=Math.min(g,q.ymin));"ymax"in q&&(c.vmax=Math.max(r,q.ymax));break}return c},calculateBarSize:function(b,a,c){c||(c=1);var d=(b-2*a.gap)/c;"minBarSize"in a&&(d=Math.max(d,a.minBarSize));"maxBarSize"in a&&(d=Math.min(d,
a.maxBarSize));d=Math.max(d,1);return{size:d,gap:(b-d*c)/2}},collectStackedStats:function(b){var a=f.clone(d.defaultStats);if(b.length){a.hmin=Math.min(a.hmin,1);a.hmax=g.foldl(b,"seed, run -\x3e Math.max(seed, run.data.length)",a.hmax);for(var c=0;c<a.hmax;++c){var h=b[0].data[c],h=h&&("number"==typeof h?h:h.y);isNaN(h)&&(h=0);a.vmin=Math.min(a.vmin,h);for(var q=1;q<b.length;++q){var n=b[q].data[c],n=n&&("number"==typeof n?n:n.y);isNaN(n)&&(n=0);h+=n}a.vmax=Math.max(a.vmax,h)}}return a},curve:function(b,
a){var c=b.slice(0);"x"==a&&(c[c.length]=c[0]);return k.map(c,function(b,d){if(0==d)return"M"+b.x+","+b.y;if(!isNaN(a)){var e=b.x-c[d-1].x;return"C"+(b.x-e/a*(a-1))+","+c[d-1].y+" "+(b.x-e/a)+","+b.y+" "+b.x+","+b.y}if("X"==a||"x"==a||"S"==a){var h;b=c[d-1];var e=c[d],t,m,g;t=1/6;1==d?(h="x"==a?c[c.length-2]:b,t=1/3):h=c[d-2];d==c.length-1?(d="x"==a?c[1]:e,t=1/3):d=c[d+1];var q=Math.sqrt((e.x-b.x)*(e.x-b.x)+(e.y-b.y)*(e.y-b.y));m=Math.sqrt((e.x-h.x)*(e.x-h.x)+(e.y-h.y)*(e.y-h.y));g=Math.sqrt((d.x-
b.x)*(d.x-b.x)+(d.y-b.y)*(d.y-b.y));var f=m*t,J=g*t;f>q/2&&J>q/2?(f=q/2,J=q/2):f>q/2?(f=q/2,J=q/2*g/m):J>q/2&&(J=q/2,f=q/2*m/g);"S"==a&&(h==b&&(f=0),e==d&&(J=0));t=b.x+f*(e.x-h.x)/m;h=b.y+f*(e.y-h.y)/m;m=e.x-J*(d.x-b.x)/g;g=e.y-J*(d.y-b.y)/g}return"C"+(t+","+h+" "+m+","+g+" "+e.x+","+e.y)}).join(" ")},getLabel:function(b,a,d){return c.doIfLoaded("dojo/number",function(c){return(a?c.format(b,{places:d}):c.format(b))||""},function(){return a?b.toFixed(d):b.toString()})}})})},"dojox/charting/scaler/primitive":function(){define(["dojo/_base/lang"],
function(f){var k=f.getObject("dojox.charting.scaler.primitive",!0);return f.mixin(k,{buildScaler:function(f,p,g,c){f==p&&(f-=.5,p+=.5);return{bounds:{lower:f,upper:p,from:f,to:p,scale:g/(p-f),span:g},scaler:k}},buildTicks:function(f,k){return{major:[],minor:[],micro:[]}},getTransformerFromModel:function(f){var l=f.bounds.from,g=f.bounds.scale;return function(c){return(c-l)*g}},getTransformerFromPlot:function(f){var l=f.bounds.from,g=f.bounds.scale;return function(c){return c/g+l}}})})},"dojox/gfx/fx":function(){define("dojo/_base/lang ./_base ./matrix dojo/_base/Color dojo/_base/array dojo/_base/fx dojo/_base/connect dojo/sniff".split(" "),
function(f,k,l,p,g,c,d,b){function a(a,b){this.start=a;this.end=b}function e(a,b,c){this.start=a;this.end=b;this.units=c}function h(a,b){this.start=a;this.end=b;this.temp=new p}function q(a){this.values=a;this.length=a.length}function n(a,b){this.values=a;this.def=b?b:{}}function r(a,b){this.stack=a;this.original=b}function t(a,b,c,d){if(a.values)return new q(a.values);var e,m;m=a.start?k.normalizeColor(a.start):e=b?c?b[c]:b:d;a.end?a=k.normalizeColor(a.end):(e||(e=b?c?b[c]:b:d),a=e);return new h(m,
a)}var m=k.fx={};a.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};e.prototype.getValue=function(a){return(this.end-this.start)*a+this.start+this.units};h.prototype.getValue=function(a){return p.blendColors(this.start,this.end,a,this.temp)};q.prototype.getValue=function(a){return this.values[Math.min(Math.floor(a*this.length),this.length-1)]};n.prototype.getValue=function(a){var b=f.clone(this.def),c;for(c in this.values)b[c]=this.values[c].getValue(a);return b};r.prototype.getValue=
function(a){var b=[];g.forEach(this.stack,function(c){if(c instanceof l.Matrix2D)b.push(c);else if("original"==c.name&&this.original)b.push(this.original);else if("matrix"==c.name){if(c.start instanceof l.Matrix2D&&c.end instanceof l.Matrix2D){var d=new l.Matrix2D,e;for(e in c.start)d[e]=(c.end[e]-c.start[e])*a+c.start[e];b.push(d)}}else c.name in l&&(d=l[c.name],"function"!=typeof d?b.push(d):(e=g.map(c.start,function(b,d){return(c.end[d]-b)*a+b}),d=d.apply(l,e),d instanceof l.Matrix2D&&b.push(d)))},
this);return b};var v=new p(0,0,0,0);m.animateStroke=function(b){b.easing||(b.easing=c._defaultEasing);var e=new c.Animation(b),m=b.shape,h;d.connect(e,"beforeBegin",e,function(){h=m.getStroke();var c=b.color,d={},e;c&&(d.color=t(c,h,"color",v));(c=b.style)&&c.values&&(d.style=new q(c.values));if(c=b.width){var r=c,u=h;r.values?e=new q(r.values):(c=r.start?r.start:e=u?u.width:1,r.end?e=r.end:"number"!=typeof e&&(e=u?u.width:1),e=new a(c,e));d.width=e}(c=b.cap)&&c.values&&(d.cap=new q(c.values));if(c=
b.join)c.values?d.join=new q(c.values):(e=c.start?c.start:h&&h.join||0,c=c.end?c.end:h&&h.join||0,"number"==typeof e&&"number"==typeof c&&(d.join=new a(e,c)));this.curve=new n(d,h)});d.connect(e,"onAnimate",m,"setStroke");return e};m.animateFill=function(a){a.easing||(a.easing=c._defaultEasing);var b=new c.Animation(a),e=a.shape,m;d.connect(b,"beforeBegin",b,function(){m=e.getFill();var b=a.color;b&&(this.curve=t(b,m,"",v))});d.connect(b,"onAnimate",e,"setFill");return b};m.animateFont=function(a){a.easing||
(a.easing=c._defaultEasing);var b=new c.Animation(a),m=a.shape,h;d.connect(b,"beforeBegin",b,function(){h=m.getFont();var b=a.style,c={},d,t;b&&b.values&&(c.style=new q(b.values));(b=a.variant)&&b.values&&(c.variant=new q(b.values));(b=a.weight)&&b.values&&(c.weight=new q(b.values));(b=a.family)&&b.values&&(c.family=new q(b.values));(b=a.size)&&b.units&&(d=parseFloat(b.start?b.start:m.font&&m.font.size||"0"),t=parseFloat(b.end?b.end:m.font&&m.font.size||"0"),c.size=new e(d,t,b.units));this.curve=
new n(c,h)});d.connect(b,"onAnimate",m,"setFont");return b};m.animateTransform=function(a){a.easing||(a.easing=c._defaultEasing);var e=new c.Animation(a),m=a.shape,h;d.connect(e,"beforeBegin",e,function(){h=m.getTransform();this.curve=new r(a.transform,h)});d.connect(e,"onAnimate",m,"setTransform");if("svg"===k.renderer&&(9<=b("ie")||b("ff")))var t=[d.connect(e,"onBegin",e,function(){for(var a=m.getParent();a&&a.getParent;)a=a.getParent();a&&(m.__svgContainer=a.rawNode.parentNode,m.__svgRoot=a.rawNode,
m.__svgRoot&&m.__svgRoot.getAttribute&&(m.__svgWidth=parseInt(m.__svgRoot.getAttribute("width"),10),isNaN(m.__svgWidth)&&delete m.__svgWidth))}),d.connect(e,"onAnimate",e,function(){try{if(m.__svgContainer){var a=m.__svgContainer.style.visibility;m.__svgContainer.style.visibility="visible";m.__svgContainer.style.visibility=a;var b=m.__svgWidth;if(!isNaN(b))try{m.__svgRoot.setAttribute("width",b-5E-6),m.__svgRoot.setAttribute("width",b)}catch(I){}}}catch(I){}}),d.connect(e,"onEnd",e,function(){g.forEach(t,
d.disconnect);if(m.__svgContainer){var a=m.__svgContainer;if(null==a.getAttribute("__gotVis")){a.setAttribute("__gotVis",!0);var b=m.__svgContainer.style.visibility,c=m.__svgRoot,e=m.__svgWidth;a.style.visibility="visible";setTimeout(function(){try{a.style.visibility=b;a.removeAttribute("__gotVis");a=null;try{isNaN(e)||(c.setAttribute("width",e-5E-6),c.setAttribute("width",e))}catch(w){}}catch(w){}},100)}}delete m.__svgContainer;delete m.__svgRoot;delete m.__svgWidth})];return e};return m})},"dojox/charting/plot2d/_PlotEvents":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(f,k,l,p){return l("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={}},destroy:function(){this.resetEvents();this.inherited(arguments)},plotEvent:function(g){},raiseEvent:function(g){this.plotEvent(g);var c=f.delegate(g);c.originalEvent=g.type;c.originalPlot=g.plot;c.type="onindirect";k.forEach(this.chart.stack,function(d){d!==this&&d.plotEvent&&(c.plot=d,d.plotEvent(c))},
this)},connect:function(g,c){this.dirty=!0;return p.connect(this,"plotEvent",g,c)},events:function(){return!!this.plotEvent.after},resetEvents:function(){this._shapeEvents.length&&(k.forEach(this._shapeEvents,function(g){g.shape.disconnect(g.handle)}),this._shapeEvents=[]);this.raiseEvent({type:"onplotreset",plot:this})},_connectSingleEvent:function(g,c){this._shapeEvents.push({shape:g.eventMask,handle:g.eventMask.connect(c,this,function(d){g.type=c;g.event=d;this.raiseEvent(g);g.event=null})})},
_connectEvents:function(g){g&&(g.chart=this.chart,g.plot=this,g.hAxis=this.hAxis||null,g.vAxis=this.vAxis||null,g.eventMask=g.eventMask||g.shape,this._connectSingleEvent(g,"onmouseover"),this._connectSingleEvent(g,"onmouseout"),this._connectSingleEvent(g,"onclick"))},_reconnectEvents:function(g){(g=this._eventSeries[g])&&k.forEach(g,this._connectEvents,this)},fireEvent:function(g,c,d,b){(g=this._eventSeries[g])&&g.length&&d<g.length&&(d=g[d],d.type=c,d.event=b||null,this.raiseEvent(d),d.event=null)}})})},
"dojox/charting/plot2d/Lines":function(){define(["dojo/_base/declare","./Default"],function(f,k){return f("dojox.charting.plot2d.Lines",k,{constructor:function(){this.opt.lines=!0}})})},"dojox/charting/plot2d/Areas":function(){define(["dojo/_base/declare","./Default"],function(f,k){return f("dojox.charting.plot2d.Areas",k,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Markers":function(){define(["dojo/_base/declare","./Default"],function(f,k){return f("dojox.charting.plot2d.Markers",
k,{constructor:function(){this.opt.markers=!0}})})},"dojox/charting/plot2d/MarkersOnly":function(){define(["dojo/_base/declare","./Default"],function(f,k){return f("dojox.charting.plot2d.MarkersOnly",k,{constructor:function(){this.opt.lines=!1;this.opt.markers=!0}})})},"dojox/charting/plot2d/Scatter":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx dojox/gfx/gradutils".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q){var n=a.lambda("item.purgeGroup()");return l("dojox.charting.plot2d.Scatter",[g,c],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(a,b){this.opt=f.clone(f.mixin(this.opt,this.defaultParams));e.updateWithObject(this.opt,b);e.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate},render:function(a,
c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents();this.dirty=this.isDirty();var e;this.dirty&&(k.forEach(this.series,n),this._eventSeries={},this.cleanGroup(),e=this.getGroup(),b.forEachRev(this.series,function(a){a.cleanGroup(e)}));for(var h=this.chart.theme,t=this.events(),r=0;r<this.series.length;r++){var g=this.series[r];if(this.dirty||g.dirty)if(g.cleanGroup(),g.data.length){var u=h.next("marker",[this.opt,g]),f,l=this._hScaler.scaler.getTransformerFromModel(this._hScaler),
O=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(g.hidden)g.dyn.marker=u.symbol,g.dyn.markerFill=u.marker.fill,g.dyn.markerStroke=u.marker.stroke;else{e=g.group;f="number"==typeof g.data[0]?k.map(g.data,function(b,d){return{x:l(d+1)+c.l,y:a.height-c.b-O(b)}},this):k.map(g.data,function(b,d){return{x:l(b.x)+c.l,y:a.height-c.b-O(b.y)}},this);var I=Array(f.length),D=Array(f.length),w=Array(f.length);k.forEach(f,function(b,m){var t=g.data[m],r;this.opt.styleFunc||"number"!=typeof t?(r=
"number"!=typeof t?[t]:[],this.opt.styleFunc&&r.push(this.opt.styleFunc(t)),r=h.addMixin(u,"marker",r,!0)):r=h.post(u,"marker");var f="M"+b.x+" "+b.y+" "+r.symbol;r.marker.shadow&&(I[m]=e.createPath("M"+(b.x+r.marker.shadow.dx)+" "+(b.y+r.marker.shadow.dy)+" "+r.symbol).setStroke(r.marker.shadow).setFill(r.marker.shadow.color),this.animate&&this._animateScatter(I[m],a.height-c.b));if(r.marker.outline){var v=d.makeStroke(r.marker.outline);v.width=2*v.width+(r.marker.stroke&&r.marker.stroke.width||
0);w[m]=e.createPath(f).setStroke(v);this.animate&&this._animateScatter(w[m],a.height-c.b)}var v=d.makeStroke(r.marker.stroke),n=this._plotFill(r.marker.fill,a,c);!n||"linear"!==n.type&&"radial"!=n.type?D[m]=e.createPath(f).setStroke(v).setFill(n):(b=q.getColor(n,{x:b.x,y:b.y}),v&&(v.color=b),D[m]=e.createPath(f).setStroke(v).setFill(b));this.opt.labels&&(b=D[m].getBoundingBox(),this.createLabel(e,t,b,r));this.animate&&this._animateScatter(D[m],a.height-c.b)},this);D.length&&(g.dyn.marker=u.symbol,
g.dyn.markerStroke=D[D.length-1].getStroke(),g.dyn.markerFill=D[D.length-1].getFill());if(t){var x=Array(D.length);k.forEach(D,function(a,b){a={element:"marker",index:b,run:g,shape:a,outline:w&&w[b]||null,shadow:I&&I[b]||null,cx:f[b].x,cy:f[b].y};"number"==typeof g.data[0]?(a.x=b+1,a.y=g.data[b]):(a.x=g.data[b].x,a.y=g.data[b].y);this._connectEvents(a);x[b]=a},this);this._eventSeries[g.name]=x}else delete this._eventSeries[g.name];g.dirty=!1}}else g.dirty=!1,h.skip();else h.skip(),this._reconnectEvents(g.name)}this.dirty=
!1;p("dojo-bidi")&&this._checkOrientation(this.group,a,c);return this},_animateScatter:function(a,b){h.animateTransform(f.delegate({shape:a,duration:1200,transform:[{name:"translate",start:[0,b],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Stacked":function(){define(["dojo/_base/declare","dojo/_base/lang","./Default","./commonStacked"],function(f,k,l,p){return f("dojox.charting.plot2d.Stacked",l,{getSeriesStats:function(){return p.collectStats(this.series,
k.hitch(this,"isNullValue"))},buildSegments:function(g,c){for(var d=this.series[g],b=c?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,a=c?Math.min(d.data.length-1,Math.ceil(this._hScaler.bounds.to)):d.data.length-1,e=null,h=[],f=k.hitch(this,"isNullValue");b<=a;b++){var n=c?p.getIndexValue(this.series,g,b,f):p.getValue(this.series,g,d.data[b]?d.data[b].x:null,f);if(!f(n[0])&&(c||null!=n[0].y))e||(e=[],h.push({index:b,rseg:e})),e.push(n[0]);else if(!this.opt.interpolate||c)e=null}return h}})})},
"dojox/charting/plot2d/commonStacked":function(){define(["dojo/_base/lang","dojox/lang/functional","./common"],function(f,k,l){var p=f.getObject("dojox.charting.plot2d.commonStacked",!0);return f.mixin(p,{collectStats:function(g,c){for(var d=f.delegate(l.defaultStats),b=0;b<g.length;++b)for(var a=g[b],e=0;e<a.data.length;e++){var h,q;null!==a.data[e]&&("number"!=typeof a.data[e]&&a.data[e].hasOwnProperty("x")?(h=a.data[e].x,null!==h&&(q=p.getValue(g,b,h,c)[0],q=null!=q&&q.y?q.y:null)):(q=p.getIndexValue(g,
b,e,c)[0],h=e+1),d.hmin=Math.min(d.hmin,h),d.hmax=Math.max(d.hmax,h),d.vmin=Math.min(d.vmin,q),d.vmax=Math.max(d.vmax,q))}return d},rearrangeValues:function(g,c,d){var b=k.filter(g,"x"),a=b.length;if(!a)return g;for(var e={},h=0;h<a;++h){for(var f=b[h],n=f.min,r=f.max;n<r;++n)f[n]=(f[n]||0)+(e[n]||0);e=f}for(h=0;h<a;++h)for(f=b[h],n=f.min,r=f.max;n<r;++n)f[n]=this.isNullValue(f[n])?0:c(f[n])-d;if(this.opt.minWidth){c=this.opt.minWidth;for(h=a-1;h;--h)for(f=b[h],e=b[h-1],n=f.min,r=f.max;n<r;++n)f[n]-=
e[n];e=f.max;for(n=f.min;n<e;++n){for(h=d=f=0;h<a;++h)r=b[h][n],0<r&&(f+=r,++d);if(f<=d*c)for(h=0;h<a;++h)r=b[h][n],0<r&&(b[h][n]=c);else{for(h=d=0;h<a;++h)f=b[h],r=f[n],0<r&&(r<c?(d+=c-r,f[n]=c):0<d&&(r=f[n]-c,r>=d?(f[n]-=d,d=0):0<r&&(f[n]=c,d-=r)));if(0<d)for(h=a-1;0<=h;--h)if(f=b[h],r=f[n],0<r)if(r=f[n]-c,r>=d){f[n]-=d;break}else 0<r&&(f[n]=c,d-=r)}}for(h=1;h<a;++h)for(f=b[h],e=b[h-1],n=f.min,r=f.max;n<r;++n)f[n]+=e[n]}return g},getIndexValue:function(f,c,d,b){var a=0,e,h,g;for(h=0;h<=c;++h)f[h].hidden||
(g=a,e=f[h].data[d],b(e)||(isNaN(e)&&(e=e.y||0),a+=e));return[a,g]},getValue:function(f,c,d,b){var a=null,e,h,g,n;for(e=0;e<=c;++e)if(!f[e].hidden)for(h=0;h<f[e].data.length;h++)if(n=a,g=f[e].data[h],!b(g))if(g.x==d){a||(a={x:d});null!=g.y&&(null==a.y&&(a.y=0),a.y+=g.y);break}else if(g.x>d)break;return[a,n]}})})},"dojox/charting/plot2d/StackedLines":function(){define(["dojo/_base/declare","./Stacked"],function(f,k){return f("dojox.charting.plot2d.StackedLines",k,{constructor:function(){this.opt.lines=
!0}})})},"dojox/charting/plot2d/StackedAreas":function(){define(["dojo/_base/declare","./Stacked"],function(f,k){return f("dojox.charting.plot2d.StackedAreas",k,{constructor:function(){this.opt.lines=!0;this.opt.areas=!0}})})},"dojox/charting/plot2d/Columns":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(f,k,l,p,g,c,d,b,a,e,
h){var q=a.lambda("item.purgeGroup()"),n=function(){return!1};return l("dojox.charting.plot2d.Columns",[g,c],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(a,b){this.opt=f.clone(f.mixin(this.opt,this.defaultParams));e.updateWithObject(this.opt,b);e.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate;this.renderingOptions=
{"shape-rendering":"crispEdges"}},getSeriesStats:function(){var a=d.collectSimpleStats(this.series,f.hitch(this,"isNullValue"));a.hmin-=.5;a.hmax+=.5;return a},createRect:function(a,b,c){var d;this.opt.enableCache&&0<a._rectFreePool.length?(d=a._rectFreePool.pop(),d.setShape(c),b.add(d)):d=b.createRect(c);this.opt.enableCache&&a._rectUsePool.push(d);return d},render:function(a,c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents();this.dirty=this.isDirty();var d;this.dirty&&
(k.forEach(this.series,q),this._eventSeries={},this.cleanGroup(),d=this.getGroup(),b.forEachRev(this.series,function(a){a.cleanGroup(d)}));var e=this.chart.theme,h=this._hScaler.scaler.getTransformerFromModel(this._hScaler),t=this._vScaler.scaler.getTransformerFromModel(this._vScaler),r=Math.max(this._vScaler.bounds.lower,this._vAxis?this._vAxis.naturalBaseline:0),g=t(r),n=this.events(),l=this.getBarProperties(),O=this.series.length;k.forEach(this.series,function(a){a.hidden&&O--});for(var I=this.extractValues(this._hScaler),
I=this.rearrangeValues(I,t,g),D=0;D<this.series.length;D++){var w=this.series[D];if(this.dirty||w.dirty){w.cleanGroup();this.opt.enableCache&&(w._rectFreePool=(w._rectFreePool?w._rectFreePool:[]).concat(w._rectUsePool?w._rectUsePool:[]),w._rectUsePool=[]);var x=e.next("column",[this.opt,w]),S=Array(w.data.length);if(w.hidden)w.dyn.fill=x.series.fill;else{O--;d=w.group;for(var F=k.some(w.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),E=F?Math.min(w.data.length,Math.ceil(this._hScaler.bounds.to)):
w.data.length,G=F?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0;G<E;++G){var M=w.data[G];if(!this.isNullValue(M)){var y=this.getValue(M,G,D,F);t(y.y);var N=I[D][G],z,C;this.opt.styleFunc||"number"!=typeof M?(z="number"!=typeof M?[M]:[],this.opt.styleFunc&&z.push(this.opt.styleFunc(M)),z=e.addMixin(x,"column",z,!0)):z=e.post(x,"column");if(1<=l.width){var P={x:c.l+h(y.x+.5)+l.gap+l.thickness*O,y:a.height-c.b-g-Math.max(N,0),width:l.width,height:Math.abs(N)};z.series.shadow&&(C=f.clone(P),C.x+=
z.series.shadow.dx,C.y+=z.series.shadow.dy,C=this.createRect(w,d,C).setFill(z.series.shadow.color).setStroke(z.series.shadow),this.animate&&this._animateColumn(C,a.height-c.b+g,N));var K=this._plotFill(z.series.fill,a,c),K=this._shapeFill(K,P),K=this.createRect(w,d,P).setFill(K).setStroke(z.series.stroke);this.overrideShape(K,{index:G,value:y});K.setFilter&&z.series.filter&&K.setFilter(z.series.filter);w.dyn.fill=K.getFill();w.dyn.stroke=K.getStroke();if(n){var H={element:"column",index:G,run:w,shape:K,
shadow:C,cx:y.x+.5,cy:y.y,x:F?G:w.data[G].x,y:F?w.data[G]:w.data[G].y};this._connectEvents(H);S[G]=H}!isNaN(y.py)&&y.py>r&&(P.height=N-t(y.py));this.createLabel(d,M,P,z);this.animate&&this._animateColumn(K,a.height-c.b-g,N)}}}this._eventSeries[w.name]=S;w.dirty=!1}}else e.skip(),this._reconnectEvents(w.name)}this.dirty=!1;p("dojo-bidi")&&this._checkOrientation(this.group,a,c);return this},getValue:function(a,b,c,d){d?(c="number"==typeof a?a:a.y,a=b):(c=a.y,a=a.x-1);return{x:a,y:c}},extractValues:function(a){for(var b=
[],c=this.series.length-1;0<=c;--c){var d=this.series[c];if(this.dirty||d.dirty){var e=k.some(d.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),h=e?Math.max(0,Math.floor(a.bounds.from-1)):0,e=e?Math.min(d.data.length,Math.ceil(a.bounds.to)):d.data.length,f=b[c]=[];f.min=h;for(f.max=e;h<e;++h){var g=d.data[h];f[h]=this.isNullValue(g)?0:"number"==typeof g?g:g.y}}}return b},rearrangeValues:function(a,b,c){for(var d=0,e=a.length;d<e;++d){var m=a[d];if(m)for(var h=m.min,t=m.max;h<
t;++h){var f=m[h];m[h]=this.isNullValue(f)?0:b(f)-c}}return a},isNullValue:function(a){if(null===a||"undefined"==typeof a)return!0;var b=this._hAxis?this._hAxis.isNullValue:n,c=this._vAxis?this._vAxis.isNullValue:n;return"number"==typeof a?c(.5)||b(a):c(isNaN(a.x)?.5:a.x+.5)||null===a.y||b(a.y)},getBarProperties:function(){var a=d.calculateBarSize(this._hScaler.bounds.scale,this.opt);return{gap:a.gap,width:a.size,thickness:0}},_animateColumn:function(a,b,c){0===c&&(c=1);h.animateTransform(f.delegate({shape:a,
duration:1200,transform:[{name:"translate",start:[0,b-b/c],end:[0,0]},{name:"scale",start:[1,1/c],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/StackedColumns":function(){define(["dojo/_base/declare","dojo/_base/lang","./Columns","./commonStacked"],function(f,k,l,p){return f("dojox.charting.plot2d.StackedColumns",l,{getSeriesStats:function(){var f=p.collectStats(this.series,k.hitch(this,"isNullValue"));f.hmin-=.5;f.hmax+=.5;return f},rearrangeValues:function(f,
c,d){return p.rearrangeValues.call(this,f,c,d)}})})},"dojox/charting/plot2d/ClusteredColumns":function(){define(["dojo/_base/declare","dojo/_base/array","./Columns","./common"],function(f,k,l,p){return f("dojox.charting.plot2d.ClusteredColumns",l,{getBarProperties:function(){var f=this.series.length;k.forEach(this.series,function(c){c.hidden&&f--});var c=p.calculateBarSize(this._hScaler.bounds.scale,this.opt,f);return{gap:c.gap,width:c.size,thickness:c.size,clusterSize:f}}})})},"dojox/charting/plot2d/Bars":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/gfx/fx dojox/lang/utils dojox/lang/functional dojox/lang/functional/reversed".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h){var q=h.lambda("item.purgeGroup()"),n=function(){return!1};return l("dojox.charting.plot2d.Bars",[g,c],{defaultParams:{gap:0,animate:null,enableCache:!1},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:""},constructor:function(b,c){this.opt=f.clone(f.mixin(this.opt,this.defaultParams));a.updateWithObject(this.opt,c);a.updateWithPattern(this.opt,c,this.optionalParams);this.animate=this.opt.animate;
this.renderingOptions={"shape-rendering":"crispEdges"}},getSeriesStats:function(){var a=d.collectSimpleStats(this.series,f.hitch(this,"isNullValue")),b;a.hmin-=.5;a.hmax+=.5;b=a.hmin;a.hmin=a.vmin;a.vmin=b;b=a.hmax;a.hmax=a.vmax;a.vmax=b;return a},createRect:function(a,b,c){var d;this.opt.enableCache&&0<a._rectFreePool.length?(d=a._rectFreePool.pop(),d.setShape(c),b.add(d)):d=b.createRect(c);this.opt.enableCache&&a._rectUsePool.push(d);return d},createLabel:function(a,b,c,d){this.opt.labels&&"outside"==
this.opt.labelStyle?this.renderLabel(a,c.x+c.width+this.opt.labelOffset,c.y+c.height/2,this._getLabel(isNaN(b.y)?b:b.y),d,"start"):this.inherited(arguments)},render:function(a,b){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,b);this.dirty=this.isDirty();this.resetEvents();var c;this.dirty&&(k.forEach(this.series,q),this._eventSeries={},this.cleanGroup(),c=this.getGroup(),e.forEachRev(this.series,function(a){a.cleanGroup(c)}));var d=this.chart.theme,h=this._hScaler.scaler.getTransformerFromModel(this._hScaler),
t=this._vScaler.scaler.getTransformerFromModel(this._vScaler),g=Math.max(this._hScaler.bounds.lower,this._hAxis?this._hAxis.naturalBaseline:0),u=h(g),r=this.events(),n=this.getBarProperties(),l=this.series.length;k.forEach(this.series,function(a){a.hidden&&l--});for(var I=l,D=this.extractValues(this._vScaler),D=this.rearrangeValues(D,h,u),w=0;w<this.series.length;w++){var x=this.series[w];if(this.dirty||x.dirty){x.cleanGroup();this.opt.enableCache&&(x._rectFreePool=(x._rectFreePool?x._rectFreePool:
[]).concat(x._rectUsePool?x._rectUsePool:[]),x._rectUsePool=[]);var S=d.next("bar",[this.opt,x]);if(x.hidden)x.dyn.fill=S.series.fill,x.dyn.stroke=S.series.stroke;else{I--;var F=Array(x.data.length);c=x.group;for(var E=k.some(x.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),G=E?Math.min(x.data.length,Math.ceil(this._vScaler.bounds.to)):x.data.length,M=E?Math.max(0,Math.floor(this._vScaler.bounds.from-1)):0;M<G;++M){var y=x.data[M];if(!this.isNullValue(y)){var N=this.getValue(y,
M,w,E),z=D[w][M],C,P;this.opt.styleFunc||"number"!=typeof y?(C="number"!=typeof y?[y]:[],this.opt.styleFunc&&C.push(this.opt.styleFunc(y)),C=d.addMixin(S,"bar",C,!0)):C=d.post(S,"bar");if(z&&1<=n.height){var K={x:b.l+u+Math.min(z,0),y:a.height-b.b-t(N.x+1.5)+n.gap+n.thickness*(l-I-1),width:Math.abs(z),height:n.height};C.series.shadow&&(P=f.clone(K),P.x+=C.series.shadow.dx,P.y+=C.series.shadow.dy,P=this.createRect(x,c,P).setFill(C.series.shadow.color).setStroke(C.series.shadow),this.animate&&this._animateBar(P,
b.l+u,-z));var H=this._plotFill(C.series.fill,a,b),H=this._shapeFill(H,K),H=this.createRect(x,c,K).setFill(H).setStroke(C.series.stroke);H.setFilter&&C.series.filter&&H.setFilter(C.series.filter);x.dyn.fill=H.getFill();x.dyn.stroke=H.getStroke();if(r){var T={element:"bar",index:M,run:x,shape:H,shadow:P,cx:N.y,cy:N.x+1.5,x:E?M:x.data[M].x,y:E?x.data[M]:x.data[M].y};this._connectEvents(T);F[M]=T}!isNaN(N.py)&&N.py>g&&(K.x+=h(N.py),K.width-=h(N.py));this.createLabel(c,y,K,C);this.animate&&this._animateBar(H,
b.l+u,-Math.abs(z))}}}this._eventSeries[x.name]=F;x.dirty=!1}}else d.skip(),this._reconnectEvents(x.name)}this.dirty=!1;p("dojo-bidi")&&this._checkOrientation(this.group,a,b);return this},getValue:function(a,b,c,d){d?(c="number"==typeof a?a:a.y,a=b):(c=a.y,a=a.x-1);return{y:c,x:a}},extractValues:function(a){for(var b=[],c=this.series.length-1;0<=c;--c){var d=this.series[c];if(this.dirty||d.dirty){var e=k.some(d.data,function(a){return"number"==typeof a||a&&!a.hasOwnProperty("x")}),h=e?Math.max(0,
Math.floor(a.bounds.from-1)):0,e=e?Math.min(d.data.length,Math.ceil(a.bounds.to)):d.data.length,f=b[c]=[];f.min=h;for(f.max=e;h<e;++h){var g=d.data[h];f[h]=this.isNullValue(g)?0:"number"==typeof g?g:g.y}}}return b},rearrangeValues:function(a,b,c){for(var d=0,e=a.length;d<e;++d){var h=a[d];if(h)for(var m=h.min,f=h.max;m<f;++m){var t=h[m];h[m]=this.isNullValue(t)?0:b(t)-c}}return a},isNullValue:function(a){if(null===a||"undefined"==typeof a)return!0;var b=this._hAxis?this._hAxis.isNullValue:n,c=this._vAxis?
this._vAxis.isNullValue:n;return"number"==typeof a?c(.5)||b(a):c(isNaN(a.x)?.5:a.x+.5)||null===a.y||b(a.y)},getBarProperties:function(){var a=d.calculateBarSize(this._vScaler.bounds.scale,this.opt);return{gap:a.gap,height:a.size,thickness:0}},_animateBar:function(a,c,d){0==d&&(d=1);b.animateTransform(f.delegate({shape:a,duration:1200,transform:[{name:"translate",start:[c-c/d,0],end:[0,0]},{name:"scale",start:[1/d,1],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/StackedBars":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./Bars","./commonStacked"],function(f,k,l,p){return f("dojox.charting.plot2d.StackedBars",l,{getSeriesStats:function(){var f=p.collectStats(this.series,k.hitch(this,"isNullValue")),c;f.hmin-=.5;f.hmax+=.5;c=f.hmin;f.hmin=f.vmin;f.vmin=c;c=f.hmax;f.hmax=f.vmax;f.vmax=c;return f},rearrangeValues:function(f,c,d){return p.rearrangeValues.call(this,f,c,d)}})})},"dojox/charting/plot2d/ClusteredBars":function(){define(["dojo/_base/declare","dojo/_base/array","./Bars","./common"],function(f,
k,l,p){return f("dojox.charting.plot2d.ClusteredBars",l,{getBarProperties:function(){var f=this.series.length;k.forEach(this.series,function(c){c.hidden&&f--});var c=p.calculateBarSize(this._vScaler.bounds.scale,this.opt,f);return{gap:c.gap,height:c.size,thickness:c.size}}})})},"dojox/charting/plot2d/Grid":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/sniff ./CartesianBase ./common dojox/lang/utils dojox/gfx/fx".split(" "),function(f,k,l,p,g,c,d,b){var a=function(a,b){return a.value-
b.value};return k("dojox.charting.plot2d.Grid",g,{defaultParams:{hMajorLines:!0,hMinorLines:!1,vMajorLines:!0,vMinorLines:!1,hStripes:!1,vStripes:!1,animate:null,enableCache:!1,renderOnAxis:!0},optionalParams:{majorHLine:{},minorHLine:{},majorVLine:{},minorVLine:{},hFill:{},vFill:{},hAlternateFill:{},vAlternateFill:{}},constructor:function(a,b){this.opt=f.clone(this.defaultParams);d.updateWithObject(this.opt,b);d.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate;this.opt.enableCache&&
(this._lineFreePool=[],this._lineUsePool=[],this._rectFreePool=[],this._rectUsePool=[])},addSeries:function(a){return this},getSeriesStats:function(){return f.delegate(c.defaultStats)},cleanGroup:function(){this.inherited(arguments);this.opt.enableCache&&(this._lineFreePool=this._lineFreePool.concat(this._lineUsePool),this._lineUsePool=[],this._rectFreePool=this._rectFreePool.concat(this._rectUsePool),this._rectUsePool=[])},createLine:function(a,b){var c;this.opt.enableCache&&0<this._lineFreePool.length?
(c=this._lineFreePool.pop(),c.setShape(b),a.add(c)):c=a.createLine(b);this.opt.enableCache&&this._lineUsePool.push(c);return c},createRect:function(a,b){var c;this.opt.enableCache&&0<this._rectFreePool.length?(c=this._rectFreePool.pop(),c.setShape(b),a.add(c)):c=a.createRect(b);this.opt.enableCache&&this._rectUsePool.push(c);return c},render:function(a,b){if(this.zoom)return this.performZoom(a,b);this.dirty=this.isDirty();if(!this.dirty)return this;this.cleanGroup();var c=this.getGroup(),d=this.chart.theme,
e;(p("ios")&&6>p("ios")||p("android")||p("safari")&&!p("ios"))&&c.createRect({x:b.l,y:b.t,width:Math.max(0,a.width-b.l-b.r),height:Math.max(0,a.height-b.t-b.b)});if(this._vAxis){e=this._vAxis.getTicks();var h=this._vAxis.getScaler();if(null!=e&&null!=h){var m=h.scaler.getTransformerFromModel(h);this.opt.hStripes&&this._renderHRect(e,d.grid,a,b,h,m);this.opt.hMinorLines&&(c=this.opt.minorHLine||d.grid&&d.grid.minorLine||d.axis.minorTick,this._renderHLines(e.minor,c,a,b,h,m));this.opt.hMajorLines&&
(c=this.opt.majorHLine||d.grid&&d.grid.majorLine||d.axis.majorTick,this._renderHLines(e.major,c,a,b,h,m))}}this._hAxis&&(e=this._hAxis.getTicks(),h=this._hAxis.getScaler(),null!=e&&null!=h&&(m=h.scaler.getTransformerFromModel(h),this.opt.vStripes&&this._renderVRect(e,d.grid,a,b,h,m),e&&this.opt.vMinorLines&&(c=this.opt.minorVLine||d.grid&&d.grid.minorLine||d.axis.minorTick,this._renderVLines(e.minor,c,a,b,h,m)),e&&this.opt.vMajorLines&&(c=this.opt.majorVLine||d.grid&&d.grid.majorLine||d.axis.majorTick,
this._renderVLines(e.major,c,a,b,h,m))));this.dirty=!1;return this},_renderHLines:function(a,b,c,d,f,t){var e=this.getGroup();l.forEach(a,function(a){if(this.opt.renderOnAxis||a.value!=(this._vAxis.opt.leftBottom?f.bounds.from:f.bounds.to))a=c.height-d.b-t(a.value),a=this.createLine(e,{x1:d.l,y1:a,x2:c.width-d.r,y2:a}).setStroke(b),this.animate&&this._animateGrid(a,"h",d.l,d.r+d.l-c.width)},this)},_renderVLines:function(a,b,c,d,f,t){var e=this.getGroup();l.forEach(a,function(a){if(this.opt.renderOnAxis||
a.value!=(this._hAxis.opt.leftBottom?f.bounds.from:f.bounds.to))a=d.l+t(a.value),a=this.createLine(e,{x1:a,y1:d.t,x2:a,y2:c.height-d.b}).setStroke(b),this.animate&&this._animateGrid(a,"v",c.height-d.b,c.height-d.b-d.t)},this)},_renderHRect:function(b,c,d,f,g,t){var e,h,r;b=b.major.concat(b.minor);b.sort(a);b[0].value>g.bounds.from&&b.splice(0,0,{value:g.bounds.from});b[b.length-1].value<g.bounds.to&&b.push({value:g.bounds.to});g=this.getGroup();for(var n=0;n<b.length-1;n++)if(e=b[n],h=d.height-f.b-
t(e.value),r=d.height-f.b-t(b[n+1].value),e=0==n%2?this.opt.hAlternateFill||c&&c.alternateFill:this.opt.hFill||c&&c.fill)e=this.createRect(g,{x:f.l,y:h,width:d.width-f.r,height:h-r}).setFill(e),this.animate&&this._animateGrid(e,"h",f.l,f.r+f.l-d.width)},_renderVRect:function(b,c,d,f,g,t){var e,h,r;b=b.major.concat(b.minor);b.sort(a);b[0].value>g.bounds.from&&b.splice(0,0,{value:g.bounds.from});b[b.length-1].value<g.bounds.to&&b.push({value:g.bounds.to});g=this.getGroup();for(var n=0;n<b.length-1;n++)if(e=
b[n],h=f.l+t(e.value),r=f.l+t(b[n+1].value),e=0==n%2?this.opt.vAlternateFill||c&&c.alternateFill:this.opt.vFill||c&&c.fill)e=this.createRect(g,{x:h,y:f.t,width:r-h,height:d.width-f.r}).setFill(e),this.animate&&this._animateGrid(e,"v",d.height-f.b,d.height-f.b-f.t)},_animateGrid:function(a,c,d,g){b.animateTransform(f.delegate({shape:a,duration:1200,transform:[{name:"translate",start:"h"==c?[d,0]:[0,d],end:[0,0]},{name:"scale",start:"h"==c?[1/g,1]:[1,1/g],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},
"dojox/charting/plot2d/Pie":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/dom-geometry dojo/_base/Color ./Base ./_PlotEvents ./common dojox/gfx dojox/gfx/matrix dojox/lang/functional dojox/lang/utils dojo/has".split(" "),function(f,k,l,p,g,c,d,b,a,e,h,q,n){return l("dojox.charting.plot2d.Pie",[c,d],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:!0,radGrad:"native",fanSize:5,startAngle:0,innerRadius:0,minWidth:0,
zeroDataMessage:""},optionalParams:{radius:0,omitLabels:!1,stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelWiring:{}},constructor:function(a,b){this.opt=f.clone(this.defaultParams);q.updateWithObject(this.opt,b);q.updateWithPattern(this.opt,b,this.optionalParams);this.axes=[];this.run=null;this.dyn=[];this.runFilter=[];b&&b.hasOwnProperty("innerRadius")&&(this._plotSetInnerRadius=!0)},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this},
setAxis:function(a){return this},addSeries:function(a){this.run=a;return this},getSeriesStats:function(){return f.delegate(b.defaultStats)},getRequiredColors:function(){return this.run?this.run.data.length:0},render:function(b,c){if(!this.dirty)return this;this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var d=this.group,t=this.chart.theme;!this._plotSetInnerRadius&&t&&t.pieInnerRadius&&(this.opt.innerRadius=t.pieInnerRadius);var r=(b.width-c.l-c.r)/2,q=(b.height-c.t-c.b)/2,
l=Math.min(r,q),u="font"in this.opt?this.opt.font:t.axis.tick.titleFont||"",Q=u?a.normalizedLength(a.splitFontString(u).size):0,L=this.opt.hasOwnProperty("fontColor")?this.opt.fontColor:t.axis.tick.fontColor,O=e._degToRad(this.opt.startAngle),I=O,D,w,x,S,F=this.run.data,E=this.events(),G=f.hitch(this,function(){var a=t.clone(),e=h.map(F,function(b){var c=[this.opt,this.run];null!==b&&"number"!=typeof b&&c.push(b);this.opt.styleFunc&&c.push(this.opt.styleFunc(b));return a.next("slice",c,!0)},this);
"radius"in this.opt&&(l=this.opt.radius<l?this.opt.radius:l);var m={cx:c.l+r,cy:c.t+q,r:l},f=new g(L);this.opt.innerRadius&&(f.a=.1);var n=this._createRing(d,m).setStroke(f);this.opt.innerRadius&&n.setFill(f);this.opt.zeroDataMessage&&this.renderLabel(d,m.cx,m.cy+Q/3,this.opt.zeroDataMessage,{series:{font:u,fontColor:L}},null,"middle");this.dyn=[];k.forEach(F,function(a,d){this.dyn.push({fill:this._plotFill(e[d].series.fill,b,c),stroke:e[d].series.stroke})},this)});if(!this.run&&!this.run.data.ength)return G(),
this;if("number"==typeof F[0]){D=h.map(F,"x ? Math.max(x, 0) : 0");if(h.every(D,"\x3c\x3d 0"))return G(),this;w=h.map(D,"/this",h.foldl(D,"+",0));this.opt.labels&&(x=k.map(w,function(a){return 0<a?this._getLabel(100*a)+"%":""},this))}else{D=h.map(F,"x ? Math.max(x.y, 0) : 0");if(!D.length||h.every(D,"\x3c\x3d 0"))return G(),this;w=h.map(D,"/this",h.foldl(D,"+",0));this.opt.labels&&(x=k.map(w,function(a,b){if(0>a)return"";b=F[b];return b.hasOwnProperty("text")?b.text:this._getLabel(100*a)+"%"},this))}var M=
h.map(F,function(a){var b=[this.opt,this.run];null!==a&&"number"!=typeof a&&b.push(a);this.opt.styleFunc&&b.push(this.opt.styleFunc(a));return t.next("slice",b,!0)},this);this.opt.labels&&(D=h.foldl1(h.map(x,function(b,c){return a._base._getTextBox(b,{font:M[c].series.font}).w},this),"Math.max(a, b)")/2,0>this.opt.labelOffset&&(l=Math.min(r-2*D,q-Q)+this.opt.labelOffset));this.opt.hasOwnProperty("radius")&&(l=this.opt.radius<.9*l?this.opt.radius:.9*l);!this.opt.radius&&this.opt.labels&&"columns"==
this.opt.labelStyle?(l/=2,r>q&&r>2*l&&(l*=r/(2*l)),l>=.8*q&&(l=.8*q)):l>=.9*q&&(l=.9*q);S=l-this.opt.labelOffset;var y={cx:c.l+r,cy:c.t+q,r:l};this.dyn=[];var N=Array(w.length),z=[],C=I,P=this.opt.minWidth;k.forEach(w,function(a,b){if(0===a)z[b]={step:0,end:C,start:C,weak:!1};else{a=C+2*a*Math.PI;b===w.length-1&&(a=O+2*Math.PI);var c=a-C;z[b]={step:c,start:C,end:a,weak:c*l<P};C=a}});if(0<P){D=0;var K=P/l,G=0,H;for(H=z.length-1;0<=H;H--)z[H].weak&&(++D,G+=z[H].step,z[H].step=K);K*=D;if(K>Math.PI){K=
Math.PI/D;for(H=0;H<z.length;++H)z[H].weak&&(z[H].step=K);K=Math.PI}if(0<D)for(K=1-(K-G)/2/Math.PI,H=0;H<z.length;++H)z[H].weak||(z[H].step*=K);for(H=0;H<z.length;++H)z[H].start=H?z[H].end:C,z[H].end=z[H].start+z[H].step;for(H=z.length-1;0<=H;--H)if(0!==z[H].step){z[H].end=C+2*Math.PI;break}}var C=I,T,R;k.some(w,function(h,m){var t,g=F[m],u=M[m];if(1<=h){R=this._plotFill(u.series.fill,b,c);R=this._shapeFill(R,{x:y.cx-y.r,y:y.cy-y.r,width:2*y.r,height:2*y.r});R=this._pseudoRadialFill(R,{x:y.cx,y:y.cy},
y.r);t=this._createRing(d,y).setFill(R).setStroke(u.series.stroke);this.dyn.push({fill:R,stroke:u.series.stroke});E&&(T={element:"slice",index:m,run:this.run,shape:t,x:m,y:"number"==typeof g?g:g.y,cx:y.cx,cy:y.cy,cr:l},this._connectEvents(T),N[m]=T);for(m+=1;m<w.length;m++)u=M[m],this.dyn.push({fill:u.series.fill,stroke:u.series.stroke});return!0}if(0===z[m].step)return this.dyn.push({fill:u.series.fill,stroke:u.series.stroke}),!1;h=z[m].step;t=y.cx+l*Math.cos(C);var r=y.cy+l*Math.sin(C),n=y.cx+l*
Math.cos(C+h),q=y.cy+l*Math.sin(C+h),v=e._degToRad(this.opt.fanSize);if(u.series.fill&&"radial"===u.series.fill.type&&"fan"===this.opt.radGrad&&h>v){var k=d.createGroup(),v=Math.ceil(h/v),J=h/v;R=this._shapeFill(u.series.fill,{x:y.cx-y.r,y:y.cy-y.r,width:2*y.r,height:2*y.r});var B,G,Q,A,O,L;for(B=0;B<v;++B)G=C+(B-.2)*J,Q=C+(B+1+.2)*J,A=0==B?t:y.cx+l*Math.cos(G),O=0==B?r:y.cy+l*Math.sin(G),L=B==v-1?n:y.cx+l*Math.cos(Q),Q=B==v-1?q:y.cy+l*Math.sin(Q),this._createSlice(k,y,l,A,O,L,Q,G,J).setFill(this._pseudoRadialFill(R,
{x:y.cx,y:y.cy},l,C+(B+.5)*J,C+(B+.5)*J));v=u.series.stroke;this._createSlice(k,y,l,t,r,n,q,C,h).setStroke(v);t=k}else{v=u.series.stroke;t=this._createSlice(d,y,l,t,r,n,q,C,h).setStroke(v);if((R=u.series.fill)&&"radial"===R.type)R=this._shapeFill(R,{x:y.cx-y.r,y:y.cy-y.r,width:2*y.r,height:2*y.r}),"linear"===this.opt.radGrad&&(R=this._pseudoRadialFill(R,{x:y.cx,y:y.cy},l,C,C+h));else if(R&&"linear"===R.type){r=f.clone(t.getBoundingBox());if("svg"===a.renderer){n={w:0,h:0};try{n=p.position(t.rawNode)}catch(ja){}n.h>
r.height&&(r.height=n.h);n.w>r.width&&(r.width=n.w)}R=this._plotFill(R,b,c);R=this._shapeFill(R,r)}t.setFill(R)}this.dyn.push({fill:R,stroke:u.series.stroke});E&&(T={element:"slice",index:m,run:this.run,shape:t,x:m,y:"number"==typeof g?g:g.y,cx:y.cx,cy:y.cy,cr:l},this._connectEvents(T),N[m]=T);C+=h;return!1},this);if(this.opt.labels){var X=n("dojo-bidi")&&this.chart.isRightToLeft();if("default"==this.opt.labelStyle)C=I=O,k.some(w,function(a,c){if(0>=a&&!this.opt.minWidth)return!1;var e=M[c];if(1<=
a)return this.renderLabel(d,y.cx,y.cy+Q/2,x[c],e,0<this.opt.labelOffset),!0;a=I+2*a*Math.PI;c+1==w.length&&(a=O+2*Math.PI);if(this.opt.omitLabels&&.001>a-I)return!1;var h=C+z[c].step/2,m=y.cx+S*Math.cos(h);this.renderLabel(d,X?b.width-m:m,y.cy+S*Math.sin(h)+Q/2,x[c],e,0<this.opt.labelOffset);C+=z[c].step;I=a;return!1},this);else if("columns"==this.opt.labelStyle){var W=this.opt.omitLabels,C=I=O,aa=[],ga=0;for(D=w.length-1;0<=D;--D)w[D]&&++ga;k.forEach(w,function(a,b){a=I+2*a*Math.PI;b+1==w.length&&
(a=O+2*Math.PI);if(0!==this.minWidth||.001<=a-I){var c=C+z[b].step/2;1!==ga||this.opt.minWidth||(c=(I+a)/2);aa.push({angle:c,left:0>Math.cos(c),theme:M[b],index:b,omit:W?.001>a-I:!1})}I=a;C+=z[b].step},this);var V=a._base._getTextBox("a",{font:u,whiteSpace:"nowrap"}).h;this._getProperLabelRadius(aa,V,1.1*y.r);var da=y.cx-2*y.r,ca=y.cx+2*y.r;k.forEach(aa,function(b){if(!b.omit){var c=M[b.index],e=0;c&&c.axis&&c.axis.tick&&c.axis.tick.labelGap&&(e=c.axis.tick.labelGap);var h=a._base._getTextBox(x[b.index],
{font:c.series.font,whiteSpace:"nowrap",paddingLeft:e+"px"}).w,m=y.cx+b.labelR*Math.cos(b.angle),t=y.cy+b.labelR*Math.sin(b.angle),g=b.left?da+h:ca-h,e=b.left?da:g+e,u=y.r,u=d.createPath().moveTo(y.cx+u*Math.cos(b.angle),y.cy+u*Math.sin(b.angle));Math.abs(b.labelR*Math.cos(b.angle))<2*y.r-h&&u.lineTo(m,t);u.lineTo(g,t).setStroke(b.theme.series.labelWiring);u.moveToBack();m=this.renderLabel(d,e,V/3+t||0,x[b.index],c,!1,"left");E&&!this.opt.htmlLabels&&(c=a._base._getTextBox(x[b.index],{font:b.theme.series.font}).w||
0,h=a.normalizedLength(a.splitFontString(b.theme.series.font).size),T={element:"labels",index:b.index,run:this.run,shape:m,x:e,y:t,label:x[b.index]},e=m.getShape(),t=p.position(this.chart.node,!0),e=f.mixin({type:"rect"},{x:e.x,y:e.y-2*h}),e.x+=t.x,e.y+=t.y,e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=Math.ceil(c),e.height=Math.ceil(h),T.aroundRect=e,this._connectEvents(T),N[w.length+b.index]=T)}},this)}}var U=0;this._eventSeries[this.run.name]=h.map(F,function(a){return 0>=a?null:N[U++]});n("dojo-bidi")&&
this._checkOrientation(this.group,b,c);return this},_getProperLabelRadius:function(a,b,c){if(1==a.length)a[0].labelR=c;else{var d={},e={},h=2,m=2,f,t;for(f=0;f<a.length;++f)t=Math.abs(Math.sin(a[f].angle)),a[f].left?h>t&&(h=t,d=a[f]):m>t&&(m=t,e=a[f]);d.labelR=e.labelR=c;this._caculateLabelR(d,a,b);this._caculateLabelR(e,a,b)}},_caculateLabelR:function(a,b,c){var d,e,h=b.length,m=a.labelR,f=b[a.index].left?-c:c;e=0;c=a.index;for(d=(c+1)%h;e<h&&b[c].left===b[d].left;++e)m=(Math.sin(b[c].angle)*m+f)/
Math.sin(b[d].angle),m=Math.max(a.labelR,m),b[d].labelR=m,c=(c+1)%h,d=(d+1)%h;e>=h&&(b[0].labelR=a.labelR);e=0;c=a.index;for(d=(c||h)-1;e<h&&b[c].left===b[d].left;++e)m=(Math.sin(b[c].angle)*m-f)/Math.sin(b[d].angle),m=Math.max(a.labelR,m),b[d].labelR=m,c=(c||h)-1,d=(d||h)-1},_createRing:function(a,b){var c=this.opt.innerRadius;0<c?c=c/100*b.r:0>c&&(c=-c);return c?a.createPath({}).setAbsoluteMode(!0).moveTo(b.cx,b.cy-b.r).arcTo(b.r,b.r,0,!1,!0,b.cx+b.r,b.cy).arcTo(b.r,b.r,0,!0,!0,b.cx,b.cy-b.r).closePath().moveTo(b.cx,
b.cy-c).arcTo(c,c,0,!1,!0,b.cx+c,b.cy).arcTo(c,c,0,!0,!0,b.cx,b.cy-c).closePath():a.createCircle(b)},_createSlice:function(a,b,c,d,e,h,f,g,n){var m=this.opt.innerRadius;0<m?m=m/100*b.r:0>m&&(m=-m);if(m){var t=b.cx+m*Math.cos(g),u=b.cy+m*Math.sin(g),r=b.cx+m*Math.cos(g+n);b=b.cy+m*Math.sin(g+n);return a.createPath({}).setAbsoluteMode(!0).moveTo(t,u).lineTo(d,e).arcTo(c,c,0,n>Math.PI,!0,h,f).lineTo(r,b).arcTo(m,m,0,n>Math.PI,!1,t,u).closePath()}return a.createPath({}).setAbsoluteMode(!0).moveTo(b.cx,
b.cy).lineTo(d,e).arcTo(c,c,0,n>Math.PI,!0,h,f).lineTo(b.cx,b.cy).closePath()}})})},"dojox/charting/plot2d/Bubble":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),function(f,k,l,p,g,c,d,b,a,e,h){var q=a.lambda("item.purgeGroup()");return k("dojox.charting.plot2d.Bubble",[g,c],{defaultParams:{animate:null},optionalParams:{stroke:{},outline:{},
shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",labelFunc:null},constructor:function(a,b){this.opt=f.clone(f.mixin(this.opt,this.defaultParams));e.updateWithObject(this.opt,b);e.updateWithPattern(this.opt,b,this.optionalParams);this.opt.labelFunc||(this.opt.labelFunc=function(a,b,c){return this._getLabel(a.size,b,c)});this.animate=this.opt.animate},render:function(a,c){var e;if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents();if(this.dirty=this.isDirty())l.forEach(this.series,
q),this._eventSeries={},this.cleanGroup(),e=this.getGroup(),b.forEachRev(this.series,function(a){a.cleanGroup(e)});for(var h=this.chart.theme,f=this._hScaler.scaler.getTransformerFromModel(this._hScaler),g=this._vScaler.scaler.getTransformerFromModel(this._vScaler),n=this.events(),r=0;r<this.series.length;r++){var u=this.series[r];if(this.dirty||u.dirty)if(u.cleanGroup(),u.data.length)if("number"==typeof u.data[0])console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",
u);else{var k=h.next("circle",[this.opt,u]),L=l.map(u.data,function(b){return b?{x:f(b.x)+c.l,y:a.height-c.b-g(b.y),radius:b.size/2*this._vScaler.bounds.scale}:null},this);if(u.hidden)u.dyn.fill=k.series.fill,u.dyn.stroke=k.series.stroke;else{e=u.group;var O=null,I=null,D=null,w=this.opt.styleFunc,x=function(a){return w?h.addMixin(k,"circle",[a,w(a)],!0):h.addMixin(k,"circle",a,!0)};k.series.shadow&&(D=l.map(L,function(b,d){return this.isNullValue(b)?null:(d=x(u.data[d]).series.shadow,d=e.createCircle({cx:b.x+
d.dx,cy:b.y+d.dy,r:b.radius}).setStroke(d).setFill(d.color),this.animate&&this._animateBubble(d,a.height-c.b,b.radius),d)},this),D.length&&(u.dyn.shadow=D[D.length-1].getStroke()));k.series.outline&&(I=l.map(L,function(b,h){return this.isNullValue(b)?null:(h=x(u.data[h]),h=d.makeStroke(h.series.outline),h.width=2*h.width+(k.series.stroke&&k.series.stroke.width||0),h=e.createCircle({cx:b.x,cy:b.y,r:b.radius}).setStroke(h),this.animate&&this._animateBubble(h,a.height-c.b,b.radius),h)},this),I.length&&
(u.dyn.outline=I[I.length-1].getStroke()));O=l.map(L,function(b,d){if(!this.isNullValue(b)){var h=x(u.data[d]),m={x:b.x-b.radius,y:b.y-b.radius,width:2*b.radius,height:2*b.radius},f=this._plotFill(h.series.fill,a,c),f=this._shapeFill(f,m),f=e.createCircle({cx:b.x,cy:b.y,r:b.radius}).setFill(f).setStroke(h.series.stroke);f.setFilter&&h.series.filter&&f.setFilter(h.series.filter);this.animate&&this._animateBubble(f,a.height-c.b,b.radius);this.createLabel(e,u.data[d],m,h);return f}return null},this);
O.length&&(u.dyn.fill=O[O.length-1].getFill(),u.dyn.stroke=O[O.length-1].getStroke());if(n){var S=Array(O.length);l.forEach(O,function(a,b){null!==a&&(a={element:"circle",index:b,run:u,shape:a,outline:I&&I[b]||null,shadow:D&&D[b]||null,x:u.data[b].x,y:u.data[b].y,r:u.data[b].size/2,cx:L[b].x,cy:L[b].y,cr:L[b].radius},this._connectEvents(a),S[b]=a)},this);this._eventSeries[u.name]=S}else delete this._eventSeries[u.name];u.dirty=!1}}else u.dirty=!1,h.skip();else h.skip(),this._reconnectEvents(u.name)}this.dirty=
!1;p("dojo-bidi")&&this._checkOrientation(this.group,a,c);return this},_animateBubble:function(a,b,c){h.animateTransform(f.delegate({shape:a,duration:1200,transform:[{name:"translate",start:[0,b],end:[0,0]},{name:"scale",start:[0,1/c],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Candlesticks":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h){var q=a.lambda("item.purgeGroup()");return k("dojox.charting.plot2d.Candlesticks",[g,c],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(a,b){this.opt=f.clone(this.defaultParams);e.updateWithObject(this.opt,b);e.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate},collectStats:function(a){for(var b=f.delegate(d.defaultStats),c=0;c<
a.length;c++){var e=a[c];if(e.data.length){var h=b.vmin,g=b.vmax;"ymin"in e&&"ymax"in e||l.forEach(e.data,function(a,c){this.isNullValue(a)||(c=a.x||c+1,b.hmin=Math.min(b.hmin,c),b.hmax=Math.max(b.hmax,c),b.vmin=Math.min(b.vmin,a.open,a.close,a.high,a.low),b.vmax=Math.max(b.vmax,a.open,a.close,a.high,a.low))},this);"ymin"in e&&(b.vmin=Math.min(h,e.ymin));"ymax"in e&&(b.vmax=Math.max(g,e.ymax))}}return b},getSeriesStats:function(){var a=this.collectStats(this.series);a.hmin-=.5;a.hmax+=.5;return a},
render:function(a,c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents();this.dirty=this.isDirty();var e;this.dirty&&(l.forEach(this.series,q),this._eventSeries={},this.cleanGroup(),e=this.getGroup(),b.forEachRev(this.series,function(a){a.cleanGroup(e)}));var h=this.chart.theme,f,g,n=this._hScaler.scaler.getTransformerFromModel(this._hScaler),r=this._vScaler.scaler.getTransformerFromModel(this._vScaler),u=this.events();f=d.calculateBarSize(this._hScaler.bounds.scale,
this.opt);g=f.gap;f=f.size;for(var k=this.series.length-1;0<=k;--k){var L=this.series[k];if(this.dirty||L.dirty){L.cleanGroup();var O=h.next("candlestick",[this.opt,L]),I=Array(L.data.length);if(L.hidden)L.dyn.fill=O.series.fill,L.dyn.stroke=O.series.stroke;else{e=L.group;for(var D=0;D<L.data.length;++D){var w=L.data[D];if(!this.isNullValue(w)){var x=h.addMixin(O,"candlestick",w,!0),S=n(w.x||D+.5)+c.l+g,F=a.height-c.b,E=r(w.open),G=r(w.close),M=r(w.high),y=r(w.low);if("mid"in w)var N=r(w.mid);if(y>
M)var z=M,M=y,y=z;if(1<=f){var z=E>G,C={x1:f/2,x2:f/2,y1:F-M,y2:F-y},P={x:0,y:F-Math.max(E,G),width:f,height:Math.max(z?E-G:G-E,1)},K=e.createGroup();K.setTransform({dx:S,dy:0});var H=K.createGroup();H.createLine(C).setStroke(x.series.stroke);H.createRect(P).setStroke(x.series.stroke).setFill(z?x.series.fill:"white");"mid"in w&&H.createLine({x1:x.series.stroke?x.series.stroke.width||1:1,x2:f-(x.series.stroke?x.series.stroke.width||1:1),y1:F-N,y2:F-N}).setStroke(z?"white":x.series.stroke);L.dyn.fill=
x.series.fill;L.dyn.stroke=x.series.stroke;u&&(w={element:"candlestick",index:D,run:L,shape:H,x:S,y:F-Math.max(E,G),cx:f/2,cy:F-Math.max(E,G)+Math.max(z?E-G:G-E,1)/2,width:f,height:Math.max(z?E-G:G-E,1),data:w},this._connectEvents(w),I[D]=w)}this.animate&&this._animateCandlesticks(K,F-y,M-y)}}this._eventSeries[L.name]=I;L.dirty=!1}}else h.skip(),this._reconnectEvents(L.name)}this.dirty=!1;p("dojo-bidi")&&this._checkOrientation(this.group,a,c);return this},tooltipFunc:function(a){return'\x3ctable cellpadding\x3d"1" cellspacing\x3d"0" border\x3d"0" style\x3d"font-size:0.9em;"\x3e\x3ctr\x3e\x3ctd\x3eOpen:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+
a.data.open+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eHigh:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+a.data.high+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eLow:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+a.data.low+'\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3eClose:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+a.data.close+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e"+(void 0!==a.data.mid?'\x3ctr\x3e\x3ctd\x3eMid:\x3c/td\x3e\x3ctd align\x3d"right"\x3e\x3cstrong\x3e'+
a.data.mid+"\x3c/strong\x3e\x3c/td\x3e\x3c/tr\x3e":"")+"\x3c/table\x3e"},_animateCandlesticks:function(a,b,c){h.animateTransform(f.delegate({shape:a,duration:1200,transform:[{name:"translate",start:[0,b-b/c],end:[0,0]},{name:"scale",start:[1,1/c],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/OHLC":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/has ./CartesianBase ./_PlotEvents ./common dojox/lang/functional dojox/lang/functional/reversed dojox/lang/utils dojox/gfx/fx".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h){var q=a.lambda("item.purgeGroup()");return l("dojox.charting.plot2d.OHLC",[g,c],{defaultParams:{gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(a,b){this.opt=f.clone(this.defaultParams);e.updateWithObject(this.opt,b);e.updateWithPattern(this.opt,b,this.optionalParams);this.animate=this.opt.animate},collectStats:function(a){for(var b=f.delegate(d.defaultStats),c=0;c<a.length;c++){var e=
a[c];if(e.data.length){var h=b.vmin,g=b.vmax;"ymin"in e&&"ymax"in e||k.forEach(e.data,function(a,c){this.isNullValue(a)||(c=a.x||c+1,b.hmin=Math.min(b.hmin,c),b.hmax=Math.max(b.hmax,c),b.vmin=Math.min(b.vmin,a.open,a.close,a.high,a.low),b.vmax=Math.max(b.vmax,a.open,a.close,a.high,a.low))},this);"ymin"in e&&(b.vmin=Math.min(h,e.ymin));"ymax"in e&&(b.vmax=Math.max(g,e.ymax))}}return b},getSeriesStats:function(){var a=this.collectStats(this.series);a.hmin-=.5;a.hmax+=.5;return a},render:function(a,
c){if(this.zoom&&!this.isDataDirty())return this.performZoom(a,c);this.resetEvents();if(this.dirty=this.isDirty()){k.forEach(this.series,q);this._eventSeries={};this.cleanGroup();var e=this.getGroup();b.forEachRev(this.series,function(a){a.cleanGroup(e)})}var h=this.chart.theme,f,g,l=this._hScaler.scaler.getTransformerFromModel(this._hScaler),n=this._vScaler.scaler.getTransformerFromModel(this._vScaler),u=this.events();f=d.calculateBarSize(this._hScaler.bounds.scale,this.opt);g=f.gap;f=f.size;for(var r=
0;r<this.series.length;r++){var L=this.series[r];if(this.dirty||L.dirty){L.cleanGroup();for(var O=h.next("candlestick",[this.opt,L]),e=L.group,I=Array(L.data.length),D=0;D<L.data.length;++D){var w=L.data[D];if(!this.isNullValue(w)){var x=h.addMixin(O,"candlestick",w,!0),S=l(w.x||D+.5)+c.l+g,F=a.height-c.b,E=n(w.open),G=n(w.close),M=n(w.high),y=n(w.low);if(y>M)var N=M,M=y,y=N;if(1<=f){var N={x1:f/2,x2:f/2,y1:F-M,y2:F-y},z={x1:0,x2:f/2+(x.series.stroke?x.series.stroke.width||1:1)/2,y1:F-E,y2:F-E},C=
{x1:f/2-(x.series.stroke?x.series.stroke.width||1:1)/2,x2:f,y1:F-G,y2:F-G},P=e.createGroup();P.setTransform({dx:S,dy:0});var K=P.createGroup();K.createLine(N).setStroke(x.series.stroke);K.createLine(z).setStroke(x.series.stroke);K.createLine(C).setStroke(x.series.stroke);L.dyn.stroke=x.series.stroke;u&&(w={element:"candlestick",index:D,run:L,shape:K,x:S,y:F-Math.max(E,G),cx:f/2,cy:F-Math.max(E,G)+Math.max(E>G?E-G:G-E,1)/2,width:f,height:Math.max(E>G?E-G:G-E,1),data:w},this._connectEvents(w),I[D]=
w)}this.animate&&this._animateOHLC(P,F-y,M-y)}}this._eventSeries[L.name]=I;L.dirty=!1}else h.skip(),this._reconnectEvents(L.name)}this.dirty=!1;p("dojo-bidi")&&this._checkOrientation(this.group,a,c);return this},_animateOHLC:function(a,b,c){h.animateTransform(f.delegate({shape:a,duration:1200,transform:[{name:"translate",start:[0,b-b/c],end:[0,0]},{name:"scale",start:[1,1/c],end:[1,1]},{name:"original"}]},this.animate)).play()}})})},"dojox/charting/plot2d/Spider":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/dom-geometry dojo/_base/fx dojo/fx dojo/sniff ./Base ./_PlotEvents ./common ../axis2d/common dojox/gfx dojox/gfx/matrix dojox/gfx/fx dojox/lang/functional dojox/lang/utils dojo/fx/easing".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A){return k("dojox.charting.plot2d.Spider",[a,e],{defaultParams:{labels:!0,ticks:!1,fixed:!0,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:!0,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:.2,spiderOrigin:.16,markerSize:3,spiderType:"polygon",animationType:A.backOut,animate:null,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",
fontColor:""},constructor:function(a,b){this.opt=f.clone(this.defaultParams);v.updateWithObject(this.opt,b);v.updateWithPattern(this.opt,b,this.optionalParams);this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animate=null===this.opt.animate?{}:this.opt.animate;this.animations={}},clear:function(){this.inherited(arguments);this.dyn=[];this.axes=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this},setAxis:function(a){a&&(void 0!=a.opt.min&&(this.datas[a.name].min=
a.opt.min),void 0!=a.opt.max&&(this.datas[a.name].max=a.opt.max));return this},addSeries:function(a){this.series.push(a);for(var b in a.data){var c=a.data[b],d=this.datas[b];d?(d.vlist.push(c),d.min=Math.min(d.min,c),d.max=Math.max(d.max,c)):(d="__"+b,this.axes.push(d),this[d]=b,this.datas[b]={min:c,max:c,vlist:[c]})}if(0>=this.labelKey.length)for(b in a.data)this.labelKey.push(b);return this},getSeriesStats:function(){return h.collectSimpleStats(this.series,function(a){return null===a})},render:function(a,
b){if(!this.dirty)return this;this.dirty=!1;this.cleanGroup();var c=this.group,d=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length)return this;var e=this.opt,h=d.axis,f=(a.width-b.l-b.r)/2,t=(a.height-b.t-b.b)/2,l=Math.min(f,t),v=e.font||h.majorTick&&h.majorTick.font||h.tick&&h.tick.font||"normal normal normal 7pt Tahoma",k=e.axisFont||h.tick&&h.tick.titleFont||"normal normal normal 11pt Tahoma",J=e.axisTickFontColor||h.majorTick&&h.majorTick.fontColor||h.tick&&h.tick.fontColor||
"silver",E=e.axisFontColor||h.tick&&h.tick.titleFontColor||"black",G=e.axisColor||h.tick&&h.tick.axisColor||"silver",B=e.spiderColor||h.tick&&h.tick.spiderColor||"silver",A=e.axisWidth||h.stroke&&h.stroke.width||2,N=e.spiderWidth||h.stroke&&h.stroke.width||2,h=e.seriesWidth||h.stroke&&h.stroke.width||2,z=n.normalizedLength(n.splitFontString(k).size),C=r._degToRad(e.startAngle),P,K,H,T,R,X,W=e.spiderOrigin,aa=3<=e.divisions?e.divisions:3,ga=e.markerSize,V=e.spiderType,da=e.animationType,ca=-10>e.labelOffset?
e.labelOffset:-10,U;e.labels&&(l=p.map(this.series,function(a){return a.name},this),l=m.foldl1(m.map(l,function(a){return n._base._getTextBox(a,{font:d.series.font}).w},this),"Math.max(a, b)")/2,l=Math.min(f-2*l,t-z)+ca,P=l-ca);"radius"in e&&(l=e.radius,P=l-ca);l/=1.2;b={cx:b.l+f,cy:b.t+t,r:l};for(f=0;f<this.series.length;f++)if(U=this.series[f],this.dirty||U.dirty){if(U.cleanGroup(),z=U.data,null!==z&&(t=this._getObjectLength(z),!K||0>=K.length))if(K=[],H=[],X=[],this._buildPoints(K,t,b,l,C,!0,a),
this._buildPoints(H,t,b,l*W,C,!0,a),this._buildPoints(X,t,b,P,C,!1,a),2<aa)for(T=[],R=[],z=0;z<aa-2;z++)T[z]=[],this._buildPoints(T[z],t,b,l*(W+(1-W)*(z+1)/(aa-1)),C,!0,a),R[z]=l*(W+(1-W)*(z+1)/(aa-1))}else d.skip();t=c.createGroup();G={color:G,width:A};f={color:B,width:N};for(z=K.length-1;0<=z;--z)B=K[z],N={x:B.x+.2*(B.x-b.cx),y:B.y+.2*(B.y-b.cy)},B={x:B.x+.2*(B.x-b.cx)/2,y:B.y+.2*(B.y-b.cy)/2},t.createLine({x1:b.cx,y1:b.cy,x2:N.x,y2:N.y}).setStroke(G),this._drawArrow(t,N,B,G);t=c.createGroup();
for(z=X.length-1;0<=z;--z)B=X[z],N=n._base._getTextBox(this.labelKey[z],{font:k}).w||0,G=this.opt.htmlLabels&&"vml"!=n.renderer?"html":"gfx",B=q.createText[G](this.chart,t,g.isBodyLtr()||"html"!=G?B.x:B.x+N-a.width,B.y,"middle",this.labelKey[z],k,E),this.opt.htmlLabels&&this.htmlElements.push(B);k=c.createGroup();if("polygon"==V){if(k.createPolyline(K).setStroke(f),k.createPolyline(H).setStroke(f),0<T.length)for(z=T.length-1;0<=z;--z)k.createPolyline(T[z]).setStroke(f)}else if(k.createCircle({cx:b.cx,
cy:b.cy,r:l}).setStroke(f),k.createCircle({cx:b.cx,cy:b.cy,r:l*W}).setStroke(f),0<R.length)for(z=R.length-1;0<=z;--z)k.createCircle({cx:b.cx,cy:b.cy,r:R[z]}).setStroke(f);t=this._getObjectLength(this.datas);E=c.createGroup();T=0;for(var ea in this.datas){R=this.datas[ea];K=R.min;R=R.max;R-=K;k=C+2*Math.PI*T/t;for(f=0;f<aa;f++)X=K+R*f/(aa-1),B=this._getCoordinate(b,l*(W+(1-W)*f/(aa-1)),k,a),X=this._getLabel(X),N=n._base._getTextBox(X,{font:v}).w||0,G=this.opt.htmlLabels&&"vml"!=n.renderer?"html":"gfx",
this.opt.htmlLabels&&this.htmlElements.push(q.createText[G](this.chart,E,g.isBodyLtr()||"html"!=G?B.x:B.x+N-a.width,B.y,"start",X,v,J));T++}this.chart.seriesShapes={};for(f=this.series.length-1;0<=f;f--)if(U=this.series[f],z=U.data,null!==z){var v=d.next("spider",[e,U]),Z=n.normalizeColor(v.series.fill),v={color:v.series.fill,width:h};Z.a=e.seriesFillAlpha;U.dyn={fill:Z,stroke:v};if(!U.hidden){var Y=[],ba=[];T=0;for(ea in z)R=this.datas[ea],K=R.min,R=R.max,R-=K,J=z[ea],k=C+2*Math.PI*T/t,B=this._getCoordinate(b,
l*(W+(1-W)*(J-K)/R),k,a),Y.push(B),ba.push({sname:U.name,key:ea,data:J}),T++;Y[Y.length]=Y[0];ba[ba.length]=ba[0];var J=this._getBoundary(Y),fa=U.group,v=this._createSeriesEntry(fa,this.oldSeriePoints[U.name]||H,Y,Z,v,l,W,ga,da);this.chart.seriesShapes[U.name]=v;this.oldSeriePoints[U.name]=Y;this._connectEvents({element:"spider_poly",index:f,id:"spider_poly_"+U.name,run:U,plot:this,shape:v.poly,parent:fa,brect:J,cx:b.cx,cy:b.cy,cr:l,f:Z,s:c});this._connectEvents({element:"spider_plot",index:f,id:"spider_plot_"+
U.name,run:U,plot:this,shape:U.group});p.forEach(v.circles,function(a,b){this._connectEvents({element:"spider_circle",index:b,id:"spider_circle_"+U.name+b,run:U,plot:this,shape:a,parent:fa,tdata:ba[b],cx:Y[b].x,cy:Y[b].y,f:Z,s:c})},this)}}return this},_createSeriesEntry:function(a,b,e,h,m,g,t,q,n){g=this.animate?b:e;var u=a.createPolyline(g).setFill(h).setStroke(m),r=[];for(t=0;t<g.length;t++){var v=g[t],v=a.createCircle({cx:v.x,cy:v.y,r:q}).setFill(h).setStroke(m);r.push(v)}this.animate&&(h=p.map(e,
function(a,d){a=new c.Animation(f.delegate({duration:1E3,easing:n,curve:[b[d].y,a.y]},this.animate));var e=r[d];l.connect(a,"onAnimate",function(a){var b=u.getShape();b.points[d].y=a;u.setShape(b);b=e.getShape();b.cy=a;e.setShape(b)});return a},this),e=p.map(e,function(a,d){a=new c.Animation(f.delegate({duration:1E3,easing:n,curve:[b[d].x,a.x]},this.animate));var e=r[d];l.connect(a,"onAnimate",function(a){var b=u.getShape();b.points[d].x=a;u.setShape(b);b=e.getShape();b.cx=a;e.setShape(b)});return a},
this),d.combine(h.concat(e)).play());return{group:a,poly:u,circles:r}},plotEvent:function(a){"spider_plot"==a.element&&("onmouseover"!=a.type||b("ie")||a.shape.moveToFront())},tooltipFunc:function(a){return"spider_circle"==a.element?a.tdata.sname+"\x3cbr/\x3e"+a.tdata.key+"\x3cbr/\x3e"+a.tdata.data:null},_getBoundary:function(a){for(var b=a[0].x,c=a[0].x,d=a[0].y,e=a[0].y,h=0;h<a.length;h++)var f=a[h],b=Math.max(f.x,b),d=Math.max(f.y,d),c=Math.min(f.x,c),e=Math.min(f.y,e);return{x:c,y:e,width:b-c,
height:d-e}},_drawArrow:function(a,b,c,d){var e=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2)),h=(c.y-b.y)/e,f=(c.x-b.x)/e;a.createPolyline([b,{x:c.x+e/3*-h,y:c.y+e/3*f},{x:c.x+e/3*h,y:c.y+e/3*-f}]).setFill(d.color).setStroke(d)},_buildPoints:function(a,b,c,d,e,h,f){for(var m=0;m<b;m++)a.push(this._getCoordinate(c,d,e+2*Math.PI*m/b,f));h&&a.push(this._getCoordinate(c,d,e+2*Math.PI,f))},_getCoordinate:function(a,c,d,e){var h=a.cx+c*Math.cos(d);b("dojo-bidi")&&this.chart.isRightToLeft()&&e&&(h=
e.width-h);return{x:h,y:a.cy+c*Math.sin(d)}},_getObjectLength:function(a){var b=0;if(f.isObject(a))for(var c in a)b++;return b},_getLabel:function(a){return h.getLabel(a,this.opt.fixed,this.opt.precision)}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(f){var k={linear:function(f){return f},quadIn:function(f){return Math.pow(f,2)},quadOut:function(f){return f*(f-2)*-1},quadInOut:function(f){f*=2;return 1>f?Math.pow(f,2)/2:-1*(--f*(f-2)-1)/2},cubicIn:function(f){return Math.pow(f,
3)},cubicOut:function(f){return Math.pow(f-1,3)+1},cubicInOut:function(f){f*=2;return 1>f?Math.pow(f,3)/2:(Math.pow(f-2,3)+2)/2},quartIn:function(f){return Math.pow(f,4)},quartOut:function(f){return-1*(Math.pow(f-1,4)-1)},quartInOut:function(f){f*=2;return 1>f?Math.pow(f,4)/2:-.5*(Math.pow(f-2,4)-2)},quintIn:function(f){return Math.pow(f,5)},quintOut:function(f){return Math.pow(f-1,5)+1},quintInOut:function(f){f*=2;return 1>f?Math.pow(f,5)/2:(Math.pow(f-2,5)+2)/2},sineIn:function(f){return-1*Math.cos(Math.PI/
2*f)+1},sineOut:function(f){return Math.sin(Math.PI/2*f)},sineInOut:function(f){return-1*(Math.cos(Math.PI*f)-1)/2},expoIn:function(f){return 0==f?0:Math.pow(2,10*(f-1))},expoOut:function(f){return 1==f?1:-1*Math.pow(2,-10*f)+1},expoInOut:function(f){if(0==f)return 0;if(1==f)return 1;f*=2;if(1>f)return Math.pow(2,10*(f-1))/2;--f;return(-1*Math.pow(2,-10*f)+2)/2},circIn:function(f){return-1*(Math.sqrt(1-Math.pow(f,2))-1)},circOut:function(f){return Math.sqrt(1-Math.pow(f-1,2))},circInOut:function(f){f*=
2;return 1>f?-.5*(Math.sqrt(1-Math.pow(f,2))-1):.5*(Math.sqrt(1-Math.pow(f-2,2))+1)},backIn:function(f){return Math.pow(f,2)*(2.70158*f-1.70158)},backOut:function(f){--f;return Math.pow(f,2)*(2.70158*f+1.70158)+1},backInOut:function(f){f*=2;if(1>f)return Math.pow(f,2)*(3.5949095*f-2.5949095)/2;f-=2;return(Math.pow(f,2)*(3.5949095*f+2.5949095)+2)/2},elasticIn:function(f){if(0==f||1==f)return f;--f;return-1*Math.pow(2,10*f)*Math.sin(2*(f-.075)*Math.PI/.3)},elasticOut:function(f){return 0==f||1==f?f:
Math.pow(2,-10*f)*Math.sin(2*(f-.075)*Math.PI/.3)+1},elasticInOut:function(f){if(0==f)return 0;f*=2;if(2==f)return 1;var l=.3*1.5,g=l/4;if(1>f)return--f,-.5*Math.pow(2,10*f)*Math.sin(2*(f-g)*Math.PI/l);--f;return.5*Math.pow(2,-10*f)*Math.sin(2*(f-g)*Math.PI/l)+1},bounceIn:function(f){return 1-k.bounceOut(1-f)},bounceOut:function(f){return f<1/2.75?7.5625*Math.pow(f,2):f<2/2.75?7.5625*Math.pow(f-1.5/2.75,2)+.75:f<2.5/2.75?7.5625*Math.pow(f-2.25/2.75,2)+.9375:7.5625*Math.pow(f-2.625/2.75,2)+.984375},
bounceInOut:function(f){return.5>f?k.bounceIn(2*f)/2:k.bounceOut(2*f-1)/2+.5}};f.setObject("dojo.fx.easing",k);return k})},"widgets/RelatedTableCharts/setting/FieldSelector":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/text!./FieldSelector.html dijit/TooltipDialog dijit/popup dojo/_base/lang dojo/_base/html dojo/on dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/_base/array".split(" "),function(f,k,l,p,g,c,d,b,a,e,h,q,n){return f([k,l],{baseClass:"jimu-widget-RelatedTableCharts-setting",
templateString:p,_stringFieldType:"esriFieldTypeString",_oidFieldType:"esriFieldTypeOID",_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],_isTooltipDialogOpened:!1,fields:[],hideOnSelect:!1,showOnlyNumericFields:!1,startup:function(){this.inherited(arguments)},postCreate:function(){this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){c.close(this.tooltipDialog);this.tooltipDialog.destroy();this.inherited(arguments)},
isPartOfPopup:function(a){var c;c=this.tooltipDialog.domNode;return a===c||b.isDescendant(a,c)},onSelect:function(a){},_showTooltipDialog:function(){c.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){c.close(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var b=this._createFieldList();this.tooltipDialog=new g({content:b});this.own(a(this.domNode,"click",d.hitch(this,function(a){a.stopPropagation();
a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(a(document.body,"click",d.hitch(this,function(a){this.isPartOfPopup(a.target||a.srcElement)||this._hideTooltipDialog()})))},_createFieldList:function(){var b,c;c=q.create("div",{style:{"max-height":"150px",overflow:"auto"}});this.fields&&(b=d.clone(this.fields),n.forEach(b,d.hitch(this,function(b){var f,m;m=!0;this.showOnlyNumericFields&&0>this._numberFieldTypes.indexOf(b.type)&&(m=!1);
m&&(m=b.alias+" {"+b.name+"}",f=q.create("div",{innerHTML:m,style:{cursor:"pointer",padding:"4px 2px"}},c),h.set(f,"name",b.name),h.set(f,"alias",b.alias),a(f,"mouseover",d.hitch(this,function(){e.set(f,"background-color","#e4e4e4")})),a(f,"mouseout",d.hitch(this,function(){e.set(f,"background-color","#FFFFFF")})),a(f,"click",d.hitch(this,function(){var a={};a.name=h.get(f,"name");a.alias=h.get(f,"alias");this.onSelect(a);this.hideOnSelect&&this._hideTooltipDialog()})))})));return c}})})},"widgets/RelatedTableCharts/ChartLayout":function(){define("jimu/BaseWidgetSetting jimu/utils dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/_base/declare dojo/_base/lang dijit/_WidgetsInTemplateMixin dojo/text!./ChartLayout.html dojox/charting/Chart dojox/charting/plot2d/Pie dojox/charting/action2d/Tooltip dojox/charting/action2d/Highlight dojox/charting/action2d/MoveSlice dojox/charting/plot2d/Spider dojox/charting/widget/SelectableLegend dojox/charting/action2d/Magnify dojo/_base/array dojox/charting/plot2d/Bars dojox/charting/axis2d/Default".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A){return c([f,b],{baseClass:"jimu-widget-RelatedTableCharts-layout",templateString:a,postCreate:function(){this.inherited(arguments)},startup:function(){this._createChartLayout()},_createChartLayout:function(){this._setNodeValue(this.layoutHeaderTitle,this.config.chartConfig.chartTitle,!0);this._setNodeValue(this.chartDescription,this.config.chartConfig.description,!1);this._initChart()},resizeChart:function(a){this.chart&&setTimeout(d.hitch(this,function(){"PieChart"!==
this.config.chartConfig.chartType?this.chart.resize():this._initChart();this.onChartResize()}),a)},_setNodeValue:function(a,b,c){var d=b;this.config.isPreview||(d=this._getFieldValues(b,this.config.selectedFeature.attributes));d?(d=k.sanitizeHTML(d),l.set(a,"innerHTML",d),c&&l.set(a,"title",d)):g.set(a,"display","none")},_initChart:function(){switch(this.config.chartConfig.chartType){case "BarChart":this._createBarChart();break;case "PieChart":this._createPieChart();break;case "PolarChart":this._createPolarChart();
break;default:l.set(this.chartContainer,"innerHTML",this.nls.errMsgNoFeaturesFound)}},_getBarChartContainerHeight:function(){var a=30;0<this.config.chartData.chartSeries.length&&(a=30*this.config.chartData.chartSeries.length);this.config.isPreview?150>=a&&(a+=150):150>=a&&(a+=100);return a+"px"},_createBarChart:function(){var a,b={},c={},b=40,d,f,h={};p.empty(this.chartContainer);b=this._getBarChartContainerHeight();a=new e(p.create("div",{style:"overflow:hidden; width:100%; height:"+b},this.chartContainer));
a.addPlot("default",{type:"Bars",gap:4,minBarSize:10,maxBarSize:15});c=g.get(this.chartDescription,"fontFamily");d=g.get(this.chartDescription,"fontSize");f=g.get(this.chartDescription,"color");b={labels:this.config.chartData.chartLabels,maxLabelCharCount:30,trailingSymbol:"...",natural:!0,majorTickStep:1,minorTicks:!1,fixUpper:!0,includeZero:!1,vertical:!0,titleFontColor:f,titleFont:"normal normal normal "+d+" "+c,font:"normal normal normal 9px "+c};window.isRTL&&(b.leftBottom=!1,a.setDir("rtl"));
c={fixLower:"major",fixUpper:"major",minorTicks:!1,includeZero:!0,titleFontColor:f,titleFont:"normal normal normal "+d+" "+c,font:"normal normal normal 9px "+c};this.config.isPreview?(c.titleGap=5,b.majorTick={length:0},c.majorTick={length:0},b.majorLabels=!1,c.majorLabels=!1,b.minorLabels=!1,c.minorLabels=!1,b.title=this.config.chartConfig.labelYAxis,c.title=this.config.chartConfig.labelXAxis,h.stroke={width:0}):(new q(a,"default"),b.title=this._getFieldValues(this.config.chartConfig.labelYAxis,
this.config.selectedFeature.attributes),c.title=this._getFieldValues(this.config.chartConfig.labelXAxis,this.config.selectedFeature.attributes),h.stroke={width:1});c.titleOrientation="away";a.addAxis("y",b);a.addAxis("x",c);this.config.chartData.selectedTheme&&a.setTheme(this.config.chartData.selectedTheme);this.config.chartData.fill&&(h.fill=this.config.chartData.fill);A.forEach(this.config.chartData.chartSeries,function(b,c){b.x=c+1;b.y=b.y;a.addSeries(c+1,[b],h,{plot:"default"})},this);new n(a,
"default");a.render();this.chart=a;this.onChartCreated()},_createPieChart:function(){var a,b={};p.empty(this.chartContainer);a=p.create("div",{style:"width:100%; height:100%; overflow:auto"},this.chartContainer);a=new e(a);b={type:h,labels:!0,ticks:!0,fixed:!0,precision:0,labelWiring:"#ccc",labelStyle:"columns",htmlLabels:!0,startAngle:-10,maxLabelCharCount:20,trailingSymbol:"..."};"esriCTEmptyOption"===this.config.chartConfig.labelField&&(b.labels=!1);a.addPlot("default",b);this.config.isPreview||
new q(a,"default");this.config.chartData.fill?a.addSeries(this.config.chartConfig.dataSeriesField,this.config.chartData.chartSeries,{fill:this.config.chartData.fill},{plot:"default"}):a.addSeries(this.config.dataSeriesField,this.config.chartData.chartSeries,{plot:"default"});this.config.chartData.selectedTheme&&a.setTheme(this.config.chartData.selectedTheme);new r(a,"default");new n(a,"default");a.render();this.chart=a;this.onChartCreated()},_createPolarChart:function(){var a,b,c,d=.2,f=!1;this.chart&&
this.chart.destroy();p.empty(this.chartContainer);g.set(this.chartContainer,"direction","inherit");a=p.create("div",{style:"width:100%; height:100%; overflow:hidden"},this.chartContainer);c=g.get(this.chartDescription,"fontFamily");a=new e(a);this.config.chartConfig.showPolygonFill||(d=0);a.addPlot("default",{type:t,labelOffset:-10,divisions:5,seriesFillAlpha:d,markerSize:3,precision:0,spiderType:"polygon",axisFont:"normal normal normal 9px/25px "+c});this.config.chartData.selectedTheme?a.setTheme(this.config.chartData.selectedTheme):
this.config.chartConfig.chartColor.colorInfo&&this.config.chartConfig.chartColor.colorInfo.layerField&&(f=!0);for(d=0;d<this.config.chartData.chartSeries.length;d++)for(b in c=this.config.chartData.chartSeries[d],c)c.hasOwnProperty(b)&&(this.config.chartData.fill?a.addSeries(b,c[b],{fill:this.config.chartData.fill}):c[b].fill?a.addSeries(b,c[b],{fill:c[b].fill,legend:c[b].legendLabel}):a.addSeries(b,c[b]));this.config.isPreview||new q(a,"default");new n(a,"default");new v(a,"default",{duration:800,
scale:1.5});a.render();this.chart=a;!this.config.isPreview&&f&&(g.set(this.legendContainer,"display","block"),this._createChartLegend(a));this.onChartCreated()},_createChartLegend:function(a){setTimeout(d.hitch(this,function(){this.legend&&(this.legend.destroy(),this.legend=null);p.empty(this.legendNode);this.legend=new m({chart:a,horizontal:!0},p.create("div",{},this.legendNode))}),1500)},onChartCreated:function(){},onChartResize:function(){},_getFieldValues:function(a,b){var c="",d,e,f;a=a.replace(/(\n|\r|\r\n)/g,
"\x3cbr\x3e");d=a.split("{");for(e=0;e<d.length;e++)if(0===e)c+=d[e];else if(-1!==d[e].indexOf("}"))for(a=d[e].split("}"),f=0;f<a.length;f++)if(0===f){if(b[a[f]]||0===b[a[f]])c+=b[a[f]]}else c=1===f?c+a[f]:c+("}"+a[f]);else c+="{";return c}})})},"dojox/charting/action2d/Tooltip":function(){define("dijit/Tooltip dojo/_base/lang dojo/_base/declare dojo/_base/window dojo/_base/connect dojo/dom-style ./PlotAction dojox/gfx/matrix dojo/has dojo/has!dojo-bidi?../bidi/action2d/Tooltip dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h){var q=function(a,b){var c=a.run&&a.run.data&&a.run.data[a.index];return c&&"number"!=typeof c&&(c.tooltip||c.text)?c.tooltip||c.text:b.tooltipFunc?b.tooltipFunc(a):a.y},n=Math.PI/4,r=Math.PI/2;c=l(a("dojo-bidi")?"dojox.charting.action2d.NonBidiTooltip":"dojox.charting.action2d.Tooltip",d,{defaultParams:{text:q,mouseOver:!0,defaultPosition:["after-centered","before-centered"]},optionalParams:{},constructor:function(a,b,c){this.text=c&&c.text?c.text:q;this.mouseOver=
c&&void 0!=c.mouseOver?c.mouseOver:!0;this.defaultPosition=c&&void 0!=c.defaultPosition?c.defaultPosition:["after-centered","before-centered"];this.connect()},process:function(c){if("onplotreset"===c.type||"onmouseout"===c.type)f.hide(this.aroundRect),this.aroundRect=null,"onplotreset"===c.type&&delete this.angles;else if(!(!c.shape||this.mouseOver&&"onmouseover"!==c.type||!this.mouseOver&&"onclick"!==c.type)){var d={type:"rect"},e=this.defaultPosition;switch(c.element){case "marker":d.x=c.cx;d.y=
c.cy;d.w=d.h=1;break;case "circle":d.x=c.cx-c.cr;d.y=c.cy-c.cr;d.w=d.h=2*c.cr;break;case "spider_circle":d.x=c.cx;d.y=c.cy;d.w=d.h=1;break;case "spider_plot":return;case "column":e=["above-centered","below-centered"];case "bar":d=k.clone(c.shape.getShape());d.w=d.width;d.h=d.height;break;case "candlestick":d.x=c.x;d.y=c.y;d.w=c.width;d.h=c.height;break;default:if(!this.angles){var t="number"==typeof c.run.data[0]?h.map(c.run.data,"x ? Math.max(x, 0) : 0"):h.map(c.run.data,"x ? Math.max(x.y, 0) : 0");
this.angles=h.map(h.scanl(t,"+",0),"* 2 * Math.PI / this",h.foldl(t,"+",0))}var t=b._degToRad(c.plot.opt.startAngle),q=(this.angles[c.index]+this.angles[c.index+1])/2+t;d.x=c.cx+c.cr*Math.cos(q);d.y=c.cy+c.cr*Math.sin(q);d.w=d.h=1;t&&(0>q||q>2*Math.PI)&&(q=Math.abs(2*Math.PI-Math.abs(q)));q<n||(q<r+n?e=["below-centered","above-centered"]:q<Math.PI+n?e=["before-centered","after-centered"]:q<2*Math.PI-n&&(e=["above-centered","below-centered"]))}a("dojo-bidi")&&this._recheckPosition(c,d,e);t=this.chart.getCoords();
d.x+=t.x;d.y+=t.y;d.x=Math.round(d.x);d.y=Math.round(d.y);d.w=Math.ceil(d.w);d.h=Math.ceil(d.h);this.aroundRect=d;(c=this.text(c,this.plot))&&f.show(this._format(c),this.aroundRect,e);this.mouseOver||(this._handle=g.connect(p.doc,"onclick",this,"onClick"))}},onClick:function(){this.process({type:"onmouseout"})},_recheckPosition:function(a,b,c){},_format:function(a){return a}});return a("dojo-bidi")?l("dojox.charting.action2d.Tooltip",[c,e]):c})},"dojox/charting/action2d/PlotAction":function(){define(["dojo/_base/connect",
"dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional"],function(f,k,l,p,g){var c=p.backOut;return k("dojox.charting.action2d.PlotAction",l,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(d,b,a){this.anim={};a||(a={});this.duration=a.duration?a.duration:400;this.easing=a.easing?a.easing:c},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process")},disconnect:function(){this.handle&&(f.disconnect(this.handle),this.handle=null)},reset:function(){},
destroy:function(){this.inherited(arguments);g.forIn(this.anim,function(c){g.forIn(c,function(b){b.action.stop(!0)})});this.anim={}}})})},"dojox/charting/action2d/Base":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Evented"],function(f,k,l){return k("dojox.charting.action2d.Base",l,{constructor:function(k,g){this.chart=k;this.plot=g?f.isString(g)?this.chart.getPlot(g):g:this.chart.getPlot("default")},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect()}})})},
"dojox/lang/functional/scan":function(){define(["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(f,k,l){var p={};k.mixin(l,{scanl:function(g,c,d,b){"string"==typeof g&&(g=g.split(""));b=b||f.global;c=l.lambda(c);var a,e,h;if(k.isArray(g))for(a=Array((e=g.length)+1),a[0]=d,h=0;h<e;d=c.call(b,d,g[h],h,g),a[++h]=d);else if("function"==typeof g.hasNext&&"function"==typeof g.next)for(a=[d],h=0;g.hasNext();a.push(d=c.call(b,d,g.next(),h++,g)));else for(h in a=[d],g)h in p||a.push(d=c.call(b,d,
g[h],h,g));return a},scanl1:function(g,c,d){"string"==typeof g&&(g=g.split(""));d=d||f.global;c=l.lambda(c);var b,a,e;a=!0;if(k.isArray(g)){b=Array(a=g.length);b[0]=e=g[0];for(var h=1;h<a;b[h]=e=c.call(d,e,g[h],h,g),++h);}else if("function"==typeof g.hasNext&&"function"==typeof g.next){if(g.hasNext())for(b=[e=g.next()],h=1;g.hasNext();b.push(e=c.call(d,e,g.next(),h++,g)));}else for(h in g)h in p||(a?(b=[e=g[h]],a=!1):b.push(e=c.call(d,e,g[h],h,g)));return b},scanr:function(g,c,d,b){"string"==typeof g&&
(g=g.split(""));b=b||f.global;c=l.lambda(c);var a=g.length,e=Array(a+1),h=a;for(e[a]=d;0<h;--h,d=c.call(b,d,g[h],h,g),e[h]=d);return e},scanr1:function(g,c,d){"string"==typeof g&&(g=g.split(""));d=d||f.global;c=l.lambda(c);var b=g.length,a=Array(b),e=g[b-1],b=b-1;for(a[b]=e;0<b;--b,e=c.call(d,e,g[b],b,g),a[b]=e);return a}})})},"dojox/charting/action2d/Highlight":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Color dojo/_base/connect dojox/color/_base ./PlotAction dojo/fx/easing dojox/gfx/fx".split(" "),
function(f,k,l,p,g,c,d,b){var a=function(a){return function(){return a}},e=function(a){a=new g.Color(a);var b=a.toHsl();0==b.s?b.l=50>b.l?100:0:(b.s=100,b.l=50>b.l?75:75<b.l?50:b.l-50>75-b.l?50:75);b=g.fromHsl(b);b.a=a.a;return b},h=function(a){a=e(a);a.a=.7;return a};return k("dojox.charting.action2d.Highlight",c,{defaultParams:{duration:400,easing:d.backOut},optionalParams:{highlight:"red"},constructor:function(b,c,d){this.colorFunc=(b=d&&d.highlight)?f.isFunction(b)?b:a(b):e;this.connect()},process:function(a){if(a.shape&&
a.type in this.overOutEvents&&"spider_circle"!=a.element&&"spider_plot"!=a.element){"spider_poly"==a.element&&this.colorFunc==e&&(this.colorFunc=h);var c=a.run.name,d=a.index,f;c in this.anim?f=this.anim[c][d]:this.anim[c]={};if(f)f.action.stop(!0);else{f=a.shape.getFill();if(!(f&&f instanceof l))return;this.anim[c][d]=f={start:f,end:this.colorFunc(f)}}var m=f.start,g=f.end;if("onmouseout"==a.type)var q=m,m=g,g=q;f.action=b.animateFill({shape:a.shape,duration:this.duration,easing:this.easing,color:{start:m,
end:g}});"onmouseout"==a.type&&p.connect(f.action,"onEnd",this,function(){this.anim[c]&&delete this.anim[c][d]});f.action.play()}}})})},"dojox/charting/action2d/MoveSlice":function(){define("dojo/_base/connect dojo/_base/declare dojo/_base/array ./PlotAction dojo/fx/easing dojox/gfx/matrix dojox/gfx/fx dojox/lang/functional dojox/lang/functional/scan dojox/lang/functional/fold".split(" "),function(f,k,l,p,g,c,d,b){return k("dojox.charting.action2d.MoveSlice",p,{defaultParams:{duration:400,easing:g.backOut,
scale:1.05,shift:7},optionalParams:{},constructor:function(a,b,c){c||(c={});this.scale="number"==typeof c.scale?c.scale:1.05;this.shift="number"==typeof c.shift?c.shift:7;this.connect()},process:function(a){if(a.shape&&"slice"==a.element&&a.type in this.overOutEvents){if(!this.angles){var e=c._degToRad(a.plot.opt.startAngle);this.angles="number"==typeof a.run.data[0]?b.map(b.scanl(a.run.data,"+",0),"* 2 * Math.PI / this",b.foldl(a.run.data,"+",0)):b.map(b.scanl(a.run.data,"a + b.y",0),"* 2 * Math.PI / this",
b.foldl(a.run.data,"a + b.y",0));this.angles=l.map(this.angles,function(a){return a+e})}var h=a.index,g,n,r,t,m;g=(this.angles[h]+this.angles[h+1])/2;var k=c.rotateAt(-g,a.cx,a.cy),p=c.rotateAt(g,a.cx,a.cy);(g=this.anim[h])?g.action.stop(!0):this.anim[h]=g={};"onmouseover"==a.type?(t=0,m=this.shift,n=1,r=this.scale):(t=this.shift,m=0,n=this.scale,r=1);g.action=d.animateTransform({shape:a.shape,duration:this.duration,easing:this.easing,transform:[p,{name:"translate",start:[t,0],end:[m,0]},{name:"scaleAt",
start:[n,a.cx,a.cy],end:[r,a.cx,a.cy]},k]});"onmouseout"==a.type&&f.connect(g.action,"onEnd",this,function(){delete this.anim[h]});g.action.play()}},reset:function(){delete this.angles}})})},"dojox/charting/widget/SelectableLegend":function(){define("dojo/_base/array dojo/_base/declare dojo/query dojo/_base/connect dojo/_base/Color ./Legend dijit/form/CheckBox ../action2d/Highlight dojox/lang/functional dojox/gfx/fx dojo/keys dojo/dom-construct dojo/dom-prop dijit/registry".split(" "),function(f,
k,l,p,g,c,d,b,a,e,h,q,n,r){function t(a){return"mouseenter"==a?"onmouseover":"mouseleave"==a?"onmouseout":"on"+a}var m=k(null,{constructor:function(a){this.legend=a;this.index=0;this.horizontalLength=this._getHrizontalLength();f.forEach(a.legends,function(a,b){0<b&&l("input",a).attr("tabindex",-1)});this.firstLabel=l("input",a.legends[0])[0];p.connect(this.firstLabel,"focus",this,function(){this.legend.active=!0});p.connect(this.legend.domNode,"keydown",this,"_onKeyEvent")},_getHrizontalLength:function(){var a=
this.legend.horizontal;return"number"==typeof a?Math.min(a,this.legend.legends.length):a?this.legend.legends.length:1},_onKeyEvent:function(a){if(this.legend.active)if(a.keyCode==h.TAB)this.legend.active=!1;else{var b=this.legend.legends.length;switch(a.keyCode){case h.LEFT_ARROW:this.index--;0>this.index&&(this.index+=b);break;case h.RIGHT_ARROW:this.index++;this.index>=b&&(this.index-=b);break;case h.UP_ARROW:0<=this.index-this.horizontalLength&&(this.index-=this.horizontalLength);break;case h.DOWN_ARROW:this.index+
this.horizontalLength<b&&(this.index+=this.horizontalLength);break;default:return}this._moveToFocus();Event.stop(a)}},_moveToFocus:function(){l("input",this.legend.legends[this.index])[0].focus()}}),v=k(b,{connect:function(){}});return k("dojox.charting.widget.SelectableLegend",c,{outline:!1,transitionFill:null,transitionStroke:null,autoScale:!1,postCreate:function(){this.legends=[];this.legendAnim={};this._cbs=[];this.inherited(arguments)},refresh:function(){this.legends=[];this._clearLabels();this.inherited(arguments);
this._applyEvents();new m(this)},_clearLabels:function(){for(var a=this._cbs;a.length;)a.pop().destroyRecursive()},_addLabel:function(a,b){this.inherited(arguments);var c=l("td",this.legendBody),e=c[c.length-1];this.legends.push(e);c=new d({checked:!0});this._cbs.push(c);q.place(c.domNode,e,"first");e=l("label",e)[0];n.set(e,"for",c.id)},_applyEvents:function(){this.chart.dirty||f.forEach(this.legends,function(a,b){var c,d,e;this._isPie()?(c=this.chart.stack[0],d=c.name,e=this.chart.series[0].name):
(c=this.chart.series[b],d=c.plot,e=c.name);var h=r.byNode(l(".dijitCheckBox",a)[0]);h.set("checked",!this._isHidden(d,b));p.connect(h,"onClick",this,function(a){this.toogle(d,b,!h.get("checked"));a.stopPropagation()});var m=l(".dojoxLegendIcon",a)[0],g=this._getFilledShape(this._surfaces[b].children);f.forEach(["onmouseenter","onmouseleave"],function(a){p.connect(m,a,this,function(a){this._highlight(a,g,b,!h.get("checked"),e,d)})},this)},this)},_isHidden:function(a,b){return this._isPie()?-1!=f.indexOf(this.chart.getPlot(a).runFilter,
b):this.chart.series[b].hidden},toogle:function(a,b,c){a=this.chart.getPlot(a);this._isPie()?-1!=f.indexOf(a.runFilter,b)?c||(a.runFilter=f.filter(a.runFilter,function(a){return a!=b})):c&&a.runFilter.push(b):this.chart.series[b].hidden=c;this.autoScale?this.chart.dirty=!0:a.dirty=!0;this.chart.render()},_highlight:function(a,b,c,d,e,h){if(!d){var m=this._getAnim(h),g=this._isPie(),u=t(a.type);m.process({shape:b,index:g?"legend"+c:"legend",run:{name:e},type:u});f.forEach(this._getShapes(c,h),function(a,
b){a={shape:a,index:g?c:b,run:{name:e},type:u};m.duration=100;m.process(a)})}},_getShapes:function(a,b){var c=[];if(this._isPie()){var d=0;f.forEach(this.chart.getPlot(b).runFilter,function(b){a>b&&d++});c.push(this.chart.stack[0].group.children[a-d])}else this._isCandleStick(b)?f.forEach(this.chart.series[a].group.children,function(a){f.forEach(a.children,function(a){f.forEach(a.children,function(a){"line"!=a.shape.type&&c.push(a)})})}):c=this.chart.series[a].group.children;return c},_getAnim:function(a){this.legendAnim[a]||
(this.legendAnim[a]=new v(this.chart,a));return this.legendAnim[a]},_getTransitionFill:function(a){return-1!=this.chart.stack[this.chart.plots[a]].declaredClass.indexOf("dojox.charting.plot2d.Stacked")?this.chart.theme.plotarea.fill:null},_getFilledShape:function(a){for(var b=0;a[b];){if(a[b].getFill())return a[b];b++}return null},_isPie:function(){return"dojox.charting.plot2d.Pie"==this.chart.stack[0].declaredClass},_isCandleStick:function(a){return"dojox.charting.plot2d.Candlesticks"==this.chart.stack[this.chart.plots[a]].declaredClass},
destroy:function(){this._clearLabels();this.inherited(arguments)}})})},"dojox/charting/widget/Legend":function(){define("dojo/_base/declare dijit/_WidgetBase dojox/gfx dojo/_base/array dojo/has dojo/has!dojo-bidi?../bidi/widget/Legend dojox/lang/functional dojo/dom dojo/dom-construct dojo/dom-class dijit/registry".split(" "),function(f,k,l,p,g,c,d,b,a,e,h){k=f(g("dojo-bidi")?"dojox.charting.widget.NonBidiLegend":"dojox.charting.widget.Legend",k,{chartRef:"",horizontal:!0,swatchSize:18,legendBody:null,
postCreate:function(){!this.chart&&this.chartRef&&((this.chart=h.byId(this.chartRef)||h.byNode(b.byId(this.chartRef)))||console.log("Could not find chart instance with id: "+this.chartRef));this.chart=this.chart.chart||this.chart;this.refresh()},buildRendering:function(){this.domNode=a.create("table",{role:"group","aria-label":"chart legend","class":"dojoxLegendNode"});this.legendBody=a.create("tbody",null,this.domNode);this.inherited(arguments)},destroy:function(){this._surfaces&&p.forEach(this._surfaces,
function(a){a.destroy()});this.inherited(arguments)},refresh:function(){this._surfaces&&p.forEach(this._surfaces,function(a){a.destroy()});for(this._surfaces=[];this.legendBody.lastChild;)a.destroy(this.legendBody.lastChild);this.horizontal&&(e.add(this.domNode,"dojoxLegendHorizontal"),this._tr=a.create("tr",null,this.legendBody),this._inrow=0);var b=this.series||this.chart.series;if(0!=b.length)if("dojox.charting.plot2d.Pie"==b[0].chart.stack[0].declaredClass){var c=b[0].chart.stack[0];"number"==
typeof c.run.data[0]?(b=d.map(c.run.data,"Math.max(x, 0)"),b=d.map(b,"/this",d.foldl(b,"+",0)),p.forEach(b,function(a,b){this._addLabel(c.dyn[b],c._getLabel(100*a)+"%")},this)):p.forEach(c.run.data,function(a,b){this._addLabel(c.dyn[b],a.legend||a.text||a.y)},this)}else p.forEach(b,function(a){this._addLabel(a.dyn,a.legend||a.name)},this)},_addLabel:function(b,c){var d=a.create("td"),f=a.create("div",null,d),h=a.create("label",null,d),q=a.create("div",{style:{width:this.swatchSize+"px",height:this.swatchSize+
"px","float":"left"}},f);e.add(f,"dojoxLegendIcon dijitInline");e.add(h,"dojoxLegendText");this._tr?(this._tr.appendChild(d),++this._inrow===this.horizontal&&(this._tr=a.create("tr",null,this.legendBody),this._inrow=0)):a.create("tr",null,this.legendBody).appendChild(d);this._makeIcon(q,b);h.innerHTML=String(c);g("dojo-bidi")&&(h.dir=this.getTextDir(c,h.dir))},_makeIcon:function(a,b){var c=this.swatchSize,d=this.swatchSize;a=l.createSurface(a,d,c);this._surfaces.push(a);if(b.fill)a.createRect({x:2,
y:2,width:d-4,height:c-4}).setFill(b.fill).setStroke(b.stroke);else if(b.stroke||b.marker){var e={x1:0,y1:c/2,x2:d,y2:c/2};b.stroke&&a.createLine(e).setStroke(b.stroke);b.marker&&a.createPath({path:"M"+d/2+" "+c/2+" "+b.marker}).setFill(b.markerFill).setStroke(b.markerStroke)}else a.createRect({x:2,y:2,width:d-4,height:c-4}).setStroke("black"),a.createLine({x1:2,y1:2,x2:d-2,y2:c-2}).setStroke("black"),a.createLine({x1:2,y1:c-2,x2:d-2,y2:2}).setStroke("black")}});return g("dojo-bidi")?f("dojox.charting.widget.Legend",
[k,c]):k})},"dojox/charting/action2d/Magnify":function(){define("dojo/_base/connect dojo/_base/declare ./PlotAction dojox/gfx/matrix dojox/gfx/fx dojo/fx dojo/fx/easing".split(" "),function(f,k,l,p,g,c,d){return k("dojox.charting.action2d.Magnify",l,{defaultParams:{duration:400,easing:d.backOut,scale:2},optionalParams:{},constructor:function(b,a,c){this.scale=c&&"number"==typeof c.scale?c.scale:2;this.connect()},process:function(b){if(b.shape&&b.type in this.overOutEvents&&"cx"in b&&"cy"in b&&"spider_plot"!=
b.element&&"spider_poly"!=b.element){var a=b.run.name,d=b.index,h=[],q,n,r;a in this.anim?q=this.anim[a][d]:this.anim[a]={};q?q.action.stop(!0):this.anim[a][d]=q={};"onmouseover"==b.type?(n=p.identity,r=this.scale):(n=p.scaleAt(this.scale,b.cx,b.cy),r=1/this.scale);n={shape:b.shape,duration:this.duration,easing:this.easing,transform:[{name:"scaleAt",start:[1,b.cx,b.cy],end:[r,b.cx,b.cy]},n]};b.shape&&h.push(g.animateTransform(n));b.outline&&(n.shape=b.outline,h.push(g.animateTransform(n)));b.shadow&&
(n.shape=b.shadow,h.push(g.animateTransform(n)));h.length?(q.action=c.combine(h),"onmouseout"==b.type&&f.connect(q.action,"onEnd",this,function(){this.anim[a]&&delete this.anim[a][d]}),q.action.play()):delete this.anim[a][d]}}})})},"dojox/charting/themes/GreySkies":function(){define(["../SimpleTheme","./common"],function(f,k){k.GreySkies=new f;return k.GreySkies})},"dojox/charting/themes/common":function(){define(["dojo/_base/lang"],function(f){return f.getObject("dojox.charting.themes",!0)})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q){var n=k("dijit._editor.plugins.LinkDialog",e,{buttonClass:h,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=g.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(b){f("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),g.hitch(this,function(d,e,f){var h=this;this.tag="insertImage"==this.command?"img":"a";d=g.delegate(d.getLocalization("dijit","common",this.lang),d.getLocalization("dijit._editor",
"LinkDialog",this.lang));var m=this.dropDown=this.button.dropDown=new e({title:d[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:g.hitch(this,"setValue"),onOpen:function(){h._onOpenDialog();e.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(g.hitch(h,"_onCloseDialog"),0)}});d.urlRegExp=this.urlRegExp;d.id=f.getUniqueId(this.editor.id);this._uniqueId=d.id;this._setContent(m.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
a.substitute(this.linkDialogTemplate,d));m.startup();this._urlInput=f.byId(this._uniqueId+"_urlInput");this._textInput=f.byId(this._uniqueId+"_textInput");this._setButton=f.byId(this._uniqueId+"_setButton");this.own(f.byId(this._uniqueId+"_cancelButton").on("click",g.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",g.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",g.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=g.hitch(this,function(){var a=this._urlInput.get("value");return this._urlRegExp.test(a)||this._emailRegExp.test(a)});this.own(c(m.domNode,"keydown",g.hitch(this,g.hitch(this,function(a){!a||a.keyCode!=p.ENTER||a.shiftKey||a.metaKey||a.ctrlKey||a.altKey||this._setButton.get("disabled")||(m.onExecute(),m.execute(m.get("value")))}))));b()}))},_checkAndFixInput:function(){var a=this,b=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var c=b,d=!1,e=!1;c&&1<c.length&&(c=g.trim(c),0!==c.indexOf("mailto:")&&(0<c.indexOf("/")?-1===c.indexOf("://")&&"/"!==c.charAt(0)&&c.indexOf("./")&&0!==c.indexOf("../")&&a._hostRxp.test(c)&&(d=!0):a._userAtRxp.test(c)&&(e=!0)));d&&a._urlInput.set("value","http://"+c);e&&a._urlInput.set("value","mailto:"+c);a._setButton.set("disabled",!a._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(g.hitch(this,
function(){this.own(c(this.editor.editNode,"dblclick",g.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(a){this.dropDown.set({parserScope:"dojo",content:a})},_checkValues:function(a){a&&a.urlInput&&(a.urlInput=a.urlInput.replace(/"/g,"\x26quot;"));return a},setValue:function(c){this._onCloseDialog();if(9>d("ie")){var e=q.getSelection(this.editor.window).getRangeAt(0).endContainer;3===e.nodeType&&(e=e.parentNode);
e&&e.nodeName&&e.nodeName.toLowerCase()!==this.tag&&(e=this.editor.selection.getSelectedElement(this.tag));e&&e.nodeName&&e.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(e),this.editor.execCommand("unlink"))}c=this._checkValues(c);this.editor.execCommand("inserthtml",a.substitute(this.htmlTemplate,c));b("a",this.editor.document).forEach(function(a){a.innerHTML||l.has(a,"name")||a.parentNode.removeChild(a)},this)},_onCloseDialog:function(){this.editor.focused&&
this.editor.focus()},_getCurrentValues:function(a){var b,c,d;a&&a.tagName.toLowerCase()===this.tag?(b=a.getAttribute("_djrealurl")||a.getAttribute("href"),d=a.getAttribute("target")||"_self",c=a.textContent||a.innerText,this.editor.selection.selectElement(a,!0)):c=this.editor.selection.getSelectedText();return{urlInput:b||"",textInput:c||"",targetSelect:d||""}},_onOpenDialog:function(){var a,b;if(d("ie")){if(b=q.getSelection(this.editor.window),b.rangeCount){var c=b.getRangeAt(0);a=c.endContainer;
3===a.nodeType&&(a=a.parentNode);a&&a.nodeName&&a.nodeName.toLowerCase()!==this.tag&&(a=this.editor.selection.getSelectedElement(this.tag));if(!a||a.nodeName&&a.nodeName.toLowerCase()!==this.tag)(b=this.editor.selection.getAncestorElement(this.tag))&&b.nodeName&&b.nodeName.toLowerCase()==this.tag?(a=b,this.editor.selection.selectElement(a)):c.startContainer===c.endContainer&&(b=c.startContainer.firstChild)&&b.nodeName&&b.nodeName.toLowerCase()==this.tag&&(a=b,this.editor.selection.selectElement(a))}}else a=
this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){if(a&&a.target&&(a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&l.get(a,"href"))){var b=this.editor;this.editor.selection.selectElement(a);b.onDisplayChanged();b._updateTimer&&(b._updateTimer.remove(),delete b._updateTimer);b.onNormalizedDisplayChanged();var c=this.button;setTimeout(function(){c.set("disabled",
!1);c.loadAndOpenDropDown().then(function(){c.dropDown.focus&&c.dropDown.focus()})},10)}}}),r=k("dijit._editor.plugins.ImgLinkDialog",[n],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(a){var b,c;a&&a.tagName.toLowerCase()===this.tag?(b=a.getAttribute("_djrealurl")||a.getAttribute("src"),c=a.getAttribute("alt"),this.editor.selection.selectElement(a,!0)):c=this.editor.selection.getSelectedText();return{urlInput:b||"",textInput:c||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(g.hitch(this,
function(){this.own(c(this.editor.editNode,"mousedown",g.hitch(this,"_selectTag")))}))},_selectTag:function(a){a&&a.target&&(a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(a))},_checkValues:function(a){a&&a.urlInput&&(a.urlInput=a.urlInput.replace(/"/g,"\x26quot;"));a&&a.textInput&&(a.textInput=a.textInput.replace(/"/g,"\x26quot;"));return a},_onDblClick:function(a){if(a&&a.target&&(a=a.target,(a.tagName?a.tagName.toLowerCase():"")===this.tag&&l.get(a,
"src"))){var b=this.editor;this.editor.selection.selectElement(a);b.onDisplayChanged();b._updateTimer&&(b._updateTimer.remove(),delete b._updateTimer);b.onNormalizedDisplayChanged();var c=this.button;setTimeout(function(){c.set("disabled",!1);c.loadAndOpenDropDown().then(function(){c.dropDown.focus&&c.dropDown.focus()})},10)}}});e.registry.createLink=function(){return new n({command:"createLink"})};e.registry.insertImage=function(){return new r({command:"insertImage"})};n.ImgLinkDialog=r;return n})},
"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(f,k,l,p,g){k=k("dijit._editor._Plugin",p,{constructor:function(c){this.params=c||{};l.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:g,disabled:!1,getLabel:function(c){return this.editor.commands[c]},_initButton:function(){if(this.command.length){var c=
this.getLabel(this.command),d=this.editor,b=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(c=l.mixin({label:c,ownerDocument:d.ownerDocument,dir:d.dir,lang:d.lang,showLabel:!1,iconClass:b,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete c.name,this.button=new this.buttonClass(c))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();
this.inherited(arguments)},connect:function(c,d,b){this.own(f.connect(c,d,this,b))},updateState:function(){var c=this.editor,d=this.command,b,a;if(c&&c.isLoaded&&d.length){var e=this.get("disabled");if(this.button)try{a=!e&&c.queryCommandEnabled(d),this.enabled!==a&&(this.enabled=a,this.button.set("disabled",!a)),a&&"boolean"==typeof this.button.checked&&(b=c.queryCommandState(d),this.checked!==b&&(this.checked=b,this.button.set("checked",c.queryCommandState(d))))}catch(h){console.log(h)}}},setEditor:function(c){this.editor=
c;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",l.hitch(this.editor,"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",l.hitch(this,"updateState")))},setToolbar:function(c){this.button&&c.addChild(this.button)},set:function(c,d){if("object"===typeof c){for(var b in c)this.set(b,c[b]);return this}b=this._getAttrNames(c);if(this[b.s])var a=
this[b.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(c,d);return a||this},get:function(c){var d=this._getAttrNames(c);return this[d.g]?this[d.g]():this[c]},_setDisabledAttr:function(c){this._set("disabled",c);this.updateState()},_getAttrNames:function(c){var d=this._attrPairNames;if(d[c])return d[c];var b=c.charAt(0).toUpperCase()+c.substr(1);return d[c]={s:"_set"+b+"Attr",g:"_get"+b+"Attr"}},_set:function(c,d){this[c]=d}});k.registry={};return k})},"dijit/_editor/range":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang"],function(f,k,l){var p={getIndex:function(c,b){for(var a=[],d=[],f=c,g,n;c!=b;){var r=0;for(g=c.parentNode;n=g.childNodes[r++];)if(n===c){--r;break}a.unshift(r);d.unshift(r-g.childNodes.length);c=g}if(0<a.length&&3==f.nodeType){for(n=f.previousSibling;n&&3==n.nodeType;)a[a.length-1]--,n=n.previousSibling;for(n=f.nextSibling;n&&3==n.nodeType;)d[d.length-1]++,n=n.nextSibling}return{o:a,r:d}},getNode:function(c,b){if(!l.isArray(c)||0==c.length)return b;var a=b;
f.every(c,function(b){if(0<=b&&b<a.childNodes.length)a=a.childNodes[b];else return a=null,!1;return!0});return a},getCommonAncestor:function(c,b,a){a=a||c.ownerDocument.body;var d=function(b){for(var c=[];b;)if(c.unshift(b),b!==a)b=b.parentNode;else break;return c};c=d(c);b=d(b);for(var d=Math.min(c.length,b.length),f=c[0],g=1;g<d;g++)if(c[g]===b[g])f=c[g];else break;return f},getAncestor:function(c,b,a){for(a=a||c.ownerDocument.body;c&&c!==a;){var d=c.nodeName.toUpperCase();if(b.test(d))return c;
c=c.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(c,b,a){a=a||c.ownerDocument.body;b=b||p.BlockTagNames;for(var d=null,f;c&&c!==a;){var g=c.nodeName.toUpperCase();!d&&b.test(g)&&(d=c);!f&&/^(?:BODY|TD|TH|CAPTION)$/.test(g)&&(f=c);c=c.parentNode}return{blockNode:d,blockContainer:f||c.ownerDocument.body}},atBeginningOfContainer:function(c,b,a){var d=!1,f=0==a;f||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(0,a))&&(f=
!0);if(f)for(d=!0;b&&b!==c;){if(b.previousSibling){d=!1;break}b=b.parentNode}return d},atEndOfContainer:function(c,b,a){var d=!1,f=a==(b.length||b.childNodes.length);f||3!=b.nodeType||/^[\s\xA0]+$/.test(b.nodeValue.substr(a))&&(f=!0);if(f)for(d=!0;b&&b!==c;){if(b.nextSibling){d=!1;break}b=b.parentNode}return d},adjacentNoneTextNode:function(c,b){var a=c;c=0-c.length||0;for(b=b?"nextSibling":"previousSibling";a&&3==a.nodeType;)c+=a.length,a=a[b];return[a,c]},create:function(d){d=d||window;return d.getSelection?
d.document.createRange():new c},getSelection:function(c,b){if(c.getSelection)return c.getSelection();c=new g.selection(c);b||c._getCurrentSelection();return c}};if(!window.getSelection)var g=p.ie={cachedSelection:{},selection:function(d){this._ranges=[];this.addRange=function(b,a){this._ranges.push(b);a||b._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(b){return this._ranges[b]};this._getCurrentSelection=function(){this.removeAllRanges();
var b;b=d.document.selection.createRange();b="CONTROL"==d.document.selection.type.toUpperCase()?new c(g.decomposeControlRange(b)):new c(g.decomposeTextRange(b));this.addRange(b,!0),this.isCollapsed=b.collapsed}},decomposeControlRange:function(c){var b=c.item(0),a=c.item(c.length-1);c=b.parentNode;var d=a.parentNode,b=p.getIndex(b,c).o[0],a=p.getIndex(a,d).o[0]+1;return[c,b,d,a]},getEndPoint:function(c,b){var a=c.duplicate();a.collapse(!b);var d="EndTo"+(b?"End":"Start"),h=a.parentElement(),g,n,k;
0<h.childNodes.length?f.every(h.childNodes,function(b,e){var f;if(3!=b.nodeType)if(a.moveToElementText(b),0<a.compareEndPoints(d,c))if(k&&3==k.nodeType)g=k,f=!0;else return g=h,n=e,!1;else{if(e==h.childNodes.length-1)return g=h,n=h.childNodes.length,!1}else e==h.childNodes.length-1&&(g=b,f=!0);if(f&&g)return g=(b=p.adjacentNoneTextNode(g)[0])?b.nextSibling:h.firstChild,e=p.adjacentNoneTextNode(g),b=e[0],e=e[1],b?(a.moveToElementText(b),a.collapse(!1)):a.moveToElementText(h),a.setEndPoint(d,c),n=a.text.length-
e,!1;k=b;return!0}):(g=h,n=0);b||1!=g.nodeType||n!=g.childNodes.length||(b=g.nextSibling)&&3==b.nodeType&&(g=b,n=0);return[g,n]},setEndPoint:function(c,b,a){c=c.duplicate();var d;if(3!=b.nodeType)if(0<a){if(d=b.childNodes[a-1])if(3==d.nodeType)b=d,a=d.length;else if(d.nextSibling&&3==d.nextSibling.nodeType)b=d.nextSibling,a=0;else{c.moveToElementText(d.nextSibling?d:b);var f=d.parentNode;d=f.insertBefore(d.ownerDocument.createTextNode(" "),d.nextSibling);c.collapse(!1);f.removeChild(d)}}else c.moveToElementText(b),
c.collapse(!0);3==b.nodeType&&(d=p.adjacentNoneTextNode(b),f=d[0],d=d[1],f?(c.moveToElementText(f),c.collapse(!1),"inherit"!=f.contentEditable&&d++):(c.moveToElementText(b.parentNode),c.collapse(!0),c.move("character",1),c.move("character",-1)),a+=d,0<a&&c.move("character",a)!=a&&console.error("Error when moving!"));return c},decomposeTextRange:function(c){var b=g.getEndPoint(c),a=b[0],d=b[1],f=b[0],b=b[1];c.htmlText.length&&(c.htmlText==c.text?b=d+c.text.length:(b=g.getEndPoint(c,!0),f=b[0],b=b[1]));
return[a,d,f,b]},setRange:function(c,b,a,e,f,k){b=g.setEndPoint(c,b,a);c.setEndPoint("StartToStart",b);if(!k)var d=g.setEndPoint(c,e,f);c.setEndPoint("EndToEnd",d||b);return c}},c=p.W3CRange=k(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=
this.startContainer!==this.endContainer?p.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(c,b){b=parseInt(b);if(this.startContainer!==c||this.startOffset!=b)delete this._cachedBookmark,this.startContainer=c,this.startOffset=b,this.endContainer?this._updateInternal():this.setEnd(c,b)},setEnd:function(c,b){b=parseInt(b);if(this.endContainer!==c||this.endOffset!=b)delete this._cachedBookmark,
this.endContainer=c,this.endOffset=b,this.startContainer?this._updateInternal():this.setStart(c,b)},setStartAfter:function(c,b){this._setPoint("setStart",c,b,1)},setStartBefore:function(c,b){this._setPoint("setStart",c,b,0)},setEndAfter:function(c,b){this._setPoint("setEnd",c,b,1)},setEndBefore:function(c,b){this._setPoint("setEnd",c,b,0)},_setPoint:function(c,b,a,e){a=p.getIndex(b,b.parentNode).o;this[c](b.parentNode,a.pop()+e)},_getIERange:function(){var c=(this._body||this.endContainer.ownerDocument.body).createTextRange();
g.setRange(c,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return c},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var c=this.startContainer,b=this._getIERange();3!==c.nodeType||this.startOffset||this.setStartBefore(c);b.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var d=new c([this.startContainer,
this.startOffset,this.endContainer,this.endOffset]);d._body=this._body;return d},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});l.setObject("dijit.range",p);return p})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A){var B=l("dijit._editor.plugins.ViewSource",t,{stripScripts:!0,stripComments:!0,stripIFrames:!0,readOnly:!1,_fsPlugin:null,toggle:function(){q("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var a=b.getLocalization("dijit._editor","commands"),c=this.editor;this.button=new m({label:a.viewSource,ownerDocument:c.ownerDocument,dir:c.dir,lang:c.lang,showLabel:!1,iconClass:this.iconClassPrefix+" "+
this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:e.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(b){this.editor=b;this._initButton();this.editor.addKeyHandler(a.F12,!0,!0,e.hitch(this,function(a){this.button.focus();this.toggle();a.stopPropagation();a.preventDefault();setTimeout(e.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(a){var b=this.editor,c=b._plugins,g;this._sourceShown=a;var m=this;try{this.sourceArea||
this._createSourceView();if(a)b._sourceQueryCommandEnabled=b.queryCommandEnabled,b.queryCommandEnabled=function(a){return"viewsource"===a.toLowerCase()},this.editor.onDisplayChanged(),g=b.get("value"),g=this._filter(g),b.set("value",g),f.forEach(c,function(a){!a||a instanceof B||!a.isInstanceOf(t)||a.set("disabled",!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return m.sourceArea}),this.sourceArea.value=g,this.sourceArea.style.height=b.iframe.style.height,this.sourceArea.style.width=
b.iframe.style.width,b.iframe.parentNode.style.position="relative",d.set(b.iframe,{position:"absolute",top:0,visibility:"hidden"}),d.set(this.sourceArea,{display:"block"}),this._resizeHandle=h(window,"resize",e.hitch(this,function(){var a=n.getBox(b.ownerDocument);"_prevW"in this&&"_prevH"in this&&a.w===this._prevW&&a.h===this._prevH||(this._prevW=a.w,this._prevH=a.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(e.hitch(this,function(){delete this._resizer;
this._resize()}),10))})),setTimeout(e.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=e.hitch(this,function(){var a=this.sourceArea.value;return a=this._filter(a)}),this._setListener=k.after(this.editor,"setValue",e.hitch(this,function(a){a=this._filter(a||"");this.sourceArea.value=a}),!0);else{if(!b._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();
delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);b.queryCommandEnabled=b._sourceQueryCommandEnabled;this._readOnly||(g=this.sourceArea.value,g=this._filter(g),b.beginEditing(),b.set("value",g),b.endEditing());f.forEach(c,function(a){a&&a.isInstanceOf(t)&&a.set("disabled",!1)});d.set(this.sourceArea,"display","none");d.set(b.iframe,{position:"relative",visibility:"visible"});delete b._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(e.hitch(this,
function(){var a=b.domNode.parentNode;a&&(a=A.getEnclosingWidget(a))&&a.resize&&a.resize();b.resize()}),300)}catch(I){console.log(I)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var a=this.editor,b=a.getHeaderHeight(),d=a.getFooterHeight(),e=c.position(a.domNode),f=c.getPadBorderExtents(a.iframe.parentNode),h=c.getMarginExtents(a.iframe.parentNode),g=c.getPadBorderExtents(a.domNode),m=e.w-g.w,e=e.h-(b+g.h+d);this._fsPlugin&&this._fsPlugin.isFullscreen&&
(a=n.getBox(a.ownerDocument),m=a.w-g.w,e=a.h-(b+g.h+d));c.setMarginBox(this.sourceArea,{w:Math.round(m-(f.w+h.w)),h:Math.round(e-(f.h+h.h))})},_createSourceView:function(){var b=this.editor,c=b._plugins;this.sourceArea=g.create("textarea");this.readOnly&&(p.set(this.sourceArea,"readOnly",!0),this._readOnly=!0);d.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});p.set(this.sourceArea,"aria-label",this.editor.id);g.place(this.sourceArea,b.iframe,"before");q("ie")&&
b.iframe.parentNode.lastChild!==b.iframe&&d.set(b.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});b._viewsource_oldFocus=b.focus;var f=this;b.focus=function(){if(f._sourceShown)f.setSourceAreaCaret();else try{this._vsFocused?(delete this._vsFocused,r.focus(b.editNode)):b._viewsource_oldFocus()}catch(I){console.log("ViewSource focus code error: "+I)}};var m,n;for(m=0;m<c.length;m++)if((n=c[m])&&("dijit._editor.plugins.FullScreen"===
n.declaredClass||n.declaredClass===v._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=n;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return f._sourceShown?f.sourceArea:this._viewsource_getAltViewNode()});this.own(h(this.sourceArea,"keydown",e.hitch(this,function(c){this._sourceShown&&c.keyCode==a.F12&&c.ctrlKey&&c.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(e.hitch(this,
function(){b.focus()}),100),c.stopPropagation(),c.preventDefault())})))},_stripScripts:function(a){a&&(a=a.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),a=a.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),a=a.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return a},_stripComments:function(a){a&&(a=a.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return a},_stripIFrames:function(a){a&&(a=a.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return a},_filter:function(a){a&&
(this.stripScripts&&(a=this._stripScripts(a)),this.stripComments&&(a=this._stripComments(a)),this.stripIFrames&&(a=this._stripIFrames(a)));return a},setSourceAreaCaret:function(){var a=this.sourceArea;r.focus(a);this._sourceShown&&!this.readOnly&&(a.setSelectionRange?a.setSelectionRange(0,0):this.sourceArea.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",0),a.moveEnd("character",0),a.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),
delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.inherited(arguments)}});t.registry.viewSource=t.registry.viewsource=function(a){return new B({readOnly:"readOnly"in a?a.readOnly:!1,stripComments:"stripComments"in a?a.stripComments:!0,stripScripts:"stripScripts"in a?a.stripScripts:!0,stripIFrames:"stripIFrames"in a?a.stripIFrames:!0})};return B})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r){f=l("dijit._editor.plugins._FontDropDown",[a,e,h],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:f,postMixInProperties:function(){this.inherited(arguments);this.strings=g.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=b.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new d({idProperty:"value",data:k.map(this.values,function(a){var b=this.strings[a]||a;return{label:this.getLabel(a,b),name:b,value:a}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(a,b){b=!1!==b;this.select.set("value",0>k.indexOf(this.values,a)?"":a,b);b||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(a){this._set("disabled",a);this.select.set("disabled",a)}});var t=l("dijit._editor.plugins._FontNameDropDown",f,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(a,b){return this.plainText?b:"\x3cdiv style\x3d'font-family: "+a+"'\x3e"+b+"\x3c/div\x3e"},_setValueAttr:function(a,b){this.generic&&(a={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",
Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[a]||a);this.inherited(arguments,[a,!1!==b])}}),m=l("dijit._editor.plugins._FontSizeDropDown",f,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(a,b){return this.plainText?b:"\x3cfont size\x3d"+a+"'\x3e"+b+"\x3c/font\x3e"},_setValueAttr:function(a,b){b=!1!==b;a.indexOf&&-1!=a.indexOf("px")&&(a={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(a,10)]||a);this.inherited(arguments,[a,b])}}),v=l("dijit._editor.plugins._FormatBlockDropDown",
f,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(a,b){return this.plainText||"noFormat"==a?b:"\x3c"+a+"\x3e"+b+"\x3c/"+a+"\x3e"},_execCommand:function(a,b,d){if("noFormat"===d){var e;if((b=r.getSelection(a.window))&&0<b.rangeCount){d=b.getRangeAt(0);var f;if(d){b=d.startContainer;for(e=d.endContainer;b&&b!==a.editNode&&b!==a.document.body&&1!==b.nodeType;)b=
b.parentNode;for(;e&&e!==a.editNode&&e!==a.document.body&&1!==e.nodeType;)e=e.parentNode;var h=c.hitch(this,function(b,c){if(b.childNodes&&b.childNodes.length){var d;for(d=0;d<b.childNodes.length;d++){var e=b.childNodes[d];if(1==e.nodeType&&a.selection.inSelection(e)){var f=e.tagName?e.tagName.toLowerCase():"";-1!==k.indexOf(this.values,f)&&c.push(e);h(e,c)}}}});d=c.hitch(this,function(b){if(b&&b.length){for(a.beginEditing();b.length;)this._removeFormat(a,b.pop());a.endEditing()}});var g=[];if(b==
e){var m;for(e=b;e&&e!==a.editNode&&e!==a.document.body;){if(1==e.nodeType&&(f=e.tagName?e.tagName.toLowerCase():"",-1!==k.indexOf(this.values,f))){m=e;break}e=e.parentNode}h(b,g);m&&(g=[m].concat(g))}else for(e=b;a.selection.inSelection(e);)1==e.nodeType&&(f=e.tagName?e.tagName.toLowerCase():"",-1!==k.indexOf(this.values,f)&&g.push(e),h(e,g)),e=e.nextSibling;d(g);a.onDisplayChanged()}}}else a.execCommand(b,d)},_removeFormat:function(a,b){if(a.customUndo){for(;b.firstChild;)p.place(b.firstChild,b,
"before");b.parentNode.removeChild(b)}else{a.selection.selectElementChildren(b);var c=a.selection.getSelectedHtml();a.selection.selectElement(b);a.execCommand("inserthtml",c||"")}}}),A=l("dijit._editor.plugins.FontChoice",n,{useDefaultCommand:!1,_initButton:function(){var a={fontName:t,fontSize:m,formatBlock:v}[this.command],b=this.params;this.params.custom&&(b.values=this.params.custom);var d=this.editor;this.button=new a(c.delegate({dir:d.dir,lang:d.lang},b));this.own(this.button.select.on("change",
c.hitch(this,function(a){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=a.indexOf(" ")&&(a="'"+a+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,a):this.editor.execCommand(this.command,a)})))},updateState:function(){var a=this.editor,b=this.command;if(a&&a.isLoaded&&b.length&&this.button){var d=this.get("disabled");this.button.set("disabled",d);if(!d){var e;try{e=a.queryCommandValue(b)||""}catch(O){e=""}(d=c.isString(e)&&(e.match(/'([^']*)'/)||
e.match(/"([^"]*)"/)))&&(e=d[1]);if("formatBlock"===b)if(e&&"p"!=e)0>k.indexOf(this.button.values,e)&&(e="noFormat");else{e=null;var f;(b=r.getSelection(this.editor.window))&&0<b.rangeCount&&(b=b.getRangeAt(0))&&(f=b.endContainer);for(;f&&f!==a.editNode&&f!==a.document;){if((b=f.tagName?f.tagName.toLowerCase():"")&&-1<k.indexOf(this.button.values,b)){e=b;break}f=f.parentNode}e||(e="noFormat")}e!==this.button.get("value")&&this.button.set("value",e,!1)}}}});k.forEach(["fontName","fontSize","formatBlock"],
function(a){n.registry[a]=function(b){return new A({command:a,plainText:b.plainText})}});A._FontDropDown=f;A._FontNameDropDown=t;A._FontSizeDropDown=m;A._FormatBlockDropDown=v;return A})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),function(f,k,l,p){var g=f.declare("dojox.editor.plugins.Preview",p,{useDefaultCommand:!1,styles:"",stylesheets:null,
iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=f.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new k.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:f.hitch(this,"_preview")})},setEditor:function(c){this.editor=c;this._initButton()},updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var c=this.editor.get("value"),
d="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",b;if(this.stylesheets)for(b=0;b<this.stylesheets.length;b++)d+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[b]+"'\x3e\n";this.styles&&(d+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");var c="\x3chtml\x3e\n\t\x3chead\x3e\n"+d+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+c+"\n\t\x3c/body\x3e\n\x3c/html\x3e",a=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");
a.document.open();a.document.write(c);a.document.close()}catch(e){console.warn(e)}}});f.subscribe(k._scopeName+".Editor.getPlugin",null,function(c){c.plugin||"preview"!==c.args.name.toLowerCase()||(c.plugin=new g({styles:"styles"in c.args?c.args.styles:"",stylesheets:"stylesheets"in c.args?c.args.stylesheets:null}))});return g})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),function(f,k,
l,p,g,c){var d=l("dijit._editor.plugins.TextColor",g,{buttonClass:c,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var b=this;this.button.loadDropDown=function(a){function c(c){b.button.dropDown=new c({dir:b.editor.dir,ownerDocument:b.editor.ownerDocument,value:b.value,onChange:function(a){b.editor.execCommand(b.command,a)},onExecute:function(){b.editor.execCommand(b.command,this.get("value"))}});a()}"string"==typeof b.colorPicker?
f([b.colorPicker],c):c(b.colorPicker)}},updateState:function(){var b=this.editor,a=this.command;if(b&&b.isLoaded&&a.length){if(this.button){var c=this.get("disabled");this.button.set("disabled",c);if(c)return;var d;try{d=b.queryCommandValue(a)||""}catch(q){d=""}}""==d&&(d="#000000");"transparent"==d&&(d="#ffffff");"string"==typeof d?-1<d.indexOf("rgb")&&(d=k.fromRgb(d).toHex()):(d=((d&255)<<16|d&65280|(d&16711680)>>>16).toString(16),d="#000000".slice(0,7-d.length)+d);this.value=d;(b=this.button.dropDown)&&
b.get&&d!==b.get("value")&&b.set("value",d,!1)}}});g.registry.foreColor=function(b){return new d(b)};g.registry.hiliteColor=function(b){return new d(b)};return d})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(f,k,l,p,g,c,d){var b=d("dojox.editor.plugins.ToolbarLineBreak",[p,g],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",postCreate:function(){f.setSelectable(this.domNode,
!1)},isFocusable:function(){return!1}});f.subscribe(k._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var d=a.args.name.toLowerCase();if("||"===d||"toolbarlinebreak"===d)a.plugin=new c({button:new b,setEditor:function(a){this.editor=a}})}});return b})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t){f.experimental("dojox.editor.plugins.FindReplace");var m=f.declare("dojox.editor.plugins._FindReplaceCloseBox",[c,d,a],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=k.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),v=f.declare("dojox.editor.plugins._FindReplaceTextBox",[c,d,a],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=k.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");f.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(a){this.value=a;this.textBox.set("value",a)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(a){this.disabled=a;this.textBox.set("disabled",
a)},onChange:function(a){this.value=a},_onKeyPress:function(a){var b=0,c=0;!a.target||a.ctrlKey||a.altKey||a.shiftKey||(a.keyCode==f.keys.LEFT_ARROW?(b=a.target.selectionStart,c=a.target.selectionEnd,b<c&&(k.selectInputText(a.target,b,b),f.stopEvent(a))):a.keyCode==f.keys.RIGHT_ARROW&&(b=a.target.selectionStart,c=a.target.selectionEnd,b<c&&(k.selectInputText(a.target,c,c),f.stopEvent(a))))}}),A=f.declare("dojox.editor.plugins._FindReplaceCheckBox",[c,d,a],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=k.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(a){this.checkBox.set("value",a)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(a){this.disabled=a;this.checkBox.set("disabled",a)}}),B=f.declare("dojox.editor.plugins._FindReplaceToolbar",h,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");f.addClass(this.domNode,"dijitToolbar")},addChild:function(a,b){k._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(a){a.stopPropagation()}}),J=f.declare("dojox.editor.plugins.FindReplace",[t],{buttonClass:k.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=f.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new k.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:f.hitch(this,
"_toggleFindReplace")});f.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",f.hitch(this,function(a,b){"disabled"===a&&this._toggleFindReplace(!b&&this._displayed,!0,!0)}))},setEditor:function(a){this.editor=a;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(a,b,c){var d=f.marginBox(this.editor.domNode);a&&!f.isOpera?(f.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),b||(this._displayed=
!0)):(f.style(this._frToolbar.domNode,"display","none"),b||(this._displayed=!1),c||this.editor.focus());this.editor.resize({h:d.h})},_populateFindField:function(){var a=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(a&&this._findField.textBox.set("value",a),this._findField.textBox.focus(),k.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(a){this.inherited(arguments);if(!f.isOpera){var b=this._frToolbar=new B;f.style(b.domNode,"display",
"none");f.place(b.domNode,a.domNode,"after");b.startup();this._closeBox=new m;b.addChild(this._closeBox);this._findField=new v({label:this._strings.findLabel,tooltip:this._strings.findTooltip});b.addChild(this._findField);this._replaceField=new v({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});b.addChild(this._replaceField);b.addChild(new l.editor.plugins.ToolbarLineBreak);this._findButton=new k.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;b.addChild(this._findButton);this._replaceButton=new k.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;b.addChild(this._replaceButton);this._replaceAllButton=new k.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;b.addChild(this._replaceAllButton);this._caseSensitive=new A({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});b.addChild(this._caseSensitive);this._backwards=new A({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});b.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new k.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(a){a.keyCode==f.keys.ENTER&&(this._find(),f.stopEvent(a))},_onReplaceKeyDown:function(a){a.keyCode==f.keys.ENTER&&(this._replace()||this._replace(),f.stopEvent(a))},_find:function(a){var b=this._findField.get("value")||"";if(b){var c=this._caseSensitive.get("value"),
d=this._backwards.get("value"),b=this._findText(b,c,d);!b&&a&&(this._promDialog.set("content",f.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),k.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(f.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;k.popup.close(this._promDialog)}),3E3),setTimeout(f.hitch(this,function(){this.editor.focus()}),0));return b}return!1},_replace:function(a){var b=
!1,c=this.editor;c.focus();var d=this._findField.get("value")||"",e=this._replaceField.get("value")||"";if(d){var h=this._caseSensitive.get("value"),g=this._backwards.get("value"),m=c._sCall("getSelectedText",[null]);f.isMoz&&(d=f.trim(d),m=f.trim(m));d=this._filterRegexp(d,!h);m&&d.test(m)&&(c.execCommand("inserthtml",e),b=!0,g&&(this._findText(e,h,g),c._sCall("collapse",[!0])));!this._find(!1)&&a&&(this._promDialog.set("content",f.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
k.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(f.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;k.popup.close(this._promDialog)}),3E3),setTimeout(f.hitch(this,function(){this.editor.focus()}),0));return b}return null},_replaceAll:function(a){var b=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&b++;var c=f.hitch(this,function(){this._replace(!1)?
(b++,setTimeout(c,10)):a&&(this._promDialog.set("content",f.string.substitute(this._strings.replaceDialogText,{0:""+b})),k.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(f.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;k.popup.close(this._promDialog)}),3E3),setTimeout(f.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});c()},_findText:function(a,b,
c){var d=this.editor,e=d.window,f=!1;if(a)if(e.find)f=e.find(a,b,c,!1,!1,!1,!1);else{var h=d.document;if(h.selection||e.getSelection)if(this.editor.focus(),d=h.body.createTextRange(),f=d.duplicate(),e.getSelection().getRangeAt(0),(h=h.selection?h.selection.createRange():null)?c?d.setEndPoint("EndToStart",h):d.setEndPoint("StartToEnd",h):this._bookmark&&(e=e.getSelection().toString(),d.moveToBookmark(this._bookmark),d.text!=e?(d=f.duplicate(),this._bookmark=null):(c?f.setEndPoint("EndToStart",d):f.setEndPoint("StartToEnd",
d),d=f.duplicate())),b=b?4:0,c&&(b|=1),f=d.findText(a,d.text.length,b))d.select(),this._bookmark=d.getBookmark()}return f},_filterRegexp:function(a,b){for(var c="",d=null,e=0;e<a.length;e++)switch(d=a.charAt(e),d){case "\\":c+=d;e++;c+=a.charAt(e);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":c+="\\";default:c+=d}c="^"+c+"$";return b?new RegExp(c,"mi"):new RegExp(c,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,k.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});J._FindReplaceCloseBox=m;J._FindReplaceTextBox=v;J._FindReplaceCheckBox=A;J._FindReplaceToolbar=B;f.subscribe(k._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"findreplace"!==
a.args.name.toLowerCase()||(a.plugin=new J({}))});return J})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),function(f,k,l,p,g,c,d,b){l("dijit-legacy-requires")&&g(0,function(){f(["dijit/ToolbarSeparator"])});return k("dijit.Toolbar",[c,b,d],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",
_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(f,k,l,p){var g=f.declare("dojox.editor.plugins.PasteFromWord",
p,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(\&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(\&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o\:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var c=f.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");f.mixin(c,f.i18n.getLocalization("dijit","common"));f.mixin(c,f.i18n.getLocalization("dijit._editor","commands"));this.button=new k.form.Button({label:c.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:f.hitch(this,"_openDialog")});this._uId=k.getUniqueId(this.editor.id);c.uId=this._uId;c.width=this.width||"400px";c.height=this.height||"300px";this._dialog=(new k.Dialog({title:c.pasteFromWord})).placeAt(f.body());this._dialog.set("content",f.string.substitute(this._template,c));f.style(f.byId(this._uId+"_rte"),"opacity",.001);this.connect(k.byId(this._uId+"_paste"),"onClick","_paste");this.connect(k.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(c){this.editor=c;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(f.hitch(this,function(){this._rte=new k._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(f.hitch(this,function(){f.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var c=l.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var d;for(d=0;d<this._filters.length;d++)var b=this._filters[d],c=c.replace(b.regexp,b.handler);c=l.html.format.prettyPrint(c);this.editor.focus();this.editor.execCommand("inserthtml",c)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});f.subscribe(k._scopeName+".Editor.getPlugin",null,function(c){c.plugin||"pastefromword"!==c.args.name.toLowerCase()||(c.plugin=new g({width:"width"in c.args?c.args.width:"400px",height:"height"in c.args?c.args.width:"300px"}))});return g})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A,B,J,u,Q,L,O,I,D,w,x,S){var F=l("dijit._editor.RichText",[L,O],{constructor:function(a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};a&&n.isString(a.value)&&(this.value=a.value);this.onLoadDeferred=new p},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[n.trim,n.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);v("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));v("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(v("ie")||v("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[n.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[n.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);B.publish(S._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=n.hitch(this,function(a,b){return function(){return!this.execCommand(a,b)}}),b={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:a("formatblock",
"h1"),2:a("formatblock","h2"),3:a("formatblock","h3"),4:a("formatblock","h4"),"\\":a("insertunorderedlist")};v("ie")||(b.Z=a("redo"));for(var c in b)this.addKeyHandler(c,!0,!1,b[c])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(F._editorCommandsLocalized)this._local2NativeFormatNames=F._local2NativeFormatNames,this._native2LocalFormatNames=F._native2LocalFormatNames;else{F._editorCommandsLocalized=!0;F._local2NativeFormatNames={};
F._native2LocalFormatNames={};this._local2NativeFormatNames=F._local2NativeFormatNames;this._native2LocalFormatNames=F._native2LocalFormatNames;for(var a="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),c="",d,e=0;d=a[e++];)c="l"!==d.charAt(1)?c+("\x3c"+d+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+d+"\x3e\x3cbr/\x3e"):c+("\x3c"+d+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+d+"\x3e\x3cbr/\x3e");var f=b.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:c});this.ownerDocumentBody.appendChild(f);
a=n.hitch(this,function(){for(var a=f.firstChild;a;)try{this.selection.selectElement(a.firstChild);var c=a.tagName.toLowerCase();this._local2NativeFormatNames[c]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[c]]=c;a=a.nextSibling.nextSibling}catch(P){}b.destroy(f)});this.defer(a)}},open:function(a){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new p;this.isClosed||this.close();B.publish(S._scopeName+"._editor.RichText::open",
this);1===arguments.length&&a.nodeName&&(this.domNode=a);var f=this.domNode,h;if(n.isString(this.value))h=this.value,f.innerHTML="";else if(f.nodeName&&"textarea"==f.nodeName.toLowerCase()){var m=this.textarea=f;this.name=m.name;h=m.value;f=this.domNode=this.ownerDocument.createElement("div");f.setAttribute("widgetId",this.id);m.removeAttribute("widgetId");f.cssText=m.cssText;f.className+=" "+m.className;b.place(f,m,"before");var q=n.hitch(this,function(){e.set(m,{display:"block",position:"absolute",
top:"-1000px"});if(v("ie")){var a=m.style;this.__overflow=a.overflow;a.overflow="hidden"}});v("ie")?this.defer(q,10):q();if(m.form){var t=m.value;this.reset=function(){this.getValue()!==t&&this.replaceValue(t)};r(m.form,"submit",n.hitch(this,function(){c.set(m,"disabled",this.disabled);m.value=this.getValue()}))}}else h=w.getChildrenHtml(f),f.innerHTML="";this.value=h;f.nodeName&&"LI"===f.nodeName&&(f.innerHTML=" \x3cbr\x3e");this.header=f.ownerDocument.createElement("div");f.appendChild(this.header);
this.editingArea=f.ownerDocument.createElement("div");f.appendChild(this.editingArea);this.footer=f.ownerDocument.createElement("div");f.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!k.useXDomain||k.allowXdRichTextSave)){if((h=g.byId(S._scopeName+"._editor.RichText.value"))&&""!==h.value)for(var q=h.value.split(this._SEPARATOR),l=0,u;u=q[l++];)if(u=u.split(this._NAME_CONTENT_SEP),u[0]===this.name){this.value=u[1];q=q.splice(l,1);h.value=q.join(this._SEPARATOR);
break}F._globalSaveHandler||(F._globalSaveHandler={},J.addOnUnload(function(){for(var a in F._globalSaveHandler){var b=F._globalSaveHandler[a];n.isFunction(b)&&b()}}));F._globalSaveHandler[this.id]=n.hitch(this,"_saveContent")}this.isClosed=!1;h=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");h.id=this.id+"_iframe";h.style.border="none";h.style.width="100%";this._layoutMode?h.style.height="100%":7<=v("ie")?(this.height&&(h.style.height=this.height),this.minHeight&&(h.style.minHeight=
this.minHeight)):h.style.height=this.height?this.height:this.minHeight;h.frameBorder=0;h._loadFunc=n.hitch(this,function(a){this.window=a;this.document=a.document;this.selection=new I.SelectionManager(a);v("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});q=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");q=11>v("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+q+"');document.close()":"javascript: '"+
q+"'";this.editingArea.appendChild(h);h.src=q;"LI"===f.nodeName&&(f.lastChild.style.marginTop="-1.2em");d.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var a=e.getComputedStyle(this.domNode),b;if(this["aria-label"])b=this["aria-label"];else{var c=t('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||g.byId(this["aria-labelledby"],this.ownerDocument);c&&(b=c.textContent||c.innerHTML||"")}var c="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(b?" aria-label\x3d'"+A.escape(b)+"'":"")+"\x3e\x3c/div\x3e",d=[a.fontWeight,a.fontSize,a.fontFamily].join(" "),f=a.lineHeight,f=0<=f.indexOf("px")?parseFloat(f)/parseFloat(a.fontSize):0<=f.indexOf("em")?parseFloat(f):"normal",m="",k=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(a){a=a.replace(/^;/ig,"")+";";var b=a.split(":")[0];if(b){var b=n.trim(b),b=b.toLowerCase(),c,d="";for(c=0;c<b.length;c++){var f=b.charAt(c);switch(f){case "-":c++,f=b.charAt(c).toUpperCase();default:d+=
f}}e.set(k.domNode,d,"")}m+=a+";"});this.iframe.setAttribute("title",b);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||h.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",b?"\x3ctitle\x3e"+A.escape(b)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",d,";\n",this.height||v("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",f,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",v("ie")||v("trident")||v("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",b?" aria-label\x3d'"+A.escape(b)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+m+"'\x3e",c,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var a=[];this.styleSheets&&(a=this.styleSheets.split(";"),this.styleSheets=
"");a=a.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var b="",c=0,d,e=Q.get(this.ownerDocument);d=a[c++];)d=(new u(e.location,d)).toString(),this.editingAreaStyleSheets.push(d),b+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+d+'"/\x3e';return b},addStyleSheet:function(a){var b=a.toString(),c=Q.get(this.ownerDocument);if("."===b.charAt(0)||"/"!==b.charAt(0)&&!a.host)b=(new u(c.location,b)).toString();-1<f.indexOf(this.editingAreaStyleSheets,b)||(this.editingAreaStyleSheets.push(b),
this.onLoadDeferred.then(n.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(b);else{var a=this.document.getElementsByTagName("head")[0],c=this.document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;a.appendChild(c)}})))},removeStyleSheet:function(a){var b=a.toString(),c=Q.get(this.ownerDocument);if("."===b.charAt(0)||"/"!==b.charAt(0)&&!a.host)b=(new u(c.location,b)).toString();a=f.indexOf(this.editingAreaStyleSheets,b);-1!==a&&(delete this.editingAreaStyleSheets[a],
t('link[href\x3d"'+b+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(a){a=!!a;this._set("disabled",a);if(this.isLoaded){var b=v("ie")&&(this.isLoaded||!this.focusOnLoad);b&&(this.editNode.unselectable="on");this.editNode.contentEditable=!a;this.editNode.tabIndex=a?"-1":this.tabIndex;b&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(v("mozilla")&&!a&&this._mozSettingProps){a=this._mozSettingProps;for(var c in a)if(a.hasOwnProperty(c))try{this.document.execCommand(c,
!1,a[c])}catch(y){}}this._disabledOK=!0}},onLoad:function(a){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=x.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var c=this;this.beforeIframeNode=b.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=b.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){c.editNode.focus()};this.focusNode=
this.editNode;var d=this.events.concat(this.captureEvents),e=this.iframe?this.document:this.editNode;this.own.apply(this,f.map(d,function(a){var b=a.toLowerCase().replace(/^on/,"");return r(e,b,n.hitch(this,a))},this));this.own(r(e,"mouseup",n.hitch(this,"onClick")));v("ie")&&(this.own(r(this.document,"mousedown",n.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);v("webkit")&&(this._webkitListener=this.own(r(this.document,"mouseup",n.hitch(this,"onDisplayChanged")))[0],this.own(r(this.document,
"mousedown",n.hitch(this,function(a){a=a.target;!a||a!==this.document.body&&a!==this.document||this.defer("placeCursorAtEnd")}))));if(v("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(N){}this.isLoaded=!0;this.set("disabled",this.disabled);d=n.hitch(this,function(){this.setValue(a);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&m(n.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(d):d()},onKeyDown:function(a){if(a.keyCode===q.SHIFT||a.keyCode===q.ALT||a.keyCode===q.META||a.keyCode===q.CTRL)return!0;a.keyCode===q.TAB&&this.isTabIndent&&(a.stopPropagation(),a.preventDefault(),this.queryCommandEnabled(a.shiftKey?"outdent":"indent")&&this.execCommand(a.shiftKey?"outdent":"indent"));if(a.keyCode==q.TAB&&!this.isTabIndent&&!a.ctrlKey&&!a.altKey)return a.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>v("ie")&&a.keyCode===q.BACKSPACE&&"Control"===this.document.selection.type&&(a.stopPropagation(),a.preventDefault(),this.execCommand("delete"));v("ff")&&(a.keyCode===q.PAGE_UP||a.keyCode===q.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&a.preventDefault();var b=this._keyHandlers[a.keyCode],c=arguments;b&&!a.altKey&&f.some(b,function(b){if(!(b.shift^a.shiftKey||b.ctrl^(a.ctrlKey||a.metaKey)))return b.handler.apply(this,c)||a.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(a){h.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",a)},_setValueAttr:function(a){this.setValue(a)},_setDisableSpellCheckAttr:function(a){this.document?c.set(this.document.body,"spellcheck",!a):this.onLoadDeferred.then(n.hitch(this,function(){c.set(this.document.body,"spellcheck",!a)}));this._set("disableSpellCheck",a)},addKeyHandler:function(a,b,c,d){"string"==
typeof a&&(a=a.toUpperCase().charCodeAt(0));n.isArray(this._keyHandlers[a])||(this._keyHandlers[a]=[]);this._keyHandlers[a].push({shift:c||!1,ctrl:b||!1,handler:d})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(a){(v("ie")||v("trident"))&&this.defer(function(){x.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var b=this.getValue(!0);if(b!==this.value)this.onChange(b);
this._set("value",b)},_onFocus:function(a){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!v("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>v("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(a,b){a=a.toLowerCase();"formatblock"===a?v("safari")&&void 0===b&&(a="heading"):"hilitecolor"!==a||v("mozilla")||(a="backcolor");return a},_qcaCache:{},queryCommandAvailable:function(a){var b=this._qcaCache[a];return void 0!==
b?b:this._qcaCache[a]=this._queryCommandAvailable(a)},_queryCommandAvailable:function(a){switch(a.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return v("ie")||v("trident")||v("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!v("webkit");default:return!1}},execCommand:function(a,b){var c;this.focused&&this.focus();a=this._normalizeCommand(a,b);if(void 0!==b){if("heading"===a)throw Error("unimplemented");"formatblock"===
a&&(v("ie")||v("trident"))&&(b="\x3c"+b+"\x3e")}var d="_"+a+"Impl";if(this[d])c=this[d](b);else if((b=1<arguments.length?b:null)||"createlink"!==a)c=this.document.execCommand(a,!1,b);this.onDisplayChanged();return c},queryCommandEnabled:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);var b="_"+a+"EnabledImpl";return this[b]?this[b](a):this._browserQueryCommandEnabled(a)},queryCommandState:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);
try{return this.document.queryCommandState(a)}catch(G){return!1}},queryCommandValue:function(a){if(this.disabled||!this._disabledOK)return!1;a=this._normalizeCommand(a);if(v("ie")&&"formatblock"===a)a=this._native2LocalFormatNames[this.document.queryCommandValue(a)];else if(v("mozilla")&&"hilitecolor"===a){var b;try{b=this.document.queryCommandValue("styleWithCSS")}catch(M){b=!1}this.document.execCommand("styleWithCSS",!1,!0);a=this.document.queryCommandValue(a);this.document.execCommand("styleWithCSS",
!1,b)}else a=this.document.queryCommandValue(a);return a},_sCall:function(a,b){return this.selection[a].apply(this.selection,b)},placeCursorAtStart:function(){this.focus();var a=!1;if(v("mozilla"))for(var b=this.editNode.firstChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this.selection.selectElement(b);break}}else if(1===b.nodeType){var a=!0,c=b.tagName?b.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(c)?this.selection.selectElement(b):
this.selection.selectElementChildren(b);break}b=b.nextSibling}else a=!0,this.selection.selectElementChildren(this.editNode);a&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var a=!1;if(v("mozilla"))for(var b=this.editNode.lastChild;b;){if(3===b.nodeType){if(0<b.nodeValue.replace(/^\s+|\s+$/g,"").length){a=!0;this.selection.selectElement(b);break}}else if(1===b.nodeType){a=!0;this.selection.selectElement(b.lastChild||b);break}b=b.previousSibling}else a=!0,this.selection.selectElementChildren(this.editNode);
a&&this.selection.collapse(!1)},getValue:function(a){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,a):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(a){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){a=this._preFilterContent(a);var b=this.isClosed?this.domNode:this.editNode;b.innerHTML=a;this._preDomFilterContent(b)}else this.textarea.value=a;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(n.hitch(this,function(){this.setValue(a)}))},replaceValue:function(a){this.isClosed?this.setValue(a):this.window&&this.window.getSelection&&!v("mozilla")?this.setValue(a):this.window&&this.window.getSelection?(a=this._preFilterContent(a),this.execCommand("selectall"),this.execCommand("inserthtml",a),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(a);this._set("value",this.getValue(!0))},_preFilterContent:function(a){var b=
a;f.forEach(this.contentPreFilters,function(a){a&&(b=a(b))});return b},_preDomFilterContent:function(a){a=a||this.editNode;f.forEach(this.contentDomPreFilters,function(b){b&&n.isFunction(b)&&b(a)},this)},_postFilterContent:function(a,b){var c;n.isString(a)?c=a:(a=a||this.editNode,this.contentDomPostFilters.length&&(b&&(a=n.clone(a)),f.forEach(this.contentDomPostFilters,function(b){a=b(a)})),c=w.getChildrenHtml(a));n.trim(c.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(c="");f.forEach(this.contentPostFilters,
function(a){c=a(c)});return c},_saveContent:function(){var a=g.byId(S._scopeName+"._editor.RichText.value");a&&(a.value&&(a.value+=this._SEPARATOR),a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(a,b){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");b||(a=a.replace(/'/gm,"\x26#39;"));return a},getNodeHtml:function(a){h.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return w.getNodeHtml(a)},getNodeChildrenHtml:function(a){h.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return w.getChildrenHtml(a)},close:function(a){if(!this.isClosed){arguments.length||(a=!0);a&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);v("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var c=this.textarea.style;c.position="";c.left=c.top="";v("ie")&&(c.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;b.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;d.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);F._globalSaveHandler&&delete F._globalSaveHandler[this.id]},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(a){a=a.replace(/\sclass="webkit-block-placeholder"/gi,"");a=a.replace(/\sclass="apple-style-span"/gi,
"");return a=a.replace(/<meta charset=\"utf-8\" \/>/gi,"")},_normalizeFontStyle:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"\x3c$1b$2").replace(/<(\/)?em([ \>])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(a){return a.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(a){if(!a)return!1;
if(v("ie")||v("trident")||v("edge"))return this.focused&&!this.disabled;var b=9>v("ie")?this.document.selection.createRange():this.document;try{return b.queryCommandEnabled(a)}catch(M){return!1}},_createlinkEnabledImpl:function(){var a=!0;return a=v("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var a=!0;return a=v("mozilla")||v("webkit")||v("ie")||v("trident")||v("edge")?
this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var a=!0;return a=v("mozilla")||v("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var a=!0;v("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("cut");return a},_copyEnabledImpl:function(){var a=!0;v("webkit")?((a=this.window.getSelection())&&(a=a.toString()),a=!!a):a=this._browserQueryCommandEnabled("copy");
return a},_pasteEnabledImpl:function(){var a=!0;return v("webkit")?!0:a=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(a){return v("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,a)},_unlinkImpl:function(a){return this.queryCommandEnabled("unlink")&&(v("mozilla")||v("webkit"))?(a=this.selection.getAncestorElement("a"),this.selection.selectElement(a),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",
!1,a)},_hilitecolorImpl:function(a){var b;this._handleTextColorOrProperties("hilitecolor",a)||(v("mozilla")?(this.document.execCommand("styleWithCSS",!1,!0),console.log("Executing color command."),b=this.document.execCommand("hilitecolor",!1,a),this.document.execCommand("styleWithCSS",!1,!1)):b=this.document.execCommand("hilitecolor",!1,a));return b},_backcolorImpl:function(a){v("ie")&&(a=a?a:null);var b=this._handleTextColorOrProperties("backcolor",a);b||(b=this.document.execCommand("backcolor",
!1,a));return b},_forecolorImpl:function(a){v("ie")&&(a=a?a:null);var b=!1;(b=this._handleTextColorOrProperties("forecolor",a))||(b=this.document.execCommand("forecolor",!1,a));return b},_inserthtmlImpl:function(a){a=this._preFilterContent(a);var c=!0;if(9>v("ie")){var d=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var e=d.item(0);d.length;)d.remove(d.item(0));e.outerHTML=a}else d.pasteHTML(a);d.select()}else if(8>v("trident")){var f=D.getSelection(this.window);
if(f&&f.rangeCount&&f.getRangeAt){d=f.getRangeAt(0);d.deleteContents();var h=b.create("div");h.innerHTML=a;for(var g,e=this.document.createDocumentFragment();a=h.firstChild;)g=e.appendChild(a);d.insertNode(e);g&&(d=d.cloneRange(),d.setStartAfter(g),d.collapse(!1),f.removeAllRanges(),f.addRange(d))}}else v("mozilla")&&!a.length?this.selection.remove():c=this.document.execCommand("inserthtml",!1,a);return c},_boldImpl:function(a){var b=!1;if(v("ie")||v("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("bold");
b||(b=this.document.execCommand("bold",!1,a));return b},_italicImpl:function(a){var b=!1;if(v("ie")||v("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("italic");b||(b=this.document.execCommand("italic",!1,a));return b},_underlineImpl:function(a){var b=!1;if(v("ie")||v("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("underline");b||(b=this.document.execCommand("underline",!1,a));return b},_strikethroughImpl:function(a){var b=!1;if(v("ie")||v("trident"))this._adaptIESelection(),
b=this._adaptIEFormatAreaAndExec("strikethrough");b||(b=this.document.execCommand("strikethrough",!1,a));return b},_superscriptImpl:function(a){var b=!1;if(v("ie")||v("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("superscript");b||(b=this.document.execCommand("superscript",!1,a));return b},_subscriptImpl:function(a){var b=!1;if(v("ie")||v("trident"))this._adaptIESelection(),b=this._adaptIEFormatAreaAndExec("subscript");b||(b=this.document.execCommand("subscript",!1,a));return b},
_fontnameImpl:function(a){var b;if(v("ie")||v("trident"))b=this._handleTextColorOrProperties("fontname",a);b||(b=this.document.execCommand("fontname",!1,a));return b},_fontsizeImpl:function(a){var b;if(v("ie")||v("trident"))b=this._handleTextColorOrProperties("fontsize",a);b||(b=this.document.execCommand("fontsize",!1,a));return b},_insertorderedlistImpl:function(a){var b=!1;if(v("ie")||v("trident")||v("edge"))b=this._adaptIEList("insertorderedlist",a);b||(b=this.document.execCommand("insertorderedlist",
!1,a));return b},_insertunorderedlistImpl:function(a){var b=!1;if(v("ie")||v("trident")||v("edge"))b=this._adaptIEList("insertunorderedlist",a);b||(b=this.document.execCommand("insertunorderedlist",!1,a));return b},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(b){var c=0;if(b&&b.childNodes){var d;for(d=0;d<b.childNodes.length;d++)var e=a.position(b.childNodes[d]),
c=c+e.h}return c},_isNodeEmpty:function(a,b){return 1===a.nodeType?0<a.childNodes.length?this._isNodeEmpty(a.childNodes[0],b):!0:3===a.nodeType?""===a.nodeValue.substring(b):!1},_removeStartingRangeFromRange:function(a,b){if(a.nextSibling)b.setStart(a.nextSibling,0);else{for(a=a.parentNode;a&&null==a.nextSibling;)a=a.parentNode;a&&b.setStart(a.nextSibling,0)}return b},_adaptIESelection:function(){var a=D.getSelection(this.window);if(a&&a.rangeCount&&!a.isCollapsed){for(var b=a.getRangeAt(0),c=b.startContainer,
d=b.startOffset;3===c.nodeType&&d>=c.length&&c.nextSibling;)d-=c.length,c=c.nextSibling;for(var e=null;this._isNodeEmpty(c,d)&&c!==e;)e=c,b=this._removeStartingRangeFromRange(c,b),c=b.startContainer,d=0;a.removeAllRanges();a.addRange(b)}},_adaptIEFormatAreaAndExec:function(a){var c=D.getSelection(this.window),d=this.document,e,h,g,m,n,k,q;if(a&&c&&c.isCollapsed){if(this.queryCommandValue(a)){a=this._tagNamesForCommand(a);g=c.getRangeAt(0);m=g.startContainer;3===m.nodeType&&(h=g.endOffset,m.length<
h&&(h=this._adjustNodeAndOffset(e,h),m=h.node,h=h.offset));for(;m&&m!==this.editNode;){e=m.tagName?m.tagName.toLowerCase():"";if(-1<f.indexOf(a,e)){q=m;break}m=m.parentNode}if(q&&(e=g.startContainer,a=d.createElement(q.tagName),b.place(a,q,"after"),e&&3===e.nodeType)){h=g.endOffset;e.length<h&&(h=this._adjustNodeAndOffset(e,h),e=h.node,h=h.offset);m=e.nodeValue;g=d.createTextNode(m.substring(0,h));var t=m.substring(h,m.length);t&&(n=d.createTextNode(t));b.place(g,e,"before");n&&(k=d.createElement("span"),
k.className="ieFormatBreakerSpan",b.place(k,e,"after"),b.place(n,k,"after"),n=k);b.destroy(e);h=g.parentNode;for(e=[];h!==q;){m=h.tagName;g={tagName:m};e.push(g);m=d.createElement(m);h.style&&m.style&&h.style.cssText&&(m.style.cssText=h.style.cssText,g.cssText=h.style.cssText);"FONT"===h.tagName&&(h.color&&(m.color=h.color,g.color=h.color),h.face&&(m.face=h.face,g.face=h.face),h.size&&(m.size=h.size,g.size=h.size));h.className&&(m.className=h.className,g.className=h.className);if(n)for(;n;)g=n.nextSibling,
m.appendChild(n),n=g;m.tagName==h.tagName?(k=d.createElement("span"),k.className="ieFormatBreakerSpan",b.place(k,h,"after"),b.place(m,k,"after")):b.place(m,h,"after");g=h;n=m;h=h.parentNode}if(n){if(1===n.nodeType||3===n.nodeType&&n.nodeValue)a.innerHTML="";for(;n;)g=n.nextSibling,a.appendChild(n),n=g}if(e.length){g=e.pop();n=d.createElement(g.tagName);g.cssText&&n.style&&(n.style.cssText=g.cssText);g.className&&(n.className=g.className);"FONT"===g.tagName&&(g.color&&(n.color=g.color),g.face&&(n.face=
g.face),g.size&&(n.size=g.size));for(b.place(n,a,"before");e.length;)g=e.pop(),q=d.createElement(g.tagName),g.cssText&&q.style&&(q.style.cssText=g.cssText),g.className&&(q.className=g.className),"FONT"===g.tagName&&(g.color&&(q.color=g.color),g.face&&(q.face=g.face),g.size&&(q.size=g.size)),n.appendChild(q),n=q;q=d.createTextNode(".");k.appendChild(q);n.appendChild(q)}else k=d.createElement("span"),k.className="ieFormatBreakerSpan",q=d.createTextNode("."),k.appendChild(q),b.place(k,a,"before");n=
D.create(this.window);n.setStart(q,0);n.setEnd(q,q.length);c.removeAllRanges();c.addRange(n);this.selection.collapse(!1);q.parentNode.innerHTML="";a.firstChild||b.destroy(a);return!0}return!1}g=c.getRangeAt(0);if((e=g.startContainer)&&3===e.nodeType)return h=g.startOffset,e.length<h&&(h=this._adjustNodeAndOffset(e,h),e=h.node,h=h.offset),m=e.nodeValue,g=d.createTextNode(m.substring(0,h)),t=m.substring(h),""!==t&&(n=d.createTextNode(m.substring(h))),k=d.createElement("span"),q=d.createTextNode("."),
k.appendChild(q),g.length?b.place(g,e,"after"):g=e,b.place(k,g,"after"),n&&b.place(n,k,"after"),b.destroy(e),n=D.create(this.window),n.setStart(q,0),n.setEnd(q,q.length),c.removeAllRanges(),c.addRange(n),d.execCommand(a),b.place(k.firstChild,k,"before"),b.destroy(k),n.setStart(q,0),n.setEnd(q,q.length),c.removeAllRanges(),c.addRange(n),this.selection.collapse(!1),q.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(a){var c=D.getSelection(this.window);if(c.isCollapsed&&c.rangeCount&&
!this.queryCommandValue(a)){var d=c.getRangeAt(0),e=d.startContainer;if(e&&3==e.nodeType&&!d.startOffset)return d="ul","insertorderedlist"===a&&(d="ol"),a=this.document.createElement(d),d=b.create("li",null,a),b.place(a,e,"before"),d.appendChild(e),b.create("br",null,a,"after"),a=D.create(this.window),a.setStart(e,0),a.setEnd(e,e.length),c.removeAllRanges(),c.addRange(a),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(a,c){var d=D.getSelection(this.window),f=this.document,
h,g,m,n,q;c=c||null;if(a&&d&&d.isCollapsed&&d.rangeCount&&(g=d.getRangeAt(0),(h=g.startContainer)&&3===h.nodeType)){q=g.startOffset;h.length<q&&(g=this._adjustNodeAndOffset(h,q),h=g.node,q=g.offset);m=h.nodeValue;g=f.createTextNode(m.substring(0,q));""!==m.substring(q)&&(n=f.createTextNode(m.substring(q)));m=f.createElement("span");q=f.createTextNode(".");m.appendChild(q);f=f.createElement("span");m.appendChild(f);g.length?b.place(g,h,"after"):g=h;b.place(m,g,"after");n&&b.place(n,m,"after");b.destroy(h);
h=D.create(this.window);h.setStart(q,0);h.setEnd(q,q.length);d.removeAllRanges();d.addRange(h);if(v("webkit")){d="color";if("hilitecolor"===a||"backcolor"===a)d="backgroundColor";e.set(m,d,c);this.selection.remove();b.destroy(f);m.innerHTML="\x26#160;";this.selection.selectElement(m);this.focus()}else this.execCommand(a,c),b.place(m.firstChild,m,"before"),b.destroy(m),h.setStart(q,0),h.setEnd(q,q.length),d.removeAllRanges(),d.addRange(h),this.selection.collapse(!1),q.parentNode.removeChild(q);return!0}return!1},
_adjustNodeAndOffset:function(a,b){for(;a.length<b&&a.nextSibling&&3===a.nextSibling.nodeType;)b-=a.length,a=a.nextSibling;return{node:a,offset:b}},_tagNamesForCommand:function(a){return"bold"===a?["b","strong"]:"italic"===a?["i","em"]:"strikethrough"===a?["s","strike"]:"superscript"===a?["sup"]:"subscript"===a?["sub"]:"underline"===a?["u"]:[]},_stripBreakerNodes:function(a){if(this.isLoaded)return t(".ieFormatBreakerSpan",a).forEach(function(a){for(;a.firstChild;)b.place(a.firstChild,a,"before");
b.destroy(a)}),a},_stripTrailingEmptyNodes:function(a){function c(a){return/^(p|div|br)$/i.test(a.nodeName)&&0==a.children.length&&/^[\s\xA0]*$/.test(a.textContent||a.innerText||"")||3===a.nodeType&&/^[\s\xA0]*$/.test(a.nodeValue)}for(;a.lastChild&&c(a.lastChild);)b.destroy(a.lastChild);return a},_setTextDirAttr:function(a){this._set("textDir",a);this.onLoadDeferred.then(n.hitch(this,function(){this.editNode.dir=a}))}});return F})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang",
"dojo/sniff"],function(f,k,l){var p={};k.setObject("dijit._editor.html",p);var g=p.escapeXml=function(c,d){c=c.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");d||(c=c.replace(/'/gm,"\x26#39;"));return c};p.getNodeHtml=function(c){var d=[];p.getNodeHtmlHelper(c,d);return d.join("")};p.getNodeHtmlHelper=function(c,d){switch(c.nodeType){case 1:var b=c.nodeName.toLowerCase();if(!b||"/"==b.charAt(0))return"";d.push("\x3c",b);var a=[],e={},h;if(l("dom-attributes-explicit")||
l("dom-attributes-specified-flag"))for(var q=0;h=c.attributes[q++];){var n=h.name;"_dj"===n.substr(0,3)||l("dom-attributes-specified-flag")&&!h.specified||n in e||(h=h.value,("src"==n||"href"==n)&&c.getAttribute("_djrealurl")&&(h=c.getAttribute("_djrealurl")),8===l("ie")&&"style"===n&&(h=h.replace("HEIGHT:","height:").replace("WIDTH:","width:")),a.push([n,h]),e[n]=h)}else{var k=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML,e=k.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi),k=k.substr(0,
k.indexOf("\x3e"));f.forEach(e,function(d){if(d){var e=d.indexOf("\x3d");if(0<e&&(d=d.substring(0,e),"_dj"!=d.substr(0,3)))if("src"!=d&&"href"!=d||!c.getAttribute("_djrealurl")){var f;switch(d){case "style":f=c.style.cssText.toLowerCase();break;case "class":f=c.className;break;case "width":if("img"===b){(e=/width=(\S+)/i.exec(k))&&(f=e[1]);break}case "height":if("img"===b){(e=/height=(\S+)/i.exec(k))&&(f=e[1]);break}default:f=c.getAttribute(d)}null!=f&&a.push([d,f.toString()])}else a.push([d,c.getAttribute("_djrealurl")])}},
this)}a.sort(function(a,b){return a[0]<b[0]?-1:a[0]==b[0]?0:1});for(e=0;h=a[e++];)d.push(" ",h[0],'\x3d"',"string"===typeof h[1]?g(h[1],!0):h[1],'"');switch(b){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":d.push(" /\x3e");break;case "script":d.push("\x3e",c.innerHTML,"\x3c/",b,"\x3e");break;default:d.push("\x3e"),c.hasChildNodes()&&p.getChildrenHtmlHelper(c,d),d.push("\x3c/",b,"\x3e")}break;case 4:case 3:d.push(g(c.nodeValue,!0));break;case 8:d.push("\x3c!--",
g(c.nodeValue,!0),"--\x3e");break;default:d.push("\x3c!-- Element not recognized - Type: ",c.nodeType," Name: ",c.nodeName,"--\x3e")}};p.getChildrenHtml=function(c){var d=[];p.getChildrenHtmlHelper(c,d);return d.join("")};p.getChildrenHtmlHelper=function(c,d){if(c)for(var b=c.childNodes||c,a=!l("ie")||b!==c,e,f=0;e=b[f++];)a&&e.parentNode!=c||p.getNodeHtmlHelper(e,d)};return p})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],
function(f,k,l,p,g){var c=f.getObject("dojox.html.format",!0);c.prettyPrint=function(c,b,a,e,h){var d=[],n=0,r=[],t="\t",m="",v=[],A,B=/[=]([^"']+?)(\s|>)/g,J=/style=("[^"]*"|'[^']*'|\S*)/gi,u=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(b&&0<b&&10>b)for(t="",A=0;A<b;A++)t+=" ";b=p.doc.createElement("div");b.innerHTML=c;var Q=k.encode,L=k.decode,O=b.ownerDocument.createElement("div"),I=function(a){a=a.cloneNode(!1);O.appendChild(a);a=O.innerHTML;O.innerHTML="";return a},D=function(){var a;for(a=0;a<n;a++)d.push(t)},
w=function(){d.push("\n")},x=function(b){var c,d;b=b.split("\n");for(c=0;c<b.length;c++)b[c]=f.trim(b[c]);b=b.join(" ");b=f.trim(b);if(""!==b){var e=[];if(a&&0<a){var h="";for(c=0;c<n;c++)h+=t;c=h.length;h=a;for(a>c&&(h-=c);b;)if(b.length>a){for(c=h;0<c&&" "!==b.charAt(c);c--);if(!c)for(c=h;c<b.length&&" "!==b.charAt(c);c++);var g=b.substring(0,c),g=f.trim(g);b=f.trim(b.substring(c==b.length?b.length:c+1,b.length));if(g){d="";for(c=0;c<n;c++)d+=t;g=d+g+"\n"}e.push(g)}else{d="";for(c=0;c<n;c++)d+=
t;b=d+b+"\n";e.push(b);b=null}return e.join("")}d="";for(c=0;c<n;c++)d+=t;return d+b+"\n"}return""},S=function(a){if(a){var b=a;b&&(b=b.replace(/&quot;/gi,'"'),b=b.replace(/&gt;/gi,"\x3e"),b=b.replace(/&lt;/gi,"\x3c"),b=b.replace(/&amp;/gi,"\x26"));var c,d;a=0;for(var e=b.split("\n"),h=[],b=0;b<e.length;b++){var g=e[b],m=-1<g.indexOf("\n");if(g=f.trim(g)){m=a;for(c=0;c<g.length;c++)d=g.charAt(c),"{"===d?a++:"}"===d&&(a--,m=a);d="";for(c=0;c<n+m;c++)d+=t;h.push(d+g+"\n")}else m&&0===b&&h.push("\n")}a=
h.join("")}return a},F=function(a){var b=a.nodeName.toLowerCase(),c=f.trim(I(a));a=c.substring(0,c.indexOf("\x3e")+1);a=a.replace(B,'\x3d"$1"$2');a=a.replace(J,function(a){var b=a.substring(0,6);a=a.substring(6,a.length);var c=a.charAt(0);a=f.trim(a.substring(1,a.length-1));a=a.split(";");var d=[];l.forEach(a,function(a){if(a=f.trim(a))a=a.substring(0,a.indexOf(":")).toLowerCase()+a.substring(a.indexOf(":"),a.length),d.push(a)});d=d.sort();a=d.join("; ");var e=f.trim(a);return e&&";"!==e?b+c+(a+";")+
c:""});var e=[];a=a.replace(u,function(a){e.push(f.trim(a));return""});e=e.sort();a="\x3c"+b;e.length&&(a+=" "+e.join(" "));-1!=c.indexOf("\x3c/")?(r.push(b),a+="\x3e"):(a=h?a+" /\x3e":a+"\x3e",r.push(!1));a:switch(b){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":b=!0;break a;default:b=!1}v.push(b);m&&!b&&(d.push(x(m)),m="");b?m+=a:(D(),d.push(a),w(),n++)},E=function(a){var b=
a.childNodes;if(b){var c;for(c=0;c<b.length;c++){var h=b[c];if(1===h.nodeType){var q=f.trim(h.tagName.toLowerCase());g("ie")&&h.parentNode!=a||q&&"/"===q.charAt(0)||(F(h),"script"===q?d.push(S(h.innerHTML)):"pre"===q?(h=h.innerHTML,g("mozilla")&&(h=h.replace("\x3cbr\x3e","\n"),h=h.replace("\x3cpre\x3e",""),h=h.replace("\x3c/pre\x3e","")),"\n"!==h.charAt(h.length-1)&&(h+="\n"),d.push(h)):E(h),h=v.pop(),m&&!h&&(d.push(x(m)),m=""),(q=r.pop())?(q="\x3c/"+q+"\x3e",h?m+=q:(n--,D(),d.push(q),w())):n--)}else 3===
h.nodeType||4===h.nodeType?m+=Q(h.nodeValue,e):8===h.nodeType&&(h=L(h.nodeValue,e),D(),d.push("\x3c!--"),w(),n++,d.push(x(h)),n--,D(),d.push("--\x3e"),w())}}};E(b);m&&(d.push(x(m)),m="");return d.join("")};return c})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(f,k,l,p){var g=f.declare("dojox.editor.plugins.InsertAnchor",p,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var c=this,d=f.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),b=this.dropDown=new k.TooltipDialog({title:d.title,execute:f.hitch(this,"setValue"),onOpen:function(){c._onOpenDialog();k.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(f.hitch(c,"_onCloseDialog"),0)}});this.button=new k.form.DropDownButton({label:d.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});d.id=k.getUniqueId(this.editor.id);this._uniqueId=d.id;this.dropDown.set("content",b.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+f.string.substitute(this._template,d));b.startup();this._anchorInput=k.byId(this._uniqueId+"_anchorInput");this._textInput=k.byId(this._uniqueId+"_textInput");this._setButton=k.byId(this._uniqueId+"_setButton");this.connect(k.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(f.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(f.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(c){this.editor=c;this._initButton()},_checkInput:function(){var c=!0;this._anchorInput.isValid()&&
(c=!1);this._setButton.set("disabled",c)},_setup:function(){this.editor.onLoadDeferred.addCallback(f.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(f.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var c=f.moduleUrl(l._scopeName,"editor/plugins/resources").toString();if(!c.match(/^https?:\/\//i)&&!c.match(/^file:\/\//i)){var d;d="/"===c.charAt(0)?f.doc.location.protocol+"//"+f.doc.location.host:this._calcBaseUrl(f.global.location.href);
"/"!==d[d.length-1]&&"/"!==c.charAt(0)&&(d+="/");c=d+c}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,c)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var c=this.editor.document,d=this.getAnchorStyle();if(f.isIE)c.createStyleSheet("").cssText=
d;else{var b=c.createElement("style");b.appendChild(c.createTextNode(d));c.getElementsByTagName("head")[0].appendChild(b)}}catch(a){}},_calcBaseUrl:function(c){var d=null;null!==c&&(d=c.indexOf("?"),-1!=d&&(c=c.substring(0,d)),d=c.lastIndexOf("/"),d=0<d&&d<c.length?c.substring(0,d):c);return d},_checkValues:function(c){c&&(c.anchorInput&&(c.anchorInput=c.anchorInput.replace(/"/g,"\x26quot;")),c.textInput||(c.textInput="\x26nbsp;"));return c},setValue:function(c){this._onCloseDialog();if(!this.editor.window.getSelection){var d=
k.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===d.nodeType&&(d=d.parentNode);d&&d.nodeName&&"a"!==d.nodeName.toLowerCase()&&(d=this.editor._sCall("getSelectedElement",["a"]));d&&d.nodeName&&"a"===d.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[d]),this.editor.execCommand("unlink"))}c=this._checkValues(c);this.editor.execCommand("inserthtml",f.string.substitute(this.htmlTemplate,c))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(c){var d,b;c&&"a"===c.tagName.toLowerCase()&&f.attr(c,"name")?(d=f.attr(c,"name"),b=c.textContent||c.innerText,this.editor._sCall("selectElement",[c,!0])):b=this.editor._sCall("getSelectedText");return{anchorInput:d||"",textInput:b||""}},_onOpenDialog:function(){var c;this.editor.window.getSelection?c=this.editor._sCall("getAncestorElement",["a"]):(c=k.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===c.nodeType&&(c=c.parentNode),c&&c.nodeName&&"a"!==
c.nodeName.toLowerCase()&&(c=this.editor._sCall("getSelectedElement",["a"])));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(c))},_onDblClick:function(c){c&&c.target&&(c=c.target,"a"===(c.tagName?c.tagName.toLowerCase():"")&&f.attr(c,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[c]),setTimeout(f.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(c){f.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(c){c&&f.query("a[name]:not([href])",c).removeClass("dijitEditorPluginInsertAnchorStyle");return c}});f.subscribe(k._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin){var d=c.args.name;d&&(d=d.toLowerCase());"insertanchor"===d&&(c.plugin=new g)}});return g})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(f,k,l,p){var g=f.declare("dojox.editor.plugins.Blockquote",p,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=f.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new k.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:f.hitch(this,"_toggleQuote")})},setEditor:function(c){this.editor=c;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");c.customUndo=!0},_toggleQuote:function(c){try{var d=this.editor;d.focus();var b=this.button.get("checked"),a=k.range.getSelection(d.window),e,h,g,n;a&&0<a.rangeCount&&(e=a.getRangeAt(0));if(e){d.beginEditing();if(b){var l,t;if(e.startContainer===e.endContainer){if(this._isRootInline(e.startContainer)){for(g=e.startContainer;g&&g.parentNode!==d.editNode;)g=g.parentNode;for(;g&&g.previousSibling&&(this._isTextElement(g)||1===g.nodeType&&this._isInlineFormat(this._getTagName(g)));)g=
g.previousSibling;g&&1===g.nodeType&&!this._isInlineFormat(this._getTagName(g))&&(g=g.nextSibling);if(g)for(l=d.document.createElement("blockquote"),f.place(l,g,"after"),l.appendChild(g),n=l.nextSibling;n&&(this._isTextElement(n)||1===n.nodeType&&this._isInlineFormat(this._getTagName(n)));)l.appendChild(n),n=l.nextSibling}else{for(var m=e.startContainer;(this._isTextElement(m)||this._isInlineFormat(this._getTagName(m))||"li"===this._getTagName(m))&&m!==d.editNode&&m!==d.document.body;)m=m.parentNode;
m!==d.editNode&&m!==m.ownerDocument.documentElement&&(l=d.document.createElement("blockquote"),f.place(l,m,"after"),l.appendChild(m))}l&&(d._sCall("selectElementChildren",[l]),d._sCall("collapse",[!0]))}else{var p;g=e.startContainer;for(n=e.endContainer;g&&this._isTextElement(g)&&g.parentNode!==d.editNode;)g=g.parentNode;for(p=g;p.nextSibling&&d._sCall("inSelection",[p]);)p=p.nextSibling;n=p;if(n===d.editNode||n===d.document.body){l=d.document.createElement("blockquote");f.place(l,g,"after");t=this._getTagName(g);
if(this._isTextElement(g)||this._isInlineFormat(t))for(d=g;d&&(this._isTextElement(d)||1===d.nodeType&&this._isInlineFormat(this._getTagName(d)));)l.appendChild(d),d=l.nextSibling;else l.appendChild(g);return}n=n.nextSibling;for(p=g;p&&p!==n;){if(1===p.nodeType){if(t=this._getTagName(p),"br"!==t){if(!window.getSelection&&"p"===t&&this._isEmpty(p)){p=p.nextSibling;continue}this._isInlineFormat(t)?l||(l=d.document.createElement("blockquote"),f.place(l,p,"after")):(l&&this._isEmpty(l)&&l.parentNode.removeChild(l),
l=d.document.createElement("blockquote"),f.place(l,p,"after"));l.appendChild(p);p=l}}else this._isTextElement(p)&&(l||(l=d.document.createElement("blockquote"),f.place(l,p,"after")),l.appendChild(p),p=l);p=p.nextSibling}l&&(this._isEmpty(l)?l.parentNode.removeChild(l):(d._sCall("selectElementChildren",[l]),d._sCall("collapse",[!0])),l=null)}}else if(l=!1,e.startContainer===e.endContainer){for(h=e.endContainer;h&&h!==d.editNode&&h!==d.document.body;){if("blockquote"===(h.tagName?h.tagName.toLowerCase():
"")){l=!0;break}h=h.parentNode}if(l){for(var A;h.firstChild;)A=h.firstChild,f.place(A,h,"before");h.parentNode.removeChild(h);A&&(d._sCall("selectElementChildren",[A]),d._sCall("collapse",[!0]))}}else{g=e.startContainer;for(n=e.endContainer;g&&this._isTextElement(g)&&g.parentNode!==d.editNode;)g=g.parentNode;for(e=[];g&&g.nextSibling&&d._sCall("inSelection",[g]);)g.parentNode&&"blockquote"===this._getTagName(g.parentNode)&&(g=g.parentNode),e.push(g),g=g.nextSibling;for(var B=this._findBlockQuotes(e);B.length;){var J=
B.pop();if(J.parentNode){for(;J.firstChild;)f.place(J.firstChild,J,"before");J.parentNode.removeChild(J)}}}d.endEditing()}d.onNormalizedDisplayChanged()}catch(u){}},updateState:function(){var c=this.editor,d=this.get("disabled");if(c&&c.isLoaded&&this.button&&(this.button.set("disabled",d),!d)){var b,d=!1,a=k.range.getSelection(c.window);a&&0<a.rangeCount&&(a=a.getRangeAt(0))&&(b=a.endContainer);for(;b&&b!==c.editNode&&b!==c.document;){if("blockquote"===(b.tagName?b.tagName.toLowerCase():"")){d=!0;
break}b=b.parentNode}this.button.set("checked",d)}},_findBlockQuotes:function(c){var d=[];if(c){var b;for(b=0;b<c.length;b++){var a=c[b];1===a.nodeType&&("blockquote"===this._getTagName(a)&&d.push(a),a.childNodes&&0<a.childNodes.length&&(d=d.concat(this._findBlockQuotes(a.childNodes))))}}return d},_getTagName:function(c){var d="";c&&1===c.nodeType&&(d=c.tagName?c.tagName.toLowerCase():"");return d},_isRootInline:function(c){var d=this.editor;if(this._isTextElement(c)&&c.parentNode===d.editNode||1===
c.nodeType&&this._isInlineFormat(c)&&c.parentNode===d.editNode)return!0;if(this._isTextElement(c)&&this._isInlineFormat(this._getTagName(c.parentNode))){for(c=c.parentNode;c&&c!==d.editNode&&this._isInlineFormat(this._getTagName(c));)c=c.parentNode;if(c===d.editNode)return!0}return!1},_isTextElement:function(c){return c&&3===c.nodeType||4===c.nodeType?!0:!1},_isEmpty:function(c){if(c.childNodes){var d=!0,b;for(b=0;b<c.childNodes.length;b++){var a=c.childNodes[b];if(1===a.nodeType){if("p"!==this._getTagName(a)||
f.trim(a.innerHTML)){d=!1;break}}else if(this._isTextElement(a)){if((a=f.trim(a.nodeValue))&&"\x26nbsp;"!==a&&"\u00a0"!==a){d=!1;break}}else{d=!1;break}}return d}return!0},_isInlineFormat:function(c){switch(c){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});f.subscribe(k._scopeName+".Editor.getPlugin",null,function(c){c.plugin||"blockquote"!==
c.args.name.toLowerCase()||(c.plugin=new g({}))});return g})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(f,k,l,p){f.experimental("dojox.editor.plugins.UploadImage");var g=f.declare("dojox.editor.plugins.UploadImage",p,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,label:"Upload",setToolbar:function(c){this.button.destroy();
this.createFileInput();c.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var c=f.create("span",{innerHTML:"."},document.body);f.style(c,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=new l.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,
uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},c);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(c,d,b){c=c[0];d=f.byId(this.currentImageId,this.editor.document);b=this.downloadPath?this.downloadPath+c.name:c.file;d.src=b;f.attr(d,"_djrealurl",b);c.width&&(d.width=c.width,d.height=
c.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});f.subscribe(k._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "uploadImage":c.plugin=new g({url:c.args.url})}});return g})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A,B,J,u,Q,L,O,I,D){f.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return k("dojox.form.FileUploader",[u,Q,L],{swfPath:m.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(O.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();var b;"flash"==this.uploaderType?b="createFlashUploader":(this.uploaderType="html",b="createHtmlUploader");this[b]();this.fileListId&&this.connect(a.byId(this.fileListId),"click",function(a){a=a.target.parentNode.parentNode.parentNode;a.id&&-1<a.id.indexOf("file_")&&
this.removeFile(a.id.split("file_")[1])});J.addOnUnload(this,this.destroy)},getHiddenNode:function(a){if(!a)return null;var b=null;for(a=a.parentNode;a&&"body"!=a.tagName.toLowerCase();){if("none"==e.get(a,"display")){b=a;break}a=a.parentNode}return b},getButtonStyle:function(){var a=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(a))&&e.set(this._hiddenNode,"display","block");if(!a&&this.button&&this.button.domNode){var c=!0,a=this.button.domNode.className+" dijitButtonNode",d=this.getText(b(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=a=r.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+a+'"\x3e'+d+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(a=this.button);q.get(a,"class")&&(this.baseClass+=" "+q.get(a,"class"));q.set(a,"class",this.baseClass);this.norm=this.getStyle(a);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(a,this.baseClass+" "+this.hoverClass,c),this.down=this.getTempNodeStyle(a,this.baseClass+" "+this.activeClass,c),this.dsbl=this.getTempNodeStyle(a,this.baseClass+" "+this.disabledClass,c),this.fhtml={cn:this.getText(a),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(a),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){e.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&e.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
e.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),e.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):r.destroy(this.progNode);
e.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});n.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&n.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(x){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);c.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var a=g.connect(this,"onReady",this,function(){g.disconnect(a);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&e.set(this._hiddenNode,"display","none")},onChange:function(a){},onProgress:function(a){},onComplete:function(a){},onCancel:function(){},onError:function(a){},onReady:function(a){},onLoad:function(a){},submit:function(a){a=a?t.toObject(a):null;this.upload(a);return!1},upload:function(a){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var b=v.byId(this.progressWidgetId).domNode;"none"==e.get(b,"display")&&(this.restoreProgDisplay="none",e.set(b,"display","block"));"hidden"==e.get(b,"visibility")&&(this.restoreProgDisplay="hidden",e.set(b,"visibility","visible"))}a&&!a.target&&(this.postData=a);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(a=0;a<this.fileList.length;a++)b=
this.fileList[a],b.bytesLoaded=0,b.bytesTotal=b.size||1E5,b.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(a,b){var c;for(c=0;c<this.fileList.length;c++)if(this.fileList[c].name==a){b||this.fileList.splice(c,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(a):b||(r.destroy(this.fileInputs[c]),this.fileInputs.splice(c,1),this._renumberInputs());this.fileListId&&r.destroy("file_"+a)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(p.forEach(this._subs,g.unsubscribe,dojo),p.forEach(this._cons,g.disconnect,dojo),this.scrollConnect&&g.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(r.destroy(this._fileInput),r.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(g.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(a){!0===a?("flash"==this.uploaderType?e.set(this.insideNode,"top","-2500px"):e.set(this.insideNode,"display",
"none"),e.set(this.progNode,"display","")):!1===a?(e.set(this.insideNode,{display:"",top:"0"}),e.set(this.progNode,"display","none")):e.set(this.progNode,"width",a*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var a=!1,b=g.connect(this,"_complete",function(){g.disconnect(b);a=!0}),c=0,d=setInterval(l.hitch(this,function(){c+=5;c>this.fhtml.nr.w&&(c=0,a=!0);this._displayProgress(c/this.fhtml.nr.w);a&&(clearInterval(d),setTimeout(l.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(a){"string"==typeof a&&(a=Error(a));this.onError(a)},_addToFileList:function(){if(this.fileListId){var b="";p.forEach(this.fileList,function(a){b+='\x3ctable id\x3d"file_'+a.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+a.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(a.size?Math.ceil(.001*a.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);a.byId(this.fileListId).innerHTML=
b}},_change:function(a){d("ie")&&p.forEach(a,function(a){a.name=a.name.split("\\")[a.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(a):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=a);this._addToFileList();this.onChange(a);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(a){a=
l.isArray(a)?a:[a];p.forEach(a,function(a){a.ERROR&&this._error(a.ERROR)},this);p.forEach(this.fileList,function(a){a.bytesLoaded=1;a.bytesTotal=1;a.percent=100;this._progress(a)},this);p.forEach(this.fileList,function(a){this.removeFile(a.name,!0)},this);this.onComplete(a);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(l.hitch(this,function(){e.set(v.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(a){for(var b=0,c=0,d=0;d<this.fileList.length;d++){var e=this.fileList[d];e.name==a.name&&(e.bytesLoaded=a.bytesLoaded,e.bytesTotal=a.bytesTotal,e.percent=Math.ceil(e.bytesLoaded/e.bytesTotal*100),this.log(e.name,"percent:",e.percent));c+=Math.ceil(.001*e.bytesLoaded);b+=Math.ceil(.001*e.bytesTotal)}a=Math.ceil(c/b*100);this.progressWidgetId&&v.byId(this.progressWidgetId).update({progress:a+"%"});this.showProgress&&this._displayProgress(.01*a);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(a){if(this._disabled!=a){if("flash"==this.uploaderType){if(!this.flashReady){var b=g.connect(this,"onLoad",this,function(){g.disconnect(b);this._setDisabledAttr(a)});return}this._disabled=a;this.flashMovie.doDisable(a)}else this._disabled=a,e.set(this._fileInput,"display",this._disabled?"none":"");n.toggle(this.domNode,this.disabledClass,a)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var a=
b("[tabIndex]"),c=0;c<a.length;c++)if(a[c].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=a[c];break}this.nextFocusObject.focus()},_disconnect:function(){p.forEach(this._cons,g.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&r.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();A.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:l.hitch(this,function(a){this._error("HTML Upload Error:"+a.message)}),load:l.hitch(this,
function(a,b,c){this._complete(a)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();e.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(g.connect(this._fileInput,"mouseover",this,function(a){n.add(this.domNode,this.hoverClass);this.onMouseOver(a)}));this._cons.push(g.connect(this._fileInput,"mouseout",this,function(a){setTimeout(l.hitch(this,
function(){n.remove(this.domNode,this.activeClass);n.remove(this.domNode,this.hoverClass);this.onMouseOut(a);this._checkHtmlCancel("off")}),0)}));this._cons.push(g.connect(this._fileInput,"mousedown",this,function(a){n.add(this.domNode,this.activeClass);n.remove(this.domNode,this.hoverClass);this.onMouseDown(a)}));this._cons.push(g.connect(this._fileInput,"mouseup",this,function(a){n.remove(this.domNode,this.activeClass);this.onMouseUp(a);this.onClick(a);this._checkHtmlCancel("up")}));this._cons.push(g.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var a=this._fileInput.value;a?this._change([{name:a,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&q.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(a){"change"==a&&(this.dialogIsOpen=!1);"up"==a&&(this.dialogIsOpen=!0);if("off"==a){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var a=this.fhtml.nr;e.set(this.insideNode,{width:a.w+"px",height:"middle"==a.va?a.h+"px":"auto",
textAlign:a.ta,paddingTop:a.p[0]+"px",paddingRight:a.p[1]+"px",paddingBottom:a.p[2]+"px",paddingLeft:a.p[3]+"px"});try{e.set(this.insideNode,"lineHeight","inherit")}catch(x){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],b("*",this._formNode).forEach(function(a){r.destroy(a)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>d("ie")||d("ie")&&d("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=v.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=r.create("form",{enctype:"multipart/form-data",method:"post",id:v.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,e.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var a=
this.htmlFieldName;this.selectMultipleFiles&&(a+=this.fileCount,this.fileCount++);q.set(this._fileInput,{id:this.id,name:a,type:"file"});n.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);a=h.getMarginBox(this._fileInput);e.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-a.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var a;this.fileCount=0;p.forEach(this.fileInputs,function(b){a=this.htmlFieldName+this.fileCount;this.fileCount++;
q.set(b,"name",a)},this)}},_setFormStyle:function(){D.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");e.set(this.domNode,{overflow:"hidden",position:"relative"});e.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var a in this.postData)r.create("input",{type:"hidden",name:a,value:this.postData[a]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var a=g.connect(this,"_complete",this,function(){g.disconnect(a);this._displayProgress(!1)})}var b={},c;for(c in this.postData)b[c]=this.postData[c];this.flashMovie.doUpload(b)}catch(F){this._error("FileUploader - Sorry, the SWF failed to initialize."+F)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var a=window.location.href.split("/");a.pop();a=a.join("/")+"/";this.uploadUrl=a+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",a," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");a={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:I.serialize("fh",this.fhtml),fileMask:I.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new O(a,this.insideNode);this.flashObject.onError=l.hitch(function(a){this._error("Flash Error: "+a)});this.flashObject.onReady=l.hitch(this,function(){e.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=l.hitch(this,function(a){this.flashMovie=a;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&q.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(a,b){this._subs.push(g.subscribe(this.id+a,this,b))},urlencode:function(a){return a&&"none"!=a?a.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(a){a=a.tagName.toLowerCase();
return"button"==a||"input"==a},getTextStyle:function(a){var b={};b.ff=e.get(a,"fontFamily");if(b.ff){b.ff=b.ff.replace(", ",",");b.ff=b.ff.replace(/\"|\'/g,"");b.ff="sans-serif"==b.ff?"Arial":b.ff;b.fw=e.get(a,"fontWeight");b.fi=e.get(a,"fontStyle");b.fs=parseInt(e.get(a,"fontSize"),10);if(-1<e.get(a,"fontSize").indexOf("%"))for(var c=a;c.tagName;){if(-1==e.get(c,"fontSize").indexOf("%")){b.fs=parseInt(e.get(c,"fontSize"),10);break}"body"==c.tagName.toLowerCase()&&(b.fs=.16*parseInt(e.get(c,"fontSize"),
10));c=c.parentNode}b.fc=(new B(e.get(a,"color"))).toHex();b.fc=parseInt(b.fc.substring(1,Infinity),16)}b.lh=e.get(a,"lineHeight");b.ta=e.get(a,"textAlign");b.ta="start"!=b.ta&&b.ta?b.ta:"left";b.va=this.isButton(a)?"middle":b.lh==b.h?"middle":e.get(a,"verticalAlign");return b},getText:function(a){a=l.trim(a.innerHTML);-1<a.indexOf("\x3c")&&(a=escape(a));return a},getStyle:function(a){var b={},c=h.getContentBox(a),d=h.getPadExtents(a);b.p=[d.t,d.w-d.l,d.h-d.t,d.l];b.w=c.w+d.w;b.h=c.h+d.h;b.d=e.get(a,
"display");c=new B(e.get(a,"backgroundColor"));b.bc=0==c.a?"#ffffff":c.toHex();b.bc=parseInt(b.bc.substring(1,Infinity),16);if(c=this.urlencode(e.get(a,"backgroundImage")))b.bi={url:c,rp:e.get(a,"backgroundRepeat"),pos:escape(e.get(a,"backgroundPosition"))},b.bi.pos||(c=e.get(a,"backgroundPositionX"),d=e.get(a,"backgroundPositionY"),b.bi.pos=escape(("left"==c?"0%":"right"==c?"100%":c)+" "+("top"==d?"0%":"bottom"==d?"100%":d)));return l.mixin(b,this.getTextStyle(a))},getTempNodeStyle:function(a,b,
c){if(c){c=r.place("\x3c"+a.tagName+"\x3e\x3cspan\x3e"+a.innerHTML+"\x3c/span\x3e\x3c/"+a.tagName+"\x3e",a.parentNode);var d=c.firstChild;n.add(d,a.className);n.add(c,b);a=this.getStyle(d)}else c=r.place("\x3c"+a.tagName+"\x3e"+a.innerHTML+"\x3c/"+a.tagName+"\x3e",a.parentNode),n.add(c,a.className),n.add(c,b),c.id=a.id,a=this.getStyle(c);r.destroy(c);return a}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n){l.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");c=n._iframeName;c=c.substring(0,c.lastIndexOf("_"));var r=p.delegate(n,{create:function(){return r._frame=n.create.apply(n,arguments)},get:null,post:null,send:function(a){var c,d=g._ioSetArgs(a,function(a){c&&c.cancel()},function(a){var b=null;a=a.ioArgs;try{var d=a.handleAs;"xml"===d||"html"===d?b=c.response.data:(b=c.response.text,"json"===d?b=k.fromJson(b):"javascript"===d&&(b=l.eval(b)))}catch(I){b=
I}return b},function(a,b){b.ioArgs._hasError=!0;return a}),e=d.ioArgs,h="GET",t=b.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&t&&(h="POST");a={method:h,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:t?null:a.content,data:t?a.content:null,timeout:a.timeout,ioArgs:e};a.method&&(a.method=a.method.toUpperCase());if(f.ioPublish&&l.publish&&!1!==e.args.ioPublish)var u=q.after(n,"_notifyStart",function(a){a.options.ioArgs===e&&(u.remove(),g._ioNotifyStart(d))},
!0);c=n(e.url,a,!0);e._callNext=c._callNext;c.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},_iframeOnload:d.global[c+"_onload"]});p.setObject("dojo.io.iframe",r);return r})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(f,k,l,p,g,c,d,b,a){function e(a){a=f.delegate(r,a);if(!("path"in a))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in a||(a.id="dojox-embed-flash-"+n++);return a}var h,q,n=0,r={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};g("ie")?(h=function(b){b=e(b);if(!b)return null;var c,d=b.path;if(b.vars){var f=[];for(c in b.vars)f.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(b.vars[c]));b.params.FlashVars=f.join("\x26");delete b.vars}d='\x3cobject id\x3d"'+a.escape(String(b.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
a.escape(String(b.width))+'" height\x3d"'+a.escape(String(b.height))+'"'+(b.style?' style\x3d"'+a.escape(String(b.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+a.escape(String(d))+'" /\x3e';if(b.params)for(c in b.params)d+='\x3cparam name\x3d"'+a.escape(c)+'" value\x3d"'+a.escape(String(b.params[c]))+'" /\x3e';return{id:b.id,markup:d+"\x3c/object\x3e"}},q=function(){for(var a=10,b=null;!b&&7<a;)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a--)}catch(A){}return b?(a=b.GetVariable("$version").split(" ")[1].split(","),
{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}(),k.addOnWindowUnload(function(){console.warn("***************UNLOAD");var a=function(){};p("object").reverse().style("display","none").forEach(function(b){for(var c in b)if("FlashVars"!=c&&"function"==typeof b[c])try{b[c]=a}catch(B){}})})):(h=function(b){b=e(b);if(!b)return null;var c,d=b.path;if(b.vars){var f=[];for(c in b.vars)f.push(encodeURIComponent(c)+"\x3d"+encodeURIComponent(b.vars[c]));
b.params.flashVars=f.join("\x26");delete b.vars}d='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+a.escape(String(d))+'" id\x3d"'+a.escape(String(b.id))+'" width\x3d"'+a.escape(String(b.width))+'" height\x3d"'+a.escape(String(b.height))+'"'+(b.style?' style\x3d"'+a.escape(String(b.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(b.params)for(c in b.params)d+=" "+a.escape(c)+'\x3d"'+a.escape(String(b.params[c]))+'"';return{id:b.id,markup:d+
" /\x3e"}},q=function(){var a=navigator.plugins["Shockwave Flash"];return a&&a.description?(a=a.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=a[0]?parseInt(a[0]):0,minor:null!=a[1]?parseInt(a[1]):0,rev:null!=a[2]?parseInt(a[2]):0}):{major:0,minor:0,rev:0}}());var t=function(a,b){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=q.major;this.minimumVersion=a.minimumVersion||9;this.domNode=this.movie=this.id=null;b&&(b=c.byId(b));setTimeout(f.hitch(this,function(){if(a.expressInstall||this.available&&this.available>=this.minimumVersion)if(a&&b)this.init(a,b);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};f.extend(t,{onReady:function(a){},onLoad:function(a){},onError:function(a){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(a,b){this.destroy();b=c.byId(b||this.domNode);if(!b)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var d=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;t.initialized&&(this.id=t.place(a,b),this.domNode=b,setTimeout(f.hitch(this,
function(){this.movie=this.byId(this.id,a.doc);this.onReady(this.movie);this._poller=setInterval(f.hitch(this,function(){try{d=this.movie.PercentLoaded()}catch(B){console.warn("this.movie.PercentLoaded() failed",B,this.movie)}if(100==d)this._onload();else if(0==d&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(m){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var a=
f.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),b;for(b in this)a[b]||delete this[b];this._poller?d(this,"Load",this,"_destroy"):this._destroy()}},byId:function(a,b){b=b||document;return b.embeds[a]?b.embeds[a]:b[a]?b[a]:window[a]?window[a]:document[a]?document[a]:null}});f.mixin(t,{minSupported:8,available:q.major,supported:q.major>=q.required,minimumRequired:q.required,version:q,initialized:!1,onInitialize:function(){t.initialized=!0},__ie_markup__:function(a){return h(a)},proxy:function(a,
b){l.forEach(b instanceof Array?b:[b],function(a){this[a]=f.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+a+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+l.map(arguments,function(a){return __flash__toXML(a)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},a)}});t.place=function(a,d){a=h(a);d=c.byId(d);d||(d=b.doc.createElement("div"),d.id=a.id+"-container",b.body().appendChild(d));return a?(d.innerHTML=a.markup,
a.id):null};t.onInitialize();f.setObject("dojox.embed.Flash",t);return t})},"dojox/embed/flashVars":function(){define(["dojo"],function(f){f.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var k={serialize:function(k,p){var g=function(a){"string"==typeof a&&(a=a.replace(/;/g,"_sc_"),a=a.replace(/\./g,"_pr_"),a=a.replace(/\:/g,"_cl_"));return a},c=dojox.embed.flashVars.serialize,d="";if(f.isArray(p)){for(var b=0;b<p.length;b++)d+=c(k+"."+b,g(p[b]))+";";return d.replace(/;{2,}/g,
";")}if(f.isObject(p)){for(b in p)d+=c(k+"."+b,g(p[b]))+";";return d.replace(/;{2,}/g,";")}return k+":"+p}};f.setObject("dojox.embed.flashVars",k);return k})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(f,k,l,p){var g=f.getObject("dojox.html",!0),c={},d={},b=[];g.insertCssRule=function(a,b,c){c=g.getDynamicStyleSheet(c);var d=a+" {"+b+"}";console.log("insertRule:",d);p("ie")?(c.cssText+=d,console.log("ss.cssText:",c.cssText)):
c.sheet?c.sheet.insertRule(d,c._indicies.length):c.appendChild(l.doc.createTextNode(d));c._indicies.push(a+" "+b);return a};g.removeCssRule=function(a,b,d){var e,f=-1,h,g;for(h in c)if(!d||d===h){e=c[h];for(g=0;g<e._indicies.length;g++)if(a+" "+b===e._indicies[g]){f=g;break}if(-1<f)break}if(!e)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===f)return console.warn("The css rule was not found and could not be removed."),!1;e._indicies.splice(f,1);
p("ie")?e.removeRule(f):e.sheet&&e.sheet.deleteRule(f);return!0};g.modifyCssRule=function(a,b,c){};g.getStyleSheet=function(a){if(c[a||"default"])return c[a||"default"];if(!a)return!1;var b=g.getStyleSheets();if(b[a])return g.getStyleSheets()[a];for(var d in b)if(b[d].href&&-1<b[d].href.indexOf(a))return b[d];return!1};g.getDynamicStyleSheet=function(a){a||(a="default");c[a]||(l.doc.createStyleSheet?(c[a]=l.doc.createStyleSheet(),9>p("ie")&&(c[a].title=a)):(c[a]=l.doc.createElement("style"),c[a].setAttribute("type",
"text/css"),l.doc.getElementsByTagName("head")[0].appendChild(c[a]),console.log(a," ss created: ",c[a].sheet)),c[a]._indicies=[]);return c[a]};g.enableStyleSheet=function(a){if(a=g.getStyleSheet(a))a.sheet?a.sheet.disabled=!1:a.disabled=!1};g.disableStyleSheet=function(a){if(a=g.getStyleSheet(a))a.sheet?a.sheet.disabled=!0:a.disabled=!0};g.activeStyleSheet=function(a){var b=g.getToggledStyleSheets(),c;if(1===arguments.length)k.forEach(b,function(b){b.disabled=b.title===a?!1:!0});else for(c=0;c<b.length;c++)if(!1===
b[c].disabled)return b[c];return!0};g.getPreferredStyleSheet=function(){};g.getToggledStyleSheets=function(){var a;if(!b.length){var c=g.getStyleSheets();for(a in c)c[a].title&&b.push(c[a])}return b};g.getStyleSheets=function(){if(d.collected)return d;k.forEach(l.doc.styleSheets,function(a){var b=a.sheet?a.sheet:a;a=b.title||b.href;if(p("ie"))-1===b.cssText.indexOf("#default#VML")&&(b.href?d[a]=b:b.imports.length?k.forEach(b.imports,function(a){d[a.title||a.href]=a}):d[a]=b);else{d[a]=b;d[a].id=b.ownerNode.id;
a=[];try{a=b[b.cssRules?"cssRules":"rules"]}catch(h){console.warn("Reading css rules from stylesheet "+b.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",b)}k.forEach(a,function(a){a.href&&(d[a.href]=a.styleSheet,d[a.href].id=b.ownerNode.id)})}});d.collected=!0;return d};return g})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(f,
k,l,p,g,c){k.experimental("dijit.editor.plugins.EditorTextColor");var d=p("dijit.editor.plugins.EditorTextColor",g,{buttonClass:c,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var b="",a=!1;this.params.custom&&(this.params.custom.recordUID&&(b=this.params.custom.recordUID),this.params.custom.forceAttr&&(a=this.params.custom.forceAttr));var c=this;this.button.set("iconClass",this.iconClassPrefix+
" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(d){function e(e){c.button.dropDown=new e({dir:c.editor.dir,ownerDocument:c.editor.ownerDocument,value:c.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:b,onChange:function(b){c.editor.execCommand("useCSS",a);c.editor.execCommand("styleWithCSS",!a);c.editor.execCommand(c.hackCommand,b)},onClose:function(){c.button.closeDropDown()}});
d()}"string"===typeof c.colorPicker?f([c.colorPicker],e):e(c.colorPicker)}},updateState:function(){var b=this.editor,a=this.hackCommand;if(b&&b.isLoaded&&a.length){var c;if(this.button){var d=this.get("disabled");this.button.set("disabled",d);if(d)return;try{c=b.queryCommandValue(a)||""}catch(q){c=""}}""===c?c="#000000":"transparent"===c&&(c="rgba(0, 0, 0, 0)");this.value=c;(b=this.button.dropDown)&&b.getColor&&c!==b.getColor()&&(b.refreshRecords(),b.setColor(c))}}});k.subscribe(l._scopeName+".Editor.getPlugin",
null,function(b){if(!b.plugin)switch(b.args.name){case "editorTextColor":b.plugin=new d}});return d})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(f,k,l,p,g,c){k.experimental("dijit.editor.plugins.EditorBackgroundColor");var d=p("dijit.editor.plugins.EditorBackgroundColor",g,{buttonClass:c,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=
"editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var b="";this.params.custom&&this.params.custom.recordUID&&(b=this.params.custom.recordUID);var a=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(c){function d(d){a.button.dropDown=new d({dir:a.editor.dir,ownerDocument:a.editor.ownerDocument,value:a.value,appearance:{showTransparent:!0,
showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:b,onChange:function(b){a.editor.execCommand("useCSS",!1);a.editor.execCommand("styleWithCSS",!0);a.editor.execCommand(a.hackCommand,b)},onExecute:function(){a.editor.execCommand(a.hackCommand,this.get("value"))},onClose:function(){a.button.closeDropDown()}});c()}"string"===typeof a.colorPicker?f([a.colorPicker],d):d(a.colorPicker)}},updateState:function(){var b=this.editor,a=this.hackCommand;
if(b&&b.isLoaded&&a.length){var c;if(this.button){var d=this.get("disabled");this.button.set("disabled",d);if(d)return;try{c=b.queryCommandValue(a)||""}catch(q){c=""}}""===c?c="#000000":"transparent"===c&&(c="rgba(0, 0, 0, 0)");this.value=c;(b=this.button.dropDown)&&b.getColor&&c!==b.getColor()&&(b.refreshRecords(),b.setColor(c))}}});k.subscribe(l._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "editorBackgroundColor":b.plugin=new d}});return d})},"widgets/RelatedTableCharts/setting/GeneralSetting":function(){define("jimu/BaseWidgetSetting dojo/_base/declare dojo/_base/lang dojo/on dijit/_WidgetsInTemplateMixin ./SymbolChooserPopup jimu/symbolUtils jimu/utils dojo/text!./GeneralSetting.html esri/symbols/jsonUtils jimu/dijit/Message dojo/dom-construct".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q){return k([f,g],{baseClass:"jimu-widget-RelatedTableCharts-setting",templateString:a,nls:this.nls,config:this.config,graphicLocatoionSymbolJSON:null,postMixInProperties:function(){this.nls=l.mixin(this.nls,window.jimuNls.common)},postCreate:function(){this._createSymbolPickerNode();this._setRefreshIntervalTxtBxValue();this._setLocationChkBxValue()},_createSymbolPickerNode:function(){var a={},c,d;a.type=b.getSymbolTypeByGeometryType("esriGeometryPoint");this.config&&
this.config.symbol&&this.config.symbol.graphicLocationSymbol&&(a.symbol=e.fromJson(this.config.symbol.graphicLocationSymbol));c=this._createPreviewContainer(this.locationSymbolIconNode);d={symbolChooserTitle:this.nls.locationSymbolLabel,symbolParams:a,nls:this.nls};this._showSelectedSymbol(c,a.symbol);this.own(p(c,"click",l.hitch(this,function(){a.symbol=e.fromJson(this.graphicLocatoionSymbolJSON);this._initSymbolChooserPopup(d,c)})))},_createPreviewContainer:function(a){var b;a=q.create("table",
{cellspacing:"0",cellpadding:"0"},a);a=q.create("tr",{style:"height:30px"},a);b=q.create("td",{},a);q.create("div",{innerHTML:this.nls.symbolPickerPreviewText,"class":"esriCTSymbolPreviewText"},b);a=q.create("td",{},a);return q.create("div",{"class":"esriCTSymbolChooserNode"},a)},_initSymbolChooserPopup:function(a,b){var d=new c(a);d.onOkClick=l.hitch(this,function(){var a=d.symbolChooser.getSymbol();this._showSelectedSymbol(b,a);d.popup.close()})},_showSelectedSymbol:function(a,b){q.empty(a);if(b){var c=
d.createSymbolNode(b);c||(c=q.create("div"));q.place(c,a);this.graphicLocatoionSymbolJSON=b.toJson()}},getConfig:function(){var a={symbol:{graphicLocationSymbol:this.graphicLocatoionSymbolJSON},refreshInterval:this.refreshIntervalTxtBx.value,showLocationTool:this.setLocationCheckBoxNode.getValue()};if(this.refreshIntervalTxtBx.isValid())return a;this._errorMessage(this.nls.errMsgRefreshInterval);return!1},_setRefreshIntervalTxtBxValue:function(){this.config&&this.config.refreshInterval&&this.refreshIntervalTxtBx.set("value",
this.config.refreshInterval)},_setLocationChkBxValue:function(){this.config.showLocationTool&&this.setLocationCheckBoxNode.setValue(this.config.showLocationTool)},_onRefreshIntervalChanged:function(){isNaN(this.refreshIntervalTxtBx.get("value"))&&this.refreshIntervalTxtBx.set("value",0)},_errorMessage:function(a){(new h({message:a})).message=a}})})},"widgets/RelatedTableCharts/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dojo/domReady!".split(" "),
function(f,k,l,p,g,c,d,b,a,e){return f([k,l],{templateString:b,baseClass:"jimu-widget-RelatedTableCharts-setting",postCreate:function(){this.own(d(this.okButton,"click",p.hitch(this,this._onOKButtonClicked)));this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new a(this.symbolParams,c.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new e({titleLabel:this.symbolChooserTitle,width:420,
height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!g.contains(this.okButton,"jimu-state-disabled"))this.onOkClick()},onOkClick:function(a){return a}})})},"widgets/RelatedTableCharts/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A,B,J){return f([k,l,p],{baseClass:"jimu-widget-RelatedTableCharts-search-source-settings",templateString:g,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(A(this.menuItemClickNode,"click",t.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new J({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&
this.config.sources||(this.config.sources=[]);this.shelter.show();e.getInstance(this.map,this.map.itemInfo).then(t.hitch(this,function(a){this.layerInfosObj=a;h.setMap(this.map);h.setLayerInfosObj(this.layerInfosObj);h.setAppConfig(this.appConfig);n(h.getConfigInfo(this.config)).then(t.hitch(this,this._loadConfig))}))},_loadConfig:function(a){this.domNode&&(this.setConfig(a),this.shelter.hide())},setConfig:function(a){this.config=a;a=a.sources;this.allPlaceholder.set("value",q.stripHTML(this.config.allPlaceholder));
this.showInfoWindowOnSelect.setValue(r.isDefined(this.config.showInfoWindowOnSelect)?!!this.config.showInfoWindowOnSelect:!0);m.forEach(a,t.hitch(this,function(a,b){var c=this.sourceList.addRow({name:a.name||""});c&&c.success?(this._setRelatedConfig(c.tr,a),0===b&&setTimeout(t.hitch(this,function(){this.sourceList.selectRow(c.tr)}),100)):console.error("add row failed ",c)}))},getConfig:function(){if(this._currentSourceSetting)if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();
else return null;var a={allPlaceholder:q.stripHTML(this.allPlaceholder.get("value")),showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked},b=this.sourceList.getRows(),c=[];m.forEach(b,t.hitch(this,function(a){var b=this._getRelatedConfig(a);delete b._definition;this._removeRelatedConfig(a);c.push(b)}));a.sources=c;return a},destroy:function(){h.setMap(null);h.setLayerInfosObj(null);h.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",
q.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=new d({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.searchSourceSetting.nameTitle,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);c.setStyle(this.sourceList.domNode,"height","100%");this.sourceList.startup();this.own(A(this.sourceList,"row-select",t.hitch(this,this._onSourceItemSelected)));
this.own(A(this.sourceList,"row-delete",t.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(a){this._currentSourceSetting&&this._currentSourceSetting.getRelatedTr()===a&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(a){var b=this._getRelatedConfig(a),c=this._currentSourceSetting&&this._currentSourceSetting.tr;b&&a!==c&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),
this.sourceList.selectRow(c)):(B.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===b.type?this._createNewQuerySourceSettingFromSourceList(b,b._definition||{},a):"locator"===b.type&&this._createNewLocatorSourceSettingFromSourceList(b,b._definition||{},a)))},_setRelatedConfig:function(a,b){v(a).data("config",t.clone(b))},_getRelatedConfig:function(a){return v(a).data("config")[0]},_removeRelatedConfig:function(a){return v(a).removeData("config")},_onMenuItemClick:function(a){a=a&&a.target&&
c.getAttr(a.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(B.remove(this.searchSources,"esriCTSourcesExtraHeight"),"locator"===a?this._addNewLocator():"query"===a&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},{})},_createNewLocatorSourceSettingFromMenuItem:function(b,c){var d=new a({nls:this.nls.searchSourceSetting,
map:this.map});d.setDefinition(c);d.setConfig({url:b.url||"",name:b.name||"",singleLineFieldName:b.singleLineFieldName||"",placeholder:b.placeholder||"",countryCode:b.countryCode||"",zoomScale:b.zoomScale||5E4,maxSuggestions:b.maxSuggestions||6,maxResults:b.maxResults||6,searchInCurrentMapExtent:!!b.searchInCurrentMapExtent,type:"locator"});d._openLocatorChooser();d.own(A(d,"select-locator-url-ok",t.hitch(this,function(a){(a=this.sourceList.addRow({name:a.name||"New Geocoder"},this.sourceList.getRows().length))&&
a.success&&(this._currentSourceSetting&&this._closeSourceSetting(),d.setRelatedTr(a.tr),d.placeAt(this.sourceSettingNode),this.sourceList.selectRow(a.tr),this._currentSourceSetting=d)})));d.own(A(d,"reselect-locator-url-ok",t.hitch(this,function(a){var b=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(b,{name:a.name})})));d.own(A(d,"select-locator-url-cancel",t.hitch(this,function(){this._currentSourceSetting!==d&&(d.destroy(),d=null)})))},_createNewLocatorSourceSettingFromSourceList:function(b,
c,d){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new a({nls:this.nls.searchSourceSetting,map:this.map});this._currentSourceSetting.own(A(this._currentSourceSetting,"enable-local-search",t.hitch(this,function(){B.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(A(this._currentSourceSetting,"disable-local-search",t.hitch(this,function(){B.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(c);
this._currentSourceSetting.setConfig({url:b.url||"",name:b.name||"",singleLineFieldName:b.singleLineFieldName||"",placeholder:b.placeholder||"",countryCode:b.countryCode||"",zoomScale:b.zoomScale||5E4,maxSuggestions:b.maxSuggestions||6,maxResults:b.maxResults||6,searchInCurrentMapExtent:!!b.searchInCurrentMapExtent,enableLocalSearch:!!b.enableLocalSearch,localSearchMinScale:b.localSearchMinScale,localSearchDistance:b.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(d);
this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(A(this._currentSourceSetting,"reselect-locator-url-ok",t.hitch(this,function(a){var b=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(b,{name:a.name})})))},_closeSourceSetting:function(){var a=this._currentSourceSetting.getRelatedTr(),b=this._currentSourceSetting.getConfig();b._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(a,b);this.sourceList.editRow(a,{name:b.name});
this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(a,c){var d=new b({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});d.setDefinition(c);d.setConfig({url:a.url,name:a.name||"",layerId:a.layerId,placeholder:a.placeholder||"",searchFields:a.searchFields||[],displayField:a.displayField||c.displayField||"",exactMatch:!!a.exactMatch,zoomScale:a.zoomScale||5E4,maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,
type:"query"});d._openQuerySourceChooser();d.own(A(d,"select-query-source-ok",t.hitch(this,function(a){(a=this.sourceList.addRow({name:a.name},0))&&a.success&&(this._currentSourceSetting&&this._closeSourceSetting(),d.setRelatedTr(a.tr),d.placeAt(this.sourceSettingNode),this.sourceList.selectRow(a.tr),this._currentSourceSetting=d)})));d.own(A(d,"reselect-query-source-ok",t.hitch(this,function(a){var b=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(b,{name:a.name})})));d.own(A(d,
"select-query-source-cancel",t.hitch(this,function(){this._currentSourceSetting!==d&&(d.destroy(),d=null)})))},_createNewQuerySourceSettingFromSourceList:function(a,c,d){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new b({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.setDefinition(c);this._currentSourceSetting.setConfig({url:a.url,name:a.name||"",layerId:a.layerId,
placeholder:a.placeholder||"",searchFields:a.searchFields||[],displayField:a.displayField||c.displayField||"",exactMatch:!!a.exactMatch,zoomScale:a.zoomScale||5E4,maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(d);this._currentSourceSetting.own(A(this._currentSourceSetting,"reselect-query-source",t.hitch(this,function(a){var b=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(b,
{name:a.name})})))}})})},"widgets/RelatedTableCharts/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A,B){return f([l,p,g,q],{baseClass:"jimu-widget-RelatedTableCharts-query-source-setting",templateString:c,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.own(a(this.setSourceBtnClickNode,"click",d.hitch(this,
this._onSetSourceClick)));this.own(a(this.sourceName,"Blur",d.hitch(this,this._onSourceNameBlur)));this.own(a(this.placeholder,"Blur",d.hitch(this,this._onPlaceholderBlur)));this.own(a(this.fieldsSelectorNode,"click",d.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new B({checked:!1,label:this.nls.exactMatch},this.exactMatch);this.searchInCurrentMapExtent=new B({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=
[];this._setMessageNodeContent("")},setDefinition:function(a){this._layerDefinition=a||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(a){this.tr=a},getRelatedTr:function(){return this.tr},setConfig:function(a){if("[object Object]"===Object.prototype.toString.call(a)){var b=a.url;b&&(this.config=a,this.shelter.show(),this._layerDefinition.url!==b?this._getDefinitionFromRemote(b).then(d.hitch(this,function(a){b&&a&&"error"!==a.type?(this._layerDefinition=a,this._layerDefinition.url=
b,this._setSourceItems(),this._setMessageNodeContent("")):b&&a&&"error"===a.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(m.substitute({URL:a.url},d.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},isValidConfig:function(){var a=this.getConfig();return a.url&&a.name&&a.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},
getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:v.stripHTML(this.sourceName.get("value")),placeholder:v.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,zoomScale:this.zoomScale.get("value")||5E4,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||
6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",v.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",v.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",
!0);k.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);k.setStyle(this.fieldsSelectorNode,"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",
!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",v.stripHTML(this.config.name||""));this.placeholder.set("value",v.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);
this.zoomScale.set("value",this.config.zoomScale||5E4);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();this._layerDefinition&&"esriGeometryPoint"===this._layerDefinition.geometryType?
k.setStyle(this.zoomScaleTr,"display",""):k.setStyle(this.zoomScaleTr,"display","none");this._enableSourceItems()},_getDefinitionFromRemote:function(a){var b=new h,c=t({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(c);c.then(d.hitch(this,function(a){b.resolve(a)}),d.hitch(this,function(c){console.error(c);b.resolve({type:"error",url:this._getRequestUrl(a)})}));return b.promise},_setMessageNodeContent:function(a,b){k.empty(this.messageNode);a.nodeType||(a=k.toDom(a));
k.place(a,this.messageNode);b?k.setStyle(this.messageTr,"display",""):k.setStyle(this.messageTr,"display","none")},_getRequestUrl:function(a){var b=window.location.protocol;return"http:"===b?r.setHttpProtocol(a):"https:"===b?r.setHttpsProtocol(a):a},_setSearchFields2Node:function(){var a=null,c=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(a=[]);if(c)var d=this._layerDefinition.fields,
a=b.filter(this.config.searchFields,function(a){return b.some(d,function(b){return b.name===a})});else a=this.config.searchFields;this.searchFields.set("_fields",a)},_setDisplayFieldOptions:function(){var a=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?a=b.map(this._layerDefinition.fields,function(a){return{label:a.alias||a.name||"",value:a.name||""}}):this.config&&this.config.displayField&&(a=[{label:this.config.displayField,value:this.config.displayField}]);
this.displayField.set("options",a)},_getSearchFieldsAlias:function(){var a=this._getSearchFields();if(!(a&&0<a.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var c=this._layerDefinition.fields,d=b.map(c,function(a){return a&&a.name}),e=[],f=0,h=a.length;f<h;f++){var g=d.indexOf(a[f]);-1<g&&(c[g].alias?e.push(c[g].alias):e.push(c[g].name))}return e.join(",")}return a.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},
_setSearchFields:function(a){this.searchFields.set("_fields",a)},_onSetSourceClick:function(){this._clickSet=!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var b=new n({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});a.once(b,"ok",d.hitch(this,function(a){b.close();this.setDefinition(a.definition||
{});this.setConfig({layerId:a.layerInfo&&a.layerInfo.id||null,url:a.url,name:a.name||"",placeholder:"",searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,zoomScale:5E4,maxSuggestions:6,maxResults:6,type:"query"});b=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",a):this.emit("select-query-source-ok",a)}));a.once(b,"cancel",d.hitch(this,function(){b.close();b=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var a=
k.create("div",{style:{maxHeight:"480px"}}),c=this._layerDefinition.fields;this._fieldsCheckBox=[];b.forEach(c,d.hitch(this,function(b,c){var d=new B({checked:this._isSearchable(b),label:b.alias||b.name});k.addClass(d.domNode,"esriCTSearchSourceFieldCheckbox");k.addClass(d.labelNode,"jimu-ellipsis");k.setAttr(d.domNode,{title:b.alias||b.name});0===c%3&&(window.isRTL?k.setStyle(d.domNode,"marginRight",0):k.setStyle(d.domNode,"marginLeft",0));d.placeAt(a);e(d.domNode).data("fieldName",b.name);this._fieldsCheckBox.push(d)}));
this.fieldsPopup=new A({titleLabel:this.nls.setSearchFields,autoHeight:!0,content:a,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:d.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel,classNames:["jimu-btn-vacation"]}],onClose:d.hitch(this,function(){this.fieldsPopup=null})});k.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var a=[];b.forEach(this._fieldsCheckBox,function(b){if(b.getValue()){var c=
e(b.domNode).data("fieldName");a.push(c[0]);e(b.domNode).removeData()}});this._setSearchFields(a);this.searchFields.set("value",this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(a){var c=this._getSearchFields();return b.some(c,d.hitch(this,function(b){return a.name===b}))},_showSuggestibleTips:function(){k.removeClass(this.tipsNode,"esriCTHidden");k.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){k.addClass(this.tipsNode,"esriCTHidden");
k.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(a){if(!a.validate()&&a.domNode&&a.focusNode){var b=a.get("disabled");b&&a.set("disabled",!1);a.focusNode.focus();setTimeout(d.hitch(this,function(){a.focusNode.blur();b&&a.set("disabled",!0);a=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),
function(f,k,l,p,g,c,d,b,a){return f([c,k],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new d(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(l(this.fls,"ok",p.hitch(this,function(b){if(0!==b.length){var c=b[0];
if(c.definition)try{c.definition.name=c.name,c.definition.url=c.url,this.emit("ok",c)}catch(q){console.error(q)}else this.loading.show(),a({url:c.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(p.hitch(this,function(a){if(this.domNode){this.loading.hide();c.definition=a;try{c.definition.name=c.name,c.definition.url=c.url,this.emit("ok",c)}catch(n){console.error(n)}}}),p.hitch(this,function(a){console.error(a);this.domNode&&this.loading.hide()}))}})));this.own(l(this.fls,
"cancel",p.hitch(this,function(){try{this.emit("cancel")}catch(e){console.error(e)}})))},_initLoading:function(){this.loading=new b({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r){return f([k,l,p,a],{templateString:g,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=r.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";if(this.portalRadio.checked)return"portal";
if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var a=[];this.mapRadio.checked?a=this.flcMap.getSelectedItems():this.portalRadio.checked?a=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(a=this.flcUrl.getSelectedItems());return a},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();this._createFeaturelayerChooserFromPortal();
this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new h({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(b(this.flcMap,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(b(this.flcMap,"cancel",c.hitch(this,function(){this.emit("cancel")})))},
_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new q({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(b(this.flcPortal,"next",c.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));this.own(b(this.flcPortal,"back",c.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;
this._updateOperationTip()})));this.own(b(this.flcPortal,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(b(this.flcPortal,"cancel",c.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=new n({multiple:this.multiple,style:{width:"100%",height:"100%"}});
this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(b(this.flcUrl,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(b(this.flcUrl,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var a="featureLayerSourceRadios_"+this._getRandomString(),d=c.hitch(this,this._onRadioClicked);this.mapRadio=new e({group:a,onStateChange:d,checked:!0});this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new e({group:a,
onStateChange:d,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new e({group:a,onStateChange:d,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(b(this.mapLabel,"click",c.hitch(this,function(){this.mapRadio.check()})));this.own(b(this.portalLabel,"click",c.hitch(this,function(){this.portalRadio.check()})));this.own(b(this.urlLabel,"click",c.hitch(this,function(){this.urlRadio.check()})))},_getRandomString:function(){var a=Math.random().toString();return a=
a.slice(2,a.length)},_onRadioClicked:function(){d.setStyle(this.flcContainer,"display","none");d.setStyle(this.hflcContainer,"display","none");d.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(d.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(d.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):this.urlRadio.checked&&(d.setStyle(this.flscContainer,"display","block"),
this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(f,k,l,p,g,c,d,b,a){return g([c,d,b,k],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
constructor:function(a){this.options=a},postMixInProperties:function(){this.nls=l.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=new a(this.options);this.layerChooser.placeAt(this.chooserContainer);p.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(f(this.layerChooser,"tree-click",l.hitch(this,function(){0<this.getSelectedItems().length?p.removeClass(this.btnOk,"jimu-state-disabled"):p.addClass(this.btnOk,"jimu-state-disabled")})));
this.own(f(this.btnOk,"click",l.hitch(this,function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)})));this.own(f(this.btnCancel,"click",l.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],
function(f,k,l,p,g){return f([g],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=p.hitch(this,this.basicFilter);this.filter=g.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,
this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=g.andCombineFilters([this.filter,p.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(c){return c.getLayerType().then(function(c){return!("ArcGISDynamicMapServiceLayer"===c||"ArcGISTiledMapServiceLayer"===c||"GroupLayer"===c)})},basicFilter:function(c){var d=new k;0<=this.ignoredFeaturelayerIds.indexOf(c.id)?
d.resolve(!1):this.onlyShowVisible&&"Table"!==c.getLayerType()?d.resolve(c.isShowInMap()):d.resolve(!0);return d},getHandledItem:function(c){var d=this.inherited(arguments),b=c&&c.layerInfo,b=b&&b.layerObject;d.url=b&&b.url||"";return d}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v){return f([k,l,p,q],{templateString:g,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=c.mixin({},window.jimuNls.common);this.nls=c.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=m.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new r({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(a(this.selector,"item-selected",c.hitch(this,this._onItemSelected)));this.own(a(this.selector,"none-item-selected",c.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new t({multiple:this.multiple});this.own(a(this.serviceBrowser,"tree-click",c.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){d.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){d.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();d.setStyle(this.btnOk,"display","none");d.setStyle(this.btnNext,"display","block");d.setStyle(this.btnBack,"display","none");d.addClass(this.btnOk,"jimu-state-disabled");d.setStyle(this.selectorContainer,"display","block");d.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnNextClicked:function(){var a=this.selector.getSelectedItem();
a&&(d.setStyle(this.btnNext,"display","none"),d.setStyle(this.btnBack,"display","block"),d.setStyle(this.btnOk,"display","block"),d.addClass(this.btnOk,"jimu-state-disabled"),d.setStyle(this.selectorContainer,"display","none"),d.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(a.url||a.item),this._serviceBrowserDef.then(c.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),c.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?d.removeClass(this.btnOk,"jimu-state-disabled"):d.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A,B,J,u,Q,L){return f([l,p,g,d],{templateString:c,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,postMixInProperties:function(){this.portalUrl=B.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";e.forEach(this.itemTypes,b.hitch(this,function(a,b){this._itemTypes+='"'+a+'"';b!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+
"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";e.forEach(this.typeKeywords,b.hitch(this,function(a,b){this._typeKeywords+='"'+a+'"';b!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var a=this._getPortalUrl();this.portal=v.getPortal(a);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();
this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=m.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=m.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){this.tab=new Q({tabs:[{title:this.nls.myContent,content:this.mycontentTabNode},{title:this.nls.myOrganization,content:this.organizationTabNode},{title:this.nls.myGroup,content:this.groupTabNode},{title:this.nls.publicMap,
content:this.publicTabNode}]},this.tabNode);this.own(t(this.tab,"tabChanged",b.hitch(this,function(a){h.setStyle(this.signinSection,"display","none");a!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){h.setStyle(this.signinSection,"display","none");var a=r(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",this.domNode);A.userHaveSignInPortal(this._getPortalUrl())?a.style("display",
"block"):(a.style("display","none"),this._isPublicTabShow||h.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){m.combineRadioCheckBoxWithLabel(this.portalPublicRaido,this.portalPublicLabel);m.combineRadioCheckBoxWithLabel(this.onlinePublicRaido,this.onlinePublicLabel);var a=this._getPortalUrl(),a=B.getServerByUrl(a);this.portalPublicRaido.disabled=!1;this.onlinePublicRaido.disabled=!1;this.portalPublicRaido.checked=!0;var b=!1;B.isArcGIScom(a)?(b=!0,this.portalPublicLabel.innerHTML=
"ArcGIS.com"):(this.portalPublicLabel.innerHTML=a,b=this.showOnlineItems?!1:!0);b&&(this.onlinePublicRaido.disabled=!0,h.setStyle(this.onlinePublicRaido,"display","none"),h.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var c="esri_"+(a.locale&&a.locale.slice(0,2)||"en").toLowerCase(),d=e.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
b.hitch(this,function(a){return a!==c})),f="";e.forEach(d,b.hitch(this,function(a){f+=" -owner:"+a+" "}));d=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(d=" orgid:"+this.portal.user.orgId+" ");d=d+this._itemTypeQueryString+" AND access:public "+f+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:d});this._filterPublicPortalQuery=this._getQuery({q:d,basicQ:d});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(a){return b.mixin({start:1,num:16,f:"json"},a||{})},_getPortalUrl:function(){return B.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(t(this.publicPortalItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(t(this.publicOnlineItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(t(this.organizationItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(t(this.groupItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));
this.own(t(this.mycontentItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(t(this.publicPortalItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(t(this.publicOnlineItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(t(this.organizationItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(t(this.groupItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(t(this.mycontentItemTable,"update",b.hitch(this,this._onItemTableUpdate)));
var a=this._getPortalUrl();this.portalPublicRaido.disabled||(this.publicPortalItemTable.set("portalUrl",a),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.disabled||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",this._filterPublicOnlineQuery))},
_initPublic:function(){this.own(t(this.portalPublicRaido,"click",b.hitch(this,this._onPublicRaidoClicked)));this.own(t(this.onlinePublicRaido,"click",b.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.checked?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.checked&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},_onPublicSearch:function(a){(a=a&&b.trim(a))?
(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.checked?(this._filterPublicPortalQuery.q=a+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.checked&&(this._filterPublicOnlineQuery.q=a+" "+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=
1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(t(this.groupsSelect,"change",b.hitch(this,this._onGroupsSelectChange)));var a=B.getServerByUrl(this._getPortalUrl());B.isArcGIScom(a)&&(a="ArcGIS.com");A.userHaveSignInPortal(this._getPortalUrl())&&this._onSignIn()},_onOrganizationSearch:function(a){if(a=a&&b.trim(a)){if(this._allOrganizationQuery){var c=
this._allOrganizationQuery.q;c&&(this._filterOrganizationQuery.q=a+" "+c,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(a){if(a=a&&b.trim(a)){if(this._allMyContentQuery){var c=this._allMyContentQuery.q;c&&(this._filterMyContentQuery.q=a+" "+c,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},
_onGroupSearch:function(a){if(a=a&&b.trim(a)){if(this._allGroupQuery){var c=this._allGroupQuery.q;c&&(this._filterGroupQuery.q=a+" "+c,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=!0;var a=this._getPortalUrl();v.getPortal(a).getUser().then(b.hitch(this,function(a){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(a),
this._searchMyContent(a),this._searchGroups(a))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(a){this.organizationItemTable.clear();a=" orgid:"+a.orgId+" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var b=this._getPortalUrl();this._allOrganizationQuery=
this._getQuery({q:a});this._filterOrganizationQuery=this._getQuery({q:a});this.organizationItemTable.set("portalUrl",b);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(a){this.mycontentItemTable.clear();var b=this._getPortalUrl();a="owner:"+a.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allMyContentQuery=this._getQuery({q:a});this._filterMyContentQuery=this._getQuery({q:a});this.mycontentItemTable.set("portalUrl",
b);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(a){this._resetGroupsSection();h.setStyle(this.groupsSection,"display","block");a=a.getGroups();if(0<a.length){h.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();h.empty(this.groupsSelect);for(var b=0;b<a.length;b++){var c=a[b];h.create("option",{value:c.id,innerHTML:c.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(a.length)},_resetGroupsSection:function(){h.setStyle(this.groupsSection,
"display","none");h.empty(this.groupsSelect);h.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();h.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(a){0===a?h.setStyle(this.groupsSection,"top","15px"):h.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var a=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===a)h.setStyle(this.groupSearch,
"display","none"),this.groupItemTable.hide();else{h.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var b=this._getPortalUrl(),a="group:"+a+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:a});this._filterGroupQuery=this._getQuery({q:a});this.groupItemTable.set("portalUrl",b);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(a){var b=
h.hasClass(a,"jimu-state-active");r(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");b&&h.addClass(a,"jimu-state-active");(a=this.getSelectedItem())?this.emit("item-selected",a):this.emit("none-item-selected")},getSelectedItem:function(){var a=null,c=r(".item.jimu-state-active",this.domNode);0<c.length&&(a=b.mixin({},c[0].item));return a}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m){return f([k,l,p,c],{templateString:g,declaredClass:"jimu.dijit.ItemTable",baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&
0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=t.getStandardPortalUrl(this.portalUrl));this.showAllItemsSection();this.searchAllItems()},show:function(){a.setStyle(this.domNode,"display","block")},hide:function(){a.setStyle(this.domNode,"display","none")},searchAllItems:function(a){this.showAllItemsSection();a&&(this.query=d.mixin({},a),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&
(this.allItemsShelter.show(),r.getPortal(this.portalUrl).queryItems(this.query).then(d.hitch(this,function(a){this.domNode&&(this.allItemsShelter.hide(),this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),d.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(a){this.showFilterItemsSection();a&&(this.filteredQuery=d.clone(a),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&
0<this.filteredQuery.start&&(this.filteredItemShelter.show(),r.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(d.hitch(this,function(b){this.domNode&&(this.showFilterItemsSection(),a&&this.clearFilteredItemsSection(),this.filteredQuery.start=b.nextStart,this._createItems(b,this.filteredItemsTbody),this._filterItemCallback())}),d.hitch(this,function(a){console.error(a);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?
(a.setStyle(this.filteredItemsTableDiv,"display","block"),a.setStyle(this.searchNoneTipSection,"display","none")):(a.setStyle(this.filteredItemsTableDiv,"display","none"),a.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){a.empty(this.allItemTbody)},clearFilteredItemsSection:function(){a.empty(this.filteredItemsTbody)},showAllItemsSection:function(){a.setStyle(this.allItemsSection,
"display","block");a.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){a.setStyle(this.allItemsSection,"display","none");a.setStyle(this.filteredItemsSection,"display","block");a.setStyle(this.filteredItemsTableDiv,"display","block");a.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&
this.searchFilteredItems()},_isScrollToBottom:function(a){return n.isScrollToBottom(a)},_createItems:function(c,e){c=c.results;var f=b.map(this.types,d.hitch(this,function(a){return a.toLowerCase()}));c=b.filter(c,d.hitch(this,function(a){a=a.type&&a.type.toLowerCase()||"";return 0<=b.indexOf(f,a)}));if(0!==c.length){var g,m=h("td.empty",e),k;if(0<m.length){var n=Math.min(c.length,m.length),l=c.splice(0,n);for(k=0;k<n;k++){var q=m[k];g=this._createItem(l[k]);a.place(g,q);a.removeClass(q,"empty")}}if(0!==
c.length){m=Math.ceil(c.length/2);for(k=0;k<m;k++)for(g=a.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),a.place(g,e),n=h("td",g),l=0;l<n.length;l++)q=n[l],(g=c[2*k+l])?(g=this._createItem(g),a.place(g,q)):a.addClass(q,"empty");this.emit("update")}}},_getItemCount:function(a){return h(".item",a).length},_createItem:function(b){var c=a.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
c.item=b;var d=h(".item-thumbnail",c)[0],e=h(".item-name",c)[0],f=h(".item-type-owner",c)[0],g=h(".item-date",c)[0],m=h(".item-details",c)[0],k=h(".none-thumbnail-tip",c)[0];if(!b.thumbnailUrl){var n=this._defaultThumbnail[b.type];n&&(b.thumbnailUrl=require.toUrl("jimu")+"/images/"+n)}b.thumbnailUrl?a.setStyle(d,"backgroundImage","url("+b.thumbnailUrl+")"):k.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(g=h(".item-info",c)[0],this.onCreateItemContent(b,g)):(e.innerHTML=
b.title,e.title=e.innerHTML,f.innerHTML=b.type+" by "+b.owner,f.title=f.innerHTML,d=new Date,d.setTime(b.modified),g.innerHTML=d.toLocaleString(),g.title=g.innerHTML,m.innerHTML=this.nls.moreDetails,m.href=b.detailsPageUrl||"#");return c},_onItemsTableClicked:function(b){var c=b.target||b.srcElement;b=null;a.hasClass(c,"item-thumbnail")?b=c.parentNode:a.hasClass(c,"none-thumbnail-tip")&&(b=c.parentNode.parentNode);b&&(c=a.hasClass(b,"jimu-state-active"),h(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
c?a.removeClass(b,"jimu-state-active"):a.addClass(b,"jimu-state-active"),this.emit("item-dom-clicked",b))},getSelectedItem:function(){var a=null,b=h(".item.jimu-state-active",this.domNode);0<b.length&&(a=d.mixin({},b[0].item));return a}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(f,k,l,p,g){return f([k],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",
url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=g.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var c=this.inherited(arguments);return c=p.map(c,l.hitch(this,function(c){return{name:c.name,url:c.url,definition:c.definition}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingShelter".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t){return f([k,l,p,g],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(b){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new a;b&&"string"===typeof b&&b.replace(/\/*$/g,"")||this._def.reject();b=b.replace(/\/*$/g,"");b=c.trim(b);var d=b.match(/^http(s?):\/\//gi);d&&0<d.length||
(b="http://"+b);if(!(0>=b.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=b))return b=this._getRootItem(),b=r.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,b):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,b):this._searchFolderServiceUrl(this._currentUrl,b),this.shelter.show(),b.then(c.hitch(this,function(a){this.domNode&&this.shelter.hide();var b=this.tree.getAllLeafTreeNodeWidgets();1===b.length&&
b[0].select();this._def.resolve(a)}),c.hitch(this,function(a){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(a)})),this._def;this._def.reject()},_getItem:function(a){return this.rule.getItem(a)},_getSubItemUrls:function(a){return this.rule.getSubItemUrls(a)},_getSubItems:function(d){var f=new a;this._getSubItemUrls(d).then(c.hitch(this,function(a){a=b.map(a,c.hitch(this,function(a){return this._getItem(a)}));e(a).then(c.hitch(this,function(a){a=b.filter(a,c.hitch(this,
function(a){return a&&"object"===typeof a}));f.resolve(a)}),c.hitch(this,function(a){f.reject(a)}))}),c.hitch(this,function(a){f.reject(a)}));return f},_selectFirstLeafTreeNodeWidget:function(){var a=this.tree.getAllLeafTreeNodeWidgets();1===a.length&&a[0].select()},isLeafItem:function(a){return 0<=this.rule.leafTypes.indexOf(a.type)},isServiceTypeSupported:function(a){return this.rule.isServiceTypeSupported(a)},_getStringEndWith:function(a,b){var c="",d=a.indexOf(b);0<=d&&(c=a.slice(0,d+b.length));
return c},_isUrlContainsServiceType:function(a){return this.rule.isUrlContainsServiceType(a)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(a){var b="";a=a.split("/");return b=a[a.length-1]},_searchBaseServiceUrl:function(d,f){var h=new a;this._getRestInfo(d).then(c.hitch(this,function(g){if(this.domNode){var m=[];b.map(g.folders,c.hitch(this,function(e){var h={name:e,type:"folder",url:d+"/"+e,parent:f.id};this._addItem(h);
var g=new a;this._doSearchFolderServiceUrl(h.url,h.id).then(c.hitch(this,function(a){0<a.length?b.forEach(a,c.hitch(this,function(a){a.parent=h.id;this._addItem(a)})):this._removeItem(h.id);g.resolve()}),c.hitch(this,function(a){g.reject(a)}));m.push(g);return g}));b.forEach(g.services,c.hitch(this,function(b){if(this.isServiceTypeSupported(b.type)){b=d+"/"+b.name+"/"+b.type;var e=new a;this.rule.getItem(b).then(c.hitch(this,function(a){a&&(a.parent=f.id,this._addItem(a));e.resolve()}),c.hitch(this,
function(a){console.error(a);e.reject(a)}));m.push(e)}}));e(m).then(c.hitch(this,function(){this.domNode&&h.resolve()}),c.hitch(this,function(a){console.error(a);this.domNode&&h.reject(a)}))}}),c.hitch(this,function(a){console.error(a);this.domNode&&h.reject({errorCode:"NETWORK_ERROR",error:a})}));return h},_searchFolderServiceUrl:function(d,e){var f=new a;this._doSearchFolderServiceUrl(d,e).then(c.hitch(this,function(a){this.domNode&&(b.forEach(a,c.hitch(this,function(a){a.parent=e.id;this._addItem(a)})),
f.resolve())}),c.hitch(this,function(a){console.error(a);this.domNode&&f.reject({errorCode:"NETWORK_ERROR",error:a})}));return f},_doSearchFolderServiceUrl:function(d){var f=new a,h=this._getBaseServiceUrl();this._getRestInfo(d).then(c.hitch(this,function(a){a=a.services;var d=[];a&&0<a.length&&b.forEach(a,c.hitch(this,function(a){this.isServiceTypeSupported(a.type)&&(a=this.rule.getItem(h+"/"+a.name+"/"+a.type),d.push(a))}));e(d).then(c.hitch(this,function(a){a=b.filter(a,c.hitch(this,function(a){return a}));
f.resolve(a)}),c.hitch(this,function(a){console.error(a);f.reject(a)}))}),c.hitch(this,function(a){console.error(a);f.reject(a)}));return f},_searchServiceUrl:function(d,e){var f=new a;this._getSubItems(d).then(c.hitch(this,function(a){a&&0<a.length?(b.forEach(a,c.hitch(this,function(a){a.parent=e.id;this._addItem(a)})),f.resolve()):this._getItem(d).then(c.hitch(this,function(a){a&&(a.parent=e.id,this._addItem(a));f.resolve()}),c.hitch(this,function(a){f.reject(a)}))}),c.hitch(this,function(a){f.reject(a)}));
return f},_getRestInfo:function(b){var d=new a;this.rule.getRestInfo(b).then(c.hitch(this,function(a){this.domNode&&d.resolve(a)}),c.hitch(this,function(a){this.domNode&&d.reject(a)}));return d},_clear:function(){var a=this._store.query({parent:"root"});b.forEach(a,c.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(a){this._id++;a.id=this._id.toString();this._store.add(a);return a},_removeItem:function(a){this._store.remove(a)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var a=this._getRootItem(),a=new h({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new q(a);a=new n({store:this._store,query:{id:"root"},mayHaveChildren:c.hitch(this,this._mayHaveChildren)});this.tree=new t({multiple:this.multiple,model:a,showRoot:!1,style:{width:"100%"},isLeafItem:c.hitch(this,this.isLeafItem),onOpen:c.hitch(this,function(a,b){this._onTreeOpen(a,b);
this.emit("tree-open",a,b)}),onClick:c.hitch(this,function(a,b,c){this._onTreeClick(a,b,c);this.emit("tree-click",a,b,c)}),getIconStyle:c.hitch(this,function(a,b){var c=null;if(!a)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},e=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),f=this._getIconImageName(a,b);f||("folder"===a.type?f=b?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(a.type)&&
(f=b?"folder_open_default.png":"folder_close_default.png"));f&&(d.backgroundImage="url("+e+"/css/images/"+f+")",c=d);return c})});d.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(a,b){var c="";"function"===typeof this.rule.getIconImageName&&(c=this.rule.getIconImageName(a,b));return c},_mayHaveChildren:function(a){return"root"===a.type?!0:!this.isLeafItem(a)},_onTreeOpen:function(a,d){"root"===a.id||0<this._store.query({parent:a.id}).length||
a.checking||a.checked||(a.checking=!0,this._getSubItems(a.url).then(c.hitch(this,function(d){b.forEach(d,c.hitch(this,function(b){b.parent=a.id;this._addItem(b)}));a.checking=!1;a.checked=!0}),c.hitch(this,function(b){console.error(b);a.checking=!1;a.checked=!0})))},_onTreeClick:function(a,b,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(f,k,l,p,g){var c={combineRules:function(c){var b=new g;k.forEach(c,function(a){k.forEach(a.leafTypes,function(a){0>b.leafTypes.indexOf(a)&&b.leafTypes.push(a)});k.forEach(a.serviceTypes,function(a){0>b.serviceTypes.indexOf(a)&&b.serviceTypes.push(a)})});b.getMatchedRule=function(a){var b=null;k.some(c,function(c){return c.isUrlContainsServiceType(a)?(b=c,!0):!1});return b};b.getItem=function(a){var c=null;return c=(c=b.getMatchedRule(a))?c.getItem(a):
b.defaultGetItem(a)};b.getSubItemUrls=function(a){var c=null;return c=(c=b.getMatchedRule(a))?c.getSubItemUrls(a):b.defaultGetSubItemUrls(a)};b.getIconImageName=function(a,c){var d="";if(a.url){var e=b.getMatchedRule(a.url);e&&"function"===typeof e.getIconImageName&&(d=e.getIconImageName(a,c))}return d};return b},getFeaturelayerServiceBrowserRule:function(d,b,a){d=f.clone(d);var e=["point","polyline","polygon"];f.isArrayLike(d)&&0<d.length?(d=k.filter(d,function(a){return 0<=e.indexOf(a)}),0===d.length&&
(d=e)):d=e;return c._getFeaturelayerServiceBrowserRule(d,b,a)},_getFeaturelayerServiceBrowserRule:function(c,b,a){return new g({types:c,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(a){var b=new l;this.isUrlEndWithServiceType(a,this.serviceTypes)?b=this.defaultGetItem(a):this.getRestInfo(a).then(f.hitch(this,function(c){c=this._getItemByLayerDefinition(a,c);b.resolve(c)}),
f.hitch(this,function(a){b.reject(a)}));return b},getSubItemUrls:function(a){var b=new l;return b=this.isUrlEndWithServiceType(a)?this._getSubUrlsByServiceUrl(a):this._getSubUrlsByGroupUrl(a)},getIconImageName:function(a,b){var c="";"MapServer"===a.type||"FeatureServer"===a.type?c=b?"mapserver_open.png":"mapserver_close.png":a.type===this._groupLayerType?c=b?"group_layer2.png":"group_layer1.png":a.type===this._featureLayerType?(a=p.getTypeByGeometryType(a.definition&&a.definition.geometryType),"point"===
a?c="point_layer1.png":"polyline"===a?c="line_layer1.png":"polygon"===a&&(c="polygon_layer1.png")):a.type===this._tableType?c="table.png":"root"===a.type&&this._currentUrl&&k.some(this.serviceTypes,f.hitch(this,function(a){return p.isStringEndWith(this._currentUrl,"/"+a)}))&&(c=b?"mapserver_open.png":"mapserver_close.png");return c},_getSubUrlsByServiceUrl:function(b){var c=new l;this.getRestInfo(b).then(f.hitch(this,function(d){var e=[];k.forEach(d.layers,f.hitch(this,function(a){0<=a.parentLayerId||
e.push(b+"/"+a.id)}));a&&k.forEach(d.tables,f.hitch(this,function(a){0<=a.parentLayerId||e.push(b+"/"+a.id)}));c.resolve(e)}),f.hitch(this,function(a){c.reject(a)}));return c},_getSubUrlsByGroupUrl:function(a){var b=new l;this.getRestInfo(a).then(f.hitch(this,function(c){var d=[];if(c.type===this._groupLayerType)var e=this._getServiceUrlByLayerUrl(a),d=k.map(c.subLayers||[],f.hitch(this,function(a){return e+"/"+a.id}));b.resolve(d)}),f.hitch(this,function(a){b.reject(a)}));return b},_getItemByLayerDefinition:function(a,
c){var d=null,e=c.type;if(e===this._groupLayerType)d={name:c.name,type:e,url:a,definition:c};else if(e===this._featureLayerType||e===this._tableType){var f=!1;e===this._featureLayerType?f=this._validateEsriGeometryType(c.geometryType):e===this._tableType&&(f=!0);f&&(f=!1,(f=b?p.isFeaturelayerUrlSupportQuery(a,c.capabilities):!0)&&(d={name:c.name,type:e,url:a,definition:c}))}return d},_validateEsriGeometryType:function(a){a=p.getTypeByGeometryType(a);return 0<=this.types.indexOf(a)},_getServiceUrlByLayerUrl:function(a){for(var b=
"",c=0;c<this.serviceTypes.length;c++){var d=this.serviceTypes[c].toLowerCase(),e=a.toLowerCase().lastIndexOf("/"+d+"/");if(0<=e){b=a.slice(0,e+d.length+1);break}}return b}})},getGeocodeServiceBrowserRule:function(){return new g({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new g({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(c){var b=new l;this.isUrlEndWithServiceType(c)?b=this.defaultGetItem(c):this.getRestInfo(c).then(f.hitch(this,
function(a){b.resolve({name:a.displayName||a.name,type:"GPTask",url:c,definition:a})}),f.hitch(this,function(a){b.reject(a)}));return b},getSubItemUrls:function(c){var b=new l;this.isUrlEndWithServiceType(c)?this.getRestInfo(c).then(f.hitch(this,function(a){a=k.map(a.tasks||[],f.hitch(this,function(a){return c+"/"+a}));b.resolve(a)}),f.hitch(this,function(a){b.reject(a)})):b.resolve([]);return b},getIconImageName:function(c,b){b="";"GPServer"===c.type?b="toolbox.png":"GPTask"===c.type&&(b="tool.png");
return b}})},getImageServiceBrowserRule:function(c){return new g({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(b){var a=new l;this.isUrlEndWithServiceType(b)?this.defaultGetItem(b).then(f.hitch(this,function(b){c?p.isImageServiceSupportQuery(b.definition.capabilities)?a.resolve(b):a.resolve(null):a.resolve(b)}),f.hitch(this,function(b){a.reject(b)})):a.resolve(null);return a},getIconImageName:function(b,a){a="";"ImageServer"===b.type&&(a="image_layer.png");return a}})},
getQueryableServiceBrowserRule:function(){var d=c.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),b=c.getImageServiceBrowserRule(!0);return c.combineRules([d,b])}};return c})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(f,k,l,p,g,c,d){return f([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(b){k.mixin(this,b);k.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);k.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(b){return this.defaultGetItem(b)},getSubItemUrls:function(b){return this.defaultGetSubItemUrls(b)},getIconImageName:function(b,a){return""},defaultGetItem:function(b){var a=new p;b=b.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(b)){var c=b.split("/"),d=c[c.length-1],f=c[c.length-2];this.getRestInfo(b).then(k.hitch(this,function(c){a.resolve({name:f,type:d,url:b,definition:c})}),k.hitch(this,function(b){console.error(b);
a.reject({errorCode:"NETWORK_ERROR",error:b})}))}else a.resolve(null);return a},defaultGetSubItemUrls:function(b){b=new p;b.resolve([]);return b},getRestInfo:function(b){var a=new p;b=b.replace(/\/*$/g,"");var e=this._restInfoCache[b];if(e)a.resolve(e);else{var e={url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4},f=d.findCredential(b);f&&f.token&&(e.content.token=f.token);c(e).then(k.hitch(this,function(c){this._restInfoCache[b]=c;a.resolve(c)}),function(b){a.reject(b)})}return a},
isServiceTypeSupported:function(b){b=b.toLowerCase();return l.some(this.serviceTypes,k.hitch(this,function(a){return a.toLowerCase()===b}))},isUrlEndWithServiceType:function(b){return l.some(this.serviceTypes,k.hitch(this,function(a){return g.isStringEndWith(b,"/"+a)}))},isUrlContainsServiceType:function(b){b=b.toLowerCase();return l.some(this.serviceTypes,k.hitch(this,function(a){a=a.toLowerCase();return 0<=b.indexOf("/"+a)}))}})})},"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(f,k,l){return f([k],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(f){return new l(f)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t){return f([k,l,p,c],{templateString:g,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=e.mixin({},window.jimuNls.common);this.nls=e.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
b.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(a){var b=new d;(this.url=a)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),b=this._onBtnValidateClick()):b.reject();return b},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?a.forEach(this._examples,e.hitch(this,function(a){b.create("div",{innerHTML:a,
"class":"example-url"},this.exampleTd)})):b.setStyle(this.exampleTr,"display","none");var c={multiple:this.multiple,_onTreeClick:e.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(c);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(q.after(this.urlInput,"validator",e.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(h(this.serviceBrowser,"error",e.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(a){},_validateUrl:function(a){a=a.replace(/\/*$/g,"");if((a=a.match(/\/rest\/services\/*(.*)/gi))&&0<a.length)if(a=a[0].replace(/\/rest\/services\/*/,"")){var b=a.split("/");if(1===b.length)return!0;if(2===b.length)return this.serviceBrowser.isServiceTypeSupported(b[1]);if(3<=b.length)return a=this.serviceBrowser.isServiceTypeSupported(b[1]),b=this.serviceBrowser.isServiceTypeSupported(b[2]),a||b}else return!0;else return!1},_afterUrlValidate:function(a){a&&
(a=this.urlInput.get("value"),a=this._validateUrl(a));a?b.removeClass(this.btnValidate,"jimu-state-disabled"):b.addClass(this.btnValidate,"jimu-state-disabled");return a},_onServiceBrowserError:function(a){this._showErrorMessage(a)},_showErrorMessage:function(a){a&&"string"===typeof a?(this.errorNode.innerHTML=a,b.addClass(this.errorSection,"visible")):b.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";b.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var a=new d;if(this.urlInput.validate()){var b=this.urlInput.get("value");this.serviceBrowser.setUrl(b).then(e.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.resolve()}),e.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.reject()}));this.emit("validate-click")}else a.reject();return a},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?b.removeClass(this.btnOk,"jimu-state-disabled"):
b.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(f,k,l,p,g){var c=k.NodeList,d={},b=0,a=function(a){var c=g.get(a,"data-dojo-dataid");c||(c="pid"+b++,g.set(a,"data-dojo-dataid",c));return c},
e=f._nodeData=function(b,c,e){var f=a(b),h;d[f]||(d[f]={});if(1==arguments.length)return d[f];"string"==typeof c?2<arguments.length?d[f][c]=e:h=d[f][c]:h=l.mixin(d[f],c);return h},h=f._removeNodeData=function(b,c){b=a(b);d[b]&&(c?delete d[b][c]:delete d[b])};c._gcNodeData=f._gcNodeData=function(){var b=k("[data-dojo-dataid]").map(a),c;for(c in d)0>p.indexOf(b,c)&&delete d[c]};l.extend(c,{data:c._adaptWithCondition(e,function(a){return 0===a.length||1==a.length&&"string"==typeof a[0]}),removeData:c._adaptAsForEach(h)});
return c})},"widgets/RelatedTableCharts/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(f,k,l,p,g,c,d,b,a,e,h,q,n,r,t,m,v,A,B,J){return f([d,b,a,g],{baseClass:"jimu-widget-RelatedTableCharts-locator-source-setting",tr:null,nls:null,config:null,singleLineFieldName:null,templateString:B,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,serviceChooserContent:null,geocoderPopup:null,_clickSet:!1,postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+
": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";this.own(p(this.setButtonNode,"click",k.hitch(this,this._onSetLocatorUrlClick)));this.own(p(this.locatorName,"Blur",k.hitch(this,this._onLocatorNameBlur)));this.own(p(this.placeholder,"Blur",k.hitch(this,this._onPlaceholderBlur)));this.own(p(this.countryCode,"Blur",k.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new J({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);
this.enableLocalSearch=new J({checked:!1,label:this.nls.enableLocalSearch},this.enableLocalSearch);this._processlocalSearchTable(!1);this.own(p(this.enableLocalSearch,"change",k.hitch(this,function(){this._processlocalSearchTable(this.enableLocalSearch.getValue())})));l.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(a){this.tr=a},getRelatedTr:function(){return this.tr},
setDefinition:function(a){this._locatorDefinition=a||{}},getDefinition:function(){return this._locatorDefinition},setConfig:function(a){if("[object Object]"===Object.prototype.toString.call(a)){var b=a.url;b&&(this.config=a,this.shelter.show(),this._locatorDefinition.url!==b?this._getDefinitionFromRemote(b).then(k.hitch(this,function(a){b&&a&&"error"!==a.type?(this._locatorDefinition=a,this._locatorDefinition.url=b,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):b&&a&&"error"===
a.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(m.substitute({URL:a.url},k.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var a=this.getConfig();return a.url&&a.name&&a.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},getConfig:function(){return{url:this.locatorUrl.get("value"),
name:A.stripHTML(this.locatorName.get("value")),singleLineFieldName:this.singleLineFieldName,placeholder:A.stripHTML(this.placeholder.get("value")),countryCode:A.stripHTML(this.countryCode.get("value")),zoomScale:this.zoomScale.get("value")||5E4,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),localSearchMinScale:this.localSearchMinScale.get("value"),
localSearchDistance:this.localSearchDistance.get("value"),type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",A.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",A.stripHTML(this.placeholder.get("value")))},_onCountryCodeBlur:function(){this.countryCode.set("value",A.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",
!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){var a=this.config;a.url&&(this.locatorUrl.set("value",a.url),this._processCountryCodeRow(a.url));a.name&&this.locatorName.set("value",
A.stripHTML(a.name));a.singleLineFieldName&&(this.singleLineFieldName=a.singleLineFieldName);a.placeholder&&this.placeholder.set("value",A.stripHTML(a.placeholder));a.countryCode&&this.countryCode.set("value",A.stripHTML(a.countryCode));"capabilities"in this._locatorDefinition?(l.setStyle(this.enableLocalSearch.domNode,"display",""),this._processlocalSearchTable(a.enableLocalSearch),this.enableLocalSearch.setValue(a.enableLocalSearch),a.localSearchMinScale&&a.enableLocalSearch&&this.localSearchMinScale.set("value",
a.localSearchMinScale),a.localSearchDistance&&a.enableLocalSearch&&this.localSearchDistance.set("value",a.localSearchDistance)):(this.enableLocalSearch.setValue(!1),l.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips();this.searchInCurrentMapExtent.setValue(!!a.searchInCurrentMapExtent);this.zoomScale.set("value",
a.zoomScale||5E4);this.maxSuggestions.set("value",a.maxSuggestions||6);this.maxResults.set("value",a.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(a){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(a)},_getDefinitionFromRemote:function(a){var b=new c;if(this._isEsriLocator(a))b.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",alias:"Single Line Input",required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});
else{var d=t({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(d);d.then(k.hitch(this,function(a){b.resolve(a)}),k.hitch(this,function(c){console.error(c);b.resolve({type:"error",url:this._getRequestUrl(a)})}))}return b.promise},_setMessageNodeContent:function(a,b){l.empty(this.messageNode);a.nodeType||(a=l.toDom(a));l.place(a,this.messageNode);b?l.addClass(this.messageNode,"esriCTErrorMessage"):l.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(a){var b=
window.location.protocol;return"http:"===b?e.setHttpProtocol(a):"https:"===b?e.setHttpsProtocol(a):a},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new q({url:this.locatorUrl.get("value")||""});this.shelter=new r({hidden:!0});this.geocoderPopup=new n({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,
container:window.jimuConfig.layoutId,width:640});this.shelter.placeAt(this.geocoderPopup.domNode);l.setStyle(this.serviceChooserContent.domNode,"width","580px");l.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(p(this.serviceChooserContent,"validate-click",k.hitch(this,function(){l.removeClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(p(this.serviceChooserContent,
"ok",k.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(p(this.serviceChooserContent,"cancel",k.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(a){a&&a[0]&&a[0].url&&this.domNode&&(this.shelter.show(),t({url:a[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(k.hitch(this,function(b){this.shelter.hide();b&&b.singleLineAddressField&&b.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",a[0].url),
this.locatorName.get("value")||this.locatorName.set("value",v.getGeocoderName(a[0].url)),"capabilities"in b?(l.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(a[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),l.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=b.singleLineAddressField.name,this._processCountryCodeRow(a[0].url),this._locatorDefinition=b,this._locatorDefinition.url=
a[0].url,(this._suggestible=b.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):new h({message:this.nls.locatorWarning})}),k.hitch(this,function(b){console.error(b);this.shelter.hide();
new h({message:m.substitute({URL:this._getRequestUrl(a[0].url)},k.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processlocalSearchTable:function(a){a?(l.removeClass(this.minScaleNode,"esriCTHidden"),l.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):(l.addClass(this.minScaleNode,"esriCTHidden"),l.addClass(this.radiusNode,"esriCTHidden"),
this.emit("disable-local-search"))},_processCountryCodeRow:function(a){this._isEsriLocator(a)?(this.countryCode.set("value",""),l.removeClass(this.countryCodeRow,"hide-country-code-row")):l.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){l.removeClass(this.tipsNode,"esriCTHidden");l.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){l.addClass(this.tipsNode,"esriCTHidden");l.setStyle(this.maxSuggestions.domNode,"display",
"block")},_showValidationErrorTip:function(a){if(!a.validate()&&a.domNode&&a.focusNode){var b=a.get("disabled");b&&a.set("disabled",!1);a.focusNode.focus();setTimeout(k.hitch(this,function(){a.focusNode.blur();b&&a.set("disabled",!0);a=null}),100)}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(f,k,l){return f([k],{baseClass:"jimu-geocode-service-chooser-content",_examples:["http://myserver/arcgis/rest/services",
"http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(f){return new l(f)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(f,k,l,p,g){return f([k],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);
this.rule=g.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var c=this.inherited(arguments);return c=p.map(c,l.hitch(this,function(c){return{name:c.name,url:c.url}}))}})})},"widgets/RelatedTableCharts/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(f,k,l,p,g,c,d,b){return{map:null,layerInfosObj:null,appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,
setMap:function(a){this.map=a},setLayerInfosObj:function(a){this.layerInfosObj=a},setAppConfig:function(a){this.appConfig=a},getConfigInfo:function(a){if(a&&a.sources&&0<a.sources.length){var b=null;return this.searchLayer(this.map)&&a.upgradeFromGeocoder?(b=this.map.itemInfo.itemData.applicationProperties.viewing.search,b=k.map(b.layers,f.hitch(this,function(a,b){b.hintText=a;return this._getQueryTypeGeocoder(b)},b.hintText)),g(b).then(f.hitch(this,function(b){a.sources=[].concat(b).concat(a.sources);
return a}))):a}return p(this._getSoucesFromPortalAndWebmap()).then(f.hitch(this,function(a){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:a}}))},_getSoucesFromPortalAndWebmap:function(){var a=[],b=null;this.searchLayer(this.map)&&(b=this.map.itemInfo.itemData.applicationProperties.viewing.search,k.forEach(b.layers,f.hitch(this,function(b,c){c.hintText=b;a.push(this._getQueryTypeGeocoder(c))},b.hintText)));return c.getPortalSelfInfo(this.appConfig.portalUrl).then(f.hitch(this,function(b){if((b=
b.helperServices&&b.helperServices.geocode)&&0<b.length)for(var c=0,d=b.length;c<d;c++){var e=b[c];e&&a.push(this._processSingleLine(e))}return g(a).then(f.hitch(this,function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d&&(d&&"query"===d.type||(d={name:d.name||this._getGeocodeName(d.url),url:d.url,singleLineFieldName:d.singleLineFieldName,placeholder:d.placeholder||d.name||this._getGeocodeName(d.url),maxResults:6,searchInCurrentMapExtent:!1,type:"locator"},d.enableLocalSearch=this._isEsriLocator(d.url),
d.localSearchMinScale=3E5,d.localSearchDistance=5E4),b.push(d))}return b}))}))},_getQueryTypeGeocoder:function(a){var b=this.map.getLayer(a.id),c=null,f=null,g=null,g=d.isDefined(a.subLayer)?a.id+"_"+a.subLayer:a.id,c=this.layerInfosObj.traversal(function(a){return a.id===g?(f=a,!0):!1});return b&&c&&f?(c=d.isDefined(a.subLayer)?f.url||b.url+"/"+a.subLayer:f.url||b.url,{name:f.title,layerId:g,url:c,placeholder:a.hintText,searchFields:[a.field.name],displayField:a.field.name,exactMatch:a.field.exactMatch||
!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(a){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(a)},_processSingleLine:function(a){if(a.singleLineFieldName)return a;if(this._isEsriLocator(a.url))return a.singleLineFieldName="SingleLine",a;var c=new l;b({url:a.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(f.hitch(this,function(b){b.singleLineAddressField&&b.singleLineAddressField.name?(a.singleLineFieldName=
b.singleLineAddressField.name,c.resolve(a)):(console.warn(a.url+"has no singleLineFieldName"),c.resolve(null))}),f.hitch(this,function(a){console.error(a);c.resolve(null)}));return c.promise},_getGeocodeName:function(a){if("string"!==typeof a)return"geocoder";a=a.split("/");return a[a.length-2]||"geocoder"},getGeocoderName:function(a){return this._getGeocodeName(a)},hasAppSearchInfo:function(a){return a.itemInfo&&a.itemInfo.itemData&&a.itemInfo.itemData.applicationProperties&&a.itemInfo.itemData.applicationProperties.viewing&&
a.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(a){if(!this.hasAppSearchInfo(a))return!1;a=a.itemInfo.itemData.applicationProperties.viewing.search;return a.enabled&&0!==a.layers.length?!0:!1}}})},"widgets/RelatedTableCharts/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/RelatedTableCharts/setting/LayerChooser.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerSelectorDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTLayerChooserContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.layerChooser.selectPolygonLayerLabel}"\x3e\r\n                ${nls.layerChooser.selectPolygonLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"itemSelectDiv"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                    ${nls.layerChooser.selectPolygonLayerHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLayerChooserContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.layerChooser.selectRelatedTableLayerLabel}"\x3e\r\n                ${nls.layerChooser.selectRelatedTableLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                \x3cselect data-dojo-attach-point\x3d"relationshipSelect" style\x3d"width: 232px;" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                    ${nls.layerChooser.selectRelatedTableLayerHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton"\x3e\r\n                ${nls.cancel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n  \x3ctable data-dojo-attach-event\x3d"onclick: _onDropDownClick"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/ChartSetting.html":'\x3cdiv class\x3d"esriCTFullHeight"\x3e\r\n    \x3c!-- Settings tab --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"settingsTabNode" class\x3d"esriCTFullHeight"\x3e\r\n        \x3cdiv class\x3d"esriCTChartSettingsNode"\x3e\r\n            \x3cdiv class\x3d"esriCTmainContainer"\x3e\r\n                \x3c!-- Section Title --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartTitleDiv esriCTChartTitleDivContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.sectionTitle}"\x3e\r\n                            ${nls.sectionTitle}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"sectionTitleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                                required\x3d"true" trim\x3d"true" data-dojo-attach-event\x3d"change:_onSectionTitleChanged"\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.sectionTitleHintText}"\x3e\r\n                                ${nls.sectionTitleHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Title --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartTitleDiv esriCTChartTitleDivContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.chartTitle}"\x3e\r\n                            ${nls.chartTitle}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"chartTitleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.chartTitleHintText}"\x3e\r\n                                ${nls.chartTitleHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"titleFieldSelectorDiv"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Description --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel esriCTChartDescriptionLabel" title\x3d"${nls.chartDescription}"\x3e\r\n                            ${nls.chartDescription}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput editorDescriptionContainer"\x3e\r\n                            \x3ctextarea class\x3d"esriCTChartDescription" data-dojo-attach-point\x3d"chartDescriptionInput" rows\x3d"5"\x3e\x3c/textarea\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.chartDescriptionHintText}"\x3e\r\n                                ${nls.chartDescriptionHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"descriptionFieldSelectorDiv"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Select chart type--\x3e\r\n                \x3cdiv class\x3d"esriCTChartChartTypeDiv esriCTFieldRow"\x3e\r\n                    \x3cdiv class\x3d"esriCTChartSettingLabel" data-dojo-attach-point\x3d"chartTypeLabelNode" title\x3d"${nls.chartType}"\x3e\r\n                        ${nls.chartType}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer" checked\x3d"checked" value\x3d"rdoBarChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                name\x3d"chart" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoBarChart" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoBarChart" data-dojo-attach-point\x3d"barLabel" title\x3d"${nls.barChart}"\x3e\r\n                                ${nls.barChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer" value\x3d"rdoPieChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"chart"\r\n                                data-dojo-attach-point\x3d"rdoPieChart" data-dojo-attach-event\x3d"change:_onChartTypeChanged" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoPieChart" data-dojo-attach-point\x3d"pieLabel" title\x3d"${nls.pieChart}"\x3e\r\n                                ${nls.pieChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer" value\x3d"rdoPolarChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"chart"\r\n                                data-dojo-attach-point\x3d"rdoPolarChart" data-dojo-attach-event\x3d"change:_onChartTypeChanged" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoPolarChart" data-dojo-attach-point\x3d"polarLabel" title\x3d"${nls.polarChart}"\x3e\r\n                                ${nls.polarChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"labelSection"\x3e\r\n                    \x3c!-- Data Series Field--\x3e\r\n                    \x3cdiv class\x3d"esriCTControlWidth esriCTLeftAlign esriCTFieldRow"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.dataSeriesField}"\x3e\r\n                                ${nls.dataSeriesField}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"dataSeriesFieldDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                \x3c/select\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Label Field --\x3e\r\n                    \x3cdiv class\x3d"esriCTControlWidth esriCTLeftAlign esriCTFieldRow esriCTChartChartTypeDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.labelField}"\x3e\r\n                                ${nls.labelField}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"labelSeriesFieldDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                \x3c/select\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Color --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d" ${nls.chartColor}"\x3e\r\n                            ${nls.chartColor}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTSingleColorContainer"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer" checked\x3d"checked" value\x3d"rdoSingleColor" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                        name\x3d"ChartColor" data-dojo-attach-point\x3d"rdoSingleColor" /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoSingleColor" title\x3d"${nls.singleColor}"\x3e\r\n                                        ${nls.singleColor}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTColorPicker" data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTChartColorHeight"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth esriCTColorByThemeContainer"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer" value\x3d"rdoColorByTheme" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"ChartColor"\r\n                                        data-dojo-attach-point\x3d"rdoColorByTheme" data-dojo-attach-event\x3d"change:_onChartColorChanged"\r\n                                    /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoColorByTheme" title\x3d"${nls.colorByTheme}"\x3e\r\n                                        ${nls.colorByTheme}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTThemeSelectorDiv" data-dojo-attach-point\x3d"themeSelectorDiv"\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTHidden" data-dojo-attach-point\x3d"colorByFieldContainer"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer" value\x3d"rdoColorByFieldValue" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"ChartColor"\r\n                                        data-dojo-attach-point\x3d"rdoColorByFieldValue" data-dojo-attach-event\x3d"change:_onChartColorChanged"\r\n                                    /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoColorByFieldValue" title\x3d"${nls.colorByFieldValue}"\x3e\r\n                                        ${nls.colorByFieldValue}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"ColorByFieldValueDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                \x3c/select\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTColorByFieldContainer esriCTHidden" data-dojo-attach-point\x3d"colorByFieldTableContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTypeDiv"\x3e\r\n                            \x3cdiv data-dojo-attach-point\x3d"colorByFieldTablePanel"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"axisSection"\x3e\r\n                    \x3c!-- X-axis label --\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"xAxisArea"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.xAxisTitle}"\x3e\r\n                                ${nls.xAxisTitle}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"xAxisTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.xAxisHintText}"\x3e\r\n                                    ${nls.xAxisHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"xAxisFieldSelectorDiv"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Y-axis label --\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"yAxisArea"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.yAxisTitle}"\x3e\r\n                                ${nls.yAxisTitle}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"yAxisTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.yAxisHintText}"\x3e\r\n                                    ${nls.yAxisHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"yAxisFieldSelectorDiv"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"polarChartSection" class\x3d"esriCTHidden esriCTPolarChartSection"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.polarChartPolygonFillLabel}"\x3e\r\n                                ${nls.polarChartPolygonFillLabel}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTCheckBox" checked\x3d"true" data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"polarChartFillColor"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint esriCTHintInline" title\x3d"${nls.polarChartPolygonFillHintText}"\x3e\r\n                                    ${nls.polarChartPolygonFillHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"polarChartFieldInfos"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.polarChartSelectFieldsHintText}"\x3e\r\n                        ${nls.polarChartSelectFieldsHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTViewLayoutButton jimu-btn jimu-float-trailing jimu-leading-margin1" \r\n    data-dojo-attach-event\x3d"onclick:_updatePreview" data-dojo-attach-point\x3d"viewLayoutButton"\x3e\r\n    ${nls.viewLayoutLabel}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/ChartThemeSelector.html":'\x3cdiv style\x3d"width: 232px; position: relative;"\x3e\r\n    \x3cdiv class\x3d"esriCTselectedItemNode"  data-dojo-attach-event\x3d"onclick: _onDropDownClick"\x3e\r\n        \x3cdiv class\x3d"esriCTThemeItem"\x3e\r\n            \x3cdiv class\x3d"esriCTThemeChart" data-dojo-attach-point\x3d"selectedThemeChart"\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv  class\x3d"esriCTThemeName" data-dojo-attach-point\x3d"selectedThemeName"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropSelect jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\r\n        data-dojo-attach-event\x3d"onclick: _onDropDownClick"\x3e\r\n        \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTThemeChooserList" data-dojo-attach-point\x3d"themeChooseNode" style\x3d"display: block"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"themeList"\x3e\r\n            \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/FieldSelector.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"showFieldsButton" class\x3d"jimu-icon jimu-icon-add esriCTHover"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/RelatedTableCharts/ChartLayout.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTLayoutContent"\x3e\r\n        \x3cdiv class\x3d"esriCTLabels"\x3e\r\n            \x3cdiv class\x3d"esriCTLayoutHeaderTitle" data-dojo-attach-point\x3d"layoutHeaderTitle"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTChartContainer" data-dojo-attach-point\x3d"chartContainer"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLegendContainer" data-dojo-attach-point\x3d"legendContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"legendNode"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTChartDescription" data-dojo-attach-point\x3d"chartDescription"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/GeneralSetting.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTmainContainer"\x3e\r\n        \x3cfieldset class\x3d"esriCTGeneralSettingFieldset"\x3e\r\n            \x3clegend class\x3d"esriCTGeneralSettingLegend" title\x3d"${nls.legendGeneralSettingText}"\x3e\r\n                ${nls.legendGeneralSettingText} \x3c/legend\x3e\r\n            \x3c!-- All components of general setting --\x3e\r\n            \x3cdiv class\x3d"esriCTGeneralSettingComponentsDiv"\x3e\r\n                \x3c!-- This part of html contains Label, Hint and icon for Graphic Location Symbol --\x3e\r\n                \x3cdiv class\x3d"esriCTGraphicLocationSymbolMainDiv"\x3e\r\n                    \x3cdiv class\x3d"esriCTLocationSymbolLabelMainDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTLocationSymbolLabel esriCTGeneralSettingLabel"\x3e\r\n                            ${nls.locationSymbolLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTLocationSymbolHint esriCTHint"\x3e\r\n                            ${nls.locationSymbolHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- End of esriCTLocationSymbolLabelMainDiv --\x3e\r\n                    \x3cdiv class\x3d"esriCTLocationSymbolIconDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTLocationSymbolIcon" data-dojo-attach-point\x3d"locationSymbolIconNode"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- End of esriCTLocationSymbolIconDiv --\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- End of esriCTGraphicLocationSymbolMainDiv --\x3e\r\n\r\n                \x3c!-- This part of html contains Label, Hint and textbox for refresh interval --\x3e\r\n                \x3cdiv class\x3d"esriCTRefreshIntervalMainDiv"\x3e\r\n                    \x3cdiv class\x3d"esriCTRefreshIntervalLabelMainDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTRefreshIntervalLabel esriCTGeneralSettingLabel"\x3e\r\n                            ${nls.refreshIntervalLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTRefreshIntervalHint esriCTHint"\x3e\r\n                            ${nls.refreshIntervalHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- End of esriCTRefreshIntervalLabelMainDiv --\x3e\r\n                    \x3cdiv class\x3d"esriCTRefreshIntervalTxtBxDiv"\x3e\r\n                        \x3cinput type\x3d"text" value\x3d"0"  data-dojo-attach-point\x3d"refreshIntervalTxtBx"\r\n                            data-dojo-type\x3d"dijit/form/NumberTextBox" trim\x3d"true" constraints\x3d"{min:0,max:1440}"\r\n                            data-dojo-attach-event\x3d"change:_onRefreshIntervalChanged" /\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- End of esriCTRefreshIntervalTxtBxDiv --\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- End of esriCTRefreshIntervalMainDiv --\x3e\r\n                \r\n                \x3c!-- Show location tool --\x3e\r\n                \x3cdiv class\x3d"esriCTShowLocationMainDiv"\x3e\r\n                    \x3cdiv class\x3d"esriCTShowLocationLabelMainDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTGeneralSettingLabel"\x3e\r\n                            ${nls.showToolToSelectLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint"\x3e\r\n                            ${nls.showToolToSelectHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTShowLocationChkBxDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTCheckBox" checked\x3d"false" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                                data-dojo-attach-point\x3d"setLocationCheckBoxNode"\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- End of general setting components --\x3e\r\n        \x3c/fieldset\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e\r\n    ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n     \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n         \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n     \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/RelatedTableCharts/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1"\r\n        data-dojo-attach-point\x3d"setSourceBtnClickNode"  title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.nameTitle}"\x3e\r\n        ${nls.nameTitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField "\x3e\r\n       \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n       data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: zoomScale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"zoomScaleTr"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.zoomScale}"\x3e\r\n        ${nls.zoomScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:50000"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" style\x3d"position:absolute;width:100%;top:50px;" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.groups}:\x3c/span\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading portal-public-radio jimu-radio-btn" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading online-public-radio jimu-radio-btn" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" class\x3d"jimu-float-leading online-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/RelatedTableCharts/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"  \x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName"\r\n         placeHolder\x3d"${nls.locatorName}"\r\n        required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder"\r\n         placeHolder\x3d"${nls.placeholder}" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode"\r\n          placeHolder\x3d"${nls.countryCodeEg} USA,CHN" data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.locatorTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: zoom Scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.zoomScale}"\x3e\r\n        ${nls.zoomScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:50000"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance"\r\n        data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/RelatedTableCharts/setting/Setting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tabDiv" class\x3d"esriCTFullHeight"\x3e\r\n        \x3c!-- Chart Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTChartTabNode" data-dojo-attach-point\x3d"chartTabNode" class\x3d"esriCTFullHeight"\x3e\r\n            \x3cdiv style\x3d"height: 98%;"\x3e\r\n                \x3cdiv class\x3d"esriCTListContainer" data-dojo-attach-point\x3d"chartListContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTListHeader" style\x3d"overflow: hidden;"\x3e\r\n                        \x3cdiv class\x3d"jimu-float-leading"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"jimu-float-trailing"\x3e\r\n                            \x3cdiv class\x3d"add-with-icon" data-dojo-attach-event\x3d"onclick:_onAddNewClicked"\x3e\r\n                                \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n                                \x3cspan class\x3d"add-label"\x3e${nls.addNewLabel}\x3c/span\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTListContent"\x3e\r\n                        \x3cdiv class\x3d"esriCTListTable" data-dojo-attach-point\x3d"chartListPanel"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTChartSettingsContainer" data-dojo-attach-point\x3d"chartSettingsContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTFullHeight" data-dojo-attach-point\x3d"chartSettingsContainer"\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"loadingIndicator" data-dojo-type\x3d"jimu/dijit/LoadingShelter" hidden\x3d"true"\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Search Source Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTChartTabNode" data-dojo-attach-point\x3d"searchSourceTabNode" class\x3d"esriCTFullHeight"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- General Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTChartTabNode" data-dojo-attach-point\x3d"generalTabNode" class\x3d"esriCTFullHeight"\x3e\r\n            \x3cdiv class\x3d"esriCTFullHeight esriCTGeneralSettingsContainer" data-dojo-attach-point\x3d"generalSettingsContainer"\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/RelatedTableCharts/setting/css/style.css":".jimu-widget-RelatedTableCharts-layout .esriCTLabels{width: 100%; clear: both;}.jimu-widget-RelatedTableCharts-layout .esriCTLayoutHeaderTitle{font-weight: bold; text-align: center; margin: 10px 10px 0 10px;}.jimu-widget-RelatedTableCharts-layout .esriCTLayoutContent{width: calc(100% - 140px); border: 1px solid #d2dae2; margin: 20px auto;}.jimu-widget-RelatedTableCharts-layout .esriCTChartContainer{margin: 10px 50px; display: inline-block; direction: ltr;}.jimu-widget-RelatedTableCharts-layout .esriCTChartDescription{margin: 0 10px 10px 10px; word-break: break-word;}.jimu-widget-RelatedTableCharts-layout .esriCTLegendContainer{width: 100%; overflow-x: auto; margin-bottom: 10px; display: none;}.jimu-widget-RelatedTableCharts-layout .esriCTLegendContainer .dijitCheckBox{margin: 1px;}.jimu-widget-RelatedTableCharts-layout .dojoxLegendNode td{padding: 6px 4px 6px 6px;}.jimu-widget-RelatedTableCharts-layout .dojoxLegendNode{border-top: 1px solid #DDDDDD; margin: 0; padding: 0; width: 100%;}.jimu-widget-RelatedTableCharts-setting .esriCTHint{margin: 5px 5px 10px 0; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-RelatedTableCharts-setting .esriCTHintInline{line-height: 24px;}.esriCTHidden{display: none;}.esriCTFullHeight{height: 100%;}.jimu-widget-RelatedTableCharts-setting .esriCTListContainer{width: 270px; height: 100%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTHover{cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTListContent{height: calc(100% - 70px); width: 100%; top: 10px; bottom: 5px;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingsContainer{overflow: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTViewLayoutButton {float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTChartSettingsContainer{width: calc( 100% - 300px); float: right;}.jimu-widget-RelatedTableCharts-setting .esriCTLayoutContainer{height: calc(100% - 40px); width: 100%; overflow: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTabNode{margin-top: 20px; height:92%;}.jimu-widget-RelatedTableCharts-setting .jimu-viewstack{height: calc(100% - 40px); overflow: auto;}.jimu-widget-RelatedTableCharts-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell{cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTChartSettingsNode{height: calc(100% - 40px); width: 100%; overflow: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTmainContainer{width: 100%; height: 100%; overflow: hidden;}.jimu-widget-RelatedTableCharts-setting .esriCTChartColorMargin{margin: 0px 0px 10px 0px; clear: both;}.jimu-widget-RelatedTableCharts-setting .esriCTSingleColorContainer{margin-bottom: 3px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartColorWidth{width: 227px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartColorHeight{height: 30px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTitleInput{width: 62%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTColorPicker{display: inline-block; width: 24px; height: 24px; margin-top: 2px; margin-left: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTCursorPointer{cursor: pointer;}.dijitRadio input, .jimu-widget-RelatedTableCharts-setting .esriCTCursorPointer{cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTypeEllipsis{min-width: 80px; width: 80px; display: inline-block; vertical-align: middle; margin-left: 1px; color: #7989a0; font-size: 14px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartColorEllipsis{min-width: 140px; width: 140px; display: inline-block; vertical-align: middle; margin-left: 1px; color: #7989a0; font-size: 14px;} .jimu-widget-RelatedTableCharts-setting .esriCTChartTitleDivContainer{overflow: hidden;}.jimu-widget-RelatedTableCharts-setting .esriCTChartSettingLabel{float: left; padding: 5px 10px 5px 0px; width: 18%; min-width: 18%; font-size: 14px; color: #596679;}.jimu-widget-RelatedTableCharts-setting .esriCTChartDescriptionLabel{width:100%;}.jimu-widget-RelatedTableCharts-setting .esriCTChartDescription{width: 100%; margin-top: 10px; resize: vertical;}.jimu-widget-RelatedTableCharts-setting .esriCTFieldInput{width: 77%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTLeftAlign{float: left; padding-top: 5px;}.jimu-widget-RelatedTableCharts-setting .esriCTControlWidth{width: 100%;}.jimu-widget-RelatedTableCharts-setting .fieldColorPicker{width: 25px; height: 25px; border-radius: 5px;}.jimu-widget-RelatedTableCharts-setting .esriCTColorByFieldContainer{float: left; width: 100%; margin-bottom: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTChartTypeDiv{float: left; width: 70%; margin-left: 25%; max-height: 230px;}.jimu-widget-RelatedTableCharts-setting .esriCTColorByFieldContainer .jimu-simple-table{max-height: 230px;}.jimu-widget-RelatedTableCharts-setting .esriCTPolarChartSection .jimu-simple-table{max-height: 230px; width: 95%;}.jimu-widget-RelatedTableCharts-setting .esriCTMarginRight{float: left; margin-right: 40px;}.jimu-widget-RelatedTableCharts-setting .esriCTCheckBox{float: left; height: 20px; width: 20px; margin-top: 7px; margin-right: 10px;}.jimu-widget-RelatedTableCharts-setting .dijitInline{margin-top: 2px;}.jimu-widget-RelatedTableCharts-setting .editorDescriptionContainer{width: 95%;}.jimu-widget-RelatedTableCharts-setting .editor-container .dijitFontNameCombo{margin-left: 19px;}.jimu-widget-RelatedTableCharts-setting .editor-container{width: 100%; height: 100%; position: relative;}.jimu-widget-RelatedTableCharts-setting .jimu-image-chooser{right: inherit !important;}.jimu-widget-RelatedTableCharts-setting .editor-container .uploaderInsideNode embed{display: none;}.jimu-widget-RelatedTableCharts-setting .esriCTFieldSelectorDiv{margin-left: 10px; margin-top: 6px; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeSelectorDiv{float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeChart{float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeItem{padding: 2px 2px 8px 10px; height: 28px; cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeItem:hover{background-color: #edf2f5;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeName{float: left; line-height: 24px; white-space: nowrap; margin-left: 10px; overflow: hidden; text-overflow: ellipsis; width: 130px; color: #7989a0;}div.chart{width: 24px; height: 24px;}.jimu-widget-RelatedTableCharts-setting .esriCTThemeChooserList{position: absolute; top: 30px; overflow: auto; max-height: 186px; background-color: #FFFFFF; border: 1px solid #aaaaaa; width: 232px; z-index: 1; background-color: #fafafc;}.jimu-widget-RelatedTableCharts-setting .esriCTselectedItemNode{height: 30px; line-height: 36px; width: 100%; border: solid 1px #d2dae2; cursor: pointer; background-color: #fafafc;}.jimu-widget-RelatedTableCharts-setting .esriCTDropSelect{width: 30px; height: 30px; cursor: pointer; margin-top: -30px;}.jimu-widget-RelatedTableCharts-setting .esriCTDropSelect .jimu-icon-down-arrow-8{position: relative; left: 9px; top: 1px;}.jimu-widget-RelatedTableCharts-setting .esriCTFieldRow{float: left; width: 100%; margin-bottom: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTLabelContainer{width: 45%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTlabel{width: 45%; padding: 5px; margin-top: 5px; margin-bottom: 5px; float: left; padding-left: 0px; min-width: 330px; color: #596679;}.jimu-widget-RelatedTableCharts-setting .row{clear: both;}.jimu-widget-RelatedTableCharts-setting .esriCTLayerField{width: 53%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTLayerSelectorDiv{height: 135px; overflow-y: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTLayerChooserContainer{width: 99%; float: left; margin: 0 0 0 5px;}.jimu-widget-RelatedTableCharts-setting .jimu-layer-chooser-from-map-withdropbox .layer-name{text-overflow: ellipsis; overflow: hidden; white-space: nowrap; padding: 0px 18px 0px 9px;}.jimu-widget-RelatedTableCharts-setting .dijitValidationTextBoxLabel{max-width: 232px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingFieldset{width: 99%; top: 10px; height: 100%; border: 1px solid #D2DAE2; border-radius: 5px; font-size: 14px;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingLegend{margin-left: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingComponentsDiv{height: 100%; margin: 4px;}.jimu-widget-RelatedTableCharts-setting .esriCTGraphicLocationSymbolMainDiv, .jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalMainDiv, .jimu-widget-RelatedTableCharts-setting .esriCTShowLocationMainDiv{height: 40%; width: 100%; float: left; margin-bottom: 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolLabelMainDiv, .jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalLabelMainDiv, .jimu-widget-RelatedTableCharts-setting .esriCTShowLocationLabelMainDiv{float: left; width: 40%; margin: 25px 0px 10px 10px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolIconDiv, .jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalTxtBxDiv, .jimu-widget-RelatedTableCharts-setting .esriCTShowLocationChkBxDiv{float: right; width: 40%; margin: 35px 10px 10px 0px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolIcon{float: left;}.jimu-widget-RelatedTableCharts-setting table{border-spacing: 0;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingLabel{color: #596679;}.jimu-widget-RelatedTableCharts-setting .esriCTSymbolChooserNode{text-align: center; cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTSymbolPreviewText{padding-right: 5px; word-break: break-all; width: 59px; height: 100%; color: #7989a0;}.jimu-widget-RelatedTableCharts-setting .esriCTSymbolChooserContainer{height: calc(100% - 50px); overflow: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTURLSetButton {line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 0;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton{margin: 8px 0; display: inline-block; position: relative; padding-left: 16px; color: #518dca; background: url(../images/add_icon.png) no-repeat left; cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton .esriCTDropdownMenu{position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.jimu-rtl .jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton .esriCTDropdownMenu{right: 0; left: auto;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownButton:hover .esriCTDropdownMenu{display: inline-block;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownMenu .esriCTDropdownItem{white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-RelatedTableCharts-setting .esriCTDropdownMenu .esriCTDropdownItem:hover{background: #edf2f5; color: #15a4fa;}.jimu-widget-RelatedTableCharts-setting .esriCTSources{height: 366px;}.jimu-widget-RelatedTableCharts-setting .esriCTSourcesExtraHeight{height: 516px !important;}.jimu-widget-RelatedTableCharts-setting .esriCTSourceList{width: 270px; height: 100%;}.jimu-widget-RelatedTableCharts-setting .esriCTSourceSetting{width: 660px; position: relative;}.jimu-widget-RelatedTableCharts-setting .source-table,.jimu-widget-RelatedTableCharts-setting .general-setting-table{width: 100%;}.jimu-widget-RelatedTableCharts-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell{cursor: pointer;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceLayerField{width: 70%;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceLabel{width: 25%; min-width: 182px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocalSearchLabel{margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-RelatedTableCharts-setting .esriCTLocalSearchRadiusUnit{line-height: 30px; float: right;} .jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-RelatedTableCharts-setting .esriCTLayerSource{width: 80% !important;}.jimu-widget-RelatedTableCharts-setting .esriCTsearchFieldsSelector{display: inline-block; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background: url(../images/selector.png) no-repeat center;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceURLField{width: 76%; float: left;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchSourceLayer{width: 84% !important;}.jimu-widget-RelatedTableCharts-setting .esriCTURLWidthLabel{width: 145px; min-width: 145px; font-size: 14px;}.jimu-widget-RelatedTableCharts-setting .esriCTSearchDetailsSection{width: 175px;}.jimu-widget-RelatedTableCharts-setting .esriCTGeneralSettingLabelStyle{font-weight: bold;}.jimu-widget-RelatedTableCharts-query-source-setting .esriCTSearchSourceFieldCheckbox{width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-RelatedTableCharts-query-source-setting .esriCTSearchSourceFieldCheckbox .label{width: 140px;}.jimu-widget-RelatedTableCharts-setting .esriCTErrorMessage{color: #e84b4b;}.claro .dijitTextBox .dijitInputInner, .claro .dijitTextBox, .claro .dijitSelect, .claro .dijitSelect .dijitInputField, .claro .dijitInputContainer{color: #7989a0; background-color: #fafafc; font-size: 14px; border-color: #d2dae2;}.claro .dijitMenuItem{color: #7989a0;}.jimu-widget-RelatedTableCharts-setting .esriCTChartChartTypeDiv{margin-bottom: 6px !important;}.claro .dijitSelect .dijitArrowButton{background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-RelatedTableCharts-setting .dijitSelect .dijitButtonContents{border-style: none none none none; background-color: #fafafc;}.claro .dijitSelect .dijitInputField{margin-right: 8px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTDropSelect .jimu-icon-down-arrow-8{right: 9px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTThemeChart{float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTThemeItem{padding: 2px 10px 8px 2px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTThemeName{float: right; margin-right: 10px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTColorPicker{float: right; margin-right: 10px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTThemeSelectorDiv{float: right;}.esriRtl .claro .dijitSelect .dijitInputField{margin-left: 8px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTHint{margin: 5px 0px 10px 5px; float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTChartSettingsContainer{float:left;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTListContainer{float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTChartSettingLabel{float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTFieldInput{float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTMarginRight{float: right; margin-right: 0px; margin-left: 40px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLeftAlign{float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTlabel{float: right; padding-right: 0; padding-left: 5px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLayerField{float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLayerChooserContainer{float: none;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolLabelMainDiv, .esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalLabelMainDiv, .esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTShowLocationLabelMainDiv{float: right; margin: 25px 10px 10px 0px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTGraphicLocationSymbolMainDiv, .esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTRefreshIntervalMainDiv, .esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTShowLocationMainDiv{float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTLocationSymbolIcon{float: right;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTCheckBox{float: right; margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTChartTypeDiv{float: right; margin-right: 25%; margin-left: 0px;}.esriRtl .jimu-widget-RelatedTableCharts-setting .esriCTViewLayoutButton {float: right;}",
"*now":function(f){f(['dojo/i18n!*preload*widgets/RelatedTableCharts/setting/nls/Setting*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin jimu/dijit/Popup dojo/_base/lang ./LayerChooser ./ChartSetting ./GeneralSetting dojo/on dojo/dom-construct jimu/dijit/Message jimu/dijit/SimpleTable jimu/dijit/TabContainer3 ./SearchSourceSettings".split(" "),function(f,k,l,p,g,c,d,b,a,e,h,q,n,r){return f([k,l],{baseClass:"jimu-widget-RelatedTableCharts-setting",generalSettings:null,currentChartSettings:null,startup:function(){this._createSearchSourceSettings();this._initGeneralSettingsTab()},
postMixInProperties:function(){this.nls=g.mixin(this.nls,window.jimuNls.common)},postCreate:function(){this._createChartListTable();this.setConfig(this.config);this._initTabs()},_createChartListTable:function(){this.chartList=new q({fields:[{name:"name",title:this.nls.chartSettingLabel,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}],autoHeight:!1,selectable:!0,style:{height:"100%",top:"0",bottom:"10px"}},this.chartListPanel);
this.chartList.startup();a(this.chartList,"row-select",g.hitch(this,this._onChartItemSelected));a(this.chartList,"row-delete",g.hitch(this,this._onChartItemRemoved))},setConfig:function(a){var b,c,d;if(a&&""!==a&&a.charts){for(c=0;c<a.charts.length;c++)d=this.chartList.addRow({name:a.charts[c].chartConfig.sectionTitle}),d.success&&(d=d.tr,d.layerDetails=g.clone(a.charts[c].layerDetails),d.chartConfig=g.clone(a.charts[c].chartConfig),0===c&&(b=d));b&&setTimeout(g.hitch(this,function(){this.chartList.selectRow(b)}),
500)}},getConfig:function(){var a,b,c,d,e;if(this.currentChartSettings)if(b=this.currentChartSettings.getConfig(!0))this.currentChartSettings.tr.chartConfig=g.clone(b);else return!1;if(this.generalSettings&&(a=this.generalSettings.getConfig(!0),!a))return!1;b=this._searchSourceSettings.getConfig();if(!b||0===b.sources.length)return this._errorMessage(this.nls.errorStrings.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle),!1;a={charts:[],generalSettings:a,searchSourceSettings:b};
b=this.chartList.getRows();for(c=0;c<b.length;c++)d=b[c],e={},e.layerDetails=g.clone(d.layerDetails),e.chartConfig=g.clone(d.chartConfig),a.charts.push(e);this.config=g.clone(a);return a},_onAddNewClicked:function(){var a,b,d;if(this.currentChartSettings&&""===this.currentChartSettings.sectionTitleTextBox.get("value"))return this._errorMessage(this.nls.ChartSetting.errMsgSectionTitle),!1;d="*";a=this.chartList.getRows();0<a.length&&a[0].layerDetails&&a[0].layerDetails.polygonLayerInfo&&(d=a[0].layerDetails.polygonLayerInfo.geometryType);
a=new c({nls:this.nls,map:this.map,geometryType:d});b=new p({titleLabel:this.nls.layerChooser.title,width:800,height:250,content:a});a.onOkClick=g.hitch(this,function(a){this._addLayer(a);b.close()});a.onCancleClick=g.hitch(this,function(){b.close()})},_errorMessage:function(a){(new h({message:a})).message=a},_addLayer:function(a){var b;b=this.chartList.addRow({name:a.polygonLayerInfo.title});b.success&&(b=b.tr,b.layerDetails=a,this.chartList.selectRow(b))},_onChartItemRemoved:function(a){this.currentChartSettings&&
this.currentChartSettings.tr===a&&(this.currentChartSettings.destroy(),this.currentChartSettings=null,a=this.chartList.getRows(),a.length&&this.chartList.selectRow(a[0]))},_onChartItemSelected:function(a){if(this.currentChartSettings){if(this.currentChartSettings.tr!==a){var b=this.currentChartSettings.getConfig(!0);b?(this.currentChartSettings.tr.chartConfig=b,this.currentChartSettings.destroy(),this.currentChartSettings=null,this._createChartSettings(a)):this.chartList.selectRow(this.currentChartSettings.tr)}}else this._createChartSettings(a)},
_createChartSettings:function(b){this.currentChartSettings=new d({map:this.map,nls:this.nls.ChartSetting,config:b.chartConfig,layerDetails:b.layerDetails,tr:b,folderUrl:this.folderUrl,appConfig:this.appConfig},e.create("div",{},this.chartSettingsContainer));this.own(a(this.currentChartSettings,"sectionTitleChanged",g.hitch(this,function(a){this.chartList.editRow(b,{name:a})})));this.own(a(this.currentChartSettings,"showLoadingIndicator",g.hitch(this,function(){this.loadingIndicator.show()})));this.own(a(this.currentChartSettings,
"hideLoadingIndicator",g.hitch(this,function(){this.loadingIndicator.hide()})));this.currentChartSettings.startup();this.currentChartSettings.setConfig(b.chartConfig);return this.currentChartSettings},_initTabs:function(){this.tab=new n({tabs:[{title:this.nls.chartSettingLabel,content:this.chartTabNode},{title:this.nls.searchSourceSettingLabel,content:this.searchSourceTabNode},{title:this.nls.generalSettingLabel,content:this.generalTabNode}],"class":"esriCTFullHeight"});this.own(a(this.tab,"tabChanged",
g.hitch(this,function(){this.tab.containerNode.scrollTop=0})));this.tab.placeAt(this.tabDiv)},_initGeneralSettingsTab:function(){this.generalSettings=new b({nls:this.nls.GeneralSetting,config:this.config.generalSettings});this.generalSettings.placeAt(this.generalSettingsContainer)},_createSearchSourceSettings:function(){var b={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(b=this.config.searchSourceSettings);this._searchSourceSettings=new r({nls:this.nls,map:this.map,appConfig:this.appConfig,
shelter:this.loadingIndicator,config:b},e.create("div",{},this.searchSourceTabNode));this.own(a(this._searchSourceSettings,"invalid-source-setting",g.hitch(this,function(){this._errorMessage(this.nls.errorStrings.invalidSearchSources)})))}})});