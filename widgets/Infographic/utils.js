// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://@sbaseurl@/jsapi/jsapi/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["jimu/utils","dojo/_base/lang","dojo/_base/Color"],function(p,f,h){return{checkDataSourceIsVaild:function(a,b,d){var c=!0;a?"DATA_SOURCE_FROM_FRAMEWORK"===a.dataSourceType?d&&d.dataSource&&d.dataSource.dataSources?d.dataSource.dataSources[a.frameWorkDsId]||(c=!1):c=!1:"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===a.dataSourceType&&((a=a.layerId)&&b?b.getLayer(a)||(c=!1):c=!1):c=!1;return c},isBaseAxisChart:function(a){return"column"===a||"bar"===a||"line"===a},isInteger:function(a){return"number"===
typeof a&&0===a%1},isEqual:function(a,b){return typeof a!==typeof b?!1:"object"!==typeof a?a===b:p.isEqual(a,b)},getCleanChartConfig:function(a){var b={mode:a.mode,type:a.type},d=b.type,c=b.mode,e=[];"feature"===c?e=e.concat(["labelField","valueFields","sortOrder","maxLabels"]):"category"===c?e=e.concat("categoryField dateConfig valueFields sortOrder operation maxLabels nullValue".split(" ")):"count"===c?e=e.concat(["categoryField","dateConfig","sortOrder","maxLabels"]):"field"===c&&(e=e.concat(["valueFields",
"operation","sortOrder","maxLabels","nullValue"]));c="backgroundColor seriesStyle showLegend legendTextColor legendTextSize highLightColor".split(" ");c="pie"===d?c.concat(["showDataLabel","dataLabelColor","dataLabelSize","innerRadius"]):c.concat("showHorizontalAxis horizontalAxisTextColor horizontalAxisTextSize showVerticalAxis verticalAxisTextColor verticalAxisTextSize stack area".split(" "));e.forEach(f.hitch(this,function(c){b[c]=a[c]}));c.forEach(f.hitch(this,function(c){b[c]=a[c]}));if(!b.mode||
!("count"===b.mode||b.valueFields&&b.valueFields.length)||"pie"===b.type&&""===b.maxLabels)return null;b.hasOwnProperty("showLegend")||(b.showLegend=!1);"pie"===d?b.hasOwnProperty("showDataLabel")||(b.showDataLabel=!0):(b.hasOwnProperty("showHorizontalAxis")||(b.showHorizontalAxis=!0),b.hasOwnProperty("showVerticalAxis")||(b.showVerticalAxis=!0));return f.clone(b)},_cloneAndFormatDS:function(a){a=f.clone(a);var b={};a.name&&(b.name=a.name);a.dataSourceType&&(b.dataSourceType=a.dataSourceType);a.layerId&&
(b.layerId=a.layerId);a.frameWorkDsId&&(b.frameWorkDsId=a.frameWorkDsId);a=null;return b},isDSEqual:function(a,b){if(a&&b)return a=this._cloneAndFormatDS(a),b=this._cloneAndFormatDS(b),this.isEqual(a,b)},separationGradientColors:function(a,b){var d=[];2===a.length&&(d=this._createGradientColors(a[0],a[a.length-1],b));return d},_createGradientColors:function(a,b,d){var c=[];a=new h(a);var e=new h(b);b=(e.r-a.r)/d;for(var f=(e.g-a.g)/d,e=(e.b-a.b)/d,k=new h,l=0,m=0,n=0,g=0;g<d;g++)l=parseInt(a.r+b*
g,10),m=parseInt(a.g+f*g,10),n=parseInt(a.b+e*g,10),k.setColor([l,m,n]),c.push(k.toHex());return c}}});