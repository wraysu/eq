// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://@sbaseurl@/jsapi/jsapi/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(n,k,g,p,a,d,f){var e={_defaultStandbyParams:{image:f.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(f){if(f=this._normalizeParams(f))return f=new d(e._toStandbyParams(f)),a.place(f.domNode,g.doc.body),e._createHandle(f)},_normalizeParams:function(a){if(a){if(a.target)return a;
if("string"===typeof a){var d=n.byId(a);a=d?d.domNode:p.byId(a)}else a=a.domNode?a.domNode:p.byId(a);if(a)return{target:a}}},_toStandbyParams:function(a){a.imageUrl&&(a.image=a.imageUrl);a.backgroundColor&&(a.color=a.backgroundColor);a.backgroundOpacity&&(a.opacity=a.backgroundOpacity);a.fadeDuration&&(a.duration=a.fadeDuration);return k.mixin({},e._defaultStandbyParams,a)},_createHandle:function(a){return{show:function(){a&&a.show()},hide:function(){a&&a.hide()},destroy:function(){a&&(a.destroy(),
a=null)}}}};return e})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(n,k,g,p,a,d,f,e,q,l,r,b,h,c,m,u,z){n.experimental("dojox.widget.Standby");return k("dojox.widget.Standby",[m,u],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),
imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(c){if(!this._started){if("string"===typeof this.target){var K=z.byId(this.target);this.target=K?K.domNode:d.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,f.set(this._imageNode,"src",this.image),f.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;l.set(this._underlayNode,
{display:"none",backgroundColor:this.color});l.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=b.body()&&b.body().appendChild(this.domNode);7==a("ie")&&(this._ieFixNode=e.create("div"),l.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),b.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(K){console.error(K)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
l.set(this._centerNode,"display","none");l.set(this._underlayNode,"display","none");7==a("ie")&&this._ieFixNode&&(b.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var c=f.get(b.body(),"dir");c&&(c=c.toLowerCase());var d,h=this._scrollerWidths(),m=this.target,u=l.get(this._centerNode,"display");l.set(this._centerNode,
"display","block");var e=q.position(m,!0);if(m===b.body()||m===b.doc)e=r.getBox(),e.x=e.l,e.y=e.t;var z=q.getMarginBox(this._centerNode);l.set(this._centerNode,"display",u);this._ieFixNode&&(d=-this._ieFixNode.offsetTop/1E3,e.x=Math.floor((e.x+.9)/d),e.y=Math.floor((e.y+.9)/d),e.w=Math.floor((e.w+.9)/d),e.h=Math.floor((e.h+.9)/d));var g=l.get(m,"zIndex"),k=u=g;if("auto"===this.zIndex)if("auto"!=g)u=parseInt(u,10),k=parseInt(k,10);else{var t=m;if(t&&t!==b.body()&&t!==b.doc)for(t=m.parentNode,d=-1E5;t&&
t!==b.body();)(g=l.get(t,"zIndex"))&&"auto"!==g&&(g=parseInt(g,10),d<g&&(d=g,u=g+1,k=g+1)),t=t.parentNode}else u=parseInt(this.zIndex,10),k=parseInt(this.zIndex,10);l.set(this._centerNode,"zIndex",k);l.set(this._underlayNode,"zIndex",u);if((u=m.parentNode)&&u!==b.body()&&m!==b.body()&&m!==b.doc){t=e.h;k=e.w;m=q.position(u,!0);this._ieFixNode&&(d=-this._ieFixNode.offsetTop/1E3,m.x=Math.floor((m.x+.9)/d),m.y=Math.floor((m.y+.9)/d),m.w=Math.floor((m.w+.9)/d),m.h=Math.floor((m.h+.9)/d));m.w-=u.scrollHeight>
u.clientHeight&&0<u.clientHeight?h.v:0;m.h-=u.scrollWidth>u.clientWidth&&0<u.clientWidth?h.h:0;"rtl"===c&&(a("opera")?(e.x+=u.scrollHeight>u.clientHeight&&0<u.clientHeight?h.v:0,m.x+=u.scrollHeight>u.clientHeight&&0<u.clientHeight?h.v:0):a("ie")?m.x+=u.scrollHeight>u.clientHeight&&0<u.clientHeight?h.v:0:a("webkit"));m.w<e.w&&(e.w-=m.w);m.h<e.h&&(e.h-=m.h);var p=m.y,n=m.y+m.h,G=e.y,H=e.y+t,c=m.x;d=m.x+m.w;var g=e.x,I=e.x+k;if(H>p&&G<p)e.y=m.y,t-=p-G,e.h=t<m.h?t:e.h-2*(u.scrollWidth>u.clientWidth&&
0<u.clientWidth?h.h:0);else if(G<n&&H>n)e.h=n-G;else if(H<=p||G>=n)e.h=0;if(I>c&&g<c)e.x=m.x,k-=c-g,e.w=k<m.w?k:e.w-2*(u.scrollHeight>u.clientHeight&&0<u.clientHeight?h.w:0);else if(g<d&&I>d)e.w=d-g;else if(I<=c||g>=d)e.w=0}0<e.h&&0<e.w?(l.set(this._underlayNode,{display:"block",width:e.w+"px",height:e.h+"px",top:e.y+"px",left:e.x+"px"}),h=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(h),a("ie")||(h="MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),
this._cloneStyles(h,this)),h=e.h/2-z.h/2,u=e.w/2-z.w/2,e.h>=z.h&&e.w>=z.w?l.set(this._centerNode,{top:h+e.y+"px",left:u+e.x+"px",display:"block"}):l.set(this._centerNode,"display","none")):(l.set(this._underlayNode,"display","none"),l.set(this._centerNode,"display","none"));if(null===this._resizeCheck){var Q=this;this._resizeCheck=setInterval(function(){Q._size()},100)}}},_cloneStyles:function(c){g.forEach(c,function(c){l.set(this._underlayNode,c,l.get(this.target,c))},this)},_fadeIn:function(){var b=
this,a=h.animateProperty({duration:b.duration,node:b._underlayNode,properties:{opacity:{start:0,end:b.opacity}}}),m=h.animateProperty({duration:b.duration,node:b._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){b.onShow();delete b._anim}});this._anim=c.combine([a,m]);this._anim.play()},_fadeOut:function(){var b=this,a=h.animateProperty({duration:b.duration,node:b._underlayNode,properties:{opacity:{start:b.opacity,end:0}},onEnd:function(){l.set(this.node,{display:"none",zIndex:"-1000"})}}),
m=h.animateProperty({duration:b.duration,node:b._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){l.set(this.node,{display:"none",zIndex:"-1000"});b.onHide();b._enableOverflow();delete b._anim}});this._anim=c.combine([a,m]);this._anim.play()},_ignore:function(c){c&&p.stop(c)},_scrollerWidths:function(){var c=e.create("div");l.set(c,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var a=e.create("div");
l.set(a,{width:"200px",height:"10px"});c.appendChild(a);b.body().appendChild(c);a=q.getContentBox(c);l.set(c,"overflow","scroll");var m=q.getContentBox(c);b.body().removeChild(c);return{v:a.w-m.w,h:a.h-m.h}},_setTextAttr:function(c){this.text=this._textNode.innerHTML=c},_setColorAttr:function(c){l.set(this._underlayNode,"backgroundColor",c);this.color=c},_setImageTextAttr:function(c){f.set(this._imageNode,"alt",c);this.imageText=c},_setImageAttr:function(c){f.set(this._imageNode,"src",c);this.image=
c},_setCenterIndicatorAttr:function(c){this.centerIndicator=c;"image"===c?(this._centerNode=this._imageNode,l.set(this._textNode,"display","none")):(this._centerNode=this._textNode,l.set(this._imageNode,"display","none"))},_setTargetAttr:function(c){if("string"===typeof c){var b=z.byId(c);this._set("target",b?b.domNode:d.byId(c))}else this._set("target",c)},_disableOverflow:function(){if(this.target===b.body()||this.target===b.doc){this._overflowDisabled=!0;var c=b.body();this._oldOverflow=c.style&&
c.style.overflow?l.get(c,"overflow"):"";if(a("ie")&&!a("quirks")){if(c.parentNode&&c.parentNode.style&&c.parentNode.style.overflow)this._oldBodyParentOverflow=c.parentNode.style.overflow;else try{this._oldBodyParentOverflow=l.get(c.parentNode,"overflow")}catch(x){this._oldBodyParentOverflow="scroll"}l.set(c.parentNode,"overflow","hidden")}l.set(c,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var c=b.body();a("ie")&&!a("quirks")&&(c.parentNode.style.overflow=
this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);l.set(c,"overflow",this._oldOverflow);if(a("webkit")){var m=e.create("div",{style:{height:"2px"}});c.appendChild(m);setTimeout(function(){c.removeChild(m)},0)}delete this._oldOverflow}}})})},"esri/toolbars/edit":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/has dojo/dom-construct dojo/dom-style ../kernel ../lang ../sniff ./_toolbar ./_Box ./_GraphicMover ./_VertexEditor ./TextEditor ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/TextSymbol ../graphic".split(" "),
function(n,k,g,p,a,d,f,e,q,l,r,b,h,c,m,u,z,K,x,B,J){var D=k(h,{declaredClass:"esri.toolbars.Edit",constructor:function(c,b){this._map=c;this._tool=0;if(this._map.loaded)this._scratchGL=c.graphics;else var a=p.connect(this._map,"onLoad",this,function(){p.disconnect(a);a=null;this._scratchGL=this._map.graphics});c=f("esri-mobile");this._defaultOptions=g.mixin({vertexSymbol:new K(K.STYLE_CIRCLE,c?20:12,new x(x.STYLE_SOLID,new d([0,0,0,.5]),1),new d([128,128,128])),ghostVertexSymbol:new K(K.STYLE_CIRCLE,
c?18:10,new x(x.STYLE_SOLID,new d([0,0,0,.5]),1),new d([255,255,255,.75])),ghostLineSymbol:new x(x.STYLE_DOT,new d([128,128,128]),2),allowDeleteVertices:!0,allowAddVertices:!0,rotateHandleOffset:c?24:16,boxLineSymbol:new x(x.STYLE_DASH,new d([64,64,64]),1),boxHandleSymbol:new K(K.STYLE_SQUARE,c?16:9,new x(x.STYLE_SOLID,new d([0,0,0,.5]),1),new d([255,255,255,.75])),textAnchorSymbol:new K(K.STYLE_CIRCLE,10,null,new d([255,0,0]))},b||{})},activate:function(c,b,a){this.deactivate();this._graphic=b;this._options=
g.mixin(g.mixin({},this._defaultOptions),a||{});var m=D.MOVE;a=D.EDIT_VERTICES;var d=D.SCALE,h=D.ROTATE,u=D.EDIT_TEXT,e=!1,x=!1,f=!1,K=this._map,z=K.spatialReference,B=b.geometry.spatialReference;this._geo=!(!z||!B||z.equals(B)||!z.isWebMercator()||4326!==B.wkid);this._isTextPoint=this._prepareTextSymbolEditing(b,c);(c&m)===m&&(e=this._enableMove(b));m=(c&d)===d;h=(c&h)===h;if(m||h)f=this._enableBoxEditing(b,m,h);(c&a)===a&&(x=this._enableVertexEditing(b));(c&u)===u&&this._enableTextEditing(b);if(!(e||
x||f))throw Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");if(this._tool=c)this._mapPanEndHandle=p.connect(K,"onPanEnd",this,this._mapPanEndHandler),this._mapExtChgHandle=p.connect(K,"onExtentChange",this,this._mapExtentChangeHandler),this.onActivate(this._tool,b);K.snappingManager&&(e||x)&&K.snappingManager._startSelectionLayerQuery()},deactivate:function(){this._isTextPoint=null;var c=this._tool,b=this._graphic;if(c){var a=
!!this._modified;this._clear();p.disconnect(this._mapPanEndHandle);p.disconnect(this._mapExtChgHandle);this._graphic=this._geo=this._mapPanEndHandle=this._mapExtChgHandle=null;this.onDeactivate(c,b,{isModified:a});this._map.snappingManager&&this._map.snappingManager._stopSelectionLayerQuery()}},refresh:function(){this._refreshMoveables(!0)},getCurrentState:function(){return{tool:this._tool,graphic:this._graphic,isModified:!!this._modified}},onActivate:function(c,b){},onDeactivate:function(c,b,a){},
onGraphicMoveStart:function(c){},onGraphicFirstMove:function(c){this._modified=!0},onGraphicMove:function(c,b){},onGraphicMoveStop:function(c,b){},onGraphicClick:function(c,b){},onVertexMoveStart:function(c,b){},onVertexFirstMove:function(c,b){this._modified=!0},onVertexMove:function(c,b,a){},onVertexMoveStop:function(c,b,a){},onVertexAdd:function(c,b){this._modified=!0},onVertexClick:function(c,b){},onVertexMouseOver:function(c,b){},onVertexMouseOut:function(c,b){},onVertexDelete:function(c,b){this._modified=
!0},onTextEditStart:function(c,b){},onTextEditEnd:function(c){},onScaleStart:function(c){},onScaleFirstMove:function(c){this._modified=!0},onScale:function(c,b){},onScaleStop:function(c,b){},onRotateStart:function(c){},onRotateFirstMove:function(c){this._modified=!0},onRotate:function(c,b){},onRotateStop:function(c,b){},_eventMap:{activate:["tool","graphic"],deactivate:["tool","graphic","info"],"graphic-move-start":["graphic"],"graphic-first-move":["graphic"],"graphic-move":["graphic","transform"],
"graphic-move-stop":["graphic","transform"],"graphic-click":["graphic","info"],"vertex-move-start":["graphic","vertexinfo"],"vertex-first-move":["graphic","vertexinfo"],"vertex-move":["graphic","vertexinfo","transform"],"vertex-move-stop":["graphic","vertexinfo","transform"],"vertex-add":["graphic","vertexinfo"],"vertex-click":["graphic","vertexinfo"],"vertex-mouse-over":["graphic","vertexinfo"],"vertex-mouse-out":["graphic","vertexinfo"],"vertex-delete":["graphic","vertexinfo"],"scale-start":["graphic"],
"scale-first-move":["graphic"],scale:["graphic","info"],"scale-stop":["graphic","info"],"rotate-start":["graphic"],"rotate-first-move":["graphic"],rotate:["graphic","info"],"rotate-stop":["graphic","info"]},_prepareTextSymbolEditing:function(c,b){if("point"===c.geometry.type||"multipoint"===c.geometry.type){var a=c.getLayer(),m=a.renderer,a=c.symbol||a._getSymbol(c);!a&&(m.hasVisualVariables("sizeInfo",!1)||m.hasVisualVariables("colorInfo",!1)||m.hasVisualVariables("opacityInfo",!1))&&m.addBreak&&
m.infos&&1===m.infos.length&&(a=m.infos[0].symbol||m.defaultSymbol);if(a&&"textsymbol"===a.type){if((b&D.SCALE)===D.SCALE||(b&D.ROTATE)===D.ROTATE||(b&D.EDIT_TEXT)===D.EDIT_TEXT){c.setSymbol(new B(a.toJson()));var d=this;this._textSymbolEditor?(this._textSymbolEditor.createForm(c),this._textSymbolEditor.show()):this._options&&this._options.textSymbolEditor?(this._textSymbolEditor=this._options.textSymbolEditor,this._textSymbolEditor.on("symbol-change",function(){d._boxEditor&&d._boxEditor.refresh()})):
n(["../dijit/SymbolEditor"],function(b){if(!d._textSymbolEditor){var a;a=d._options.textSymbolEditorHolder?e.create("div",null,d._options.textSymbolEditorHolder):e.create("div",null,d._map.root);d._textSymbolEditor=new b({graphic:c},a);b=d._textSymbolEditor.domNode.parentNode.id;q.set(d._textSymbolEditor.domNode,{position:"map_root"===b?"absolute":"relative",left:"map_root"===b?d._map.width/2-100+"px":"5px",top:"20px","z-index":50});d._textSymbolEditor.startup();d._textSymbolEditor.createForm(c);
d._textSymbolEditor.show();d._textSymbolEditor.on("symbol-change",function(){d._boxEditor&&d._boxEditor.refresh()})}})}if((b&D.MOVE)===D.MOVE||(b&D.ROTATE)===D.ROTATE||(b&D.SCALE)===D.SCALE)this._textAnchor=new J(c.geometry,this._options.textAnchorSymbol),this._scratchGL.add(this._textAnchor);return!0}}return!1},_enableMove:function(c){var b=this._map;switch(c.geometry.type){case "point":case "polyline":case "polygon":return this._graphicMover=new m(c,b,this,this._textAnchor),!0}return!1},_enableVertexEditing:function(c){var b=
this._map;switch(c.geometry.type){case "multipoint":case "polyline":case "polygon":return this._vertexEditor=u.create(c,b,this),!0}return!1},_enableBoxEditing:function(b,a,m){var d=this._map,h=b.geometry.type;return"polyline"===h||"polygon"===h||this._isTextPoint?(this._boxEditor=new c(b,d,this,a,m,this._options.uniformScaling,this._isTextPoint),!0):!1},_enableTextEditing:function(c){return this._isTextPoint?(this._textEditor=new z(c,this._map,this),p.connect(this._textEditor,"onEditStart",g.hitch(this,
function(){this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._map.disableKeyboardNavigation();this._disableMove();this._disableBoxEditing()})),!0):!1},_disableMove:function(){var c=this._graphicMover;c&&(c.destroy(),this._graphicMover=null)},_disableVertexEditing:function(){var c=this._vertexEditor;c&&(c.destroy(),this._vertexEditor=null)},_disableBoxEditing:function(){var c=this._boxEditor;c&&(c.destroy(),this._boxEditor=null)},_disableTextEditing:function(){this._textEditor&&
(this._textEditor.destroy(),this._textEditor=null);this._map.enableKeyboardNavigation()},_disableSymbolEditing:function(){this._textSymbolEditor&&this._textSymbolEditor.hide()},_clear:function(){this._disableMove();this._disableVertexEditing();this._disableBoxEditing();this._disableTextEditing();this._disableSymbolEditing();this._textAnchor&&(this._textAnchor.getLayer().remove(this._textAnchor),this._textAnchor=null);this._tool=0;this._modified=!1},_mapPanEndHandler:function(){this._refreshMoveables()},
_mapExtentChangeHandler:function(c,b,a){a&&this._refreshMoveables()},_refreshMoveables:function(c){var b=a.filter([this._graphicMover,this._vertexEditor,this._boxEditor],r.isDefined);a.forEach(b,function(b){b.refresh(c)})},_beginOperation:function(c){a.forEach(this._getAffectedTools(c),function(c){c.suspend()})},_endOperation:function(c){a.forEach(this._getAffectedTools(c),function(c){c.resume()})},_getAffectedTools:function(c){var b=[];switch(c){case "MOVE":b=[this._vertexEditor,this._boxEditor];
break;case "VERTICES":b=[this._boxEditor];break;case "BOX":b=[this._vertexEditor]}return b=a.filter(b,r.isDefined)}});g.mixin(D,{MOVE:1,EDIT_VERTICES:2,SCALE:4,ROTATE:8,EDIT_TEXT:16});f("extend-esri")&&g.setObject("toolbars.Edit",D,l);return D})},"esri/toolbars/_Box":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/has dojo/dom-style dojox/gfx/Moveable dojox/gfx/matrix ../kernel ../lang ../geometry/Point ../geometry/Polyline ../symbols/SimpleMarkerSymbol ../geometry/webMercatorUtils ../geometry/jsonUtils ../graphic".split(" "),
function(n,k,g,p,a,d,f,e,q,l,r,b,h,c,m,u,z){n=n(null,{declaredClass:"esri.toolbars._Box",constructor:function(c,b,a,m,d,h,u){this._graphic=c;this._map=b;this._toolbar=a;this._scale=m;this._rotate=d;this._defaultEventArgs={};this._scaleEvent="Scale";this._rotateEvent="Rotate";this._uniformScaling=h;c=a._options;this._markerSymbol=c.boxHandleSymbol;this._lineSymbol=c.boxLineSymbol;this._moveStartHandler=k.hitch(this,this._moveStartHandler);this._firstMoveHandler=k.hitch(this,this._firstMoveHandler);
this._moveStopHandler=k.hitch(this,this._moveStopHandler);this._moveHandler=k.hitch(this,this._moveHandler);this._isTextPoint=u;this._init()},destroy:function(){this._cleanUp();this._graphic=this._map=this._toolbar=this._markerSymbol=this._lineSymbol=null},refresh:function(){this._draw()},suspend:function(){g.forEach(this._getAllGraphics(),function(c){c.hide()})},resume:function(){g.forEach(this._getAllGraphics(),function(c){c.show()});this._draw()},_init:function(){this._draw()},_cleanUp:function(){this._connects&&
g.forEach(this._connects,p.disconnect);var c=this._toolbar._scratchGL;this._anchors&&g.forEach(this._anchors,function(b){c.remove(b.graphic);(b=b.moveable)&&b.destroy()});this._box&&c.remove(this._box);this._box=this._anchors=this._connects=null},_draw:function(){if(this._graphic.getDojoShape()){var c=this._map,a=this._toolbar._scratchGL,m=this._getBoxCoords(),d=new h(c.spatialReference),u=k.clone(g.filter(m,function(c,b){return 8!==b&&0===b%2}));u[0]&&u.push([u[0][0],u[0][1]]);d.addPath(u);this._rotate&&
d.addPath([m[1],m[8]]);this._box?this._box.setGeometry(d):(this._box=new z(d,this._lineSymbol),a.add(this._box));this._anchors?g.forEach(this._anchors,function(a,d){this._scale||(d=8);var h=new b(m[d],c.spatialReference);a.graphic.setGeometry(h);var h=a.moveable,u=a.graphic.getDojoShape();u&&(h?u!==h.shape&&(h.destroy(),a.moveable=this._getMoveable(a.graphic,d)):a.moveable=this._getMoveable(a.graphic,d))},this):(this._anchors=[],this._connects=[],g.forEach(m,function(m,d){!this._scale&&8>d||(m=new b(m,
c.spatialReference),m=new z(m,this._markerSymbol),this._isTextPoint&&1===d%2&&m.hide(),a.add(m),this._anchors.push({graphic:m,moveable:this._getMoveable(m,d)}))},this))}else this._cleanUp()},_getBoxCoords:function(c){var b=this._map,a,m=[],d,h,u;if(this._isTextPoint){a=this._graphic.getNode().getBoundingClientRect();var e=b.__container.getBoundingClientRect();a=[{x:a.left-e.left,y:a.top-e.top},{x:a.right-e.left,y:a.top-e.top},{x:a.right-e.left,y:a.bottom-e.top},{x:a.left-e.left,y:a.bottom-e.top}]}else a=
this._getTransformedBoundingBox(this._graphic);g.forEach(a,function(a,e,f){d=a;(h=f[e+1])||(h=f[0]);u={x:(d.x+h.x)/2,y:(d.y+h.y)/2};c||(d=b.toMap(d),u=b.toMap(u));m.push([d.x,d.y]);m.push([u.x,u.y])});this._rotate&&(a=k.clone(m[1]),a=c?{x:a[0],y:a[1]}:b.toScreen({x:a[0],y:a[1],spatialReference:b.spatialReference}),a.y-=this._toolbar._options.rotateHandleOffset,c||(a=b.toMap(a)),m.push([a.x,a.y]));return m},_getTransformedBoundingBox:function(c){var a=this._map,m=c.geometry.getExtent(),d=c.geometry.spatialReference;
c=new b(m.xmin,m.ymax,d);m=new b(m.xmax,m.ymin,d);c=a.toScreen(c);m=a.toScreen(m);return[{x:c.x,y:c.y},{x:m.x,y:c.y},{x:m.x,y:m.y},{x:c.x,y:m.y}]},_getAllGraphics:function(){var c=[this._box];this._anchors&&g.forEach(this._anchors,function(b){c.push(b.graphic)});return c=g.filter(c,r.isDefined)},_getMoveable:function(c,b){var a=c.getDojoShape();if(a)return c=new e(a),c._index=b,this._connects.push(p.connect(c,"onMoveStart",this._moveStartHandler)),this._connects.push(p.connect(c,"onFirstMove",this._firstMoveHandler)),
this._connects.push(p.connect(c,"onMoveStop",this._moveStopHandler)),c.onMove=this._moveHandler,(a=a.getEventSource())&&f.set(a,"cursor",this._toolbar._cursors["box"+b]),c},_moveStartHandler:function(c){this._toolbar["on"+(8===c.host._index?this._rotateEvent:this._scaleEvent)+"Start"](this._graphic)},_firstMoveHandler:function(c){this._toolbar._deactivateScrollWheel();var b=c.host._index,a=this._wrapOffset=c.host.shape._wrapOffsets[0]||0,m=this._graphic.getLayer()._getTransform(),d;c=g.map(this._getBoxCoords(!0),
function(c){return{x:c[0]+a,y:c[1]}});d=this._isTextPoint?this._map.toScreen(this._graphic.geometry):{x:c[1].x,y:c[3].y};this._centerCoord=q.multiplyPoint(q.invert(m),d);if(8===b)d=q.multiplyPoint(q.invert(m),c[1]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,d)),this._startLine=[this._centerCoord,d],this._moveLine=k.clone(this._startLine);else if(d=q.multiplyPoint(q.invert(m),c[b]),m=q.multiplyPoint(q.invert(m),c[(b+4)%8]),this._isTextPoint&&(this._centerCoord=this._deNormalizePoint(this._centerCoord,
d)),this._firstMoverToAnchor=Math.sqrt((d.x-this._centerCoord.x)*(d.x-this._centerCoord.x)+(d.y-this._centerCoord.y)*(d.y-this._centerCoord.y)),this._startBox=m,this._startBox.width=c[4].x-c[0].x,this._startBox.height=c[4].y-c[0].y,this._moveBox=k.clone(this._startBox),this._xfactor=d.x>m.x?1:-1,this._yfactor=d.y>m.y?1:-1,1===b||5===b)this._xfactor=0;else if(3===b||7===b)this._yfactor=0;this._toolbar._beginOperation("BOX");this._toolbar["on"+(8===b?this._rotateEvent:this._scaleEvent)+"FirstMove"](this._graphic)},
_moveHandler:function(c,b){c=c.host._index;var a=this._defaultEventArgs,m,d,h;a.angle=0;a.scaleX=1;a.scaleY=1;if(8===c)m=this._startLine,d=this._moveLine,h=d[1],h.x+=b.dx,h.y+=b.dy,b=this._getAngle(m,d),this._isTextPoint&&(b+=this._graphic.symbol.angle),d=q.rotategAt(b,m[0]),this._graphic.getDojoShape().setTransform(d),a.transform=d,a.angle=b,a.around=m[0];else{m=this._startBox;d=this._moveBox;d.width+=b.dx*this._xfactor;d.height+=b.dy*this._yfactor;this._uniformScaling||this._isTextPoint?(m=d.x+
this._xfactor*d.width,d=d.y+this._yfactor*d.height,m=Math.sqrt((m-this._centerCoord.x)*(m-this._centerCoord.x)+(d-this._centerCoord.y)*(d-this._centerCoord.y)),this._scaleRatio=b=h=m/this._firstMoverToAnchor,m=this._centerCoord):(b=d.width/m.width,h=d.height/m.height,m={x:m.x,y:m.y});if(isNaN(b)||Infinity===b||-Infinity===b)b=1;if(isNaN(h)||Infinity===h||-Infinity===h)h=1;d=q.scaleAt(b,h,m);if(this._isTextPoint){var u=q.rotategAt(this._graphic.symbol.angle,m);this._graphic.getDojoShape().setTransform([u,
d])}else this._graphic.getDojoShape().setTransform(d);a.transform=d;a.scaleX=b;a.scaleY=h;a.around=m}this._toolbar["on"+(8===c?this._rotateEvent:this._scaleEvent)](this._graphic,a)},_moveStopHandler:function(c){this._toolbar._activateScrollWheel();var b=this._graphic,a=this._toolbar,d=a._geo?m.geographicToWebMercator(b.geometry):b.geometry,h=d.spatialReference,e=b.getDojoShape(),f=e.getTransform(),z=b.getLayer()._getTransform();this._isTextPoint?(b=this._graphic.symbol,8===c.host._index?b.angle+=
this._getAngle(this._startLine,this._moveLine):b.font.setSize(Math.round(b.font.size*this._scaleRatio*100)/100),this._graphic.setSymbol(b)):(d=d.toJson(),this._updateSegments(d.paths||d.rings,f,z,h),e.setTransform(null),d=u.fromJson(d),b.setGeometry(a._geo?m.webMercatorToGeographic(d,!0):d));this._draw();this._startLine=this._moveLine=this._startBox=this._moveBox=this._xfactor=this._yfactor=null;a._endOperation("BOX");this._defaultEventArgs.transform=f;a["on"+(8===c.host._index?this._rotateEvent:
this._scaleEvent)+"Stop"](this._graphic,this._defaultEventArgs)},_updateSegments:function(c,b,a,m){var d=this._map,h=this._wrapOffset||0;g.forEach(c,function(c){g.forEach(c,function(c){this._updatePoint(c,m,h,q,d,a,b)},this)},this)},_updatePoint:function(c,b,a,m,d,h,u){b=d.toScreen({x:c[0],y:c[1],spatialReference:b},!0);b.x+=a;b=m.multiplyPoint([h,u,m.invert(h)],b);b.x-=a;a=d.toMap(b);c[0]=a.x;c[1]=a.y},_getAngle:function(c,b){return 180*Math.atan2(b[0].y-b[1].y,b[0].x-b[1].x)/Math.PI-180*Math.atan2(c[0].y-
c[1].y,c[0].x-c[1].x)/Math.PI},_deNormalizePoint:function(c,b){var a=this._map._getFrameWidth();if(-1===a)return c;for(c={x:c.x,y:c.y};Math.abs(c.x-b.x)>=a;)c.x=c.x<b.x?c.x+a:c.x-a;var m=Math.abs(c.x-b.x);Math.abs(c.x-b.x+a)<m?c.x+=a:Math.abs(c.x-b.x-a)<m&&(c.x-=a);return c}});d("extend-esri")&&k.setObject("toolbars._Box",n,l);return n})},"dojox/gfx/Moveable":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/_base/event dojo/topic dojo/touch dojo/dom-class dojo/_base/window ./Mover dojo/mouse".split(" "),
function(n,k,g,p,a,d,f,e,q,l){return k("dojox.gfx.Moveable",null,{constructor:function(a,b){this.shape=a;this.delay=b&&0<b.delay?b.delay:0;this.mover=b&&b.mover?b.mover:q;this.leftButtonOnly=b&&b.leftButtonOnly;this.events=[this.shape.on(d.press,n.hitch(this,"onMouseDown"))]},destroy:function(){g.forEach(this.events,function(a){a.remove()});this.events=this.shape=null},onMouseDown:function(a){this.delay?(this.events.push(this.shape.on(d.move,n.hitch(this,"onMouseMove")),this.shape.on(d.release,n.hitch(this,
"onMouseUp"))),this._lastX=a.clientX,this._lastY=a.clientY):this.leftButtonOnly&&!l.isLeft(a)||new this.mover(this.shape,a,this);p.stop(a)},onMouseMove:function(a){var b=a.clientY;if(Math.abs(a.clientX-this._lastX)>this.delay||Math.abs(b-this._lastY)>this.delay)this.onMouseUp(a),new this.mover(this.shape,a,this);p.stop(a)},onMouseUp:function(a){this.events.pop().remove()},onMoveStart:function(d){a.publish("/gfx/move/start",d);f.add(e.body(),"dojoMove")},onMoveStop:function(d){a.publish("/gfx/move/stop",
d);f.remove(e.body(),"dojoMove")},onFirstMove:function(a){},onMove:function(a,b,d){this.onMoving(a,b,d);this.shape.applyLeftTransform(b);this.onMoved(a,b)},onMoving:function(a,b){},onMoved:function(a,b){}})})},"dojox/gfx/Mover":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/on dojo/touch dojo/_base/event".split(" "),function(n,k,g,p,a,d){return g("dojox.gfx.Mover",null,{constructor:function(f,e,g){this.shape=f;this.lastX=e.clientX;this.lastY=e.clientY;f=this.host=g;e=
document;g=p(e,a.move,n.hitch(this,"onFirstMove"));this.events=[p(e,a.move,n.hitch(this,"onMouseMove")),p(e,a.release,n.hitch(this,"destroy")),p(e,"dragstart",n.hitch(d,"stop")),p(e,"selectstart",n.hitch(d,"stop")),g];if(f&&f.onMoveStart)f.onMoveStart(this)},onMouseMove:function(a){var e=a.clientX,f=a.clientY;this.host.onMove(this,{dx:e-this.lastX,dy:f-this.lastY},a);this.lastX=e;this.lastY=f;d.stop(a)},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove()},destroy:function(){k.forEach(this.events,
function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.shape=null}})})},"esri/toolbars/_GraphicMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/json dojo/dom-style dojox/gfx/Moveable dojox/gfx/Mover dojox/gfx/matrix ../kernel ../PointerEvents ../sniff ../geometry/webMercatorUtils ../geometry/ScreenPoint ../geometry/Point".split(" "),function(n,k,g,p,a,d,f,e,q,l,r,b,h,c){var m=n(null,{declaredClass:"esri.toolbars._GraphicMover",
constructor:function(c,b,a,d){this.graphic=c;this.map=b;this.toolbar=a;this.tempPt=d;this._enableGraphicMover();this._moved=!1},refresh:function(c){var b=this.graphic.getDojoShape();!b||!c&&b._hostGraphic||(this._disableGraphicMover(),this._enableGraphicMover())},destroy:function(){this._disableGraphicMover()},hasMoved:function(){return this._moved},_enableGraphicMover:function(){var c=this.graphic,b=c.getDojoShape();b&&(b._hostGraphic=c,this._moveable=new d(b,{mover:m.Mover}),this._moveStartHandle=
g.connect(this._moveable,"onMoveStart",this,this._moveStartHandler),this._firstMoveHandle=g.connect(this._moveable,"onFirstMove",this,this._firstMoveHandler),this._movingHandle=g.connect(this._moveable,"onMoving",this,this._movingHandler),this._moveStopHandle=g.connect(this._moveable,"onMoveStop",this,this._moveStopHandler),(c=b.getEventSource())&&a.set(c,"cursor",this.toolbar._cursors.move))},_disableGraphicMover:function(){var c=this._moveable;if(c){g.disconnect(this._moveStartHandle);g.disconnect(this._firstMoveHandle);
g.disconnect(this._movingHandle);g.disconnect(this._moveStopHandle);var b=c.shape;b&&(b._hostGraphic=null,(b=b.getEventSource())&&a.set(b,"cursor","inherit"));c.destroy()}this._moveable=null},_moveStartHandler:function(){var c=this.graphic,b=this.map;this._startTx=c.getDojoShape().getTransform();"point"===this.graphic.geometry.type&&b.snappingManager&&b.snappingManager._setUpSnapping();this.toolbar.onGraphicMoveStart(c)},_firstMoveHandler:function(){this.toolbar._beginOperation("MOVE");this.toolbar.onGraphicFirstMove(this.graphic)},
_movingHandler:function(c,b,a){c=c.shape.getTransform();b=this.map;var d;r("esri-pointer")?d=b.navigationManager.pointerEvents._processTouchEvent(a,a):a&&"pointermove"===a.type&&(d=l.prototype._processTouchEvent.call({map:b},a,a));d&&b.snappingManager&&b.snappingManager._onSnappingMouseMoveHandler(d);this.tempPt&&this.tempPt.getDojoShape().setTransform(c);this.toolbar.onGraphicMove(this.graphic,c)},_moveStopHandler:function(a){var d=this.graphic,m=this.toolbar,u=this.map,f=m._geo?b.geographicToWebMercator(d.geometry):
d.geometry,g=f.type,k=d.getDojoShape(),r=k.getTransform();if(p.toJson(r)!==p.toJson(this._startTx)){this._moved=!0;switch(g){case "point":var g=[r,e.invert(this._startTx)],q;u.snappingManager&&(q=u.snappingManager._snappingPoint);f=q||u.toMap(e.multiplyPoint(g,u.toScreen(f,!0)));u.snappingManager&&u.snappingManager._killOffSnapping();break;case "polyline":f=this._updatePolyGeometry(f,f.paths,r);break;case "polygon":f=this._updatePolyGeometry(f,f.rings,r)}k.setTransform(null);d.setGeometry(m._geo?
b.webMercatorToGeographic(f,!0):f);this.tempPt&&this.tempPt.setGeometry(new c(d.geometry.toJson()))}else this._moved=!1;m._endOperation("MOVE");m.onGraphicMoveStop(d,r);this._moved||(a=a.__e,u=this.map.position,a=new h(a.pageX-u.x,a.pageY-u.y),m.onGraphicClick(d,{screenPoint:a,mapPoint:this.map.toMap(a)}))},_updatePolyGeometry:function(c,b,a){var d=this.map,m=c.getPoint(0,0),d=d.toMap(d.toScreen(m).offset(a.dx,a.dy));a=d.x-m.x;for(var m=d.y-m.y,h,e,u,d=0;d<b.length;d++)for(e=b[d],h=0;h<e.length;h++)u=
c.getPoint(d,h),c.setPoint(d,h,u.offset(a,m));return c}});m.Mover=n(f,{declaredClass:"esri.toolbars._Mover",constructor:function(c,b,a){this.__e=b}});r("extend-esri")&&(k.setObject("toolbars._GraphicMover",m,q),k.setObject("toolbars._Mover",m.Mover,q));return m})},"esri/toolbars/_VertexEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/array dojo/has dijit/Menu dijit/MenuItem ../kernel ./_VertexMover ../geometry/Point ../geometry/jsonUtils dojo/i18n!../nls/jsapi".split(" "),
function(n,k,g,p,a,d,f,e,q,l,r,b){var h=n(null,{declaredClass:"esri.toolbars._GraphicVertexEditor",constructor:function(c,b,a){this.graphic=c;this.map=b;this.toolbar=a;c=a._options;this._symbol1=c.vertexSymbol;this._symbol2=c.ghostVertexSymbol;b=c.ghostLineSymbol;this._lineStroke={style:b.style,width:b.width,color:b.color};this._canDel=c.allowDeleteVertices;this._canAdd=c.allowAddVertices;this._addControllers()},destroy:function(){this._removeControllers()},refresh:function(c){c?(this._removeControllers(),
this._addControllers()):(this._refresh(this._vertexMovers),this._refresh(this._mpVertexMovers))},suspend:function(){this._suspended||this._removeControllers();this._suspended=!0},resume:function(){this._suspended&&this._addControllers();this._suspended=!1},_addControllers:function(){this._firstMoveHandle=g.connect(q,"onFirstMove",this,this._firstMoveHandler);this._moveStopHandle=g.connect(q,"onMoveStop",this,this._moveStopHandler);this._vertexMovers=this._add(this._getSegments(this.graphic.geometry),
this._symbol1);this._canAdd&&(this._mpVertexMovers=this._add(this._getMidpointSegments(this.graphic.geometry),this._symbol2,!0));var c=this._getGraphicsLayer();this._mouseOverHandle=g.connect(c,"onMouseOver",this,this._mouseOverHandler);this._mouseOutHandle=g.connect(c,"onMouseOut",this,this._mouseOutHandler);this._canDel&&(this._ctxMenu=new d({style:"font-size: 12px; margin-left: 5px; margin-top: 5px;"}),c=this._ctxDelete=new f({label:b.toolbars.edit.deleteLabel,iconClass:"vertexDeleteIcon",style:"outline: none;"}),
this._deleteHandle=g.connect(c,"onClick",this,this._deleteHandler),this._ctxMenu.addChild(c),this._ctxMenu.startup())},_removeControllers:function(){g.disconnect(this._firstMoveHandle);g.disconnect(this._moveStopHandle);g.disconnect(this._mouseOverHandle);g.disconnect(this._mouseOutHandle);g.disconnect(this._deleteHandle);this._ctxMenu&&(this._ctxDelete=null,this._unbindCtxNode(),this._ctxMenu.destroyRecursive());this._remove(this._vertexMovers);this._remove(this._mpVertexMovers);this._vertexMovers=
this._mpVertexMovers=null},_add:function(c,b,a){var d,m,h=this.graphic,e=[];for(d=0;d<c.length;d++){var f=c[d],u=[];for(m=0;m<f.length;m++)u.push(new q(f[m],b,h,d,m,f.length,this,a));e.push(u)}return e},_remove:function(c){c&&p.forEach(c,function(c){p.forEach(c,function(c){c.destroy()})})},_refresh:function(c){c&&p.forEach(c,function(c){p.forEach(c,function(c){c.refresh()})})},_isNew:function(c){return-1===p.indexOf(this._vertexMovers[c.segIndex],c)?!0:!1},_getGraphicsLayer:function(){return this.toolbar._scratchGL},
_deleteHandler:function(c){c=this._selectedMover;this._updateRelatedGraphic(c,c.relatedGraphic,c.graphic.geometry,c.segIndex,c.ptIndex,c.segLength,!1,!0);this._canAdd&&this._deleteMidpoints(c);this._deleteVertex(c);this.toolbar._endOperation("VERTICES")},_mouseOverHandler:function(c){c=c.graphic;var b=this._findMover(c);b&&(this.toolbar.onVertexMouseOver(this.graphic,b._getInfo()),b._placeholder||(this._selectedMover=b,this._canDel&&this._bindCtxNode(c.getDojoShape().getNode())))},_mouseOutHandler:function(c){if(c=
this._findMover(c.graphic))this.toolbar.onVertexMouseOut(this.graphic,c._getInfo())},_bindCtxNode:function(c){this._unbindCtxNode();this._ctxDelete.set("disabled",this._selectedMover.segLength<=this.minLength?!0:!1);this._ctxMenu.bindDomNode(c);this._bindNode=c},_unbindCtxNode:function(){var c=this._bindNode;c&&this._ctxMenu.unBindDomNode(c)},_findMover:function(c){var b,a=[];b=this._mpVertexMovers;p.forEach(this._vertexMovers,function(c){a=a.concat(c)});b&&p.forEach(b,function(c){a=a.concat(c)});
for(b=0;b<a.length;b++){var d=a[b];if(d.graphic===c)return d}},_firstMoveHandler:function(c){!this._isNew(c)&&this._canAdd&&this._hideRelatedMidpoints(c);this.toolbar._beginOperation("VERTICES")},_moveStopHandler:function(c,b){var a=this._isNew(c);b&&(b.dx||b.dy)?(this._updateRelatedGraphic(c,c.relatedGraphic,c.graphic.geometry,c.segIndex,c.ptIndex,c.segLength,a),this._canAdd&&(a?this._addMidpoints(c):(this._repositionRelatedMidpoints(c),this._showRelatedMidpoints(c))),this.toolbar._endOperation("VERTICES")):
!a&&this._canAdd&&this._showRelatedMidpoints(c)},_showRelatedMidpoints:function(c){var b=this._getAdjacentMidpoints(c.ptIndex,c.segLength),a=this._mpVertexMovers[c.segIndex];for(c=0;c<b.length;c++){var d=a[b[c]];d.graphic.show();d.refresh()}},_hideRelatedMidpoints:function(c){var b=this._getAdjacentMidpoints(c.ptIndex,c.segLength),a=this._mpVertexMovers[c.segIndex];for(c=0;c<b.length;c++)a[b[c]].graphic.hide()},_repositionRelatedMidpoints:function(c){var b,a=this._getAdjacentMidpoints(c.ptIndex,c.segLength),
d=this._mpVertexMovers[c.segIndex];for(b=0;b<a.length;b++){var h=this._getAdjacentVertices(a[b],c.segLength),e=c.relatedGraphic.geometry.getPoint(c.segIndex,h[0]),h=c.relatedGraphic.geometry.getPoint(c.segIndex,h[1]),e=new l({x:(e.x+h.x)/2,y:(e.y+h.y)/2,spatialReference:e.spatialReference.toJson()});d[a[b]].graphic.setGeometry(e)}},_addMidpoints:function(c){var b=c.segIndex,a=c.ptIndex,d=c.segLength,h=a+1,e,f=d+1;this._mpVertexMovers[b].splice(a,1);var g=this._vertexMovers[b];for(e=0;e<h;e++)g[e].segLength+=
1;for(e=h;e<g.length;e++)g[e].ptIndex+=1,g[e].segLength+=1;c.ptIndex=h;c.segLength=g.length+1;g.splice(h,0,c);c.graphic.setSymbol(this._symbol1);g=this._mpVertexMovers[b];for(e=0;e<a;e++)g[e].segLength+=1;for(e=a;e<d-1;e++)g[e].ptIndex+=1,g[e].segLength+=1;h=this._getAdjacentVertices(a,f);b=this._getAdjacentVertices(a+1,f);d=c.relatedGraphic.geometry.getPoint(c.segIndex,h[0]);e=c.relatedGraphic.geometry.getPoint(c.segIndex,h[1]);h=new l({x:(d.x+e.x)/2,y:(d.y+e.y)/2,spatialReference:d.spatialReference.toJson()});
d=c.relatedGraphic.geometry.getPoint(c.segIndex,b[0]);e=c.relatedGraphic.geometry.getPoint(c.segIndex,b[1]);b=new l({x:(d.x+e.x)/2,y:(d.y+e.y)/2,spatialReference:d.spatialReference.toJson()});d=new q(h,this._symbol2,this.graphic,c.segIndex,a,f,this,!0);c=new q(b,this._symbol2,this.graphic,c.segIndex,a+1,f,this,!0);g.splice(a,0,d,c)},_deleteVertex:function(c){var b,a=c.ptIndex,d=this._vertexMovers[c.segIndex];for(b=0;b<a;b++)--d[b].segLength;for(b=a+1;b<d.length;b++){var h=d[b];--h.ptIndex;--h.segLength}d.splice(a,
1);b=c._getInfo();c.destroy();this.toolbar.onVertexDelete(this.graphic,b)}});k.mixin(h,{create:function(c,b,a){switch(c.geometry.type){case "multipoint":return new h.MultipointVertexEditor(c,b,a);case "polyline":return new h.PolylineVertexEditor(c,b,a);case "polygon":return new h.PolygonVertexEditor(c,b,a)}}});h.MultipointVertexEditor=n(h,{declaredClass:"esri.toolbars._MultipointVertexEditor",minLength:1,constructor:function(){this._moveStartHandle=g.connect(q,"onMoveStart",this,this._moveStartHandler);
g.disconnect(this._firstMoveHandle)},destroy:function(){this.inherited(arguments);g.disconnect(this._moveStartHandle)},_getSegments:function(c){var b=c.points,a=[],d=c.spatialReference;for(c=0;c<b.length;c++){var h=b[c];a.push(new l({x:h[0],y:h[1],spatialReference:d.toJson()}))}return[a]},_getMidpointSegments:function(c){return[]},_getControlPoints:function(c,b,a,d,h){return[]},_getGraphicsLayer:function(){return this.graphic._graphicsLayer},_mouseOverHandler:function(c){var b=c.graphic;if(c=this._findMover(c))this.toolbar.onVertexMouseOver(b,
c._getInfo()),this._selectedMover=c,this._canDel&&this._bindCtxNode(c.graphic.getDojoShape().getNode())},_mouseOutHandler:function(c){var b=c.graphic;if(c=this._findMover(c))this.toolbar.onVertexMouseOut(b,c._getInfo())},_findMover:function(c){var b=[].concat(this._vertexMovers[0]),a=c.target;for(c=0;c<b.length;c++){var d=b[c];if(d.graphic.getDojoShape().getNode()===a)return d}},_moveStartHandler:function(c){var b=c.ptIndex,a=c.segLength-1,d=c.relatedGraphic.geometry.points;c=d.splice(b,1);d.push(c[0]);
d=this._vertexMovers[0];for(c=a;c>b;c--)--d[c].ptIndex;c=d.splice(b,1);d.push(c[0]);c[0].ptIndex=a},_moveStopHandler:function(c){this._updateRelatedGraphic(c,c.relatedGraphic,c.graphic.geometry,c.segIndex,c.ptIndex,c.segLength);this.toolbar._endOperation("VERTICES")},_updateRelatedGraphic:function(c,b,a,d,h,e,f,g){c=b.geometry;g?c.removePoint(h):c.setPoint(h,a);b.setGeometry(c)},_deleteMidpoints:function(c){}});h.PolylineVertexEditor=n(h,{declaredClass:"esri.toolbars._PolylineVertexEditor",minLength:2,
_getSegments:function(c){var b,a,d=c.paths,h=[];for(b=0;b<d.length;b++){var e=d[b],f=[];for(a=0;a<e.length;a++)f.push(c.getPoint(b,a));h.push(f)}return h},_getMidpointSegments:function(c){var b,a,d=c.paths,h=[],e=c.spatialReference;for(b=0;b<d.length;b++){var f=d[b],g=[];for(a=0;a<f.length-1;a++){var k=c.getPoint(b,a),r=c.getPoint(b,a+1),k=new l({x:(k.x+r.x)/2,y:(k.y+r.y)/2,spatialReference:e.toJson()});g.push(k)}h.push(g)}return h},_getControlPoints:function(c,b,a,d,h){var m=this.map,e,f;this._isNew(c)?
(c=d,d+=1,0<=c&&(e=m.toScreen(b.getPoint(a,c))),d<=h&&(f=m.toScreen(b.getPoint(a,d)))):(c=d-1,d+=1,0<=c&&(e=m.toScreen(b.getPoint(a,c))),d<h&&(f=m.toScreen(b.getPoint(a,d))));return[e,f]},_getAdjacentMidpoints:function(c,b){var a=[],d=c-1;0<=d&&a.push(d);c<b-1&&a.push(c);return a},_getAdjacentVertices:function(c,b){return[c,c+1]},_deleteMidpoints:function(c){var b=this._mpVertexMovers[c.segIndex],a=b.length-1,d=this._getAdjacentMidpoints(c.ptIndex,c.segLength).sort(),h,e=d[0];for(h=0;h<e;h++)--b[h].segLength;
for(h=e+1;h<b.length;h++){var f=b[h];--f.ptIndex;--f.segLength}if(1===d.length)b.splice(e,1)[0].destroy();else for(f=this._getAdjacentVertices(e,a),h=c.relatedGraphic.geometry.getPoint(c.segIndex,f[0]),f=c.relatedGraphic.geometry.getPoint(c.segIndex,f[1]),h=new l({x:(h.x+f.x)/2,y:(h.y+f.y)/2,spatialReference:h.spatialReference.toJson()}),c=new q(h,this._symbol2,this.graphic,c.segIndex,e,a,this,!0),b=b.splice(e,d.length,c),h=0;h<b.length;h++)b[h].destroy()},_updateRelatedGraphic:function(b,a,d,h,e,
f,g,k){b=a.geometry;g?b.insertPoint(h,e+1,r.fromJson(d.toJson())):k?b.removePoint(h,e):b.setPoint(h,e,r.fromJson(d.toJson()));a.setGeometry(b)}});h.PolygonVertexEditor=n(h,{declaredClass:"esri.toolbars._PolygonVertexEditor",minLength:3,_getSegments:function(b){var c,a,d=b.rings,h=[];for(c=0;c<d.length;c++){var e=d[c],f=[];for(a=0;a<e.length-1;a++)f.push(b.getPoint(c,a));h.push(f)}return h},_getMidpointSegments:function(b){var c,a,d=b.rings,h=[],e=b.spatialReference;for(c=0;c<d.length;c++){var f=d[c],
g=[];for(a=0;a<f.length-1;a++){var k=b.getPoint(c,a),r=b.getPoint(c,a+1),k=new l({x:(k.x+r.x)/2,y:(k.y+r.y)/2,spatialReference:e.toJson()});g.push(k)}h.push(g)}return h},_getControlPoints:function(b,a,d,h,e){var c=this.map;this._isNew(b)?b=h:(b=h-1,b=0>b?(e+b)%e:b);h=(h+1)%e;e=c.toScreen(a.getPoint(d,b));a=c.toScreen(a.getPoint(d,h));return[e,a]},_getAdjacentMidpoints:function(b,a){var c=b-1;return[0>c?(a+c)%a:c,b]},_getAdjacentVertices:function(b,a){return[b,(b+1)%a]},_deleteMidpoints:function(b){var c=
b.ptIndex,a=this._mpVertexMovers[b.segIndex],d=a.length-1,h=this._getAdjacentMidpoints(c,b.segLength).sort(),e,f;f=h[0];var g=h[h.length-1];if(0===c)for(e=this._getAdjacentVertices(d-1,d),c=b.relatedGraphic.geometry.getPoint(b.segIndex,e[0]),e=b.relatedGraphic.geometry.getPoint(b.segIndex,e[1]),c=new l({x:(c.x+e.x)/2,y:(c.y+e.y)/2,spatialReference:c.spatialReference.toJson()}),b=new q(c,this._symbol2,this.graphic,b.segIndex,d-1,d,this,!0),a.splice(g,1,b)[0].destroy(),a.splice(f,1)[0].destroy(),h=
0;h<a.length-1;h++)f=a[h],--f.ptIndex,--f.segLength;else{e=this._getAdjacentVertices(f,d);c=b.relatedGraphic.geometry.getPoint(b.segIndex,e[0]);e=b.relatedGraphic.geometry.getPoint(b.segIndex,e[1]);c=new l({x:(c.x+e.x)/2,y:(c.y+e.y)/2,spatialReference:c.spatialReference.toJson()});b=new q(c,this._symbol2,this.graphic,b.segIndex,f,d,this,!0);g=a.splice(f,h.length,b);for(h=0;h<g.length;h++)g[h].destroy();for(h=0;h<f;h++)--a[h].segLength;for(h=f+1;h<a.length;h++)f=a[h],--f.ptIndex,--f.segLength}},_updateRelatedGraphic:function(b,
a,d,h,e,f,g,k){b=a.geometry;g?b.insertPoint(h,e+1,r.fromJson(d.toJson())):k?(b.removePoint(h,e),0===e&&b.setPoint(h,f-1,r.fromJson(b.getPoint(h,0).toJson()))):(b.setPoint(h,e,r.fromJson(d.toJson())),0===e&&b.setPoint(h,f,r.fromJson(d.toJson())));a.setGeometry(b)}});a("extend-esri")&&(k.setObject("toolbars._GraphicVertexEditor",h,e),k.setObject("toolbars._MultipointVertexEditor",h.MultipointVertexEditor,e),k.setObject("toolbars._PolylineVertexEditor",h.PolylineVertexEditor,e),k.setObject("toolbars._PolygonVertexEditor",
h.PolygonVertexEditor,e));return h})},"esri/toolbars/_VertexMover":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/sniff dojo/dom-style dojox/gfx/Moveable ../kernel ../PointerEvents ../sniff ../geometry/Point ../graphic ../geometry/webMercatorUtils".split(" "),function(n,k,g,p,a,d,f,e,q,l,r,b){n=n(null,{declaredClass:"esri.toolbars.VertexMover",constructor:function(b,c,a,d,e,f,g,k){this.point=b;this.symbol=c;this.relatedGraphic=a;this.segIndex=d;this.ptIndex=e;this.segLength=
f;this.editor=g;this.map=g.map;this._scratchGL=g.toolbar._scratchGL;this._placeholder=k||!1;this._type=a.geometry.type;this._init();this._enable()},refresh:function(b){if(b||this._needRefresh())this._disable(),this._enable()},destroy:function(){this._disable();this.graphic&&this._scratchGL.remove(this.graphic);this.point=this.symbol=this.graphic=this.relatedGraphic=this.segIndex=this.ptIndex=this.segLength=this.editor=this.map=this._scratchGL=null},_init:function(){var b=new l(this.point.toJson()),
b=new r(b,this.symbol);switch(this._type){case "multipoint":b._shape=this.relatedGraphic.getDojoShape().children[this.ptIndex];break;case "polyline":case "polygon":this._scratchGL.add(b)}this.graphic=b},_enable:function(){var b=this.graphic.getDojoShape();b&&(b._hasMover=!0,this._moveable=this._getMoveable(b),(b=b.getEventSource())&&a.set(b,"cursor",this.editor.toolbar._cursors[this._placeholder?"move-gv":"move-v"]))},_disable:function(){var b=this._moveable;if(b){g.disconnect(this._startHandle);
g.disconnect(this._firstHandle);g.disconnect(this._movingHandle);g.disconnect(this._stopHandle);var c=b.shape;c&&(c=c.getEventSource())&&a.set(c,"cursor","inherit");b.destroy();this._moveable=null}},_needRefresh:function(){var b=this.graphic.getDojoShape(),c=!1;if(b)switch(this._type){case "multipoint":var a=this.relatedGraphic.getDojoShape();a&&(a=a.children[this.ptIndex],b!==a&&(this.graphic._shape=a,c=!0));break;case "polyline":case "polygon":c=!b._hasMover}return c},_getMoveable:function(b){b=
new d(b,p("mac")&&p("ff")&&!q("esri-touch")&&{leftButtonOnly:!0});this._startHandle=g.connect(b,"onMoveStart",this,this._moveStartHandler);this._firstHandle=g.connect(b,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=g.connect(b,"onMoving",this,this._movingHandler);this._stopHandle=g.connect(b,"onMoveStop",this,this._moveStopHandler);return b},_getPtIndex:function(){return this.ptIndex+(this._placeholder?1:0)},_getInfo:function(){return{graphic:this.graphic,isGhost:this._placeholder,
segmentIndex:this.segIndex,pointIndex:this._getPtIndex()}},_moveStartHandler:function(b){var c=this.map;c.snappingManager&&c.snappingManager._setUpSnapping();this.editor.toolbar._deactivateScrollWheel();b.shape.moveToFront();this.constructor.onMoveStart(this);this.editor.toolbar.onVertexMoveStart(this.relatedGraphic,this._getInfo())},_firstMoveHandler:function(b){var c=b.shape,a=this._getControlEdges(),d=this._scratchGL._div,h,e=[],f=b.host.shape._wrapOffsets[0]||0;for(h=0;h<a.length;h++){var g=a[h];
g.x1+=f;g.x2+=f;e.push([d.createLine({x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2}).setStroke(this.editor._lineStroke),g.x1,g.y1,g.x2,g.y2])}c._lines=e;b.shape.moveToFront();this.constructor.onFirstMove(this);this.editor.toolbar.onVertexFirstMove(this.relatedGraphic,this._getInfo())},_movingHandler:function(b,c,a){c=this.map;var d;q("esri-pointer")?d=c.navigationManager.pointerEvents._processTouchEvent(a,a):a&&"pointermove"===a.type&&(d=e.prototype._processTouchEvent.call({map:c},a,a));d&&c.snappingManager&&
c.snappingManager._onSnappingMouseMoveHandler(d);a=b.shape;b=a.getTransform();a=a._lines;for(d=0;d<a.length;d++)c=a[d],c[0].setShape({x1:c[1]+b.dx,y1:c[2]+b.dy,x2:c[3],y2:c[4]});this.editor.toolbar.onVertexMove(this.relatedGraphic,this._getInfo(),b)},_moveStopHandler:function(a){a=a.shape;var c=this.editor.toolbar,d=a.getTransform(),h=this.map,e=this.graphic,f=c._geo?b.geographicToWebMercator(e.geometry):e.geometry;c._activateScrollWheel();var g,k=a._lines;if(k){for(g=0;g<k.length;g++)k[g][0].removeShape();
a._lines=null}g=!1;var k=!0,r=this._getInfo();d&&(d.dx||d.dy)?this._placeholder&&(this._placeholder=!1,g=!0):k=!1;var q;h.snappingManager&&(q=h.snappingManager._snappingPoint);q=q||h.toMap(h.toScreen(f).offset(d.dx,d.dy));h.snappingManager&&h.snappingManager._killOffSnapping();a.setTransform(null);e.setGeometry(c._geo?b.webMercatorToGeographic(q,!0):q);this.constructor.onMoveStop(this,d);c.onVertexMoveStop(this.relatedGraphic,r,d);if(!k)c.onVertexClick(this.relatedGraphic,r);if(g)c.onVertexAdd(this.relatedGraphic,
this._getInfo())},_getControlEdges:function(){var b=this.map,a=this.relatedGraphic.geometry,d=this.segIndex,e=this.ptIndex,f=this.segLength,g=this._scratchGL._getTransform(),k=g.dx,g=g.dy,r=b.toScreen(this.graphic.geometry),b=r.x-k,r=r.y-g,q=[],a=this.editor._getControlPoints(this,a,d,e,f);a[0]&&q.push({x1:b,y1:r,x2:a[0].x-k,y2:a[0].y-g});a[1]&&q.push({x1:b,y1:r,x2:a[1].x-k,y2:a[1].y-g});return q}});q("extend-esri")&&k.setObject("toolbars.VertexMover",n,f);k.mixin(n,{onMoveStart:function(){},onFirstMove:function(){},
onMoveStop:function(){}});return n})},"esri/toolbars/TextEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/event dojo/has dojo/dom-construct dojo/dom-class dojo/dom-style dojo/keys ../kernel".split(" "),function(n,k,g,p,a,d,f,e,q,l){n=n(null,{declaredClass:"esri.toolbars.TextEditor",constructor:function(a,b,d){this._graphic=a;this._map=b;this._toolbar=d;this._enable(this._graphic)},destroy:function(){this._disable()},onEditStart:function(){},onEditEnd:function(){},
_enable:function(a){this._editBox?(g.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null):(this._map.navigationManager.setImmediateClick(!0),this._addEditBoxHandler=g.connect(a.getLayer(),"onDblClick",this,function(b){this._map.navigationManager.setImmediateClick(!1);b.graphic==a&&(p.stop(b),g.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=null,this._addTextBox(a))}))},_disable:function(){this._applyEdit();this._addEditBoxHandler&&(g.disconnect(this._addEditBoxHandler),this._addEditBoxHandler=
null);this._removeTextBox();this.onEditEnd(this._graphic);this._toolbar.onTextEditEnd(this._graphic)},_addTextBox:function(a,b){if(!this._editBox){var h;a.symbol.text||(a.symbol.text="Tempt text",a.setSymbol(a.symbol),h="");var c=this._createInputTextStyle(a,this._map);""!==h&&(h=b||a.symbol.text);this._editBox=d.create("input",{type:"text",value:h});e.set(this._editBox,c);f.add(this._editBox,"esriTextEditorInput");this._map.container.appendChild(this._editBox);this._editBox.focus();this._editBoxKeyHandler=
g.connect(this._editBox,"onkeyup",k.hitch(this,function(b){b.keyCode!=q.ENTER&&b.keyCode!==q.TAB||this._disable()}));this._editBoxBlurHandler=g.connect(this._editBox,"onblur",k.hitch(this,function(b){this._disable()}));a.symbol.text="";a.setSymbol(a.symbol);a.hide();var m=this._editBox;this._disableBoxHandler||(this._disableBoxHandler=this._map.on("zoom-start",k.hitch(this,function(){this._disable()})));this._moveBoxHandler=this._map.on("pan",function(b){e.set(m,{left:this._editBoxLeft+b.delta.x+
"px",top:this._editBoxTop+b.delta.y+"px"})});this._moveBoxStartHandler=this._map.on("pan-start",function(){this._editBoxLeft=parseFloat(e.get(m,"left"));this._editBoxTop=parseFloat(e.get(m,"top"))});this.onEditStart(a,this._editBox);this._toolbar.onTextEditStart(a,this._editBox)}},_removeTextBox:function(){this._editBoxBlurHandler&&(g.disconnect(this._editBoxBlurHandler),this._editBoxBlurHandler=null);this._editBox&&(this._editBox.parentNode.removeChild(this._editBox),this._editBox=null);this._disableBoxHandler&&
(this._disableBoxHandler.remove(),this._disableBoxHandler=null);this._moveBoxHandler&&(this._moveBoxHandler.remove(),this._moveBoxHandler=null);this._moveBoxStartHandler&&(this._moveBoxStartHandler.remove(),this._moveBoxStartHandler=null);this._editBoxKeyHandler&&(g.disconnect(this._editBoxKeyHandler),this._editBoxKeyHandler=null)},_createInputTextStyle:function(a,b){b=a.getDojoShape().getTransformedBoundingBox();var d=a.symbol.font;return{"font-family":d.family,"font-size":d.size+"px","font-style":d.style,
"font-variant":d.variant,"font-weight":d.weight,left:b[0].x+"px",top:b[0].y+"px",width:Math.abs(b[0].x-b[1].x)/Math.cos(a.symbol.angle/180*Math.PI)+"px"}},_applyEdit:function(){if(this._editBox)if(this._editBox.value){this._graphic.show();var a=this._graphic.symbol;a.text=this._editBox.value;this._graphic.setSymbol(a)}else this._graphic.getLayer().remove(this._graphic)}});a("extend-esri")&&k.setObject("toolbars.TextEditor",n,l);return n})},"widgets/GriddedReferenceGraphic/js/GridSettings":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/on dojo/dom-style ./ColorPickerEditor ./FontSetting jimu/BaseWidget jimu/dijit/TabContainer dijit/_WidgetsInTemplateMixin dojo/text!../templates/GridSettings.html dojo/_base/lang dojo/Evented dojo/dom-class dijit/form/Select".split(" "),
function(n,k,g,p,a,d,f,e,q,l,r,b,h,c){return n([e,l,h],{baseClass:"jimu-widget-GRGDrafter-Settings",templateString:r,selectedGridSettings:{},_defaultColor:"#1a299c",_defaultTextSize:12,_defaultFont:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},fontSize:12,textColor:"#2f4f4f"},gridSettingsOptions:{cellShape:["default","hexagon"],cellUnits:"meters kilometers miles nautical-miles yards feet".split(" "),labelStartPosition:["lowerLeft","lowerRight","upperLeft","upperRight"],labelType:["alphaNumeric",
"alphaAlpha","numeric"],labelTypeWithRefSys:["gridReferenceSystem","alphaNumeric","alphaAlpha","numeric"],labelDirection:["horizontal","vertical"],gridOrigin:["center","lowerLeft","lowerRight","upperLeft","upperRight"],referenceSystem:["MGRS","USNG"]},constructor:function(a){b.mixin(this,a)},startup:function(){this.tab=new q({tabs:[{title:this.nls.gridSettingsLabel,content:this.gridTab},{title:this.nls.labelSettingsLabel,content:this.labelTab}],selected:this.nls.gridTabLabel});this.tab.placeAt(this.tabsContainer);
this.tab.startup();this.gridOutlineColorPicker=new d({nls:this.nls},this.cellOutlineColorPicker);a.set(this.gridOutlineColorPicker.slider.domNode,"width","");this.gridOutlineColorPicker.setValues({color:this.config.grg.cellOutline.color,transparency:this.config.grg.cellOutline.transparency});this.gridOutlineColorPicker.startup();this.gridFillColorPicker=new d({nls:this.nls},this.cellFillColorPicker);a.set(this.gridFillColorPicker.slider.domNode,"width","");this.gridFillColorPicker.setValues({color:this.config.grg.cellFill.color,
transparency:this.config.grg.cellFill.transparency});this.gridFillColorPicker.startup();this.fontSetting=new f({config:this.config.grg.font||this._defaultFont,nls:this.nls},this.fontSettingNode);this.fontSetting.startup();this._loadOptionsForDropDown(this.cellShape,this.gridSettingsOptions.cellShape);this._loadOptionsForDropDown(this.labelStartPosition,this.gridSettingsOptions.labelStartPosition);this._loadOptionsForDropDown(this.cellUnits,this.gridSettingsOptions.cellUnits);this._loadOptionsForDropDown(this.labelType,
this.gridSettingsOptions.labelType);this._loadOptionsForDropDown(this.labelTypeWithRefSys,this.gridSettingsOptions.labelTypeWithRefSys);this._loadOptionsForDropDown(this.labelDirection,this.gridSettingsOptions.labelDirection);this._loadOptionsForDropDown(this.gridOrigin,this.gridSettingsOptions.gridOrigin);this._loadOptionsForDropDown(this.referenceSystem,this.gridSettingsOptions.referenceSystem);this.config.grg&&(this.cellShape.setValue(this.config.grg.cellShape),this.cellUnits.setValue(this.config.grg.cellUnits),
this.gridOrigin.setValue(this.config.grg.gridOrigin),this.labelType.setValue(this.config.grg.labelType),this.labelDirection.setValue(this.config.grg.labelDirection),this.labelStartPosition.setValue(this.config.grg.labelOrigin),this.referenceSystem.setValue(this.config.grg.referenceSystem),"hexagon"===this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1));this.onGridsettingsChanged()},postCreate:function(){this.inherited(arguments);
c.add(this.domNode,"GRGDrafterSettingsContainer GRGDrafterFullWidth");this._handleClickEvents()},_handleClickEvents:function(){this.own(p(this.cellShape,"change",b.hitch(this,function(){"hexagon"===this.cellShape.get("value")?(this.labelDirection.set("disabled",!0),this.labelDirection.setValue("horizontal")):this.labelDirection.set("disabled",!1)})))},_loadOptionsForDropDown:function(a,c){var d=[],h;k.forEach(c,b.hitch(this,function(b){h=this.nls.gridSettings[b].hasOwnProperty("label")?{value:b,label:this.nls.gridSettings[b].label}:
{value:b,label:this.nls.gridSettings[b]};d.push(h)}));a.addOption(d)},_isSettingsChanged:function(){var b=!1;this.selectedGridSettings.cellShape!==this.cellShape.get("value")?b=!0:this.selectedGridSettings.labelStartPosition!==this.labelStartPosition.get("value")?b=!0:this.selectedGridSettings.cellUnits!==this.cellUnits.get("value")?b=!0:this.selectedGridSettings.labelType!==this.labelType.get("value")?b=!0:this.selectedGridSettings.labelTypeWithRefSys!==this.labelTypeWithRefSys.get("value")?b=!0:
this.selectedGridSettings.labelDirection!==this.labelDirection.get("value")?b=!0:this.selectedGridSettings.gridOrigin!==this.gridOrigin.get("value")?b=!0:this.selectedGridSettings.referenceSystem!==this.referenceSystem.get("value")?b=!0:this.selectedGridSettings.gridOutlineColor!==this.gridOutlineColorPicker.getValues().color?b=!0:this.selectedGridSettings.gridOutlineTransparency!==this.gridOutlineColorPicker.getValues().transparency?b=!0:this.selectedGridSettings.gridFillColor!==this.gridFillColorPicker.getValues().color?
b=!0:this.selectedGridSettings.gridFillTransparency!==this.gridFillColorPicker.getValues().transparency?b=!0:this.selectedGridSettings.fontSettings!==this.fontSetting.getConfig()&&(b=!0);return b},onClose:function(){if(this._isSettingsChanged())this.onGridsettingsChanged()},onGridsettingsChanged:function(){this.selectedGridSettings={cellShape:this.cellShape.get("value"),labelStartPosition:this.labelStartPosition.get("value"),cellUnits:this.cellUnits.get("value"),labelType:this.labelType.get("value"),
labelTypeWithRefSys:this.labelTypeWithRefSys.get("value"),labelDirection:this.labelDirection.get("value"),gridOrigin:this.gridOrigin.get("value"),referenceSystem:this.referenceSystem.get("value"),gridOutlineColor:this.gridOutlineColorPicker.getValues().color,gridOutlineTransparency:this.gridOutlineColorPicker.getValues().transparency,gridFillColor:this.gridFillColorPicker.getValues().color,gridFillTransparency:this.gridFillColorPicker.getValues().transparency,fontSettings:b.clone(this.fontSetting.getConfig())};
this.emit("gridSettingsChanged",this.selectedGridSettings)}})})},"widgets/GriddedReferenceGraphic/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/on dojo/query dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ColorPickerEditor.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),function(n,k,g,p,a,d,f,e,q,l,r,b){return n([f,e,q],{_defaultColor:"#485566",
templateString:l,nls:null,postCreate:function(){this.colorPicker=new b({color:this._defaultColor,width:this._defaultWidth},this.colorPicker);this.colorPicker.startup();this.slider=new r({name:"slider",value:100,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;"},this.sliderBar);this.slider.startup();this.inherited(arguments)},startup:function(){this.own(p(this.slider,"change",k.hitch(this,function(b){!1===this._isSameVal()&&this.spinner.setValue(b)})));
this.own(p(this.spinner,"change",k.hitch(this,function(b){!1===this._isSameVal()&&this.slider.setValue(b)})));this._stylePolyfill();this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var b=null,a=null;(a=this.colorPicker.getColor())&&a.toHex&&(b=a.toHex());a=this.spinner.getValue()/100;return{color:b,transparency:a}},setValues:function(b){if("object"===typeof b||"string"===typeof b)this.colorPicker.setColor(new g(b.color)),
b.transparency="undefined"===typeof b.transparency?0:100*b.transparency,this.slider.setValue(b.transparency),this.spinner.setValue(b.transparency)},_stylePolyfill:function(){var b=a(".dijitSliderLeftBumper",this.domNode)[0];b&&b.parentNode&&d.setStyle(b.parentNode,"background-color","#24b5cc")}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(n,k,g,p,a,d,f,e,q,l,r){return n([k,g],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){q.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;a.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;a.addClass(this.domNode,"disable")},isPartOfPopup:function(b){var d=this.tooltipDialog.domNode;return b===d||a.isDescendant(b,d)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},_showTooltipDialog:function(){q.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.around?this.around:
this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){q.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var b=a.create("div");this.tooltipDialog=new e({content:b});a.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var h=new l({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,closeDialogWhenChange:!0},recordUID:this.recordUID,
onChange:p.hitch(this,function(b){b&&(b=new f(b),this.setColor(b),this.onChange(b))})});h.placeAt(b);h.startup();this.own(d(h,"close",p.hitch(this,function(){this._hideTooltipDialog()})));this.own(d(h,"change-style",p.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(d(this.domNode,"click",p.hitch(this,function(b){b.stopPropagation();b.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==this._ENABLE&&this._showTooltipDialog()})));this.own(d(document,
"click",p.hitch(this,function(b){this.isPartOfPopup(b.srcElement||b.target)||this._hideTooltipDialog()})));this.picker=h},setColor:function(b){if(b instanceof f){null===this.color&&!0===this.showLabel&&this._changeLabel(b);var d=b.toHex();this.color=b;a.setStyle(this.domNode,"backgroundColor",d);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(d,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},_changeLabel:function(b){a.empty(this.domNode);
a.create("span",{innerHTML:b.toHex(),className:"color-label",style:{color:r.invertColor(b.toHex())}},this.domNode)},onChange:function(b){b&&this.showLabel&&this._changeLabel(b)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(b){this.domNode.title=b},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/GriddedReferenceGraphic/js/FontSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/_base/array dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/FontSetting.html jimu/dijit/ColorPickerPopup dijit/form/HorizontalSlider ./TransparencyEditor dojo/store/Memory dijit/form/ComboBox jimu/dijit/CheckBox jimu/dijit/ImageChooser".split(" "),
function(n,k,g,p,a,d,f,e,q,l,r,b,h,c){return n([f,e,q,d],{templateString:l,nls:null,_FONTS:null,_MIN_TEXT_SIZE:12,_MAX_TEXT_SIZE:48,_INTERVAL_TEXT_SIZE:2,_DEFAULT_CONFIG:null,postCreate:function(){this.inherited(arguments);this._FONTS="Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";");this._DEFAULT_CONFIG={font:{fontFamily:this._FONTS[0],bold:!1,italic:!1,underline:!1},fontSize:"24",textColor:"#282828",haloSize:1,haloColor:"#FFFFFF",haloOn:!0,labelTransparency:1};
this.config=k.mixin(k.clone(this._DEFAULT_CONFIG),this.config);a.forEach(this._FONTS,k.hitch(this,function(b){this.fontSelect.addOption({value:b,label:b})}));for(var d=new c({}),e=this._MIN_TEXT_SIZE,f=this._MAX_TEXT_SIZE;e<=f;e+=this._INTERVAL_TEXT_SIZE)d.put({id:e,name:e});this.textSizeSelect.store=d;this.textSizeSelect.validator=k.hitch(this,function(){var b=this.textSizeSelect.getValue();return null!==b&&""!==b?!isNaN(b):!1});this.textSizeSlider=new b({name:"slider",value:0,minimum:this._MIN_TEXT_SIZE,
maximum:this._MAX_TEXT_SIZE,discreteValues:this.textSizeSelect.store.data.length+1,intermediateChanges:!0,showButtons:!1,style:"display: inline-block;"},this.sliderBar);this.textSizeSlider.startup();this.textColorPicker=new r({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showCoustomRecord:!0},recordUID:this.recordUID});this.textColorPicker.placeAt(this.textColorBtn);this.textColorPicker.startup();this.labelTransparency=new h({},this.transparencySlider);this.labelTransparency.startup();
d=new c({});e=1;for(f=10;e<=f;e+=1)d.put({id:e,name:e});this.haloSizeSelect.store=d;this.haloSizeSelect.validator=k.hitch(this,function(){var b=this.haloSizeSelect.getValue();return null!==b&&""!==b?!isNaN(b):!1});this.haloColorPicker=new r({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showCoustomRecord:!0}});this.haloColorPicker.placeAt(this.haloColorBtn);this.haloColorPicker.startup();this.own(g(this.fontSelect,"change",k.hitch(this,function(b){if(this.config.font.fontFamily!==
b)this.onSettingChange({font:{fontFamily:b,bold:this.config.font.bold,italic:this.config.font.italic,underline:this.config.font.underline}})})));this._initAppearance();this.own(g(this.bold,"click",k.hitch(this,function(){var b=!p.hasClass(this.bold,"selected");this.fontBtnClickd({bold:b});this.onSettingChange({font:{fontFamily:this.config.font.fontFamily,bold:b,italic:this.config.font.italic,underline:this.config.font.underline}})})));this.own(g(this.italic,"click",k.hitch(this,function(){var b=!p.hasClass(this.italic,
"selected");this.fontBtnClickd({italic:b});this.onSettingChange({font:{fontFamily:this.config.font.fontFamily,bold:this.config.font.bold,italic:b,underline:this.config.font.underline}})})));this.own(g(this.underline,"click",k.hitch(this,function(){var b=!p.hasClass(this.underline,"selected");this.fontBtnClickd({underline:b});this.onSettingChange({font:{fontFamily:this.config.font.fontFamily,bold:this.config.font.bold,italic:this.config.font.italic,underline:b}})})));this.own(g(this.textSizeSelect,
"change",k.hitch(this,function(b){this.config.fontSize!==b&&!1!==this.textSizeSelect.isValid()&&(this.setTextSize(b),this.onSettingChange({fontSize:b}))})));this.own(g(this.textSizeSlider,"change",k.hitch(this,function(b){this.config.fontSize!==b&&(this.setTextSize(b),this.onSettingChange({fontSize:b}))})));this.own(g(this.textColorPicker,"change",k.hitch(this,function(b){if(this.config.textColor!==b)this.onSettingChange({textColor:b.toHex()})})));this.own(this.labelTransparency.watch("transparency",
k.hitch(this,function(){this.onSettingChange({labelTransparency:this.labelTransparency.getValues().transparency})})));this.own(g(this.haloSizeSelect,"change",k.hitch(this,function(b){if(this.config.haloSize!==b&&!1!==this.haloSizeSelect.isValid())this.onSettingChange({haloSize:b})})));this.own(g(this.haloColorPicker,"change",k.hitch(this,function(b){if(this.config.haloColor!==b)this.onSettingChange({haloColor:b.toHex()})})));this.own(g(this.showHalo,"change",k.hitch(this,function(){this.onSettingChange({haloOn:this.showHalo.checked})})))},
startup:function(){this.inherited(arguments);this.setConfig(this.config);this.refresh()},onSettingChange:function(b){this.config=k.mixin(this.config,b);this.onChange(this.config)},onChange:function(b){this.emit("change",b)},refresh:function(){this.onSettingChange({})},isValid:function(){return!1===this.textSizeSelect.isValid()?!1:!0},getConfig:function(){return this.isValid()?this.config:!1},setConfig:function(b){if("undefined"!==b){"undefined"!==typeof b.font&&(this.config.font=b.font,this.config.font.fontFamily&&
this.fontSelect.set("value",this.config.font.fontFamily),this.fontBtnClickd(this.config.font));"undefined"!==typeof b.fontSize&&(this.config.fontSize=b.fontSize,this.setTextSize(this.config.fontSize));if("undefined"===typeof b.textColor||""===b.textColor)b.textColor=this._DEFAULT_CONFIG.textColor;this.config.textColor=b.textColor;if("undefined"===typeof b.labelTransparency||""===b.labelTransparency)b.labelTransparency=this._DEFAULT_CONFIG.labelTransparency;this.config.labelTransparency=b.labelTransparency;
this.labelTransparency.setValues({transparency:this.config.labelTransparency});if("undefined"===typeof b.haloSize||""===b.haloSize)b.haloSize=this._DEFAULT_CONFIG.haloSize;this.config.haloSize=b.haloSize;this.haloSizeSelect.set("value",b.haloSize);if("undefined"===typeof b.haloColor||""===b.haloColor)b.haloColor=this._DEFAULT_CONFIG.haloColor;this.config.haloColor=b.haloColor;p.setStyle(this.textColorPicker.domNode,"backgroundColor",this.config.textColor);this.textColorPicker.picker.refreshRecords();
this.textColorPicker.picker.setColor(this.config.textColor,!1,!0);p.setStyle(this.haloColorPicker.domNode,"backgroundColor",this.config.haloColor);this.haloColorPicker.picker.refreshRecords();this.haloColorPicker.picker.setColor(this.config.haloColor,!1,!0);if("undefined"===typeof b.haloOn||""===b.haloOn)b.haloOn=this._DEFAULT_CONFIG.haloOn;this.showHalo.set("checked",this.config.haloOn)}},setTextSize:function(b){b!==this.textSizeSelect.getValue()&&this.textSizeSelect.set("value",b);b!==this.textSizeSlider.getValue()&&
(b>this._MAX_TEXT_SIZE?b=this._MAX_TEXT_SIZE:b<this._MIN_TEXT_SIZE&&(b=this._MIN_TEXT_SIZE),this.textSizeSlider.set("value",b))},fontBtnClickd:function(b){!0===b.bold?p.addClass(this.bold,"selected"):!1===b.bold&&p.removeClass(this.bold,"selected");!0===b.italic?p.addClass(this.italic,"selected"):!1===b.italic&&p.removeClass(this.italic,"selected");!0===b.underline?p.addClass(this.underline,"selected"):!1===b.underline&&p.removeClass(this.underline,"selected")},_initAppearance:function(){this.appearance&&
(!1===this.appearance.bold&&p.addClass(this.bold,"hide"),!1===this.appearance.italic&&p.addClass(this.italic,"hide"),!1===this.appearance.underline&&p.addClass(this.underline,"hide"))}})})},"widgets/GriddedReferenceGraphic/js/TransparencyEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/query dojo/Stateful dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/TransparencyEditor.html dijit/form/HorizontalSlider dijit/form/NumberSpinner".split(" "),
function(n,k,g,p,a,d,f,e,q,l,r){return n([a,f,e,q],{templateString:l,transparency:1,postCreate:function(){this.slider=new r({name:"slider",value:0,minimum:0,maximum:100,discreteValues:101,intermediateChanges:!0,showButtons:!1,style:"width:140px;display: inline-block;"},this.sliderBar);this.slider.startup();this.inherited(arguments)},startup:function(){this.own(g(this.slider,"change",k.hitch(this,function(b){!1===this._isSameVal()&&(this.spinner.setValue(b),this._set("transparency",b/100))})));this.own(g(this.spinner,
"change",k.hitch(this,function(b){!1===this._isSameVal()&&(this.slider.setValue(b),this._set("transparency",b/100))})));this._stylePolyfill();this.inherited(arguments)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var b=null,b=this.spinner.getValue()/100;return{transparency:b}},setValues:function(b){if("object"===typeof b||"string"===typeof b)b.transparency="undefined"===typeof b.transparency?0:100*b.transparency,this.slider.setValue(b.transparency),
this.spinner.setValue(b.transparency)},_stylePolyfill:function(){var b=p(".dijitSliderLeftBumper",this.domNode)[0];b&&b.parentNode&&d.setStyle(b.parentNode,"background-color","#24b5cc")}})})},"widgets/GriddedReferenceGraphic/js/CoordinateInput":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","./Coordinate"],function(n,k,g){return n("test",k,{required:!0,inputCoordinate:null,invalidMessage:"Blah Blah Blah",validateOnInput:!0,_validateOnInputSetter:function(g){this.validateOnInput=
"true"===g},clear:function(){this.set("validateOnInput",!0);this.set("value","");this.inputCoordinate.coordinateEsriGeometry=null},constructor:function(k){n.safeMixin(this,k);this.inherited(arguments);this.inputCoordinate=new g({nls:this.nls,appConfig:arguments[0].appConfig})},postMixinProperties:function(){},validator:function(g){if(!this.validateOnInput)return!0;this.inputCoordinate.set("inputString",g);this.set("invalidMessage",this.inputCoordinate.message);this.set("promptMessage",this.inputCoordinate.message);
return!0}})})},"widgets/GriddedReferenceGraphic/js/Coordinate":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/Stateful dojo/Deferred esri/geometry/Point esri/SpatialReference esri/geometry/webMercatorUtils jimu/dijit/Message ./util ./dialogConfirm ./ConfirmNotation".split(" "),function(n,k,g,p,a,d,f,e,q,l,r,b){return n([p],{formatPrefix:!1,_formatPrefixSetter:function(b){this.formatPrefix=b},inputString:null,_inputStringSetter:function(b){this.inputString=b},formatString:"YN XE",
_formatStringSetter:function(b){this.formatString=b},inputType:"UNKNOWN",formatType:"DD",_formatTypeSetter:function(b){this.formatType=b;this.getFormattedValue()},outputString:"",coordinateEsriGeometry:null,_coordinateEsriGeometrySetter:function(b){null!==b&&(this.coordinateEsriGeometry=b=4326!==b.spatialReference.wkid?e.webMercatorToGeographic(b):b,this.getFormattedValue())},constructor:function(b){n.safeMixin(this,b);this.util=new l(b)},getInputType:function(){this.inputTypeDef=new a;var e=this.util.getCleanInput(this.inputString);
this.util.getCoordinateType(e).then(g.hitch(this,function(a){if(a)if(1===a.length){var c=this.processCoordTextInput(e,a[0],!1);this.util.getXYNotation(c,a[0].conversionType).then(g.hitch(this,function(b){0>=b.length||!b[0][0]&&0!==b[0][0]?(this.hasError=!0,this.valid=!1):(this.valid=this.isManual=!0,this.formatType=a[0].conversionType,this.inputType=a[0].conversionType,this.coordinateEsriGeometry=new d(b[0][0],b[0][1],new f({wkid:4326})));this.message="Invalid Coordinate";this.inputTypeDef.resolve(this)}));
g.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message="Invalid Coordinate";this.inputTypeDef.resolve(this)})}else{var h=new r({nls:this.nls,title:this.nls.comfirmInputNotation,content:new b(a,{nls:this.nls}),style:"width: 400px",hasSkipCheckBox:!1});h.show().then(g.hitch(this,function(){var b=k.filter(a,function(b){return b.name===h.content.comboOptions.get("value")}),c=this.processCoordTextInput(e,b[0],!1);this.util.getXYNotation(c,b[0].conversionType).then(g.hitch(this,
function(b){0>=b.length||!b[0][0]&&0!==b[0][0]?(this.hasError=!0,this.valid=!1,this.message="Invalid Coordinate"):(this.valid=this.isManual=!0,this.inputType=a[0].conversionType,this.formatType=a[0].conversionType,this.coordinateEsriGeometry=new d(b[0][0],b[0][1],new f({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));g.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message="Invalid Coordinate";this.inputTypeDef.resolve(this)})},function(){this.inputTypeDef.reject()}))}else this.hasError=
!0,this.valid=!1,this.inputType="UNKNOWN",this.message="Invalid Coordinate",this.inputTypeDef.resolve(this)}));return this.inputTypeDef.promise},processCoordTextInput:function(b,a,d){var c=a.pattern.exec(b),e,h,f,g,m,k,r,l,n,p,t=!1,v=a.name;switch(a.name){case "DD":e=c[2];h=c[7];f=c[10];g=c[16];m=c[3].replace(/[,:]/,".");k=c[11].replace(/[,:]/,".");v="DD";break;case "DDrev":e=c[11];h=c[16];f=c[2];g=c[8];m=c[12].replace(/[,:]/,".");k=c[3].replace(/[,:]/,".");v="DD";break;case "DDM":e=c[2];h=c[7];f=
c[10];g=c[15];m=c[3];r=c[4].replace(/[,:]/,".");k=c[11];l=c[12].replace(/[,:]/,".");v="DDM";break;case "DDMrev":e=c[10];h=c[15];f=c[2];g=c[7];m=c[11];r=c[12].replace(/[,:]/,".");k=c[3];l=c[4].replace(/[,:]/,".");v="DDM";break;case "DMS":e=c[2];h=c[8];f=c[11];g=c[17];m=c[3];r=c[4];n=c[5].replace(/[,:]/,".");k=c[12];l=c[13];p=c[14].replace(/[,:]/,".");v="DMS";break;case "DMSrev":e=c[11],h=c[17],f=c[2],g=c[8],m=c[12],r=c[13],n=c[14].replace(/[,:]/,"."),k=c[3],l=c[4],p=c[5].replace(/[,:]/,"."),v="DMS"}e&&
h?(t=!0,e=(new RegExp(/[Ss-]/)).test(e)?"-":"+"):e=e&&(new RegExp(/[Ss-]/)).test(e)?"-":h&&(new RegExp(/[Ss-]/)).test(h)?"-":"+";f&&g?(t=!0,f=(new RegExp(/[Ww-]/)).test(f)?"-":"+"):f=f&&(new RegExp(/[Ww-]/)).test(f)?"-":g&&(new RegExp(/[Ww-]/)).test(g)?"-":"+";t&&(d||new q({message:this.nls.prefixSuffixError}));switch(v){case "DD":b=e+m+","+f+k;break;case "DDM":b=e+m+" "+r+","+f+k+" "+l;break;case "DMS":b=e+m+" "+r+" "+n+","+f+k+" "+l+" "+p}return b},getInputTypeSync:function(){return null!==this.util.getCoordinateType(this.inputString)},
getFormattedValue:function(){this.coordinateEsriGeometry&&this.util.getCoordValues({x:this.coordinateEsriGeometry.x,y:this.coordinateEsriGeometry.y},this.formatType,6).then(g.hitch(this,function(b){this.set("outputString",this.getCoordUI(b))}))},getCoordUI:function(b){var a=this.get("formatPrefix"),d;switch(this.formatType){case "DD":b=this.util.getFormattedDDStr(b,this.formatString,a);d=b.formatResult;break;case "DDM":b=this.util.getFormattedDDMStr(b,this.formatString,a);d=b.formatResult;break;case "DMS":b=
this.util.getFormattedDMSStr(b,this.formatString,a);d=b.formatResult;break;case "USNG":b=this.util.getFormattedUSNGStr(b,this.formatString,a);d=b.formatResult;break;case "MGRS":b=this.util.getFormattedMGRSStr(b,this.formatString,a);d=b.formatResult;break;case "GARS":b=this.util.getFormattedGARSStr(b,this.formatString,a);d=b.formatResult;break;case "GEOREF":b=this.util.getFormattedGEOREFStr(b,this.formatString,a);d=b.formatResult;break;case "UTM":b=this.util.getFormattedUTMStr(b,this.formatString,
a);d=b.formatResult;break;case "UTM (H)":b=this.util.getFormattedUTMHStr(b,this.formatString,a),d=b.formatResult}return d}})})},"widgets/GriddedReferenceGraphic/js/util":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","esri/tasks/GeometryService"],function(n,k,g,p){return n(null,{constructor:function(a){this.appConfig=a.appConfig;this.nls=a.nls;(a=this.appConfig.geometryService)||(a="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=
new p(a)},getCleanInput:function(a){a=a.replace(/\n/g,"");a=a.replace(/\s+/g," ").trim();return a.toUpperCase()},getCoordValues:function(a,d,f){var e=new g;a={sr:4326,coordinates:[[a.x,a.y]],conversionType:d.name?d.name:d,numOfDigits:f||6,rounding:!0,addSpaces:!1};switch(d){case "DD":a.numOfDigits=6;break;case "USNG":a.numOfDigits=5;break;case "MGRS":a.conversionMode="mgrsDefault";a.numOfDigits=5;break;case "UTM (H)":a.conversionType="utm";a.conversionMode="utmNorthSouth";a.addSpaces=!0;break;case "UTM":a.conversionType=
"utm";a.conversionMode="utmDefault";a.addSpaces=!0;break;case "GARS":a.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(a).then(function(a){e.resolve(a)},function(){e.resolve(null)});return e.promise},getXYNotation:function(a,d){var f=new g,e;e=d.name?d.name:d;d={sr:4326,conversionType:e,strings:[]};switch(e){case "DD":case "DDM":case "DMS":d.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");d.strings.push(a);break;case "USNG":d.strings.push(a);d.addSpaces=
"false";break;case "MGRS":d.conversionMode="mgrsNewStyle";d.strings.push(a);d.addSpaces="false";break;case "UTM (H)":d.conversionType="utm";d.conversionMode="utmNorthSouth";d.strings.push(a);break;case "UTM":d.conversionType="utm";d.conversionMode="utmDefault";d.strings.push(a);break;case "GARS":d.conversionMode="garsCenter";d.strings.push(a);break;case "GEOREF":d.strings.push(a)}this.geomService.fromGeoCoordinateString(d).then(function(a){f.resolve(a)},function(){f.resolve(null)});return f.promise},
getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,
/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,
/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(a){return a.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),
notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(a){var d=this.getCleanInput(a);a=new g;var f=this.getNotations(),d=k.filter(f,function(a){return a.pattern.test(this.v)},{v:d});0<d.length?a.resolve(d):a.resolve(null);return a.promise},getFormattedDDStr:function(a,
d,f){var e={};e.sourceValue=a;e.sourceFormatString=d;a=a[0].split(/[ ,]+/);e.latdeg=a[0].replace(/[nNsS]/,"");e.londeg=a[1].replace(/[eEwW]/,"");f&&(e.latdeg="N"===a[0].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===a[1].slice(-1)?"-"+e.londeg:"+"+e.londeg);d=d.replace(/X/,e.londeg);d=d.replace(/[eEwW]/,a[1].slice(-1));d=d.replace(/[nNsS]/,a[0].slice(-1));d=d.replace(/Y/,e.latdeg);e.formatResult=d;return e},getFormattedDDMStr:function(a,d,f){var e={};e.sourceValue=a;e.sourceFormatString=d;e.parts=
a[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1].replace(/[nNsS]/,"");e.londeg=e.parts[2];e.lonmin=e.parts[3].replace(/[eEwW]/,"");f&&(e.latdeg="N"===e.parts[1].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===e.parts[3].slice(-1)?"-"+e.londeg:"+"+e.londeg);a=d.replace(/[EeWw]/,e.parts[3].slice(-1));a=a.replace(/Y/,e.lonmin);a=a.replace(/X/,e.londeg);a=a.replace(/[NnSs]/,e.parts[1].slice(-1));a=a.replace(/B/,e.latmin);a=a.replace(/A/,e.latdeg);e.formatResult=a;return e},getFormattedDMSStr:function(a,
d,f){var e={};e.sourceValue=a;e.sourceFormatString=d;e.parts=a[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1];e.latsec=e.parts[2].replace(/[NnSs]/,"");e.londeg=e.parts[3];e.lonmin=e.parts[4];e.lonsec=e.parts[5].replace(/[EWew]/,"");f&&(e.latdeg="N"===e.parts[2].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===e.parts[5].slice(-1)?"-"+e.londeg:"+"+e.londeg);a=d.replace(/A/,e.latdeg);a=a.replace(/B/,e.latmin);a=a.replace(/C/,e.latsec);a=a.replace(/X/,e.londeg);a=a.replace(/Y/,e.lonmin);
a=a.replace(/Z/,e.lonsec);a=a.replace(/[NnSs]/,e.parts[2].slice(-1));a=a.replace(/[EeWw]/,e.parts[5].slice(-1));e.formatResult=a;return e},getFormattedUSNGStr:function(a,d){var f={};f.sourceValue=a;f.sourceFormatString=d;a[0].match(/^[ABYZ]/)?f.gzd=a[0].match(/[ABYZ]/)[0].trim():f.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();f.grdsq=a[0].replace(f.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();f.easting=a[0].replace(f.gzd+f.grdsq,"").match(/^\d{1,5}/)[0].trim();f.northing=a[0].replace(f.gzd+f.grdsq,
"").match(/\d{1,5}$/)[0].trim();a=d.replace(/Y/,f.northing);a=a.replace(/X/,f.easting);a=a.replace(/S/,f.grdsq);a=a.replace(/Z/,f.gzd);f.formatResult=a;return f},getFormattedMGRSStr:function(a,d){var f={};f.sourceValue=a;f.sourceFormatString=d;a[0].match(/^[ABYZ]/)?f.gzd=a[0].match(/[ABYZ]/)[0].trim():f.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();f.grdsq=a[0].replace(f.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();f.easting=a[0].replace(f.gzd+f.grdsq,"").match(/^\d{1,5}/)[0].trim();f.northing=a[0].replace(f.gzd+
f.grdsq,"").match(/\d{1,5}$/)[0].trim();a=d.replace(/Y/,f.northing);a=a.replace(/X/,f.easting);a=a.replace(/S/,f.grdsq);a=a.replace(/Z/,f.gzd);f.formatResult=a;return f},getFormattedGARSStr:function(a,d){var f={};f.sourceValue=a;f.sourceFormatString=d;f.lon=a[0].match(/\d{3}/);f.lat=a[0].match(/[a-zA-Z]{2}/);a=a[0].match(/\d*$/);f.quadrant=a[0][0];f.key=a[0][1];d=d.replace(/K/,f.key);d=d.replace(/Q/,f.quadrant);d=d.replace(/Y/,f.lat);d=d.replace(/X/,f.lon);f.formatResult=d;return f},getFormattedGEOREFStr:function(a,
d){var f={};f.sourceValue=a;f.sourceFormatString=d;f.lon=a[0].match(/[a-zA-Z]{1}/)[0].trim();f.lat=a[0].replace(f.lon,"").match(/[a-zA-Z]{1}/)[0].trim();f.quadrant15lon=a[0].replace(f.lon+f.lat,"").match(/[a-zA-Z]{1}/)[0].trim();f.quadrant15lat=a[0].replace(f.lon+f.lat+f.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();a=a[0].replace(f.lon+f.lat+f.quadrant15lon+f.quadrant15lat,"");f.quadrant1lon=a.substr(0,a.length/2);f.quadrant1lat=a.substr(a.length/2,a.length);d=d.replace(/Y/,f.quadrant1lat);d=
d.replace(/X/,f.quadrant1lon);d=d.replace(/D/,f.quadrant15lat);d=d.replace(/C/,f.quadrant15lon);d=d.replace(/B/,f.lat);d=d.replace(/A/,f.lon);f.formatResult=d;return f},getFormattedUTMStr:function(a,d){var f={};f.sourceValue=a;f.sourceFormatString=d;f.parts=a[0].split(/[ ,]+/);f.zone=f.parts[0].replace(/[A-Z]/,"");f.bandLetter=f.parts[0].slice(-1);f.easting=f.parts[1];f.westing=f.parts[2];a=d.replace(/Y/,f.westing);a=a.replace(/X/,f.easting);a=a.replace(/B/,f.bandLetter);a=a.replace(/Z/,f.zone);f.formatResult=
a;return f},getFormattedUTMHStr:function(a,d){var f={};f.sourceValue=a;f.sourceFormatString=d;f.parts=a[0].split(/[ ,]+/);f.zone=f.parts[0].replace(/[A-Z]/,"");f.hemisphere=f.parts[0].slice(-1);f.easting=f.parts[1];f.westing=f.parts[2];a=d.replace(/Y/,f.westing);a=a.replace(/X/,f.easting);a=a.replace(/H/,f.hemisphere);a=a.replace(/Z/,f.zone);f.formatResult=a;return f},convertMetersToUnits:function(a,d){var f=0;switch(d.toLowerCase()){case "meters":f=a;break;case "feet":f=3.28084*a;break;case "kilometers":f=
.001*a;break;case "miles":f=6.21371E-4*a;break;case "nautical-miles":f=5.39957E-4*a;break;case "yards":f=1.09361*a}return f},convertToMeters:function(a,d){var f=a;switch(d){case "meters":f=a;break;case "feet":f=.3048*a;break;case "kilometers":f=1E3*a;break;case "miles":f=1609.34*a;break;case "nautical-miles":f=1852.001376036*a;break;case "yards":f=.9144*a}return f}})})},"widgets/GriddedReferenceGraphic/js/dialogConfirm":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Deferred dojo/dom-construct dijit/Dialog dijit/form/Button dijit/form/CheckBox".split(" "),
function(n,k,g,p,a,d,f){return k(a,{okButton:null,cancelButton:null,skipCheckBox:null,hasOkButton:!0,hasCancelButton:!0,hasSkipCheckBox:!0,hasUnderlay:!0,dfd:null,buttonNode:null,constructor:function(a){n.mixin(this,a)},postCreate:function(){this.inherited("postCreate",arguments);var a,g=!1;a=p.create("div",{className:"dijitDialogPaneContent dialogConfirm"},this.domNode,"last");this.hasSkipCheckBox&&(this.skipCheckBox=new f({checked:!1},p.create("div")),a.appendChild(this.skipCheckBox.domNode),p.create("label",
{"for":this.skipCheckBox.id,innerHTML:""},a));this.hasOkButton&&(this.okButton=new d({label:"OK",onClick:n.hitch(this,function(){g=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.resolve(g)})},p.create("div")),a.appendChild(this.okButton.domNode));this.hasCancelButton&&(this.cancelButton=new d({label:"Cancel",onClick:n.hitch(this,function(){g=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.cancel(g)})},p.create("div")),a.appendChild(this.cancelButton.domNode));
this.buttonNode=a},show:function(){this.inherited("show",arguments);this.hasUnderlay||p.destroy(this.id+"_underlay");return this.dfd=new g}})})},"widgets/GriddedReferenceGraphic/js/ConfirmNotation":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/text!../templates/ConfirmNotation.html"],function(n,k,g,p,a){return n([k,g,p],{templateString:a,numberOfInputs:0,selectOptions:{},constructor:function(a,f){n.safeMixin(this,f);this.numberOfInputs=
a.length;this.selectOptions=a},postCreate:function(){this.label1.innerHTML=this.numberOfInputs+" "+this.nls.notationsMatch;for(var a=0;a<this.selectOptions.length;a++)this.comboOptions.addOption({value:this.selectOptions[a].name,label:this.selectOptions[a].notationType})}})})},"widgets/GriddedReferenceGraphic/js/drawGRG":function(){define("esri/geometry/Point esri/geometry/Polygon esri/geometry/geometryEngine esri/graphic esri/geometry/webMercatorUtils esri/SpatialReference esri/geometry/Circle esri/request dojo/json ./geometryUtils".split(" "),
function(n,k,g,p,a,d,f,e,q,l){var r={createGRG:function(b,e,c,m,u,q,K,x,B,J,D,E,A){var h,z,t,v,F,G,H,I,Q,R,Z,aa=[],N=0,P=0,O=m/2/Math.cos(30*Math.PI/180),S,W=b;switch(K){case "upperLeft":"horizontal"===B?(h=e-1,z=-1,"numeric"!==x?t=0:(t=(e-1)*b,"hexagon"===J&&(t+=Math.floor(e/2)))):(h=-1,z=e-1,"numeric"!==x&&(t=e));break;case "upperRight":"horizontal"===B?(h=e-1,z=b,"numeric"!==x?t=b+1:(t=e*b+1,"hexagon"===J&&(t+=Math.floor(e/2)))):(t="numeric"!==x?e:e*(b+1),h=b,z=e-1);break;case "lowerRight":"horizontal"===
B?(h=0,z=b,t=b+1):(h=b,z=0,t=1);break;case "lowerLeft":"horizontal"===B?(t=h=0,z=-1):(h=-1,t=1,z=0)}var V=b*m/2,T;T="hexagon"===J?1===e%2?((e-1)/2*3*O+O)/2:(e/2*3*O-O/2)/2:e*u/2;for(var C=1;C<=e;C++){for(var M=1;M<=b;M++){if(E){var L=new k;if(1===C&&1===M)switch(102100===c.spatialReference.wkid&&(c=a.webMercatorToGeographic(c)),D){case "center":v=l.getDestinationPoint(c,180+q,T);v=l.getDestinationPoint(v,270+q,V);break;case "upperLeft":v=l.getDestinationPoint(c,180+q,2*T);break;case "upperRight":v=
l.getDestinationPoint(c,180+q,2*T);v=l.getDestinationPoint(v,270+q,2*V);break;case "lowerRight":v=l.getDestinationPoint(c,270+q,2*V);break;case "lowerLeft":v=c}"default"===J?(G=l.getDestinationPoint(v,0+q,u),H=l.getDestinationPoint(G,90+q,m),F=l.getDestinationPoint(H,180+q,u),L.addRing([[v.x,v.y],[G.x,G.y],[H.x,H.y],[F.x,F.y]]),v=F):(F=v,I=l.getDestinationPoint(F,0+q,O),Q=l.getDestinationPoint(I,60+q,O),H=l.getDestinationPoint(Q,120+q,O),R=l.getDestinationPoint(H,180+q,O),Z=l.getDestinationPoint(R,
240+q,O),L.addRing([[F.x,F.y],[I.x,I.y],[Q.x,Q.y],[H.x,H.y],[R.x,R.y],[Z.x,Z.y]]),v=l.getDestinationPoint(v,90+q,m));L=g.simplify(L);4326!==A.spatialReference.wkid&&(L=a.geographicToWebMercator(L));L=new p(L);1===M&&(S="hexagon"===J?W===b?l.getDestinationPoint(I,300+q,O):Q:G)}else{L=new k(new d({wkid:102100}));4326===c.spatialReference.wkid&&(c=a.geographicToWebMercator(c));switch(D){case "center":N=c.x-V;P=c.y-T;break;case "upperLeft":N=c.x;P=c.y-2*T;break;case "upperRight":N=c.x-2*V;P=c.y-2*T;break;
case "lowerRight":N=c.x-2*V;P=c.y;break;case "lowerLeft":N=c.x,P=c.y}"default"===J?L.addRing([[N+(M-1)*m,P+(C-1)*u],[N+(M-1)*m,P+C*u],[N+M*m,P+C*u],[N+M*m,P+(C-1)*u],[N+(M-1)*m,P+(C-1)*u]]):(W===b?N=N+(M-1)*m+m/2:N+=(M-1)*m,P=P+O+1.5*(C-1)*O,F=new n([N,P],new d({wkid:102100})),H=new f(F,{radius:O,numberOfPoints:6}),F=g.rotate(H,90,F),L.addRing(F.rings[0]));L=g.rotate(L,-1*q,c);102100!==A.spatialReference.wkid&&(L=a.webMercatorToGeographic(L));L=new p(L)}switch(K){case "upperLeft":"horizontal"===B?
(z+=1,t+=1):(h+=1,"numeric"===x&&(t=e*M-(C-1)));break;case "lowerLeft":"horizontal"===B?(z+=1,t+=1):(h+=1,"numeric"===x&&(t=e*(M-1)+C));break;case "upperRight":"horizontal"===B?(--t,--z):(--h,"numeric"===x&&(t-=b));break;case "lowerRight":"horizontal"===B?(--t,--z):(--h,"numeric"===x&&(t=e*(b-M)+C))}aa.push(r.addGraphicLabel(L,x,t,h,z))}v=S;"hexagon"===J&&(W===b?b++:b--);switch(K){case "upperLeft":"horizontal"===B?(--h,t="numeric"!==x?0:"hexagon"===J?t-2*W-1:t-2*b,z=-1):(h=-1,z=e-(C+1),"numeric"!==
x&&(t=e-C));break;case "upperRight":"horizontal"===B?(--h,"numeric"!==x&&(t=b+1),z=b):(t="numeric"!==x?t-1:e*(b+1)-C,h=b,--z);break;case "lowerRight":"horizontal"===B?(h+=1,t="numeric"!==x?b+1:"hexagon"===J?t+2*W+1:t+2*b,z=b):(h=b,z+=1,t="numeric"!==x?t+1:b*C);break;case "lowerLeft":"horizontal"===B?(h+=1,"numeric"!==x&&(t=0),z=-1):(h=-1,"numeric"!==x&&(t+=1),z=C)}}return aa},convertNumberToLetters:function(b){for(var a="";0<=b;)a=String.fromCharCode(b%26+65)+a,b=Math.floor(b/26)-1;return a},checkGridSize:function(b,
a){return 2E3>b*a},getFeatureServiceParams:function(b,a){return{name:b,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"GRG",description:"",copyrightText:"",spatialReference:{wkid:102100},initialExtent:{xmin:a.extent.xmin,ymin:a.extent.ymin,xmax:a.extent.xmax,ymax:a.extent.ymax,spatialReference:{wkid:102100}},allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",
xssInputRule:"rejectInvalid"}}},getLayerParams:function(b,a,c,d){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:b,type:"Feature Layer",displayField:"",description:"A GRG (Gridded Reference Graphic) is a grid overlay used for a commonreference point in many situations - from cordon and search operations to securityfor presidential inaugurations.",tags:"GRG",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,
allowOthersToDelete:!1,allowOthersToUpdate:!1},relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,
supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},useStandardizedQueries:!1,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,extent:{xmin:a.extent.xmin,ymin:a.extent.ymin,xmax:a.extent.xmax,ymax:a.extent.ymax,spatialReference:{wkid:102100}},drawingInfo:{renderer:{type:"simple",symbol:d},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",
symbol:c}]},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!1,editable:!1,domain:null,defaultValue:null},{name:"grid",type:"esriFieldTypeString",alias:"grid",actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256}],indexes:[],
types:[],templates:[{name:"New Feature",description:"",drawingTool:"esriFeatureEditToolPolygon",prototype:{attributes:{grid:""}}}],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(b,a,c){return e({url:b,content:{name:c,type:"Feature Service",token:a,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},
createFeatureService:function(b,a,c){return e({url:b,content:{f:"json",token:a,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:q.stringify(c),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},addDefinitionToService:function(b,a,c){return e({url:b,content:{token:a,addToDefinition:q.stringify(c),f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},labelReferenceGrid:function(b,a,c,d){for(var e=
-1,f=1,h,m=!0,k=null,q=[],l;0<b.length;)if(m){e++;"alphaNumeric"===a?f=1:"alphaAlpha"===a&&(h=0);var E=g.union(b);l=E.getExtent();var A;switch(c){case "lowerLeft":A=g.nearestCoordinate(E,new n(l.xmin,l.ymin,l.spatialReference));break;case "lowerRight":A=g.nearestCoordinate(E,new n(l.xmax,l.ymin,l.spatialReference));break;case "upperLeft":A=g.nearestCoordinate(E,new n(l.xmin,l.ymax,l.spatialReference));break;case "upperRight":A=g.nearestCoordinate(E,new n(l.xmax,l.ymax,l.spatialReference))}for(l=0;l<
b.length;l++)if(g.touches(b[l],A.coordinate)){k=b[l];q.push(r.addGraphicLabel(new p(b[l]),a,f,e,h));f++;h++;m=b.indexOf(b[l]);b.splice(m,1);m=!1;break}}else{m=!0;l=k.getExtent();var w;switch(c){case "lowerLeft":w=g.nearestCoordinate(k,new n(l.xmax,l.ymin,l.spatialReference));break;case "lowerRight":w=g.nearestCoordinate(k,new n(l.xmin,l.ymin,l.spatialReference));break;case "upperLeft":w=g.nearestCoordinate(k,new n(l.xmax,l.ymax,l.spatialReference));break;case "upperRight":w=g.nearestCoordinate(k,
new n(l.xmin,l.ymax,l.spatialReference))}for(E=0;E<b.length;E++){l=b[E].getExtent();var y;switch(c){case "lowerLeft":y=g.nearestCoordinate(b[E],new n(l.xmin,l.ymin,l.spatialReference));break;case "lowerRight":y=g.nearestCoordinate(b[E],new n(l.xmax,l.ymin,l.spatialReference));break;case "upperLeft":y=g.nearestCoordinate(b[E],new n(l.xmin,l.ymax,l.spatialReference));break;case "upperRight":y=g.nearestCoordinate(b[E],new n(l.xmax,l.ymax,l.spatialReference))}l=g.buffer(y.coordinate,"UTM"===d?1E4:d/5,
9001);if(g.contains(l,w.coordinate)){k=b[E];q.push(r.addGraphicLabel(new p(b[E]),a,f,e,h));f++;h++;m=b.indexOf(b[E]);b.splice(m,1);m=!1;break}}}return q},addGraphicLabel:function(b,a,c,d,e){d=r.convertNumberToLetters(d);e=r.convertNumberToLetters(e);var f={};switch(a){case "alphaNumeric":f.grid=d.toString()+c.toString();break;case "alphaAlpha":f.grid=d.toString()+"-"+e.toString();break;case "numeric":f.grid=c.toString()}b.setAttributes(f);return b},checkPolarRegion:function(b){var a=new k({rings:[[[-180,
84],[-180,90],[180,90],[180,84],[-180,84]],[[-180,-90],[-180,-80],[180,-80],[180,-90],[-180,-90]]],spatialReference:{wkid:4326}});return g.intersects(b,a)}};return r})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(n,k,g,p,a,d,f,e,q,l){n=n(d,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,
esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(d,b){d.center?b=d:(b=b||{},b.center=d);this.center=k.isArray(b.center)?new a(b.center[0],b.center[1]):b.center;this.radius=b.radius||1E3;this.radiusUnit=b.radiusUnit||l.METERS;this.geodesic=!0===b.geodesic?!0:!1;this.numberOfPoints=b.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=
[];this._ring=0;var a=this.radius*this._unitToMeters[this.radiusUnit],b=this._srType(this.center.spatialReference);if(this.geodesic){var d;switch(b){case "webMercator":d=e.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":d=this.center}a=this._createGeodesicCircle(d,a,this.numberOfPoints,d.spatialReference);"webMercator"===b&&(a=e.geographicToWebMercator(a))}else{var c;
"webMercator"===b||"projected"===b?c=a/this._convert2Meters(1,this.center.spatialReference):"geographic"===b&&(c=a/this._unitToMeters.esriDecimalDegrees);a=this._createPlanarCircle(this.center,c,this.numberOfPoints)}this.spatialReference=a.spatialReference;this.addRing(a.rings[0]);this.verifySR()},_createGeodesicCircle:function(a,b,e,c){for(var h=0,g=Math.PI/180,k=[],l;h<2*Math.PI;)l=f._directGeodeticSolver(a.y*g,a.x*g,h,b,c),k.push([l.x,l.y]),h+=Math.PI/(e/2);k.push(k[0]);return new d(k)},_createPlanarCircle:function(a,
b,e){for(var c=0,f=[],h,g;c<2*Math.PI;)h=a.x+Math.cos(c)*b,g=a.y+Math.sin(c)*b,f.push([h,g]),c+=Math.PI/(e/2);f.push(f[0]);a=new d(a.spatialReference);a.addRing(f);return a},_srType:function(a){return a.isWebMercator()?"webMercator":null!=q[a.wkid]||a.wkt&&0===a.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(a,b){if(null!=q[b.wkid])b=q.values[q[b.wkid]];else{b=b.wkt;var d=b.lastIndexOf(",")+1,c=b.lastIndexOf("]]");b=parseFloat(b.substring(d,c))}return a*b}});g("extend-esri")&&
k.setObject("geometry.Circle",n,p);return n})},"widgets/GriddedReferenceGraphic/js/geometryUtils":function(){define("esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/webMercatorUtils dojo/Deferred dojo/_base/array dojo/_base/lang esri/geometry/geometryEngine esri/SpatialReference esri/geometry/scaleUtils".split(" "),function(n,k,g,p,a,d,f,e,q,l){var r={getProjectedGeometry:function(b,d,c){var e,f;e=new a;p.canProject(b,d)?(f=p.project(b,d),e.resolve(f)):c.project([b],
d,function(b){f=b[0];e.resolve(f)});return e.promise},getDestinationPoint:function(b,a,c){var d=b.x*Math.PI/180,e=a*Math.PI/180;a=Math.sin(e);var e=Math.cos(e),f=.9966471893352243*Math.tan(b.y*Math.PI/180);b=1/Math.sqrt(1+f*f);var h=f*b,g=Math.atan2(f,e),f=b*a,k=1-f*f,l=2.7233160610984375E11*k/4.040829998465916E13,r=1+l/16384*(4096+l*(-768+l*(320-175*l))),p=l/1024*(256+l*(-128+l*(74-47*l))),A,w,y,t=c/(6356752.314245*r),v,F=0;do l=Math.cos(2*g+t),A=Math.sin(t),w=Math.cos(t),y=p*A*(l+p/4*(w*(-1+2*l*
l)-p/6*l*(-3+4*A*A)*(-3+4*l*l))),v=t,t=c/(6356752.314245*r)+y;while(1E-12<Math.abs(t-v)&&200>++F);if(200<=F)return null;c=h*A-b*w*e;c=Math.atan2(h*w+b*A*e,.9966471893352243*Math.sqrt(f*f+c*c));k=2.0955066654848088E-4*k*(4+.003352810664775694*(4-3*k));d=(d+(Math.atan2(A*a,b*w-h*A*e)-.003352810664775694*(1-k)*f*(t+k*A*(l+k*w*(-1+2*l*l))))+3*Math.PI)%(2*Math.PI)-Math.PI;c=180*c/Math.PI;d=180*d/Math.PI;return new n(d,c,new q(4326))},getInverseCalculations:function(b,a){var c=a.x*Math.PI/180-b.x*Math.PI/
180,d=.9966471893352243*Math.tan(b.y*Math.PI/180);b=1/Math.sqrt(1+d*d);var d=d*b,e=.9966471893352243*Math.tan(a.y*Math.PI/180);a=1/Math.sqrt(1+e*e);var e=e*a,f,h,g,k,l,q,r,p,n,y=c,t,v=0;do{f=Math.sin(y);h=Math.cos(y);g=a*f*a*f+(b*e-d*a*h)*(b*e-d*a*h);g=Math.sqrt(g);if(0==g)return 0;k=d*e+b*a*h;l=Math.atan2(g,k);q=b*a*f/g;r=1-q*q;p=k-2*d*e/r;isNaN(p)&&(p=0);n=2.0955066654848088E-4*r*(4+.003352810664775694*(4-3*r));t=y;y=c+.003352810664775694*(1-n)*q*(l+n*g*(p+n*k*(-1+2*p*p)))}while(1E-12<Math.abs(y-
t)&&200>++v);if(200<=v)return null;y=2.7233160610984375E11*r/4.040829998465916E13;v=y/1024*(256+y*(-128+y*(74-47*y)));c=Math.atan2(a*f,b*e-d*a*h);b=Math.atan2(b*f,-d*a+b*e*h);c=(c+2*Math.PI)%(2*Math.PI);b=(b+2*Math.PI)%(2*Math.PI);d=Number((6356752.314245*(1+y/16384*(4096+y*(-768+y*(320-175*y))))*(l-v*g*(p+v/4*(k*(-1+2*p*p)-v/6*p*(-3+4*g*g)*(-3+4*p*p))))).toFixed(3));c=180*c/Math.PI;b=180*b/Math.PI;return{distance:d,initialBearing:c,finalBearing:b}},getLineBetweenPoints:function(b){var a,c=[];d.forEach(b,
f.hitch(this,function(b){c.push([b.x,b.y])}));0<c.length&&(a=new k({paths:[c],spatialReference:{wkid:4326}}));return a},getAngleBetweenPoints:function(b,a){b=r.getInverseCalculations(b,a);return null===b?0:b.initialBearing},getDistanceBetweenPoints:function(b,a){b=r.getInverseCalculations(b,a);return null===b?0:b.distance},getLengthOfGeometry:function(b){return(b=e.simplify(b))?e.geodesicLength(b,9001):0},getAreaOfGeometry:function(b){var a;b=e.simplify(b);a={};b?(a.acres=e.geodesicArea(b,109402),
a.squareMeters=e.geodesicArea(b,109404),a.squareFeet=e.geodesicArea(b,109405),a.squareUsFeet=e.geodesicArea(b,109406)):(a.acres=0,a.squareMeters=0,a.squareFeet=0,a.squareUsFeet=0);return a},getPolyLineFromPaths:function(b){var a,c;a=new k(new q({wkid:4326}));for(c=0;c<b.length;c++)a.addPath(b[c]);return a},getPolygonFromPolyLines:function(b,a,c,d){var e,h,k;e=[];d=d?new g(new q(d)):new g(new q({wkid:4326}));for(h=0;h<b.length;h++)for(k=0;k<b[h].length;k++)e.push(b[h][k]);a?e.push(f.clone(e[0])):c&&
(e[e.length-1][0]=e[0][0],e[e.length-1][1]=e[0][1]);d.isClockwise(e)||e.reverse();d.addRing(e);return d},getPointsForArc:function(b,a,c,d){var e,f=[],g,h;e=a-b;a=parseInt(e,10);0>=a&&(a=1);g=Math.abs(e)/Math.abs(a);if(0<g)for(e=0;e<Math.abs(a)+1;e++)h=b+g*e,(h=r.getDestinationPoint(c,h,Math.abs(d)))&&f.push(h);return f},getArcParam:function(b){var a;a={};0>b.distance?0>b.radius?(a.bearing=b.initBearing+90,a.centerPoint=r.getDestinationPoint(b.chordMidPoint,a.bearing,b.centerAndChordDistance),a.startAngle=
r.getAngleBetweenPoints(a.centerPoint,b.chordEndPoint),a.endAngle=r.getAngleBetweenPoints(a.centerPoint,b.chordStartPoint)):(a.bearing=b.initBearing-90,a.centerPoint=r.getDestinationPoint(b.chordMidPoint,a.bearing,b.centerAndChordDistance),a.startAngle=r.getAngleBetweenPoints(a.centerPoint,b.chordStartPoint),a.endAngle=r.getAngleBetweenPoints(a.centerPoint,b.chordEndPoint)):0<b.radius?(a.bearing=b.initBearing+90,a.centerPoint=r.getDestinationPoint(b.chordMidPoint,a.bearing,b.centerAndChordDistance),
a.startAngle=r.getAngleBetweenPoints(a.centerPoint,b.chordStartPoint),a.endAngle=r.getAngleBetweenPoints(a.centerPoint,b.chordEndPoint)):(a.bearing=b.initBearing-90,a.centerPoint=r.getDestinationPoint(b.chordMidPoint,a.bearing,b.centerAndChordDistance),a.startAngle=r.getAngleBetweenPoints(a.centerPoint,b.chordEndPoint),a.endAngle=r.getAngleBetweenPoints(a.centerPoint,b.chordStartPoint));return a},removeNegativeExponents:function(b){return 1<b.toString().toLowerCase().split("e-").length?0:b},getChordLengthFromArcLength:function(b,
a){var c;b=Math.abs(b);c=Math.PI*Math.abs(a);a=Math.abs(a)*Math.sin(Math.abs(b)/Math.abs(a)/2);return b<=c?2*a:-2*a},getArcLengthFromChordLength:function(b,a){var c;c=Math.abs(b);a=Math.abs(a);c=2*Math.asin(c/(2*a))*a;0>b&&(c=2*Math.PI*a-c);return c},chordBearingToTangentBearing:function(b,a,c){var d;d=180/Math.PI*Math.acos(Math.abs(c)/2/Math.abs(a));a/=Math.abs(a);b=b+90*a-c/Math.abs(c)*a*d;return r.removeNegativeExponents(0>b?b+360:360<=b?b%360:b)},tangentBearingToChordBearing:function(b,a,c){var d;
d=180/Math.PI*Math.acos(Math.abs(c)/2/Math.abs(a));a/=Math.abs(a);b=b+90*a-c/Math.abs(c)*a*d;return r.removeNegativeExponents(0>b?b+360:360<=b?b%360:b)},getUnitValueForSR:function(b){switch(l.getUnitValueForSR(b)){case 1:return"meters";case 111194.87428468118:return"meters";case .3048:return"feet";case .3048006096:case .3048006096012192:return"uSSurveyFeet"}},getRotationAngleBetweenPoints:function(b,a){var c,d;b=p.project(b,new q(102100));a=p.project(a,new q(102100));c=a.x-b.x;b=a.y-b.y;a=180*Math.atan2(Math.abs(c),
Math.abs(b))/Math.PI;d=180*Math.atan2(Math.abs(b),Math.abs(c))/Math.PI;c=r.removeNegativeExponents(c);b=r.removeNegativeExponents(b);a=r.removeNegativeExponents(a);d=r.removeNegativeExponents(d);if(0===b){if(0===c)return 0;if(0<c)return 90;if(0>c)return 270}else if(0<b){if(0===c)return 0;if(0<c)return a;if(0>c)return 270+d}else if(0>b){if(0===c)return 180;if(0<c)return 90+d;if(0>c)return 180+a}},getScaleDistanceBetweenPoints:function(b,a){b=p.project(b,new q(102100));a=p.project(a,new q(102100));
b=e.distance(b,a,9001);return r.removeNegativeExponents(b)}};return r})},"widgets/GriddedReferenceGraphic/js/DrawFeedBack":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","./Feedback"],function(n,k,g,p){return n([p],{constructor:function(){this.syncEvents();this.inherited(arguments)},syncEvents:function(){g.subscribe("grg-center-point-input",k.hitch(this,this.onCenterPointManualInputHandler));g.subscribe("clear-points",k.hitch(this,this.clearPoints))},clearPoints:function(){this._points=
[];this.map.graphics.clear()},clearGraphics:function(){this.map.graphics.clear()},onCenterPointManualInputHandler:function(a){this._points=[];this._points.push(a.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(a)},_onClickHandler:function(a){this._points=[];var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);a=d||a.mapPoint;this._points.push(a.offset(0,0));this.set("startPoint",this._points[0]);this._drawEnd(a)},cleanup:function(){}})})},"widgets/GriddedReferenceGraphic/js/Feedback":function(){define(["dojo/_base/declare",
"dojo/Stateful","esri/toolbars/draw","esri/graphic"],function(n,k,g,p){return n([g,k],{startPoint:null,_setStartPoint:function(a){this._set("startPoint",a)},addStartGraphic:function(a,d,f){this.removeStartGraphic(f);this.startGraphic=new p(a,d);f.add(this.startGraphic)},removeStartGraphic:function(a){this.startGraphic&&a.remove(this.startGraphic);this.startGraphic=null}})})},"widgets/GriddedReferenceGraphic/js/EditOutputCoordinate":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/EditOutputCoordinate.html dijit/form/Select jimu/dijit/CheckBox".split(" "),
function(n,k,g,p,a,d,f,e,q){return n([d,f,e],{templateString:q,formats:{},ct:"DD",_setCtAttr:function(a){this.frmtSelect.set("value",a)},constructor:function(a){n.safeMixin(this,a)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",
customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},"UTM (H)":{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};a.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(this.frmtSelect.on("change",k.hitch(this,this.frmtSelectValueDidChange)));this.own(p(this.frmtVal,"change",k.hitch(this,this.formatValDidChange)));this.displayPrefixContainer()},
formatValDidChange:function(){var d=a.get(this.frmtVal,"value"),e=this.frmtSelect.get("value");this.formats[e].customFormat=d;this.formats[e].useCustom=!0;this.currentformat=d},frmtSelectValueDidChange:function(){var d=this.frmtSelect.get("value"),e=this.formats[d].useCustom?this.formats[d].customFormat:this.formats[d].defaultFormat;this.ct=d;a.set(this.frmtVal,"value",e);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.frmtSelect.get("value")){case "DD":case "DDM":case "DMS":g.set(this.prefixContainer,
{display:""});break;default:g.set(this.prefixContainer,{display:"none"})}}})})},"widgets/GriddedReferenceGraphic/js/geometry-utils":function(){define(["./constants","esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon"],function(n,k,g,p){return{toGeographic:function(a){return a.spatialReference.isWebMercator()?k.webMercatorToGeographic(a):a},toWebMercator:function(a){return a.spatialReference.isWebMercator()?a:k.geographicToWebMercator(a)},_latitudeToWebMercatorY:function(a){return n.GEOGRAPHIC_360/
2*(n.HALF_PI-2*Math.atan(Math.exp(-1*a/n.WGS84_EQUATORIAL_RADIUS)))/Math.PI},_longitudeToWebMercatorX:function(a){var d=n.GEOGRAPHIC_360,f=n.GEOGRAPHIC_360/2,e=n.WGS84_EQUATORIAL_RADIUS;return a/e*f/Math.PI-Math.floor((a/e*f/Math.PI+f)/d)*d},pointToGeographic:function(a){for(var d=a.x,f=a.y,e=(a=a.spatialReference.isWebMercator())?n.WEST_WEBMERCATOR_LIMIT:n.WEST_GEOGRAPHIC_LIMIT,g=a?n.EAST_WEBMERCATOR_LIMIT:n.EAST_GEOGRAPHIC_LIMIT,k=a?n.WEBMERCATOR_360:n.GEOGRAPHIC_360,p=0;d<=e;)d+=k,--p;for(;d>g;)d-=
k,p+=1;a&&(d=this._longitudeToWebMercatorX(d),f=this._latitudeToWebMercatorY(f));return{x:d,y:f,offsetX:p}},extentToPolygon:function(a){return new p({rings:[[[a.xmin,a.ymin],[a.xmax,a.ymin],[a.xmax,a.ymax],[a.xmin,a.ymax],[a.xmin,a.ymin]]],spatialReference:a.spatialReference})},polygonToPolyline:function(a){return new g({paths:a.rings,spatialReference:{wkid:a.spatialReference.wkid}})}}})},"widgets/GriddedReferenceGraphic/js/constants":function(){define([],function(){return{ZONE_WIDTH_DEGREES:6,ZONE_HEIGHT_DEGREES:8,
MIN_MGRS_LATITUDE:-80,MAX_MGRS_LATITUDE:84,POSITIVE_180:179.99999999,NEGATIVE_180:-179.99999999,WEST_GEOGRAPHIC_LIMIT:-180,EAST_GEOGRAPHIC_LIMIT:180,GEOGRAPHIC_360:360,WEST_WEBMERCATOR_LIMIT:-2.0037508342789244E7,EAST_WEBMERCATOR_LIMIT:2.0037508342789244E7,WEBMERCATOR_360:4.007501668557849E7,DEGREES_PER_RADIAN:57.29577951308232,RADIANS_PER_DEGREE:.017453292519943295,WGS84_EQUATORIAL_RADIUS:6378137,WGS84_HALF_EQUATORIAL_RADIUS:3189068.5,HALF_PI:1.5707963267948966}})},"widgets/GriddedReferenceGraphic/js/mgrs-utils":function(){define("dojo/json ./constants ./geometry-utils ./geometryUtils ./mgrs ./NonPolarGridZone ./VisibleGridZone ./GridPolygon esri/geometry/geometryEngine esri/geometry/Point esri/geometry/Polygon".split(" "),
function(n,k,g,p,a,d,f,e,q,l,r){Math.log10||(Math.log10=function(b){return Math.log(b)/Math.LN10});return{_ZonesDictionary:function(){var b,a,c,e="CDEFGHJKLMNPQRSTUVWX".split(""),f={},g=function(b,a){var c,f,g=b+e[a];if("32X"===g||"34X"===g||"36X"===g)return null;"31V"===g?c={xmin:0,ymin:56,xmax:3,ymax:64,id:g}:"32V"===g?c={xmin:3,ymin:56,xmax:12,ymax:64,id:g}:"31X"===g?c={xmin:0,ymin:72,xmax:9,ymax:84,id:g}:"33X"===g?c={xmin:9,ymin:72,xmax:21,ymax:84,id:g}:"35X"===g?c={xmin:21,ymin:72,xmax:33,ymax:84,
id:g}:"37X"===g?c={xmin:33,ymin:72,xmax:42,ymax:84,id:g}:(c=(b-1)*k.ZONE_WIDTH_DEGREES-180,b=b*k.ZONE_WIDTH_DEGREES-180,f=a*k.ZONE_HEIGHT_DEGREES+k.MIN_MGRS_LATITUDE,a=(a+1)*k.ZONE_HEIGHT_DEGREES+k.MIN_MGRS_LATITUDE,c=180===c?k.POSITIVE_180:c,c=-180===c?k.NEGATIVE_180:c,b=180===b?k.POSITIVE_180:b,b=-180===b?k.NEGATIVE_180:b,80===a&&(a=k.MAX_MGRS_LATITUDE),c={xmin:c,ymin:f,xmax:b,ymax:a,id:g});return new d(c)};for(b=1;60>=b;b++)for(a=0;a<e.length;a++)(c=g(b,a))&&(f[c.id]=c);for(b=1;60>=b;b++){var l=
[];for(a=0;a<e.length;a++)if(c=g(b,a))c=new r({rings:n.parse(n.stringify(c._rings))}),l.push(c);l=q.union(l);for(a=0;a<e.length;a++)(c=g(b,a))&&(f[c.id.fullZoneGeometry]=l)}return f}(),zonesFromExtent:function(b,a){var c,d,e,h,p,x,B,J,D,E=b.spatialReference.isWebMercator()?k.WEBMERCATOR_360:k.GEOGRAPHIC_360,A="CDEFGHJKLMNPQRSTUVWX".split(""),w=[];if(b.xmax-b.xmin>E)return w;var E=g.extentToPolygon(b),E=g.toWebMercator(E),y=g.pointToGeographic(new l([b.xmin,b.ymin],b.spatialReference)),t=g.pointToGeographic(new l([b.xmax,
b.ymax],b.spatialReference));b=y.y;e=t.y;J=y.offsetX;D=t.offsetX;for(var v=J;v<=D;v++)for(c=v>J?k.NEGATIVE_180:y.x,d=v<D?k.POSITIVE_180:t.x,h=Math.min(Math.max(Math.floor((b+80)/k.ZONE_HEIGHT_DEGREES),0),19),p=Math.min(Math.floor((e+80)/k.ZONE_HEIGHT_DEGREES),19),c=Math.floor((c+180)/k.ZONE_WIDTH_DEGREES),d=Math.min(Math.floor((d+180)/k.ZONE_WIDTH_DEGREES)+2,60);c<=d;c++)for(var F=h;F<=p;F++)if(x=A[F],x=c+x,this._ZonesDictionary[x]){B=n.parse(n.stringify(this._ZonesDictionary[x]._rings));for(var G=
0;G<B[0].length;G++)B[0][G][0]+=v*k.GEOGRAPHIC_360;B=new r({rings:B});(B=q.intersect(g.toWebMercator(B),E))&&w.push(new f({map:a,polygon:B,fullZoneGeometry:this._ZonesDictionary[x].fullZoneGeometry,offset:v,nonPolarGridZone:this._ZonesDictionary[x],utmZone:this._ZonesDictionary[x].utmZone,latitudeBand:this._ZonesDictionary[x].latitudeZone}))}return w},processZonePolygons:function(b,d,c){var e=[];c=g.toWebMercator(c);for(var f=0;f<b.length;f++){var h=b[f];if(h)var k=h.nonPolarGridZone.latitudeZone,
l=g.toGeographic(h.polygon.getExtent()),q=a.LLtoUTM(l.ymin,l.xmin,h.nonPolarGridZone.utmZone),p=a.LLtoUTM(l.ymin,l.xmax,h.nonPolarGridZone.utmZone),n=a.LLtoUTM(l.ymax,l.xmax,h.nonPolarGridZone.utmZone),l=a.LLtoUTM(l.ymax,l.xmin,h.nonPolarGridZone.utmZone),h={minE:Math.min(q[0],p[0],n[0],l[0]),maxE:Math.max(q[0],p[0],n[0],l[0]),minN:Math.min(q[1],p[1],n[1],l[1]),maxN:Math.max(q[1],p[1],n[1],l[1]),utmZone:h.nonPolarGridZone.utmZone,latitudeZone:k,polygon:h.polygon,offset:h.offset,fullZoneGeometry:g.extentToPolygon(h.nonPolarGridZone.extent)},
e=e.concat(this.handle100kGrids(h,d,c))}return e},handle100kGrids:function(b,d,c){var f=b.polygon,h=b.offset,l=b.utmZone,n=b.latitudeZone,x=b.fullZoneGeometry,B=b.minE,J=b.maxE,D=b.maxN,E=[],A,w,y,t,v;for(b=1E5*Math.floor(b.minN/1E5);b<D;b+=1E5)for(A=1E5*Math.floor(B/1E5);A<J;A+=1E5){v=a.findGridLetters(l,0>b+5E4?1E7+(b+5E4):b+5E4,A+5E4);y=[];for(w=A;w<=A+1E5;w+=1E4)t=a.UTMtoLL(b,w,l),y.push([t.lon,t.lat]);for(w=b;w<b+1E5;w+=1E4)t=a.UTMtoLL(w,A+1E5,l),y.push([t.lon,t.lat]);for(w=A+1E5;w>=A;w-=1E4)t=
a.UTMtoLL(b+1E5,w,l),y.push([t.lon,t.lat]);for(w=b+1E5;w>=b;w-=1E4)t=a.UTMtoLL(w,A,l),y.push([t.lon,t.lat]);for(w=0;w<y.length;w++)y[w][0]+=h*k.GEOGRAPHIC_360;w=new r([y]);y=p.getAngleBetweenPoints(w.getPoint(0,w.rings[0].length-1),w.getPoint(0,w.rings[0].length-2));t=q.rotate(g.extentToPolygon(c),-1*y);y=q.intersect(g.toWebMercator(w),g.toWebMercator(f));t=q.intersects(t,g.toWebMercator(w));if(y||t){var F;t&&(F=q.intersect(g.toWebMercator(w),g.toWebMercator(x)));v={clippedPolygon:y,unclippedPolygon:w,
clippedPolyToUTMZone:F,map:d,xmin:A,ymin:b,xmax:A+1E5,ymax:b+1E5,x:"",y:"",minMaxType:"utm",utmZone:l,latitudeZone:n,utmZonePoly:f,fullZoneGeometry:x,GZD:v,text:v};F&&(v=new e(v),E.push(v))}}return E},handleGridSquares:function(b,d,c,f){var h=[],k=b.utmZonePoly,m=b.latitudeZone,n=b.utmZone,B=b.fullZoneGeometry,J=b.GZD,D=b.xmin,E=b.xmax,A=b.ymin;b=b.ymax;var w,y,t,v,F,G,H,I=!0,Q=!0;f=g.toWebMercator(f);for(w=Math.floor(A/c)*c;w<b;w+=c)for(y=Math.floor(D/c)*c;y<E;y+=c){v=[];G=a.UTMtoLL(w,y,n);v.push([G.lon,
G.lat]);t=a.UTMtoLL(w+c,y,n);v.push([t.lon,t.lat]);H=a.UTMtoLL(w+c,y+c,n);v.push([H.lon,H.lat]);H=a.UTMtoLL(w,y+c,n);v.push([H.lon,H.lat]);v.push([G.lon,G.lat]);v=new r([v]);H=q.intersect(g.toWebMercator(g.extentToPolygon(f)),g.toWebMercator(B));I&&Q&&(F=p.getAngleBetweenPoints(new l(G.lon,G.lat),new l(t.lon,t.lat)),F=q.rotate(H,-1*F));G=q.intersect(g.toWebMercator(v),k);t=q.intersects(F,g.toWebMercator(v));var R;if(G||t){t&&(R=q.intersect(g.toWebMercator(v),g.toWebMercator(B)));t=J+this._padZero(y%
1E5/c,5-Math.log10(c)).toString()+this._padZero((0>A?1E7+w:w)%1E5/c,5-Math.log10(c)).toString();v={clippedPolygon:G,unclippedPolygon:v,fullZoneGeometry:B,clippedPolyToUTMZone:R,map:d,xmin:y,ymin:w,xmax:y+c,ymax:w+c,x:this._padZero(y%1E5/c,5-Math.log10(c)).toString(),y:this._padZero((0>A?1E7+w:w)%1E5/c,5-Math.log10(c)).toString(),minMaxType:"utm",utmZone:n,latitudeZone:m,GZD:J,utmZonePoly:k,text:t};if(!R)continue;I=new e(v);h.push(I)}Q=I=!1}return h},_padZero:function(b,a){for(b=b.toString();b.length<
a;)b="0"+b;return b}}})},"widgets/GriddedReferenceGraphic/js/mgrs":function(){define(["esri/geometry/Point"],function(n){var k,g,p;k=6378137;g=.00669437999;p=g/(1-g);var a=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g));return{setSpheroid:function(d){d=d.toUpperCase();switch(d){case "AIRY 1830":k=6377563.396;g=.00667053999998536;break;case "AIRY MODIFIED":k=6377340.189;g=.00667053999998536;break;case "AVERAGE TERRESTRIAL SYSTEM 1977":k=6378135;g=.00669438499958795;break;case "AUSTRALIAN NATIONAL":k=6378160;
g=.00669454185458764;break;case "BESSEL 1841":k=6377397.155;g=.00667437223180214;break;case "BESSEL MODIFIED":k=6377492.018;g=.00667437223180214;break;case "BESSEL NAMIBIA":k=6377483.865;g=.00667437223180214;break;case "CLARKE 1858":k=6378293.639;g=.00678514600473303;break;case "NAD27":case "CLARKE 1866":k=6378206.4;g=.00676865799760964;break;case "CLARKE 1866 MICHIGAN":k=6378450.047;g=.00676865830738507;break;case "CLARKE 1880":k=6378249.138;g=.00680348101883452;break;case "CLARKE 1880 (ARC)":k=
6378249.145;g=.00680348101883452;break;case "CLARKE 1880 (BENOIT)":k=6378300.79;g=.00680348271028565;break;case "CLARKE 1880 (IGN)":k=6378249.2;g=.00680348767623919;break;case "CLARKE 1880 (RGS)":k=6378249.145;g=.00680351128284906;break;case "CLARKE 1880 (SGA)":k=6378249.2;g=.00680348860198551;break;case "EVEREST 1830 (DEFINITION)":k=6377299.36;g=.00663784663019969;break;case "EVEREST 1830 (MODIFIED)":k=6377304.063;g=.00663784663019969;break;case "EVEREST (ADJUSTMENT 1937)":k=6377276.345;g=.00663784663019969;
break;case "EVEREST (DEFINITION 1962)":k=6377301.243;g=.00663784606842344;break;case "EVEREST (DEFINITION 1967)":k=6377298.556;g=.00663784663019969;break;case "EVEREST (DEFINITION 1975)":k=6377299.151;g=.00663784606842344;break;case "NAD83":case "GEM GRAVITY POTENTIAL MODEL":case "GRS 1980":k=6378137;g=.00669438002290079;break;case "GRS 1967 \x3d INTERNATIONAL 1967":k=6378160;g=.00669460532856765;break;case "HELMERT 1906":k=6378200;g=.00669342162296594;break;case "INDONESIAN NATIONAL":k=6378160;g=
.0066946090804091;break;case "INTERNATIONAL 1924":k=6378388;g=.00672267002233332;break;case "INTERNATIONAL 1967":k=6378160;g=.00669454185458764;break;case "KRASOVSKY 1940":k=6378245;g=.00669342162296594;break;case "TRANSIT PRECISE EPHEMERIS":k=6378145;g=.00669454185458764;break;case "OSU 1986 GEOIDAL MODEL":k=6378136.2;g=.00669438006997852;break;case "OSU 1991 GEOIDAL MODEL":k=6378136.3;g=.00669438006997852;break;case "PLESSIS 1817":k=6376523;g=.00646954373789485;break;case "STRUVE 1860":k=6378298.3;
g=.00677435980080942;break;case "WAR OFFICE":k=6378300.583;g=.00674534331628926;break;case "NWL-10D \x3d\x3d WGS 1972":k=6378135;g=.00669431777826672;break;case "WGS 1972":k=6378135;g=.00669431777826672;break;case "WGS84":case "WGS 1984":k=6378137;g=.00669437999014132;break;case "WGS 1966":k=6378145;g=.00669454185458764;break;case "FISCHER 1960":k=6378166;g=.00669342162296594;break;case "FISCHER 1968":k=6378150;g=.00669342162296594;break;case "FISCHER MODIFIED":k=6378155;g=.00669342162296594;break;
case "HOUGH 1960":k=6378270;g=.00672267002233332;break;case "EVEREST MODIFIED 1969":k=6377295.664;g=.00663784663019969;break;case "WALBECK":k=6376896;g=.00659454809414964;break;case "GRS 1967 TRUNCATED":k=6378160,g=.00669454185458764}p=g/(1-g);a=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g))},getSpheroidList:function(){return"AIRY 1830;AIRY MODIFIED;AUSTRALIAN NATIONAL;AVERAGE TERRESTRIAL SYSTEM 1977;BESSEL 1841;BESSEL MODIFIED;BESSEL NAMIBIA;CLARKE 1858;CLARKE 1866 MICHIGAN;CLARKE 1866;CLARKE 1880 (ARC);CLARKE 1880 (BENOIT);CLARKE 1880 (IGN);CLARKE 1880 (RGS);CLARKE 1880 (SGA);CLARKE 1880;EVEREST (ADJUSTMENT 1937);EVEREST (DEFINITION 1962);EVEREST (DEFINITION 1967);EVEREST (DEFINITION 1975);EVEREST 1830 (DEFINITION);EVEREST 1830 (MODIFIED);EVEREST MODIFIED 1969;FISCHER 1960;FISCHER 1968;FISCHER MODIFIED;GEM GRAVITY POTENTIAL MODEL;GRS 1967 \x3d INTERNATIONAL 1967;GRS 1967 TRUNCATED;GRS 1980;HELMERT 1906;HOUGH 1960;INDONESIAN NATIONAL;INTERNATIONAL 1924;INTERNATIONAL 1967;KRASOVSKY 1940;NWL-10D \x3d\x3d WGS 1972;OSU 1986 GEOIDAL MODEL;OSU 1991 GEOIDAL MODEL;PLESSIS 1817;STRUVE 1860;TRANSIT PRECISE EPHEMERIS;WALBECK;WAR OFFICE;WGS 1966;WGS 1972;WGS 1984".split(";")},
getZoneNumber:function(a,f){a=parseFloat(a);f=parseFloat(f);if(360<f||-180>f){for(;-180>f;)f+=360;for(;180<f;)f-=360}f=f+180-360*Math.floor((f+180)/360)-180;var d=Math.floor((f+180)/6)+1;56<=a&&64>a&&3<=f&&12>f&&(d=32);72<=a&&84>a&&(0<=f&&9>f?d=31:9<=f&&21>f?d=33:21<=f&&33>f?d=35:33<=f&&42>f&&(d=37));return d},LLtoUTM:function(a,f,e){a=parseFloat(a);f=parseFloat(f);if(84<a||-80>a)return"undefined, ensure 84N \x3e Lat \x3e 80S";if(360<f||-180>f){for(;-180>f;)f+=360;for(;180<f;)f-=360}var d,l,n,b;d=
f+180-360*Math.floor((f+180)/360)-180;l=a*Math.PI/180;d=d*Math.PI/180;f=e?e:this.getZoneNumber(a,f);e=(6*(f-1)-180+3)*Math.PI/180;this.UTMLetterDesignator(a);a=k/Math.sqrt(1-g*Math.sin(l)*Math.sin(l));n=Math.tan(l)*Math.tan(l);b=p*Math.cos(l)*Math.cos(l);d=Math.cos(l)*(d-e);return[.9996*a*(d+(1-n+b)*d*d*d/6+(5-18*n+n*n+72*b-58*p)*d*d*d*d*d/120)+5E5,.9996*(k*((1-g/4-3*g*g/64-5*g*g*g/256)*l-(3*g/8+3*g*g/32+45*g*g*g/1024)*Math.sin(2*l)+(15*g*g/256+45*g*g*g/1024)*Math.sin(4*l)-35*g*g*g/3072*Math.sin(6*
l))+a*Math.tan(l)*(d*d/2+(5-n+9*b+4*b*b)*d*d*d*d/24+(61-58*n+n*n+600*b-330*p)*d*d*d*d*d*d/720)),f]},LLtoUSNG:function(a,f,e,g){e=e||5;var d;d=g?g:this.getZoneNumber(a,f);a=parseFloat(a);f=parseFloat(f);var k=this.LLtoUTM(a,f,d);g=k[0];var b=k[1];0>a&&(b+=1E7);k=this.findGridLetters(d,b,g);d=Math.round(b)%1E5;g=Math.round(g)%1E5;d=Math.floor(d/Math.pow(10,5-e));g=Math.floor(g/Math.pow(10,5-e));a=this.getZoneNumber(a,f)+this.UTMLetterDesignator(a)+" "+k+" ";for(f=String(g).length;f<e;f++)a+="0";a+=
g+" ";for(f=String(d).length;f<e;f++)a+="0";return a+d},UTMLetterDesignator:function(a){a=parseFloat(a);return 84>=a&&72<=a?"X":72>a&&64<=a?"W":64>a&&56<=a?"V":56>a&&48<=a?"U":48>a&&40<=a?"T":40>a&&32<=a?"S":32>a&&24<=a?"R":24>a&&16<=a?"Q":16>a&&8<=a?"P":8>a&&0<=a?"N":0>a&&-8<=a?"M":-8>a&&-16<=a?"L":-16>a&&-24<=a?"K":-24>a&&-32<=a?"J":-32>a&&-40<=a?"H":-40>a&&-48<=a?"G":-48>a&&-56<=a?"F":-56>a&&-64<=a?"E":-64>a&&-72<=a?"D":-72>a&&-80<=a?"C":"Z"},findSet:function(a){a=parseInt(a,10);switch(a%6){case 0:return 6;
case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;default:return-1}},findGridLetters:function(a,f,e){a=parseInt(a,10);f=parseFloat(f);e=parseFloat(e);var d=1;for(f=Math.round(f);1E5<=f;)f-=1E5,d++;d%=20;f=0;for(e=Math.round(e);1E5<=e;)e-=1E5,f++;f%=8;return this.lettersHelper(this.findSet(a),d,f)},lettersHelper:function(a,f,e){0===f?f=19:f--;0===e?e=7:e--;switch(a){case 1:return a="ABCDEFGHJKLMNPQRSTUV","ABCDEFGH".charAt(e)+a.charAt(f);case 2:return a="FGHJKLMNPQRSTUVABCDE",
"JKLMNPQR".charAt(e)+a.charAt(f);case 3:return a="ABCDEFGHJKLMNPQRSTUV","STUVWXYZ".charAt(e)+a.charAt(f);case 4:return a="FGHJKLMNPQRSTUVABCDE","ABCDEFGH".charAt(e)+a.charAt(f);case 5:return a="ABCDEFGHJKLMNPQRSTUV","JKLMNPQR".charAt(e)+a.charAt(f);case 6:return a="FGHJKLMNPQRSTUVABCDE","STUVWXYZ".charAt(e)+a.charAt(f)}},UTMtoLL:function(d,f,e){f=parseFloat(f)-5E5;d=parseFloat(d);e=parseInt(e,10);d=d/.9996/(k*(1-g/4-3*g*g/64-5*g*g*g/256));d=d+(3*a/2-27*a*a*a/32)*Math.sin(2*d)+(21*a*a/16-55*a*a*a*
a/32)*Math.sin(4*d)+151*a*a*a/96*Math.sin(6*d);var n=k/Math.sqrt(1-g*Math.sin(d)*Math.sin(d)),l=Math.tan(d)*Math.tan(d),r=p*Math.cos(d)*Math.cos(d),b=f/(.9996*n);f=d-n*Math.tan(d)/(k*(1-g)/Math.pow(1-g*Math.sin(d)*Math.sin(d),1.5))*(b*b/2-(5+3*l+10*r-4*r*r-9*p)*b*b*b*b/24+(61+90*l+298*r+45*l*l-252*p-3*r*r)*b*b*b*b*b*b/720);f=180*f/Math.PI;d=(b-(1+2*l+r)*b*b*b/6+(5-2*r+28*l-3*r*r+8*p+24*l*l)*b*b*b*b*b/120)/Math.cos(d);d=6*(e-1)-180+3+180*d/Math.PI;e={};e.lat=f;e.lon=d;return e},USNGtoUTM:function(a,
f,e,g,k,n){e=1+"ABCDEFGHJKLMNPQRSTUVWXYZ".indexOf(e)%8;var b="CDEFGHJKLMNPQRSTUVWX".indexOf(f);g=a%2?"ABCDEFGHJKLMNPQRSTUV".indexOf(g):"FGHJKLMNPQRSTUVABCDE".indexOf(g);g=Number([0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6][b])+g/10;g<[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9][b]&&(g+=2);b={};b.N=1E6*g+Number(n)*Math.pow(10,5-n.length);b.E=1E5*e+Number(k)*Math.pow(10,5-k.length);b.zone=a;b.letter=f;return b},USNGtoLL:function(a){a=this.parseUSNG_str(a);var d=this.USNGtoUTM(a.zone,
a.ltr,a.sq1,a.sq2,a.east,a.north);"N">a.ltr&&(d.N-=1E7);d=this.UTMtoLL(d.N,d.E,a.zone);return[d.lat,d.lon]},parseUSNG_str:function(a){var d=[];a=a.toUpperCase();d=/%20/g;d=a.replace(d,"");d=/ /g;d=a.replace(d,"");if(7>d.length)return 0;a={};var e=0;a.zone=10*d.charAt(e++)+1*d.charAt(e++);a.ltr=d.charAt(e++);a.sq1=d.charAt(e++);a.sq2=d.charAt(e++);a.precision=(d.length-e)/2;a.east="";a.north="";for(var g=0;g<a.precision;g++)a.east+=d.charAt(e++);" "===d[e]&&e++;for(g=0;g<a.precision;g++)a.north+=d.charAt(e++);
return a},isUSNG:function(a){var d;a=a.toUpperCase();d=/%20/g;a=a.replace(d,"");d=/ /g;a=a.replace(d,"");if(15<a.length)return 0;d=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX]$/;if(a.match(d))return 0;d=/^[0-9]{2}[CDEFGHJKLMNPQRSTUVWX][ABCDEFGHJKLMNPQRSTUVWXYZ][ABCDEFGHJKLMNPQRSTUV]([0-9][0-9]){0,5}/;return!a.match(d)||7>a.length?0:a},LLtoMGRS:function(a,f,e){return this.LLtoUSNG(a,f,e||5).replace(/ /g,"")},USNGtoPoint:function(a){a=this.USNGtoLL(a);return new n(a[1],a[0])},pointToUSNG:function(a,f){var d=a.getLatitude();
a=a.getLongitude();return this.LLtoUSNG(d,a,f)},LLtoUSNG_nad27:function(a,f,e){return this.LLtoUSNG(a,f,e||5)+" (NAD27)"}}})},"widgets/GriddedReferenceGraphic/js/NonPolarGridZone":function(){define(["dojo/_base/declare","dojo/json","./constants","esri/geometry/Polygon","esri/geometry/Extent"],function(n,k,g,p,a){return n(null,{extent:null,id:null,utmZone:null,latitudeZone:null,_rings:[],constructor:function(d){var f=d.id.match(/(\d+)|([A-Za-z]+)/g);this.id=d.id;this.utmZone=1*f[0];this.latitudeZone=
f[1];this.extent=new a({xmin:d.xmin,ymin:d.ymin,xmax:d.xmax,ymax:d.ymax,spatialReference:d.spatialReference||{wkid:4326}});d=[this.extent.xmin,this.extent.ymin];this._rings=[[d,[this.extent.xmax,this.extent.ymin],[this.extent.xmax,this.extent.ymax],[this.extent.xmin,this.extent.ymax],d]]},toPolygon:function(a){var d=k.parse(k.stringify(this._rings));if(a)for(var e=0;e<d[0].length;e++)d[0][e][0]+=a*g.GEOGRAPHIC_360;return new p({rings:d,spatialReference:this.spatialReference})}})})},"widgets/GriddedReferenceGraphic/js/VisibleGridZone":function(){define(["dojo/_base/declare",
"./GridPolygon"],function(n,k){return n(null,{polygon:null,offset:null,nonPolarGridZone:null,fullZoneGeometry:null,map:null,constructor:function(g){this.offset=Math.round(g.offset);this.polygon=g.polygon;this.nonPolarGridZone=g.nonPolarGridZone;this.fullZoneGeometry=g.fullZoneGeometry;this.map=g.map;this.utmZone=g.utmZone;this.latitudeBand=g.latitudeBand;g={clippedPolygon:this.polygon,unclippedPolygon:this.nonPolarGridZone.toPolygon(g.offset),map:this.map,xmin:this.nonPolarGridZone.extent.xmin,ymin:this.nonPolarGridZone.extent.ymin,
xmax:this.nonPolarGridZone.extent.xmax,ymax:this.nonPolarGridZone.extent.ymax,minMaxType:"degrees",utmZone:this.utmZone,text:this.nonPolarGridZone.id,latitudeBand:this.latitudeBand};this.gridPolygon=new k(g)}})})},"widgets/GriddedReferenceGraphic/js/GridPolygon":function(){define(["dojo/_base/declare"],function(n){return n(null,{clippedPolygon:null,unclippedPolygon:null,clippedPolyToUTMZone:null,utmZonePoly:null,fullZoneGeometry:null,map:null,xmin:0,ymin:0,x:"",y:"",xmax:0,ymax:0,minMaxType:"",utmZone:0,
latitudeZone:"",GZD:"",text:"",constructor:function(k){this.unclippedPolygon=k.unclippedPolygon;this.clippedPolygon=k.clippedPolygon;this.utmZonePoly=k.utmZonePoly;this.fullZoneGeometry=k.fullZoneGeometry;this.clippedPolyToUTMZone=k.clippedPolyToUTMZone;this.map=k.map;this.xmin=k.xmin;this.ymin=k.ymin;this.xmax=k.xmax;this.ymax=k.ymax;this.x=k.x;this.y=k.y;this.minMaxType=k.minMaxType;this.utmZone=Math.round(k.utmZone);this.latitudeZone=k.latitudeZone;this.GZD=k.GZD;this.text=k.text}})})},"widgets/GriddedReferenceGraphic/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/GriddedReferenceGraphic/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cspan class\x3d"trans"\x3e${nls.transparency}\x3c/span\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan \x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',
"url:widgets/GriddedReferenceGraphic/templates/FontSetting.html":'\x3cdiv class\x3d"style-selector"\x3e\r\n  \x3cdiv class\x3d"setting-items font clearFix" data-dojo-attach-point\x3d"fontSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.font}"\x3e${nls.font}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"fontSelect" data-dojo-props\x3d\'style:{width:"100%"}\' data-dojo-type\x3d"dijit/form/Select"\x3e\x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-size clearFix" data-dojo-attach-point\x3d"textSizeSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textSize}"\x3e${nls.textSize}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/ComboBox" data-dojo-attach-point\x3d"textSizeSelect"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"text-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"textColorSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.textColor}"\x3e${nls.textColor}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"textColorBtn"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"font-group font-group-btns jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading bold" data-dojo-attach-point\x3d"bold"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading italic" data-dojo-attach-point\x3d"italic"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-btn jimu-float-leading underline" data-dojo-attach-point\x3d"underline"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"setting-items text-color clearFix" data-dojo-attach-point\x3d"transparencySetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.transparency}"\x3e${nls.transparency}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"font-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"text-color-btn" data-dojo-attach-point\x3d"transparencySlider"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e      \r\n    \x3c/div\x3e\r\n  \x3c/div\x3e  \r\n  \x3cdiv class\x3d"setting-items halo-size clearFix" data-dojo-attach-point\x3d"haloSetting"\x3e\r\n    \x3cdiv class\x3d"label jimu-float-leading" title\x3d"${nls.halo}"\x3e${nls.halo}\x3c/div\x3e\r\n    \x3cdiv class\x3d"setting-wapper jimu-float-trailing"\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cselect data-dojo-type\x3d"dijit/form/ComboBox" data-dojo-attach-point\x3d"haloSizeSelect"\x3e\x3c/select\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"halo-color-btn" data-dojo-attach-point\x3d"haloColorBtn"\x3e\x3c/div\x3e        \r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cdiv class\x3d"label" title\x3d"${nls.show}"\x3e${nls.show}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"halo-size-group jimu-float-leading"\x3e\r\n        \x3cinput class\x3d"halo-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"showHalo" checked\x3d"true" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/templates/TransparencyEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0"\r\n         data-dojo-attach-point\x3d"spinner" data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cspan \x3e%\x3c/span\x3e\r\n\x3c/div\x3e\r\n\r\n',"url:widgets/GriddedReferenceGraphic/templates/GridSettings.html":'\x3cdiv\x3e       \r\n    \x3cdiv class\x3d"tabs" data-dojo-attach-point\x3d"tabsContainer"\x3e\r\n      \x3c!-- Grid Settings Tab --\x3e \r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"gridTab"\x3e\r\n        \r\n        \x3c!-- Grid Shape --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridShapeContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellShape}"\x3e\r\n                ${nls.gridSettings.cellShape}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"cellShape" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Units --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridUnitsContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellUnits}"\x3e\r\n                ${nls.gridSettings.cellUnits}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"cellUnits" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Grid Origin --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridOriginContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.gridOrigin}"\x3e\r\n                ${nls.gridSettings.gridOrigin}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"gridOrigin" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"gridRefSystemContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelLeft" title\x3d"${nls.gridSettings.gridReferenceSystem}"\x3e\r\n                ${nls.gridSettings.gridReferenceSystem}\x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis labelRight" title\x3d"${nls.gridSettings.gridDatum}"\x3e\r\n                ${nls.gridSettings.gridDatum}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"referenceSystem" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell Outline Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellOutline}"\x3e\r\n                ${nls.gridSettings.cellOutline}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellOutlineColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Cell fill Color --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.cellFill}"\x3e\r\n                ${nls.gridSettings.cellFill}\x3c/div\x3e\r\n          \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"cellFillColorPicker"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \r\n      \x3c!-- Label Settings Tab --\x3e\r\n      \x3cdiv class\x3d"content-tab" data-dojo-attach-point\x3d"labelTab"\x3e  \r\n        \x3c!-- Label Start Position Selector --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStartPositionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelStartPosition}"\x3e\r\n                ${nls.gridSettings.labelStartPosition}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelStartPosition" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style without Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelType" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling Style with Reference System --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelStyleWithRefSysContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelType}"\x3e\r\n                ${nls.gridSettings.labelType}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelTypeWithRefSys" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Labelling direction --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"labelDirectionContainer"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.labelDirection}"\x3e\r\n                ${nls.gridSettings.labelDirection}\x3c/div\x3e\r\n            \x3cselect data-dojo-attach-point\x3d"labelDirection" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!-- Font Settings --\x3e\r\n        \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"fontSettingsContainer"\x3e\r\n          \x3cdiv class\x3d"GRGDrafterDropdownLabel GRGDrafterEllipsis" title\x3d"${nls.labelStyle}"\x3e\r\n                ${nls.labelStyle}\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"fontSettingNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e        \r\n      \x3c/div\x3e  \r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/templates/ConfirmNotation.html":'\x3cdiv class\x3d\'coordinateContainer\'\x3e\r\n    \x3cspan class\x3d\'jimu-widget-subtitle\' data-dojo-attach-point\x3d\'label1\'\x3e\x3c/span\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cdiv class\x3d"controlItem" style\x3d"padding-top: 10px;"\x3e\r\n            \x3cselect style\x3d"width: 225px" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"comboOptions"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/GriddedReferenceGraphic/templates/EditOutputCoordinate.html":'\x3cdiv\x3e\r\n    \x3cspan class\x3d\'jimu-widget-subtitle\'\x3e${nls.setCoordFormat}\x3c/span\x3e\r\n    \x3cdiv class\x3d"controlContainer"\x3e\r\n        \x3cselect style\x3d"width:80px" name\x3d"test" data-dojo-type\x3d\'dijit/form/Select\' data-dojo-attach-point\x3d"frmtSelect"\x3e\r\n            \x3coption value\x3d"DD"\x3e${nls.DD}\x3c/option\x3e\r\n            \x3coption value\x3d"DDM"\x3e${nls.DDM}\x3c/option\x3e\r\n            \x3coption value\x3d"DMS"\x3e${nls.DMS}\x3c/option\x3e\r\n            \x3coption value\x3d"GARS"\x3e${nls.GARS}\x3c/option\x3e\r\n            \x3coption value\x3d"GEOREF"\x3e${nls.GEOREF}\x3c/option\x3e\r\n            \x3coption value\x3d"MGRS"\x3e${nls.MGRS}\x3c/option\x3e\r\n            \x3coption value\x3d"USNG"\x3e${nls.USNG}\x3c/option\x3e\r\n            \x3coption value\x3d"UTM"\x3e${nls.UTM}\x3c/option\x3e\r\n            \x3coption value\x3d"UTM (H)"\x3e${nls.UTM_H}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n\r\n        \x3cinput type \x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"jimu-input"\x3e\x3c/input\x3e\r\n\r\n        \x3cdiv class\x3d\'settingsContainer\' data-dojo-attach-point\x3d"prefixContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d\'addSignChkBox\'  data-dojo-type\x3d\'jimu/dijit/CheckBox\'\x3e${nls.prefixNumbers}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"btnContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"applyButton" class\x3d\'jimu-btn\'\x3e${nls.applyBtn}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"cancelButton" class\x3d\'jimu-btn\'\x3e${nls.cancelBtn}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/GriddedReferenceGraphic/Widget.html":'\x3cdiv class\x3d"GRGDrafterMainContainer GRGDrafterFullHeight" data-dojo-attach-point\x3d"mainNode"\x3e\r\n    \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterFullWidth" data-dojo-attach-point\x3d"widgetMainNode"\x3e        \r\n        \x3c!---------------------\r\n          Main Page Node\r\n        ----------------------\x3e        \r\n        \x3cdiv class\x3d"esirCTMainPage" data-dojo-attach-point\x3d"mainPageNode"\x3e\r\n            \x3c!-- Create From Area --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e \r\n                \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer" \r\n                      title\x3d"${nls.newGRGFromAreaButtonLabel}" data-dojo-attach-point\x3d"newGRGAreaButton"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGFromAreaButtonLabel}"\x3e\r\n                        ${nls.newGRGFromAreaButtonLabel}\r\n                    \x3c/div\x3e                \r\n                \x3c/div\x3e\r\n              \r\n                \x3c!-- Create From Area Options --\x3e\r\n                \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromAreaContainer"\x3e\r\n                    \x3c!-- Define by size --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n                            ${nls.newGRGBySizeButtonLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" \r\n                          title\x3d"${nls.newGRGBySizeButtonLabel}" data-dojo-attach-point\x3d"newAreaGRGBySizeButton"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Define from reference system --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n                            ${nls.newGRGFromRefSystemButtonLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" \r\n                          title\x3d"${nls.newGRGFromRefSystemButtonLabel}" data-dojo-attach-point\x3d"newAreaGRGFromRefSystemButton"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e                    \r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!-- Create From Point --\x3e\r\n            \x3cdiv class\x3d"GRGDrafterMainPageRowBlock"\x3e            \r\n                \x3cdiv class\x3d"GRGDrafterMainPageRow"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer" \r\n                      title\x3d"${nls.newGRGFromPointButtonLabel}" data-dojo-attach-point\x3d"newGRGPointButton"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis SubTitle" title\x3d"${nls.newGRGFromPointButtonLabel}"\x3e\r\n                        ${nls.newGRGFromPointButtonLabel}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n\r\n                \x3c!-- Create From Point Options --\x3e\r\n                \x3cdiv class\x3d"controlGroupHidden" data-dojo-attach-point\x3d"fromPointContainer"\x3e\r\n                    \x3c!-- Define by size --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByDimension GRGDrafterPointer"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGBySizeButtonLabel}"\x3e\r\n                            ${nls.newGRGBySizeButtonLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" \r\n                          title\x3d"${nls.newGRGBySizeButtonLabel}" data-dojo-attach-point\x3d"newPointGRGBySizeButton"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Define from reference system --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByRefSystemButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGFromRefSystemButtonLabel}"\x3e\r\n                            ${nls.newGRGFromRefSystemButtonLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight" \r\n                            title\x3d"${nls.newGRGFromRefSystemButtonLabel}" data-dojo-attach-point\x3d"newPointGRGFromRefSystemButton"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Define from reference system --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterMainPageRowItem"\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterButtonIcon GRGDrafterNewGRGByTimeButton GRGDrafterPointer"\x3e\x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGByTimeLabel}"\x3e\r\n                            ${nls.newGRGByTimeLabel}\x3c/div\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterMainButtonIcon GRGNewRightButton GRGDrafterPointer GRGFloatRight"" \r\n                          title\x3d"${nls.newGRGByTimeLabel}" data-dojo-attach-point\x3d"newPointGRGFromTimeButton"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e \r\n       \r\n        \x3c!---------------------\r\n          GRG From Area By Size Node\r\n        ----------------------\x3e\r\n        \r\n        \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaBySizePageNode"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n                \x3c!-- Back to Main Menu Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgAreaBySizePanelBackButton"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Panel Title --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeTitle}"\x3e\r\n                  ${nls.newGRGAreaBySizeTitle}\r\n                \x3c/div\x3e\r\n                \x3c!-- Settings Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgAreaBySizeSettingsButton"\x3e\x3c/div\x3e\r\n                \x3c!-- GRG Area Form --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e                  \r\n                  \x3c!-- Draw GRG Area Tool --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20" data-dojo-attach-point\x3d"grgAreaBySizeDrawContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterFullWidth"\x3e\r\n                      \x3cdiv\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterDoubleButtonLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e                        \r\n                        \x3cdiv title\x3d"${nls.addGRGAreaPolygonToolTip}" class\x3d"jimu-icon polygonBtn" data-dojo-attach-point\x3d"grgAreaBySizeDrawPolygonIcon"\x3e\x3c/div\x3e\r\n                        \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn" data-dojo-attach-point\x3d"grgAreaBySizeDrawExtentIcon"\x3e\x3c/div\x3e                        \r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- Set number of cells checkbox --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n                    \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"setNumberRowsColumns" checked\x3d"false" /\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e                \r\n                  \x3c/div\x3e                  \r\n                  \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.numberOfCellsHorizontal}"\x3e${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"cellHorizontal" value\x3d"10" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.numberOfCellsVertical}"\x3e${nls.numberOfCellsVertical}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"cellVertical" value\x3d"10" disabled\x3d\'true\'\x3e\x3c/input\x3e                      \r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3c!-- GRG Cell Width --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n                        \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgAreaBySizeCellWidth" value\x3d"1000" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- GRG Cell Height --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n                        \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",          \r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgAreaBySizeCellHeight" value\x3d"1000" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- Rotation --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n                        \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"  data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\' data-dojo-attach-point\x3d"grgAreaBySizeRotation" value\x3d"0" disabled\x3d\'true\'\x3e\x3c/input\x3e  \r\n                    \x3c/div\x3e \r\n                  \x3c/div\x3e   \r\n                  \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizeClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e \r\n               \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!---------------------\r\n          GRG From Area By Reference System\r\n        ----------------------\x3e\r\n        \r\n        \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaByRefSystemPageNode"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n                \x3c!-- Back to Main Menu Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgAreaByRefSystemPanelBackButton"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Panel Title --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaByRefSystemTitle}"\x3e\r\n                  ${nls.newGRGAreaByRefSystemTitle}\r\n                \x3c/div\x3e\r\n                \x3c!-- Settings Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgAreaByRefSystemSettingsButton"\x3e\x3c/div\x3e\r\n                \x3c!-- GRG Area Form --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n                  \x3c!-- Draw GRG Area Tool --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRowPaddingTop20"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterFullWidth" data-dojo-attach-point\x3d"grgAreaByRefSystemDrawContainer"\x3e\r\n                      \x3cdiv\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterButtonLabel GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaBySizeDefineAreaLabel}"\x3e${nls.newGRGAreaBySizeDefineAreaLabel}\x3c/div\x3e\r\n                      \x3cdiv title\x3d"${nls.addGRGAreaExtentToolTip}" class\x3d"jimu-icon extentBtn" data-dojo-attach-point\x3d"grgAreaByRefSystemDrawIcon"\x3e\x3c/div\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e            \r\n                  \x3c!-- Grid Size DropDown --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n                      \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"grgAreaByRefSystemGridSize"\x3e\r\n                        \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n                        \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n                        \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n                        \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n                        \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n                        \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                  \x3c/div\x3e                  \r\n                  \x3c!-- Clip Grid to GRG Area Toggle --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" \x3e\r\n                    \x3cdiv\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.clipGrid}"\x3e${nls.clipGrid}\x3c/div\x3e\r\n                      \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"grgAreaByRefSystemClipToggle" checked\x3d"false" /\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e                  \r\n                  \x3c!-- Label Format--\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgAreaByRefSystemLabelFormat"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)" data-dojo-attach-point\x3d"grgAreaByRefLabelFormat" value\x3d"Z"\x3e\x3c/input\x3e\r\n                      \x3cdiv  title\x3d"${nls.helpIconTooltip}" class\x3d"jimu-icon helpBtn"\x3e\x3c/div\x3e                          \r\n                  \x3c/div\x3e                  \r\n                  \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaByRefSystemClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e                                                   \r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \r\n        \x3c!---------------------\r\n          GRG From Area From Non Standard Grid\r\n        ----------------------\x3e\r\n        \r\n        \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgAreaFromNonStandardPageNode"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n                \x3c!-- Back to Main Menu Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgAreaByNonStandardPanelBackButton"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Panel Title --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGAreaFromNonStandardTitle}"\x3e\r\n                  ${nls.newGRGAreaFromNonStandardTitle}\r\n                \x3c/div\x3e\r\n                \x3c!-- Settings Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgAreaByNonStandardSettingsButton"\x3e\x3c/div\x3e\r\n                \x3c!-- GRG Area Form --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n                  \x3c!-- GRG Layer Name --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"Area GRG by Reference System"\x3eArea GRG from Non Standard Grid To Do\x3c/div\x3e\r\n                  \x3c/div\x3e                  \r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!---------------------\r\n          GRG From Point by Size Node\r\n        ----------------------\x3e\r\n        \r\n        \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointBySizePageNode"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n                \x3c!-- Back to Main Menu Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgPointBySizePanelBackButton"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Panel Title --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointBySizeTitle}"\x3e\r\n                  ${nls.newGRGPointBySizeTitle}\r\n                \x3c/div\x3e\r\n                \x3c!-- Settings Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgPointBySizeSettingsButton"\x3e\x3c/div\x3e\r\n                \x3c!-- GRG Point Form --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e                  \r\n                  \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" style\x3d"width: 100%" title\x3d"${nls.coordInputLabel}" data-dojo-attach-point\x3d"grgPointBySizeCoordInputLabel"\x3e${nls.coordInputLabel}\x3c/div\x3e                      \r\n                        \x3cdiv\x3e\r\n                          \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-attach-point\x3d"newGRGPointBySizeOriginCoords" /\x3e                        \r\n                          \x3cdiv  title\x3d"${nls.formatIconTooltip}" class\x3d"jimu-icon settingBtn" data-dojo-attach-point\x3d"grgPointBySizeCoordFormatButton"\x3e\x3c/div\x3e\r\n                          \x3cdiv title\x3d"${nls.addPointToolTip}" class\x3d"jimu-icon editBtn" data-dojo-attach-point\x3d"grgPointBySizeAddPointBtn"\x3e\x3c/div\x3e\r\n                        \x3c/div\x3e  \r\n                  \x3c/div\x3e                        \r\n                  \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.numberOfCellsHorizontal}"\x3e${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointBySizeCellHorizontal" value\x3d"5"\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.numberOfCellsVertical}"\x3e${nls.numberOfCellsVertical}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointBySizeCellVertical" value\x3d"5"\x3e\x3c/input\x3e                      \r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3c!-- GRG Cell Width --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n                        \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointBySizeCellWidth" value\x3d"1000" \x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- GRG Cell Height --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n                        \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:0},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",          \r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointBySizeCellHeight" value\x3d"1000"\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- Grid Angle --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridAngle}"\x3e${nls.gridAngle}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"  data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",\r\n                        required: true,\r\n                        rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\' data-dojo-attach-point\x3d"gridAnglePoint" value\x3d"0"\x3e\x3c/input\x3e  \r\n                  \x3c/div\x3e\r\n                  \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointBySizeCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointBySizeClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n               \r\n        \x3c!---------------------\r\n          GRG From Point By Reference System\r\n        ----------------------\x3e\r\n        \r\n        \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByRefSystemPageNode"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n                \x3c!-- Back to Main Menu Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgPointByRefSystemPanelBackButton"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Panel Title --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByRefSystemTitle}"\x3e\r\n                  ${nls.newGRGPointByRefSystemTitle}\r\n                \x3c/div\x3e\r\n                \x3c!-- Settings Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgPointByRefSystemSettingsButton"\x3e\x3c/div\x3e\r\n                \x3c!-- GRG Point Form --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n                  \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" style\x3d"width: 100%" title\x3d"${nls.coordInputLabel}" data-dojo-attach-point\x3d"grgPointByRefSystemCoordInputLabel"\x3e${nls.coordInputLabel}\x3c/div\x3e                      \r\n                        \x3cdiv\x3e\r\n                          \x3cinput class\x3d"jimu-input textInput" data-dojo-attach-point\x3d"newGRGPointByRefSystemOriginCoords" /\x3e                        \r\n                          \x3cdiv  title\x3d"${nls.formatIconTooltip}" class\x3d"jimu-icon settingBtn" data-dojo-attach-point\x3d"grgPointByRefSystemCoordFormatButton"\x3e\x3c/div\x3e\r\n                          \x3cdiv title\x3d"${nls.addPointToolTip}" class\x3d"jimu-icon editBtn" data-dojo-attach-point\x3d"grgPointByRefSystemAddPointBtn"\x3e\x3c/div\x3e\r\n                        \x3c/div\x3e  \r\n                  \x3c/div\x3e\r\n                  \x3c!-- Grid Size DropDown --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.gridSize}"\x3e${nls.gridSize}\x3c/div\x3e\r\n                      \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"grgPointByRefSystemGridSize"\x3e\r\n                        \x3coption value\x3d"UTM" selected\x3d"selected"\x3e${nls.UTMZoneandBand}\x3c/option\x3e\r\n                        \x3coption value\x3d"100000"\x3e${nls.100000m}\x3c/option\x3e\r\n                        \x3coption value\x3d"10000"\x3e${nls.10000m}\x3c/option\x3e\r\n                        \x3coption value\x3d"1000"\x3e${nls.1000m}\x3c/option\x3e\r\n                        \x3coption value\x3d"100"\x3e${nls.100m}\x3c/option\x3e\r\n                        \x3coption value\x3d"10"\x3e${nls.10m}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- Nummber of Cells Horizontal and Vertical --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.numberOfCellsHorizontal}"\x3e${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByRefCellHorizontal" value\x3d"5"\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.numberOfCellsVertical}"\x3e${nls.numberOfCellsVertical}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByRefCellVertical" value\x3d"5"\x3e\x3c/input\x3e                      \r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- Label Format--\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" data-dojo-attach-point\x3d"grgPointByRefSystemLabelFormat"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.labelFormat}"\x3e${nls.labelFormat}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: calc(100% - 20px)" data-dojo-attach-point\x3d"grgPointByRefLabelFormat" value\x3d"Z"\x3e\x3c/input\x3e\r\n                      \x3cdiv  title\x3d"${nls.helpIconTooltip}" class\x3d"jimu-icon helpBtn"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByRefSystemCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByRefSystemClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e                  \r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \r\n        \x3c!---------------------\r\n          GRG From Point By Time and Speed\r\n        ----------------------\x3e\r\n        \r\n        \x3cdiv class\x3d"GRGDrafterFullHeight GRGDrafterHidden" data-dojo-attach-point\x3d"grgPointByTimePageNode"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterNewGRGHeader"\x3e\r\n                \x3c!-- Back to Main Menu Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"grgPointByTimeBackButton"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Panel Title --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.newGRGPointByTimeTitle}"\x3e\r\n                  ${nls.newGRGPointByTimeTitle}\r\n                \x3c/div\x3e\r\n                \x3c!-- Settings Icon --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterSettingsIcon GRGDrafterPointer" title\x3d"${nls.settingsTitle}" data-dojo-attach-point\x3d"grgPointByTimeSettingsButton"\x3e\x3c/div\x3e\r\n                \x3c!-- GRG Point Form --\x3e\r\n                \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e\r\n                  \x3c!-- Draw GRG Point Coordinate Input --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" style\x3d"width: 100%" title\x3d"${nls.coordInputLabel}" data-dojo-attach-point\x3d"grgPointByTimeCoordInputLabel"\x3e${nls.coordInputLabel}\x3c/div\x3e                      \r\n                        \x3cdiv\x3e\r\n                          \x3cinput class\x3d"jimu-input textInput" data-dojo-attach-point\x3d"newGRGPointByTimeOriginCoords" /\x3e                        \r\n                          \x3cdiv  title\x3d"${nls.formatIconTooltip}" class\x3d"jimu-icon settingBtn" data-dojo-attach-point\x3d"grgPointByTimeCoordFormatButton"\x3e\x3c/div\x3e\r\n                          \x3cdiv title\x3d"${nls.addPointToolTip}" class\x3d"jimu-icon editBtn" data-dojo-attach-point\x3d"grgPointByTimeAddPointBtn"\x3e\x3c/div\x3e\r\n                        \x3c/div\x3e  \r\n                  \x3c/div\x3e\r\n                  \r\n                  \x3c!-- Time --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"timeContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.time}"\x3e${nls.time}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeTime" value\x3d"1" disabled\x3d\'false\'\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n                      \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"grgPointByTimeTimeUnits"\x3e\r\n                          \x3coption value\x3d"3600" selected\x3d"selected"\x3e${nls.hours}\x3c/option\x3e\r\n                          \x3coption value\x3d"60"\x3e${nls.minutes}\x3c/option\x3e\r\n                          \x3coption value\x3d"1"\x3e${nls.seconds}\x3c/option\x3e\r\n                        \x3c/select\x3e                      \r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \r\n                  \x3c!-- Rate --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"rateContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.rate}"\x3e${nls.rate}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeRate" value\x3d"10" disabled\x3d\'false\'\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d""\x3e\x26nbsp;\x3c/div\x3e\r\n                      \x3cselect style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"grgPointByTimeRateUnits"\x3e\r\n                        \x3coption value\x3d"0.3048;1"\x3e${nls.ftPerSec}\x3c/option\x3e\r\n                        \x3coption value\x3d"0.3048;3600"\x3e${nls.ftPerHour}\x3c/option\x3e\r\n                        \x3coption value\x3d"1000;1"\x3e${nls.kmPerSec}\x3c/option\x3e\r\n                        \x3coption value\x3d"1000;3600" selected\x3d"selected"\x3e${nls.kmPerHour}\x3c/option\x3e\r\n                        \x3coption value\x3d"1;1"\x3e${nls.mPerSec}\x3c/option\x3e\r\n                        \x3coption value\x3d"1;3600"\x3e${nls.mPerHour}\x3c/option\x3e\r\n                        \x3coption value\x3d"1609.344;1"\x3e${nls.miPerSec}\x3c/option\x3e\r\n                        \x3coption value\x3d"1609.344;3600"\x3e${nls.miPerHour}\x3c/option\x3e\r\n                        \x3coption value\x3d"1852;1"\x3e${nls.nMPerSec}\x3c/option\x3e\r\n                        \x3coption value\x3d"1852;3600"\x3e${nls.nMPerHour}\x3c/option\x3e\r\n                      \x3c/select\x3e                      \r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \r\n                  \x3c!-- Set number of cells checkbox --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidthAndPadding"\x3e\r\n                    \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"setNumberRowsColumnsTime" checked\x3d"true" /\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.numberRowsColumnsLabel}\x3c/label\x3e                \r\n                  \x3c/div\x3e                  \r\n                  \x3c!-- Number of Cells Horizontal and Vertical --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer" data-dojo-attach-point\x3d"numberOfCellsContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.numberOfCellsHorizontal}"\x3e${nls.numberOfCellsHorizontal}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeCellHorizontal" value\x3d"10" disabled\x3d\'false\'\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis"  title\x3d"${nls.numberOfCellsVertical}"\x3e${nls.numberOfCellsVertical}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:1,places:0},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeCellVertical" value\x3d"10" disabled\x3d\'false\'\x3e\x3c/input\x3e                      \r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- GRG Cell Width \x26 Height --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3c!-- GRG Cell Width --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                        \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellWidth}"\x3e${nls.cellWidth}\x3c/div\x3e\r\n                        \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeCellWidth" value\x3d"1000" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- GRG Cell Height --\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthRight GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.cellHeight}"\x3e${nls.cellHeight}\x3c/div\x3e\r\n                        \x3cinput class\x3d"jimu-input dijitNumberTextBox" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'constraints:{min:0,places:2},\r\n                        invalidMessage:"${nls.invalidNumberMessage}",          \r\n                        required: true,\r\n                        rangeMessage:"${nls.invalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeCellHeight" value\x3d"1000" disabled\x3d\'true\'\x3e\x3c/input\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- Rotation --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterHalfWidthLeft GRGDrafterSettingRow"\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.rotation}"\x3e${nls.rotation}\x3c/div\x3e\r\n                        \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%" data-dojo-type\x3d"dijit/form/NumberTextBox"  data-dojo-props\x3d\'constraints:{min:-89.9,max:89.9,places:1},\r\n                          invalidMessage:"${nls.invalidNumberMessage}",\r\n                          required: true,\r\n                          rangeMessage:"${nls.gridAngleInvalidRangeMessage}"\' data-dojo-attach-point\x3d"grgPointByTimeRotation" value\x3d"0" disabled\x3d\'false\'\x3e\x3c/input\x3e  \r\n                    \x3c/div\x3e \r\n                  \x3c/div\x3e\r\n                  \r\n                  \x3c!-- Create \x26 Clear GRG Buttons --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterHalfWidthContainer"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthLeft"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByTimeCreateGRGButton\'\x3e${nls.createGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterBtnContainer GRGDrafterHalfWidthRight"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgPointByTimeClearGRGButton\'\x3e${nls.clearGRGBtn}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e                  \r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n                \r\n        \x3c!---------------------\r\n          Settings\r\n        ----------------------\x3e\r\n        \r\n        \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"settingsPageNode"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n                \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"gridSettingsPanelBackButton"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.settingsTitle}"\x3e\r\n                    ${nls.settingsTitle}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"GRGDrafterSettingsNode" data-dojo-attach-point\x3d"gridSettingsNode"\x3e\x3c/div\x3e            \r\n        \x3c/div\x3e\r\n        \r\n        \x3c!---------------------\r\n          Publish\r\n        ----------------------\x3e\r\n        \r\n        \x3cdiv class\x3d"GRGDrafterHidden GRGDrafterFullHeight" data-dojo-attach-point\x3d"publishPageNode"\x3e\r\n            \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingHeader"\x3e\r\n                \x3cdiv class\x3d"GRGDrafterBackButton GRGDrafterPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"publishPanelBackButton"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterItemLeftArrow"\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"GRGDrafterTitleDiv GRGDrafterEllipsis" title\x3d"${nls.publishTitle}"\x3e\r\n                    ${nls.publishTitle}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"GRGDrafterPanelRow"\x3e                \r\n                  \x3c!-- GRG Layer Name --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow"\x3e\r\n                    \x3cdiv class\x3d"GRGDrafterInputLabel GRGDrafterEllipsis" title\x3d"${nls.GRGLayerName}"\x3e${nls.GRGLayerName}\x3c/div\x3e\r\n                      \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addGRGNameArea"\r\n                        data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_]*\', invalidMessage:\'${nls.invalidGRGLayerName}\', missingMessage:\'${nls.missingGRGLayerName}\'" required\x3d"true"\x3e\x3c/input\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!-- Publish GRG Button --\x3e                  \r\n                  \x3cdiv class\x3d"GRGDrafterBtnContainer"\x3e\r\n                      \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'grgAreaBySizePublishGRGButton\'\x3e${nls.publishGRGBtn}\x3c/div\x3e                    \r\n                  \x3c/div\x3e\r\n                  \x3c!-- Show Labels Toggle --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterFullWidth GRGDrafterSettingRow" \x3e\r\n                    \x3cdiv\x3e\r\n                      \x3cdiv class\x3d"GRGDrafterToggleLabel GRGDrafterEllipsis" title\x3d"${nls.gridSettings.showLabels}"\x3e${nls.gridSettings.showLabels}\x3c/div\x3e\r\n                      \x3cinput class\x3d"switch-toggle" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"settingsShowLabelsToggle" checked\x3d"true" /\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e        \r\n                  \x3c!-- Publishing Message --\x3e\r\n                  \x3cdiv class\x3d"GRGDrafterPublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e  \r\n            \x3c/div\x3e             \r\n        \x3c/div\x3e        \r\n    \x3c/div\x3e    \r\n\x3c/div\x3e',
"url:widgets/GriddedReferenceGraphic/css/style.css":'.GRGDrafterMainContainer{min-width: 222px;}.jimu-widget-GRGDrafter .GRGDrafterFullHeight{height: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidth{width: 100%;}.jimu-widget-GRGDrafter .GRGDrafterFullWidthAndPadding{width: 100%; padding-top: 12px; padding-bottom: 8px;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthLeft{width: 50%;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthRight{padding-left: 10px; width: 50%;}.jimu-widget-GRGDrafter .GRGDrafterHalfWidthContainer{display: flex;}.jimu-widget-GRGDrafter .GRGDrafterEllipsis{overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-GRGDrafter .GRGDrafterPointer{cursor: pointer;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowBlock {display: block;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRow {margin: 10px 10px 10px 10px; display: inline-flex;}.jimu-widget-GRGDrafter .GRGDrafterMainButtonIcon {margin-top: 6px; height: 16px; width: 16px;}.jimu-widget-GRGDrafter .GRGDrafterButtonIcon{height: 24px; width: 24px; float: left;}.jimu-widget-GRGDrafter .GRGFloatRight{float: right;}.jimu-widget-GRGDrafter .GRGDrafterMainPageRowItem {width: calc(100% - 40px); margin: 5px 25px 5px 25px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterButtonLabel{float: left; width: calc(100% - 30px); padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .GRGDrafterDoubleButtonLabel{float: left; width: calc(100% - 65px); padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .GRGDrafterToggleLabel{float: left; width: calc(100% - 35px); padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .GRGDrafterInputLabel{float: left; padding: 5px 5px 0px 0;}.jimu-widget-GRGDrafter .GRGNewRightButton{background: url("./images/arrow-right_black.png") no-repeat;}.jimu-widget-GRGDrafter .GRGNewRightButton:hover{background: url("./images/arrow-right_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGNewDownButton{background: url("./images/arrow-down_black.png") no-repeat; margin-top: 9px;}.jimu-widget-GRGDrafter .GRGNewDownButton:hover{background: url("./images/arrow-down_black_hover.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByDimension{background: url("./images/byDimension.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByRefSystemButton{background: url("./images/byReferenceSystem.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterNewGRGByTimeButton{background: url("./images/byTime.png") no-repeat;}.esriRtl .jimu-widget-GRGDrafter .GRGDrafterButtonIcon{float: left;}.jimu-widget-GRGDrafter .GRGDrafterPublishMessage {float: left; line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: break-all;}.jimu-widget-GRGDrafter .GRGDrafterPanelRow {margin: 10px 10px 10px 10px; display: block;} .jimu-widget-GRGDrafter .GRGDrafterNewGRGHeader{float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon{background-image: url(\'./images/settings_black.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsIcon:Hover{background-image: url(\'./images/settings_black_hover.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .settingsLocked{background-image: url(\'./images/settings_locked.png\'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputInner{height: 18px !important; text-align: right;}.jimu-widget-GRGDrafter .dijitTextBoxFocused .dijitInputContainer{background: transparent;}.jimu-widget-GRGDrafter .GRGDrafterHidden{display: none;}.jimu-widget-GRGDrafter .GRGDrafterSettingsRow {width: 100%; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsButtonIcon {margin-top: 10px; height: 20px; width: 25px; float: right; background-size: 45px;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsDownButton{background: url("../images/down-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterLabelSettingsUpButton{background: url("../images/up-arrow.png") no-repeat;}.jimu-widget-GRGDrafter .GRGDrafterSettingsNode{width: 100%; height: calc(100% - 30px); display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterSettingsContainer{margin: 10px; display: inline-block; width: calc(100% - 20px);}.jimu-widget-GRGDrafter .GRGDrafterSettingRow{padding-bottom: 6px; padding-top: 6px;}.jimu-widget-GRGDrafter .GRGDrafterSettingRowPaddingTop20{padding-top: 20px;}.jimu-widget-GRGDrafter .GRGDrafterDropdownLabel{padding-bottom: 5px;}.jimu-widget-GRGDrafter .GRGDrafterSettingHeader{float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-GRGDrafter .GRGDrafterBackButton{width: 25%;}.jimu-widget-GRGDrafter .GRGDrafterTitleDiv{line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow{background-image: url(\'./images/left-arrow_black.png\'); float: left; margin: 0px 5px 0px 0px; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow:hover{background-image: url(\'./images/left-arrow_black_hover.png\');}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContents{border-style: none none none none; background-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitButtonContentsDartTheme {background-color: inherit;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButton{background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-GRGDrafter .dijitSelect .dijitArrowButtonDartTheme {background-color: rgba(0, 0, 0, 0.5) !important;}.jimu-widget-GRGDrafter .dijitMenuItem{color: #7989a0;}.jimu-widget-GRGDrafter .dijitSelect .dijitInputField{margin-right: 8px;}.jimu-widget-GRGDrafter .switch-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-GRGDrafter .jimu-tab\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 12px; line-height: 26px !important;;}.jimu-widget-GRGDrafter .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #000; font-family: "Avenir Heavy"; color: #000000;}.jimu-widget-GRGDrafter .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 12px; margin: 20px 0 10px 0;}.jimu-widget-GRGDrafter .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;}.jimu-widget-GRGDrafter .dijitTextBox .dijitPlaceHolder{font-size: 12px;}.jimu-widget-GRGDrafter .dijitTextBoxError {border-color: #d9dde0 !important; box-shadow: inset 0 0 0 2px #d46464;}.esriRtl .jimu-widget-GRGDrafter .GRGDrafterInputLabel{float: right; padding: 5px 5px 0px 0px;}.esriRtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow{float: right; margin: 0px 0px 00px 10px;}.esriRtl .jimu-widget-GRGDrafter .GRGDrafterSettingsIcon{float: left;}.esriRtl .jimu-widget-GRGDrafter .GRGDrafterItemLeftArrow{background-image: url(\'./images/left-arrow_black.png\');}.esriRtl .jimu-widget-GRGDrafter .dijitSelect .dijitInputField{margin-left: 8px; margin-right: 0;}.SubTitle {font-weight: bold;}.jimu-widget-GRGDrafter .settingBtn {display: inline-block; background: url(./images/settings_black.png); background-repeat: no-repeat; background-color: transparent; width: 15px; height: 15px; margin-top: 7px; margin-left: 5px; margin-bottom: -3px;}.jimu-widget-GRGDrafter .settingBtn:hover {background: url(\'./images/settings_black_hover.png\');}.jimu-widget-GRGDrafter .editBtn {float: right; background: url(./images/draw_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .editBtn:hover {background: url(\'./images/draw_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-edit-active {background: url(\'./images/draw_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .helpBtn {float: right; background: url(./images/help_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-widget-GRGDrafter .helpBtn:hover {float: right; background: url(./images/help_black_hover.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-widget-GRGDrafter .polygonBtn {display: inline-block; background: url(./images/polygon_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .polygonBtn:hover {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-polygon-active {background: url(\'./images/polygon_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .extentBtn {display: inline-block; background: url(./images/extent_default.png); background-repeat: no-repeat; background-color: transparent; width: 30px; height: 30px;}.jimu-widget-GRGDrafter .extentBtn:hover {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat;}.jimu-widget-GRGDrafter .jimu-extent-active {background: url(\'./images/extent_gray_hover.png\'); background-repeat: no-repeat; border: none;}.jimu-widget-GRGDrafter .add-with-icon {vertical-align: text-top !important;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-GRGDrafter .GRGDrafterBtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-widget-GRGDrafter .controlGroupHidden {display: none;}.jimu-widget-GRGDrafter .controlItem {display: flex;}.jimu-widget-GRGDrafter .jimu-btn {margin-bottom: 6px;}.jimu-widget-GRGDrafter .dijitSlider {width: calc(100% - 212px);}.jimu-widget-GRGDrafter .dijitSlider {margin-left: 10px; margin-right: auto; margin-top: 14px;}.jimu-rtl .jimu-widget-GRGDrafter .dijitSlider {margin-left: auto; margin-right: 10px;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderImageHandleH {top: -10px; width: 20px; height: 20px;}.jimu-widget-GRGDrafter .colorPickerEditor .jimu-color-picker{display: inline-block; width: 25px; height: 25px;}.jimu-widget-GRGDrafter .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox{width:65px; height:30px;}.jimu-widget-GRGDrafter .dijitSliderImageHandleH{top: -7px;}.jimu-widget-GRGDrafter .dijitSliderThumbHover{background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: url("./images/sliderball.svg"); background-position: 0 0;}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderProgressBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderLeftBumper{border-color: #000; background-color: #000; background-image: -webkit-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: -o-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px);}.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-GRGDrafter .dijitSlider .dijitSliderRightBumper{border-color: #d7d7d7; background-color: #d7d7d7;}.jimu-widget-GRGDrafter .colorPickerEditor .trans{font-family: "Avenir Light"; font-size: 12px; padding: 0 5px 0 5px; letter-spacing: 0.33px;}.jimu-widget-GRGDrafter .sliderbar {width: 60px;}.jimu-widget-GRGDrafter .style-selector .clearFix {*overflow: hidden; *zoom: 1}.jimu-widget-GRGDrafter .style-selector .clearFix:after {display: table; content: ""; width: 0; clear: both}.jimu-widget-GRGDrafter .style-selector .hide {display: none}.jimu-widget-GRGDrafter .settings-container {}.jimu-widget-GRGDrafter .settings-container .title {font-size: 14px; color: #000000; letter-spacing: 0.39px; margin-bottom: 20px;}.jimu-widget-GRGDrafter .settings-container .label {font-size: 12px; color: #282828; letter-spacing: 0.33px; line-height: 30px;}.jimu-widget-GRGDrafter .style-selector .label {margin: 0 0; max-width: 160px; line-height: 30px; font-size: 12px; vertical-align: middle; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitSelect {width: 100%; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .jimu-color-picker {width: 40px !important; height: 30px !important; border: 1px solid #D7D7D7 !important;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButtonContainer {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitDownArrowButton .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitComboBox .dijitDownArrowButton {border: none;}.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitInputInner {padding: 1px 0 0 0 !important; font-size: 12px; font-style: normal !important; height: 28px; line-height: 28px !important;}.jimu-widget-GRGDrafter .style-selector .dijitSelectLabel {font-size: 12px;}.jimu-widget-GRGDrafter .style-selector .dijitSelect,.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitButtonContents,.jimu-widget-GRGDrafter .style-selector .dijitTextBox,.jimu-widget-GRGDrafter .style-selector .dijitTextBox .dijitButtonNode {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitArrowButton {background-color: transparent;}.jimu-widget-GRGDrafter .style-selector .dijitSelect .dijitInputField {padding: 0px 10px;}.jimu-widget-GRGDrafter .jimu-image-chooser .display-text {width: 100%; font-size: 12px; color: #4A4A4A; letter-spacing: 0.33px; background-color: #FFF; text-align: center;}.jimu-image-chooser:hover .hint .display-text {color: #FFF;}.jimu-widget-GRGDrafter .dijitTextBoxFocused {border: 1px solid #D7D7D7 !important; box-shadow: 0 0 0 0 !important;}.jimu-widget-GRGDrafter .dijitTextBox .dijitInputField {padding: 2px 7px;}.jimu-widget-GRGDrafter .dijitSelectFocused .dijitArrowButton .dijitArrowButtonInner {background-position: -35px 53%;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3e.dijitComboBox.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .text-size .text-size-group\x3etable {width: 140px;}.jimu-widget-GRGDrafter .halo-size .halo-size-group\x3e.dijitComboBox.dijitValidationTextBox {width: 80px;}.jimu-widget-GRGDrafter .style-selector .setting-items {height: 30px; width: 100%; margin: 10px 0; vertical-align: middle; white-space: nowrap;}.jimu-widget-GRGDrafter .style-selector .setting-wapper {width: 230px;}.jimu-widget-GRGDrafter .style-selector .background-btn,.jimu-widget-GRGDrafter .style-selector .text-color-btn {width: 40px; height: 30px; overflow: hidden;}.jimu-widget-GRGDrafter .style-selector .halo-color-btn {width: 50px; height: 30px; overflow: hidden; padding-left: 5px; padding-right: 5px;}.jimu-widget-GRGDrafter .style-selector .align-group {margin-right: 8px; margin-left: -3px;}.jimu-rtl .jimu-widget-GRGDrafter .style-selector .align-group {margin-right: -3px; margin-left: 8px;}.jimu-widget-GRGDrafter .style-selector .font-group-btns {margin-left: 6px; margin-right: 6px;}.jimu-widget-GRGDrafter .style-selector .align-btn,.jimu-widget-GRGDrafter .style-selector .font-btn {height: 30px; margin: 0 3px;}.jimu-widget-GRGDrafter .style-selector .font-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .align-btn {width: 30px;}.jimu-widget-GRGDrafter .style-selector .image-btn {width: 120px; height: 30px; border: 1px solid #D7D7D7;}.jimu-widget-GRGDrafter .style-selector .bold {background: url("./images/font_B.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .bold.selected {background: url("./images/font_B_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic {background: url("./images/font_I.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .italic.selected {background: url("./images/font_I_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline {background: url("./images/font_U.svg") no-repeat;}.jimu-widget-GRGDrafter .style-selector .underline.selected {background: url("./images/font_U_selected.svg") no-repeat;}.jimu-widget-GRGDrafter .halo-toggle-group {padding: 5px;}.jimu-widget-GRGDrafter .halo-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-GRGDrafter .halo-toggle-group .halo-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-top: 6px; margin-left: 5px;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox:before {content: ""; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-GRGDrafter .halo-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.DartTheme .jimu-widget-GRGDrafter .dijitSelectDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled .dijitInputContainer ,.DartTheme .jimu-widget-GRGDrafter .dijitTextBoxDisabled {background-color: #4c4c4c;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url(images/tooltip.png);}.claro .dijitPopup.dijitTooltipDialogPopup .jimu-input {vertical-align: bottom;}.claro .dijitPopup.dijitTooltipDialogPopup .settingsContainer {margin-top: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup .checkbox.jimu-float-leading.jimu-icon.jimu-icon-checkbox {margin-right: 6px;}.claro .dijitPopup.dijitTooltipDialogPopup span.jimu-widget-subtitle {display: inline-block; margin-bottom: 6px;}',
"*now":function(n){n(['dojo/i18n!*preload*widgets/GriddedReferenceGraphic/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo dojo/_base/declare jimu/BaseWidget dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/keys dojo/string dojo/topic dojo/_base/html dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup dijit/Menu dijit/MenuItem jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/LayerInfos/LayerInfos jimu/utils esri/IdentityManager esri/arcgis/Portal esri/Color esri/dijit/util/busyIndicator esri/graphic esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/Point esri/geometry/Polyline esri/geometry/webMercatorUtils esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/toolbars/draw esri/toolbars/edit esri/renderers/SimpleRenderer ./js/GridSettings ./js/CoordinateInput ./js/drawGRG ./js/DrawFeedBack ./js/EditOutputCoordinate ./js/geometry-utils ./js/geometryUtils ./js/mgrs-utils ./js/mgrs dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/NumberSpinner".split(" "),function(n,
k,g,p,a,d,f,e,q,l,r,b,h,c,m,u,z,K,x,B,J,D,E,A,w,y,t,v,F,G,H,I,Q,R,Z,aa,N,P,O,S,W,V,T,C,M,L,U,ba,X,Y){return k([g,h,c],{baseClass:"jimu-widget-GRGDrafter",_lastOpenPanel:"mainPage",_currentOpenPanel:"mainPage",_gridSettingsInstance:null,_cellShape:"default",_labelStartPosition:"lowerLeft",_cellUnits:"meters",_labelType:"alphaNumeric",_labelTypeWithRefSys:"gridReferenceSystem",_labelDirection:"horizontal",_gridOrigin:"center",_referenceSystem:"MGRS",_showLabels:!0,_GRGAreaFillSymbol:null,_cellTextSymbol:null,
angle:0,featureLayerInfo:null,centerPoint:[],geodesicGrid:!0,postMixInProperties:function(){this.nls.common={};a.mixin(this.nls.common,window.jimuNls.common)},constructor:function(a){k.safeMixin(this,a)},postCreate:function(){String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!==typeof a[c]?a[c]:b})});this.inherited(arguments);this.extentAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:[155,155,155,0],
outline:{color:[0,0,255,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}};this.pointSymbol={color:[255,0,0,255],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}};this._graphicsLayerGRGExtent=new R({id:"graphicsLayerGRGExtent"});this._graphicsLayerGRGTimeExtent=new R({id:"graphicsLayerGRGTimeExtent"});this._extentSym=new N(this.extentAreaFillSymbol);this._ptSym=new aa(this.pointSymbol);this.GRGArea=new Q({layerDefinition:{geometryType:"esriGeometryPolygon",
objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"grid",alias:"grid",type:"esriFieldTypeString"}],drawingInfo:{renderer:{type:"simple",symbol:this.gridSymbol},transparency:0,labelingInfo:[{labelExpression:"[grid]",labelExpressionInfo:{value:"{grid}"},format:null,fieldInfos:null,useCodedValues:!1,maxScale:0,minScale:0,where:null,sizeInfo:null,labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:this._cellTextSymbol}]},extent:{xmin:-1.8746028312877923E7,
ymin:-6027547.894280539,xmax:1.882429982984192E7,ymax:1.2561937384669386E7,spatialReference:{wkid:102100}}}},{id:"Gridded-Reference-Graphic",outFields:["*"],showLabels:!0});this.map.addLayers([this._graphicsLayerGRGTimeExtent,this.GRGArea,this._graphicsLayerGRGExtent]);var b;if(this.GRGArea.loaded)b=J.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic"),b.enablePopup(),this._showLabels&&b.showLabels();else this.GRGArea.on("load",a.hitch(this,function(){b=J.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");
b.enablePopup();this._showLabels&&b.showLabels()}));this.grgPointBySizeCoordTool=new T({nls:this.nls,appConfig:this.appConfig,style:"width: calc(100% - 60px);"},this.newGRGPointBySizeOriginCoords);this.grgPointBySizeCoordTool.inputCoordinate.formatType="DD";this.grgPointBySizeCoordinateFormat=new m({content:new L({nls:this.nls}),style:"width: 400px"});"DartTheme"===this.appConfig.theme.name&&d.add(this.grgPointBySizeCoordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.grgPointByRefSystemCoordTool=
new T({nls:this.nls,appConfig:this.appConfig,style:"width: calc(100% - 60px);"},this.newGRGPointByRefSystemOriginCoords);this.grgPointByRefSystemCoordTool.inputCoordinate.formatType="DD";this.grgPointByRefSystemCoordinateFormat=new m({content:new L({nls:this.nls}),style:"width: 400px"});"DartTheme"===this.appConfig.theme.name&&d.add(this.grgPointByRefSystemCoordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.grgPointByTimeCoordTool=new T({nls:this.nls,appConfig:this.appConfig,
style:"width: calc(100% - 60px);"},this.newGRGPointByTimeOriginCoords);this.grgPointByTimeCoordTool.inputCoordinate.formatType="DD";this.grgPointByTimeCoordinateFormat=new m({content:new L({nls:this.nls}),style:"width: 400px"});"DartTheme"===this.appConfig.theme.name&&d.add(this.grgPointByTimeCoordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt_AreaBySize=new O(this.map);this.dt_PointBySize=new M(this.map,this.grgPointBySizeCoordTool.inputCoordinate.util);this.dt_PointByRefSystem=
new M(this.map,this.grgPointByRefSystemCoordTool.inputCoordinate.util);this.dt_PointByTime=new M(this.map,this.grgPointByTimeCoordTool.inputCoordinate.util);this.dt_AreaByRefSystem=new O(this.map);this.editToolbar=new S(this.map,{uniformScaling:!0,allowAddVertices:!0,allowDeleteVertices:!0});this._initLoading();this._handleClickEvents();this._createGridSettings()},startup:function(){this.inherited(arguments);this.busyIndicator=y.create({target:this.domNode.parentNode.parentNode.parentNode,backgroundOpacity:0});
this._setTheme()},onOpen:function(){},onClose:function(){},_initLoading:function(){this.loading=new B({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},_handleClickEvents:function(){this.own(e(this.newGRGAreaButton,"click",a.hitch(this,function(){d.contains(this.newGRGAreaButton,"GRGNewRightButton")?(b.removeClass(this.fromAreaContainer,"controlGroupHidden"),b.removeClass(this.newGRGAreaButton,"GRGNewRightButton"),b.addClass(this.newGRGAreaButton,"GRGNewDownButton"),b.addClass(this.fromPointContainer,
"controlGroupHidden"),b.removeClass(this.newGRGPointButton,"GRGNewDownButton"),b.addClass(this.newGRGPointButton,"GRGNewRightButton")):(b.addClass(this.fromAreaContainer,"controlGroupHidden"),b.addClass(this.newGRGAreaButton,"GRGNewRightButton"),b.removeClass(this.newGRGAreaButton,"GRGNewDownButton"))})));this.own(e(this.newGRGPointButton,"click",a.hitch(this,function(){d.contains(this.newGRGPointButton,"GRGNewRightButton")?(b.removeClass(this.fromPointContainer,"controlGroupHidden"),b.removeClass(this.newGRGPointButton,
"GRGNewRightButton"),b.addClass(this.newGRGPointButton,"GRGNewDownButton"),b.addClass(this.fromAreaContainer,"controlGroupHidden"),b.removeClass(this.newGRGAreaButton,"GRGNewDownButton"),b.addClass(this.newGRGAreaButton,"GRGNewRightButton")):(b.addClass(this.fromPointContainer,"controlGroupHidden"),b.addClass(this.newGRGPointButton,"GRGNewRightButton"),b.removeClass(this.newGRGPointButton,"GRGNewDownButton"))})));this.own(e(this.newAreaGRGBySizeButton,"click",a.hitch(this,function(){this._showPanel("grgAreaBySize")})));
this.own(e(this.newAreaGRGFromRefSystemButton,"click",a.hitch(this,function(){this._showPanel("grgAreaByRefSystem")})));this.own(e(this.newPointGRGBySizeButton,"click",a.hitch(this,function(){this._showPanel("grgPointBySize")})));this.own(e(this.newPointGRGFromRefSystemButton,"click",a.hitch(this,function(){this._showPanel("grgPointByRefSystem")})));this.own(e(this.newPointGRGFromTimeButton,"click",a.hitch(this,function(){this._showPanel("grgPointByTime")})));this.own(e(this.grgAreaBySizePanelBackButton,
"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgAreaBySizeSettingsButton.title=this.nls.lockSettings,b.addClass(this.grgAreaBySizeSettingsButton,"settingsLocked"),b.removeClass(this.grgAreaBySizeSettingsButton,"GRGDrafterSettingsIcon")):this.own(e(this.grgAreaBySizeSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(e(this.grgAreaBySizeDrawPolygonIcon,"click",
a.hitch(this,this._grgAreaBySizeDrawPolygonIconClicked)));this.own(e(this.grgAreaBySizeDrawExtentIcon,"click",a.hitch(this,this._grgAreaBySizeDrawExtentIconClicked)));this.own(e(this.dt_AreaBySize,"draw-complete",a.hitch(this,this._dt_AreaBySizeComplete)));this.own(e(this.grgAreaBySizeCreateGRGButton,"click",a.hitch(this,this._grgAreaBySizeCreateGRGButtonClicked)));this.own(e(this.grgAreaBySizeClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(e(this.setNumberRowsColumns,
"click",a.hitch(this,this._setNumberRowsColumnsCheckBoxChanged)));this.own(e(this.cellHorizontal,"blur",a.hitch(this,function(){this.cellHorizontal.isValid()&&this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(U.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(e(this.cellVertical,"blur",a.hitch(this,function(){this.cellVertical.isValid()&&
this._graphicsLayerGRGExtent.graphics[0]&&(0===this.angle?this._calculateCellWidthAndHeight(U.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent())):this._calculateCellWidthAndHeight(this._graphicsLayerGRGExtent.graphics[0].geometry))})));this.own(e(this.grgAreaBySizeRotation,"keyup",a.hitch(this,function(){setTimeout(a.hitch(this,function(){this.grgAreaBySizeRotation.setValue(parseFloat(this.grgAreaBySizeRotation.displayedValue));if(this.grgAreaBySizeRotation.isValid()&&
!isNaN(this.grgAreaBySizeRotation.value)&&this._graphicsLayerGRGExtent.graphics[0]){var a=this.grgAreaBySizeRotation.getValue()-this.angle,a=v.rotate(this._graphicsLayerGRGExtent.graphics[0].geometry,-1*a);this._graphicsLayerGRGExtent.clear();a=new t(a,this._extentSym);this._graphicsLayerGRGExtent.add(a);this.angle=this.grgAreaBySizeRotation.getValue();this.editToolbar.deactivate()}}),1E3)})));this.own(e(this.grgAreaByRefSystemPanelBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));
this.config.grg.lockSettings?(this.grgAreaByRefSystemSettingsButton.title=this.nls.lockSettings,b.addClass(this.grgAreaByRefSystemSettingsButton,"settingsLocked"),b.removeClass(this.grgAreaByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):this.own(e(this.grgAreaByRefSystemSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(e(this.grgAreaByRefSystemDrawIcon,"click",a.hitch(this,this._grgAreaByRefSystemDrawIconClicked)));
this.own(e(this.grgAreaByRefSystemCreateGRGButton,"click",a.hitch(this,this._grgAreaByRefSystemCreateGRGButtonClicked)));this.own(e(this.grgAreaByRefSystemClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(e(this.dt_AreaByRefSystem,"draw-complete",a.hitch(this,this._dt_AreaByRefSystemComplete)));this.own(e(this.grgAreaByRefSystemGridSize,"change",a.hitch(this,function(){switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":this.grgAreaByRefLabelFormat.value=
"Z";break;case "100000":this.grgAreaByRefLabelFormat.value="ZS";break;default:this.grgAreaByRefLabelFormat.value="ZSXY"}})));this.own(e(this.grgPointBySizePanelBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointBySizeSettingsButton.title=this.nls.lockSettings,b.addClass(this.grgPointBySizeSettingsButton,"settingsLocked"),b.removeClass(this.grgPointBySizeSettingsButton,"GRGDrafterSettingsIcon")):this.own(e(this.grgPointBySizeSettingsButton,
"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(e(this.grgPointBySizeCreateGRGButton,"click",a.hitch(this,this._grgPointBySizeCreateGRGButtonClicked)));this.own(e(this.grgPointBySizeClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(e(this.grgPointBySizeAddPointBtn,"click",a.hitch(this,this._grgPointBySizeDrawButtonClicked)));this.own(e(this.dt_PointBySize,"draw-complete",a.hitch(this,this._dt_PointBySizeComplete)));
this.own(this.grgPointBySizeCoordTool.inputCoordinate.watch("outputString",a.hitch(this,function(a,b,c){this.grgPointBySizeCoordTool.manualInput||this.grgPointBySizeCoordTool.set("value",c)})));this.own(this.dt_PointBySize.watch("startPoint",a.hitch(this,function(a,b,c){this.grgPointBySizeCoordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.dt_PointBySize.addStartGraphic(c,this._ptSym,this._graphicsLayerGRGExtent)})));this.own(e(this.grgPointBySizeCoordTool,"keyup",a.hitch(this,this._grgPointBySizeCoordToolKeyWasPressed)));
this.own(e(this.grgPointBySizeCoordFormatButton,"click",a.hitch(this,this._grgPointBySizeCoordFormatButtonClicked)));this.own(e(this.grgPointBySizeCoordinateFormat.content.applyButton,"click",a.hitch(this,this._grgPointBySizeCoordFormatPopupApplyButtonClicked)));this.own(e(this.grgPointBySizeCoordinateFormat.content.cancelButton,"click",a.hitch(this,function(){u.close(this.grgPointBySizeCoordinateFormat)})));this.own(e(this.grgPointByRefSystemPanelBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));
this.config.grg.lockSettings?(this.grgPointByRefSystemSettingsButton.title=this.nls.lockSettings,b.addClass(this.grgPointByRefSystemSettingsButton,"settingsLocked"),b.removeClass(this.grgPointByRefSystemSettingsButton,"GRGDrafterSettingsIcon")):this.own(e(this.grgPointByRefSystemSettingsButton,"click",a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(e(this.grgPointByRefSystemCreateGRGButton,"click",a.hitch(this,this._grgPointByRefSystemCreateGRGButtonClicked)));
this.own(e(this.grgPointByRefSystemClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(e(this.grgPointByRefSystemAddPointBtn,"click",a.hitch(this,this._grgPointByRefSystemDrawButtonClicked)));this.own(e(this.dt_PointByRefSystem,"draw-complete",a.hitch(this,this._dt_PointByRefSystemComplete)));this.own(this.grgPointByRefSystemCoordTool.inputCoordinate.watch("outputString",a.hitch(this,function(a,b,c){this.grgPointByRefSystemCoordTool.manualInput||this.grgPointByRefSystemCoordTool.set("value",
c)})));this.own(this.dt_PointByRefSystem.watch("startPoint",a.hitch(this,function(a,b,c){this.grgPointByRefSystemCoordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.dt_PointByRefSystem.addStartGraphic(c,this._ptSym,this._graphicsLayerGRGExtent)})));this.own(e(this.grgPointByRefSystemCoordTool,"keyup",a.hitch(this,this._grgPointByRefSystemCoordToolKeyWasPressed)));this.own(e(this.grgPointByRefSystemCoordFormatButton,"click",a.hitch(this,this._grgPointByRefSystemCoordFormatButtonClicked)));
this.own(e(this.grgPointByRefSystemCoordinateFormat.content.applyButton,"click",a.hitch(this,this._grgPointByRefSystemCoordFormatPopupApplyButtonClicked)));this.own(e(this.grgPointByRefSystemCoordinateFormat.content.cancelButton,"click",a.hitch(this,function(){u.close(this.grgPointByRefSystemCoordinateFormat)})));this.own(e(this.grgPointByRefSystemGridSize,"change",a.hitch(this,function(){switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":this.grgPointByRefLabelFormat.value="Z";break;
case "100000":this.grgPointByRefLabelFormat.value="ZS";break;default:this.grgPointByRefLabelFormat.value="ZSXY"}})));this.own(e(this.grgPointByTimeBackButton,"click",a.hitch(this,function(){this._resetOnBackToMainPage()})));this.config.grg.lockSettings?(this.grgPointByTimeSettingsButton.title=this.nls.lockSettings,b.addClass(this.grgPointByTimeSettingsButton,"settingsLocked"),b.removeClass(this.grgPointByTimeSettingsButton,"GRGDrafterSettingsIcon")):this.own(e(this.grgPointByTimeSettingsButton,"click",
a.hitch(this,function(){this._updateSettingsPage(this._currentOpenPanel);this._showPanel("settingsPage")})));this.own(e(this.grgPointByTimeCreateGRGButton,"click",a.hitch(this,this._grgPointByTimeCreateGRGButtonClicked)));this.own(e(this.grgPointByTimeClearGRGButton,"click",a.hitch(this,function(){this._clearLayers(!0)})));this.own(e(this.grgPointByTimeAddPointBtn,"click",a.hitch(this,this._grgPointByTimeDrawButtonClicked)));this.own(e(this.dt_PointByTime,"draw-complete",a.hitch(this,this._dt_PointByTimeComplete)));
this.own(this.grgPointByTimeCoordTool.inputCoordinate.watch("outputString",a.hitch(this,function(a,b,c){this.grgPointByTimeCoordTool.manualInput||this.grgPointByTimeCoordTool.set("value",c)})));this.own(this.dt_PointByTime.watch("startPoint",a.hitch(this,function(a,b,c){this.grgPointByTimeCoordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.dt_PointByTime.addStartGraphic(c,this._ptSym,this._graphicsLayerGRGExtent)})));this.own(e(this.grgPointByTimeCoordTool,"keyup",a.hitch(this,this._grgPointByTimeCoordToolKeyWasPressed)));
this.own(e(this.grgPointByTimeCoordFormatButton,"click",a.hitch(this,this._grgPointByTimeCoordFormatButtonClicked)));this.own(e(this.grgPointByTimeCoordinateFormat.content.applyButton,"click",a.hitch(this,this._grgPointByTimeCoordFormatPopupApplyButtonClicked)));this.own(e(this.grgPointByTimeCoordinateFormat.content.cancelButton,"click",a.hitch(this,function(){u.close(this.grgPointByTimeCoordinateFormat)})));this.own(e(this.setNumberRowsColumnsTime,"click",a.hitch(this,this._setNumberRowsColumnsTimeCheckBoxChanged)));
this.own(e(this.gridSettingsPanelBackButton,"click",a.hitch(this,function(){this._gridSettingsInstance.onClose();this._showPanel(this._lastOpenPanel)})));this.own(e(this.publishPanelBackButton,"click",a.hitch(this,function(){this.publishMessage.innerHTML="";this.addGRGNameArea.setValue("");this._graphicsLayerGRGExtent.show();this._graphicsLayerGRGTimeExtent.clear();this._showPanel(this._lastOpenPanel)})));this.own(e(this.grgAreaBySizePublishGRGButton,"click",a.hitch(this,function(){this.addGRGNameArea.isValid()?
(this.publishMessage.innerHTML="",this._initSaveToPortal(this.addGRGNameArea.value)):this.publishMessage.innerHTML=this.nls.missingLayerNameMessage})));this.own(e(this.settingsShowLabelsToggle,"click",a.hitch(this,function(){var a=J.getInstanceSync().getLayerInfoById("Gridded-Reference-Graphic");(this._showLabels=this.settingsShowLabelsToggle.checked)?a.showLabels():a.hideLabels()})));this.own(e(this.editToolbar,"graphic-move-stop",a.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid()})));
this.own(e(this.editToolbar,"rotate-stop",a.hitch(this,function(a){this.angle+=parseFloat(a.info.angle.toFixed(1));this.grgAreaBySizeRotation.setValue(this.angle)})));this.own(e(this.editToolbar,"vertex-move-stop",a.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid();this._calculateCellWidthAndHeight(U.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()))})));this.own(e(this.editToolbar,"scale-stop",a.hitch(this,function(a){this.centerPoint=a.graphic.geometry.getCentroid();
this._calculateCellWidthAndHeight(a.graphic.geometry)})))},_updateSettingsPage:function(a){b.removeClass(this._gridSettingsInstance.gridShapeContainer,"controlGroupHidden");b.removeClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden");b.removeClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden");b.removeClass(this._gridSettingsInstance.labelStartPositionContainer,"controlGroupHidden");b.removeClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden");
b.addClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");b.addClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden");b.addClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden");switch(a){case "grgPointBySize":b.removeClass(this._gridSettingsInstance.gridOriginContainer,"controlGroupHidden");break;case "grgAreaByRefSystem":case "grgPointByRefSystem":b.addClass(this._gridSettingsInstance.gridShapeContainer,"controlGroupHidden"),
b.addClass(this._gridSettingsInstance.gridUnitsContainer,"controlGroupHidden"),b.addClass(this._gridSettingsInstance.labelStyleContainer,"controlGroupHidden"),b.addClass(this._gridSettingsInstance.labelDirectionContainer,"controlGroupHidden"),b.removeClass(this._gridSettingsInstance.gridRefSystemContainer,"controlGroupHidden"),b.removeClass(this._gridSettingsInstance.labelStyleWithRefSysContainer,"controlGroupHidden")}},_getNodeByName:function(a){var b;switch(a){case "mainPage":b=this.mainPageNode;
break;case "grgAreaBySize":b=this.grgAreaBySizePageNode;break;case "grgAreaByRefSystem":b=this.grgAreaByRefSystemPageNode;break;case "grgAreaFromNonStandard":b=this.grgAreaFromNonStandardPageNode;break;case "grgPointBySize":b=this.grgPointBySizePageNode;break;case "grgPointByRefSystem":b=this.grgPointByRefSystemPageNode;break;case "grgPointByTime":b=this.grgPointByTimePageNode;this._gridSettingsInstance.gridOrigin.set("value","center");this._gridOrigin="center";break;case "settingsPage":b=this.settingsPageNode;
break;case "publishPage":b=this.publishPageNode}return b},_resetOnBackToMainPage:function(){this._showPanel("mainPage");this._reset()},_reset:function(){this._clearLayers(!0);this.dt_AreaBySize.deactivate();this.dt_PointBySize.deactivate();this.dt_PointByRefSystem.deactivate();this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation();n.removeClass(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active");n.removeClass(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active");n.removeClass(this.grgPointBySizeAddPointBtn,
"jimu-edit-active");n.removeClass(this.grgPointByRefSystemAddPointBtn,"jimu-edit-active");b.addClass(this.fromAreaContainer,"controlGroupHidden");b.addClass(this.newGRGAreaButton,"GRGNewRightButton");b.removeClass(this.newGRGAreaButton,"GRGNewDownButton");b.addClass(this.fromPointContainer,"controlGroupHidden");b.addClass(this.newGRGPointButton,"GRGNewRightButton");b.removeClass(this.newGRGPointButton,"GRGNewDownButton")},_clearLayers:function(a){this.GRGArea.clear();this.GRGArea.refresh();this.editToolbar.deactivate();
a&&(this._graphicsLayerGRGExtent.clear(),this.dt_PointBySize.removeStartGraphic(this._graphicsLayerGRGExtent),this.dt_PointByRefSystem.removeStartGraphic(this._graphicsLayerGRGExtent),this.angle=0,this.grgAreaBySizeRotation.setValue(this.angle),this.grgAreaBySizeRotation.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.grgAreaBySizeCellWidth.set("disabled",!0))},_createGridSettings:function(){this._gridSettingsInstance=new V({nls:this.nls,config:this.config,appConfig:this.appConfig},
f.create("div",{},this.gridSettingsNode));this.own(this._gridSettingsInstance.on("gridSettingsChanged",a.hitch(this,function(a){this._cellShape=a.cellShape;this._labelStartPosition=a.labelStartPosition;this._cellUnits=a.cellUnits;this._labelType=a.labelType;this._labelTypeWithRefSys=a.labelTypeWithRefSys;this._labelDirection=a.labelDirection;this._gridOrigin=a.gridOrigin;this._referenceSystem=a.referenceSystem;"default"===this._cellShape?(this.grgAreaBySizeCellHeight.setValue(this.grgAreaBySizeCellWidth.value),
this.grgPointBySizeCellHeight.set("disabled",!1),this.grgPointBySizeCellHeight.setValue(this.grgPointBySizeCellWidth.value)):(this.grgAreaBySizeCellHeight.set("disabled",!0),this.grgAreaBySizeCellHeight.setValue(0),this.grgPointBySizeCellHeight.set("disabled",!0),this.grgPointBySizeCellHeight.setValue(0));"gridReferenceSystem"!==this._labelTypeWithRefSys?(b.addClass(this.grgAreaByRefSystemLabelFormat,"controlGroupHidden"),b.addClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden")):(b.removeClass(this.grgAreaByRefSystemLabelFormat,
"controlGroupHidden"),b.removeClass(this.grgPointByRefSystemLabelFormat,"controlGroupHidden"));var c=new w(a.gridFillColor);c.a=1-a.gridFillTransparency;var d=new w(a.gridOutlineColor);d.a=1-a.gridOutlineTransparency;this._GRGAreaFillSymbol={type:"esriSFS",style:"esriSFSSolid",color:c,outline:{color:d,width:2,type:"esriSLS",style:"esriSLSSolid"}};c=new N(this._GRGAreaFillSymbol);c=new W(c);this.GRGArea.setRenderer(c);var c=new w(a.fontSettings.textColor),d=255*(1-a.fontSettings.labelTransparency),
e=0;a.fontSettings.haloOn&&(e=parseInt(a.fontSettings.haloSize,10));var f=new w(a.fontSettings.haloColor);this._cellTextSymbol={type:"esriTS",color:[c.r,c.g,c.b,d],haloSize:e,haloColor:[f.r,f.g,f.b,d],horizontalAlignment:"center",font:{size:parseInt(a.fontSettings.fontSize,10),style:a.fontSettings.font.italic?"italic":"normal",weight:a.fontSettings.font.bold?"bold":"normal",family:a.fontSettings.font.fontFamily,decoration:a.fontSettings.font.underline?"underline":"none"}};a=new Z({labelExpressionInfo:{value:"{grid}"}});
a.symbol=new P(this._cellTextSymbol);this.GRGArea.setLabelingInfo([a]);this.GRGArea.refresh()})));this._gridSettingsInstance.startup()},_showPanel:function(a){var b;this._currentOpenPanel&&(b=this._getNodeByName(this._currentOpenPanel),d.add(b,"GRGDrafterHidden"));b=this._getNodeByName(a);d.remove(b,"GRGDrafterHidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=a},_grgAreaBySizeDrawPolygonIconClicked:function(){this._clearLayers(!0);d.contains(this.grgAreaBySizeDrawExtentIcon,
"jimu-extent-active")&&(this.dt_AreaBySize.deactivate(),d.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active"));d.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("polygon"),this.own(e(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(S.MOVE|S.EDIT_VERTICES,a.graphic)}))));
d.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")},_grgAreaBySizeDrawExtentIconClicked:function(){this._clearLayers(!0);d.contains(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active")&&(this.dt_AreaBySize.deactivate(),d.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));d.contains(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")?(this.dt_AreaBySize.deactivate(),this.map.enableMapNavigation()):(this.map.disableMapNavigation(),this.dt_AreaBySize.activate("extent"),
this.own(e(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!0;this.editToolbar.activate(S.MOVE|S.ROTATE|S.SCALE,a.graphic)}))));d.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")},_grgPointBySizeDrawButtonClicked:function(){if(d.contains(this.grgPointBySizeAddPointBtn,"jimu-edit-active"))this.dt_PointBySize.deactivate(),this.map.enableMapNavigation();else{this.dt_PointBySize.removeStartGraphic(this._graphicsLayerGRGExtent);
this._clearLayers(!0);this.grgPointBySizeCoordTool.manualInput=!1;this.dt_PointBySize._setTooltipMessage(0);this.map.disableMapNavigation();this.dt_PointBySize.activate("point");var a=this.dt_PointBySize._tooltip;a&&(a.innerHTML=this.nls.drawPointToolTip)}d.toggle(this.grgPointBySizeAddPointBtn,"jimu-edit-active")},_grgPointByRefSystemDrawButtonClicked:function(){if(d.contains(this.grgPointByRefSystemAddPointBtn,"jimu-edit-active"))this.dt_PointByRefSystem.deactivate(),this.map.enableMapNavigation();
else{this.dt_PointByRefSystem.removeStartGraphic(this._graphicsLayerGRGExtent);this._clearLayers(!0);this.grgPointByRefSystemCoordTool.manualInput=!1;this.dt_PointByRefSystem._setTooltipMessage(0);this.map.disableMapNavigation();this.dt_PointByRefSystem.activate("point");var a=this.dt_PointByRefSystem._tooltip;a&&(a.innerHTML=this.nls.drawPointToolTip)}d.toggle(this.grgPointByRefSystemAddPointBtn,"jimu-edit-active")},_grgPointByTimeDrawButtonClicked:function(){if(d.contains(this.grgPointByTimeAddPointBtn,
"jimu-edit-active"))this.dt_PointByTime.deactivate(),this.map.enableMapNavigation();else{this.dt_PointByTime.removeStartGraphic(this._graphicsLayerGRGExtent);this._clearLayers(!0);this.grgPointByTimeCoordTool.manualInput=!1;this.dt_PointByTime._setTooltipMessage(0);this.map.disableMapNavigation();this.dt_PointByTime.activate("point");var a=this.dt_PointByTime._tooltip;a&&(a.innerHTML=this.nls.drawPointToolTip)}d.toggle(this.grgPointByTimeAddPointBtn,"jimu-edit-active")},_grgAreaByRefSystemDrawIconClicked:function(){d.contains(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active")?(this.dt_AreaByRefSystem.deactivate(),this.map.enableMapNavigation()):(this._graphicsLayerGRGExtent.clear(),this.grgPointBySizeCoordTool.manualInput=!1,this.map.disableMapNavigation(),this.dt_AreaByRefSystem.activate("extent"),this.editToolbar.deactivate(),this.own(e(this._graphicsLayerGRGExtent,"click",a.hitch(this,function(a){this.editToolbar._defaultOptions.uniformScaling=!1;this.editToolbar.activate(S.MOVE|S.SCALE,a.graphic)}))));d.toggle(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active")},_dt_AreaBySizeComplete:function(a){var b;this.map.enableMapNavigation();this.dt_AreaBySize.deactivate();"extent"===a.geometry.type?(a.geometry=U.extentToPolygon(a.geometry),b=new t(a.geometry,this._extentSym),this.grgAreaBySizeRotation.set("disabled",!1),d.toggle(this.grgAreaBySizeDrawExtentIcon,"jimu-extent-active")):(b=new t(a.geometry,this._extentSym),a.geometry=U.extentToPolygon(a.geometry.getExtent()),d.toggle(this.grgAreaBySizeDrawPolygonIcon,"jimu-polygon-active"));"default"===
this._cellShape&&this.grgAreaBySizeCellHeight.set("disabled",!1);this.grgAreaBySizeCellWidth.set("disabled",!1);this._graphicsLayerGRGExtent.add(b);this.centerPoint=a.geometry.getCentroid();this._calculateCellWidthAndHeight(a.geometry)},_calculateCellWidthAndHeight:function(a){4326===a.spatialReference.wkid&&(a=I.geographicToWebMercator(a));var b=v.geodesicLength(new H({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,1).x,a.getPoint(0,1).y]]],spatialReference:a.spatialReference}),this._cellUnits)/
this.cellHorizontal.value,c=v.geodesicLength(new H({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,3).x,a.getPoint(0,3).y]]],spatialReference:a.spatialReference}),this._cellUnits)/this.cellVertical.value,d=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(b,this._cellUnits),e=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(c,this._cellUnits);2E4>d&&(2E4>e&&"hexagon"!==this._cellShape||"hexagon"===this._cellShape)?(this.geodesicGrid=!0,this.grgAreaBySizeCellWidth.setValue(b),
"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(c):this.grgAreaBySizeCellHeight.setValue(0)):(this.geodesicGrid=!1,this.grgAreaBySizeCellWidth.setValue(v.distance(a.getPoint(0,0),a.getPoint(0,1),this._cellUnits)/this.cellHorizontal.value),"default"===this._cellShape?this.grgAreaBySizeCellHeight.setValue(v.distance(a.getPoint(0,0),a.getPoint(0,3),this._cellUnits)/this.cellVertical.value):this.grgAreaBySizeCellHeight.setValue(0))},_dt_PointBySizeComplete:function(){d.remove(this.grgPointBySizeAddPointBtn,
"jimu-edit-active");this.dt_PointBySize.deactivate();this.map.enableMapNavigation()},_dt_PointByRefSystemComplete:function(){d.remove(this.grgPointByRefSystemAddPointBtn,"jimu-edit-active");this.dt_PointByRefSystem.deactivate();this.map.enableMapNavigation()},_dt_PointByTimeComplete:function(){d.remove(this.grgPointByTimeAddPointBtn,"jimu-edit-active");this.dt_PointByTime.deactivate();this.map.enableMapNavigation()},_dt_AreaByRefSystemComplete:function(a){d.remove(this.grgAreaByRefSystemDrawIcon,
"jimu-extent-active");a=new t(U.extentToPolygon(a.geometry),this._extentSym);this._graphicsLayerGRGExtent.add(a);this.dt_AreaByRefSystem.deactivate();this.map.enableMapNavigation()},_grgPointBySizeCoordToolKeyWasPressed:function(b){this.grgPointBySizeCoordTool.manualInput=!0;b.keyCode===q.ENTER&&this.grgPointBySizeCoordTool.inputCoordinate.getInputType().then(a.hitch(this,function(a){"UNKNOWN"===a.inputType?new x({message:this.nls.parseCoordinatesError}):(this._reset(),r.publish("grg-center-point-input",
this.grgPointBySizeCoordTool.inputCoordinate.coordinateEsriGeometry),this._grgPointBySizeSetCoordLabel(a.inputType),this.grgPointBySizeCoordTool.inputCoordinate.set("formatString",this.grgPointBySizeCoordinateFormat.content.formats[a.inputType].defaultFormat),this.grgPointBySizeCoordTool.inputCoordinate.set("formatType",a.inputType),this.dt_PointBySize.addStartGraphic(a.coordinateEsriGeometry,this._ptSym,this._graphicsLayerGRGExtent))}))},_grgPointByRefSystemCoordToolKeyWasPressed:function(b){this.grgPointByRefSystemCoordTool.manualInput=
!0;b.keyCode===q.ENTER&&this.grgPointByRefSystemCoordTool.inputCoordinate.getInputType().then(a.hitch(this,function(a){"UNKNOWN"===a.inputType?new x({message:this.nls.parseCoordinatesError}):(this._reset(),r.publish("grg-center-point-input",this.grgPointByRefSystemCoordTool.inputCoordinate.coordinateEsriGeometry),this._grgPointByRefSystemSetCoordLabel(a.inputType),this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatString",this.grgPointByRefSystemCoordinateFormat.content.formats[a.inputType].defaultFormat),
this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatType",a.inputType),this.dt_PointByRefSystem.addStartGraphic(a.coordinateEsriGeometry,this._ptSym,this._graphicsLayerGRGExtent))}))},_grgPointByTimeCoordToolKeyWasPressed:function(b){this.grgPointByTimeCoordTool.manualInput=!0;b.keyCode===q.ENTER&&this.grgPointByTimeCoordTool.inputCoordinate.getInputType().then(a.hitch(this,function(a){"UNKNOWN"===a.inputType?new x({message:this.nls.parseCoordinatesError}):(this._reset(),r.publish("grg-center-point-input",
this.grgPointByTimeCoordTool.inputCoordinate.coordinateEsriGeometry),this._grgPointByTimeSetCoordLabel(a.inputType),this.grgPointByTimeCoordTool.inputCoordinate.set("formatString",this.grgPointByTimeCoordinateFormat.content.formats[a.inputType].defaultFormat),this.grgPointByTimeCoordTool.inputCoordinate.set("formatType",a.inputType),this.dt_PointByTime.addStartGraphic(a.coordinateEsriGeometry,this._ptSym,this._graphicsLayerGRGExtent))}))},_grgPointBySizeSetCoordLabel:function(a){this.grgPointBySizeCoordInputLabel.innerHTML=
l.substitute("GRG Origin (${crdType})",{crdType:a})},_grgPointByRefSystemSetCoordLabel:function(a){this.grgPointByRefSystemCoordInputLabel.innerHTML=l.substitute("GRG Origin (${crdType})",{crdType:a})},_grgPointByTimeSetCoordLabel:function(a){this.grgPointByTimeCoordInputLabel.innerHTML=l.substitute("GRG Origin (${crdType})",{crdType:a})},_grgPointBySizeCoordFormatButtonClicked:function(){this.grgPointBySizeCoordinateFormat.content.set("ct",this.grgPointBySizeCoordTool.inputCoordinate.formatType);
u.open({popup:this.grgPointBySizeCoordinateFormat,around:this.grgPointBySizeCoordFormatButton})},_grgPointByRefSystemCoordFormatButtonClicked:function(){this.grgPointByRefSystemCoordinateFormat.content.set("ct",this.grgPointByRefSystemCoordTool.inputCoordinate.formatType);u.open({popup:this.grgPointByRefSystemCoordinateFormat,around:this.grgPointByRefSystemCoordFormatButton})},_grgPointByTimeCoordFormatButtonClicked:function(){this.grgPointByTimeCoordinateFormat.content.set("ct",this.grgPointByTimeCoordTool.inputCoordinate.formatType);
u.open({popup:this.grgPointByTimeCoordinateFormat,around:this.grgPointByTimeCoordFormatButton})},_grgPointBySizeCoordFormatPopupApplyButtonClicked:function(){var a=this.grgPointBySizeCoordinateFormat.content.formats[this.grgPointBySizeCoordinateFormat.content.ct],b=a.defaultFormat,c=this.grgPointBySizeCoordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.grgPointBySizeCoordTool.inputCoordinate.set("formatPrefix",this.grgPointBySizeCoordinateFormat.content.addSignChkBox.checked);
this.grgPointBySizeCoordTool.inputCoordinate.set("formatString",b);this.grgPointBySizeCoordTool.inputCoordinate.set("formatType",c);this._grgPointBySizeSetCoordLabel(c);u.close(this.grgPointBySizeCoordinateFormat)},_grgPointByRefSystemCoordFormatPopupApplyButtonClicked:function(){var a=this.grgPointByRefSystemCoordinateFormat.content.formats[this.grgPointByRefSystemCoordinateFormat.content.ct],b=a.defaultFormat,c=this.grgPointByRefSystemCoordinateFormat.content.frmtSelect.get("value");a.useCustom&&
(b=a.customFormat);this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatPrefix",this.grgPointByRefSystemCoordinateFormat.content.addSignChkBox.checked);this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatString",b);this.grgPointByRefSystemCoordTool.inputCoordinate.set("formatType",c);this._grgPointByRefSystemSetCoordLabel(c);u.close(this.grgPointByRefSystemCoordinateFormat)},_grgPointByTimeCoordFormatPopupApplyButtonClicked:function(){var a=this.grgPointByTimeCoordinateFormat.content.formats[this.grgPointByTimeCoordinateFormat.content.ct],
b=a.defaultFormat,c=this.grgPointByTimeCoordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.grgPointByTimeCoordTool.inputCoordinate.set("formatPrefix",this.grgPointByTimeCoordinateFormat.content.addSignChkBox.checked);this.grgPointByTimeCoordTool.inputCoordinate.set("formatString",b);this.grgPointByTimeCoordTool.inputCoordinate.set("formatType",c);this._grgPointByTimeSetCoordLabel(c);u.close(this.grgPointByTimeCoordinateFormat)},_setNumberRowsColumnsCheckBoxChanged:function(){this.setNumberRowsColumns.checked?
(this.grgAreaBySizeCellWidth.set("disabled",!0),this.grgAreaBySizeCellHeight.set("disabled",!0),this.cellHorizontal.set("disabled",!1),this.cellVertical.set("disabled",!1)):(this.cellHorizontal.set("disabled",!0),this.cellVertical.set("disabled",!0));this._clearLayers(!0)},_setNumberRowsColumnsTimeCheckBoxChanged:function(){this.setNumberRowsColumnsTime.checked?(this.grgPointByTimeCellWidth.set("disabled",!0),this.grgPointByTimeCellHeight.set("disabled",!0),this.grgPointByTimeCellHorizontal.set("disabled",
!1),this.grgPointByTimeCellVertical.set("disabled",!1)):(this.grgPointByTimeCellHorizontal.set("disabled",!0),this.grgPointByTimeCellVertical.set("disabled",!0),this.grgPointByTimeCellWidth.set("disabled",!1),this.grgPointByTimeCellHeight.set("disabled",!1));this._clearLayers(!0)},_grgAreaBySizeCreateGRGButtonClicked:function(){if(this._graphicsLayerGRGExtent.graphics[0]&&this.grgAreaBySizeCellWidth.isValid()&&this.grgAreaBySizeCellHeight.isValid()&&this.grgAreaBySizeRotation.isValid()){this._clearLayers(!1);
var a=0===this.angle?U.extentToPolygon(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()):this._graphicsLayerGRGExtent.graphics[0].geometry;4326===a.spatialReference.wkid&&(a=I.geographicToWebMercator(a));var b,c;this.geodesicGrid?(b=v.geodesicLength(new H({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,1).x,a.getPoint(0,1).y]]],spatialReference:a.spatialReference}),"meters"),c=v.geodesicLength(new H({paths:[[[a.getPoint(0,0).x,a.getPoint(0,0).y],[a.getPoint(0,3).x,a.getPoint(0,
3).y]]],spatialReference:a.spatialReference}),"meters")):(b=v.distance(a.getPoint(0,0),a.getPoint(0,1),"meters"),c=v.distance(a.getPoint(0,0),a.getPoint(0,3),"meters"));var a=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgAreaBySizeCellWidth.value,this._cellUnits),d=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgAreaBySizeCellHeight.value,this._cellUnits);b=Math.round(b/a);c="default"===this._cellShape?Math.round(c/d):Math.round(c/a/Math.cos(30*
Math.PI/180))+1;C.checkGridSize(b,c)?(a=C.createGRG(b,c,this.centerPoint,a,d,this.angle,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,"center",this.geodesicGrid,this.map),this.GRGArea.applyEdits(a,null,null),this.map.setExtent(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().expand(2),!1),this._graphicsLayerGRGExtent.clear(),this._showPanel("publishPage")):new x({message:this.nls.tooManyCellsErrorMessage})}},_grgPointBySizeCreateGRGButtonClicked:function(){if(this.dt_PointBySize.startGraphic&&
this.grgPointBySizeCellWidth.isValid()&&this.grgPointBySizeCellHeight.isValid()&&this.gridAnglePoint.isValid()){var a=I.geographicToWebMercator(this.grgPointBySizeCoordTool.inputCoordinate.coordinateEsriGeometry),b=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointBySizeCellWidth.value,this._cellUnits),c=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointBySizeCellHeight.value,this._cellUnits);this.geodesicGrid=2E4>b&&(2E4>c&&"hexagon"!==this._cellShape||
"hexagon"===this._cellShape)?!0:!1;if(C.checkGridSize(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value)){a=C.createGRG(this.grgPointBySizeCellHorizontal.value,this.grgPointBySizeCellVertical.value,a,b,c,this.gridAnglePoint.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,this._gridOrigin,this.geodesicGrid,this.map);this.GRGArea.applyEdits(a,null,null);b=[];for(c=0;c<a.length;c++)b.push(a[c].geometry);a=v.union(b);this.map.setExtent(a.getExtent().expand(2),
!1);this._showPanel("publishPage")}else new x({message:this.nls.tooManyCellsErrorMessage})}else new x({message:this.nls.missingParametersMessage})},_grgPointByTimeCreateGRGButtonClicked:function(){var a,b,c;if(this.dt_PointByTime.startGraphic&&this.grgPointByTimeTime.isValid()&&this.grgPointByTimeRate.isValid()&&this.grgPointByTimeRotation.isValid()){var d=this.grgPointByTimeTime.get("value")*this.grgPointByTimeTimeUnits.get("value");b=this.grgPointByTimeRate.get("value")*this.grgPointByTimeRateUnits.value.split(";")[0]/
this.grgPointByTimeRateUnits.value.split(";")[1];b*=d;d=I.geographicToWebMercator(this.grgPointByTimeCoordTool.inputCoordinate.coordinateEsriGeometry);2E5>b?(this.geodesicGrid=!0,a=v.geodesicBuffer(d,b,9001),b=U.extentToPolygon(a.getExtent()),b=v.geodesicLength(new H({paths:[[[b.getPoint(0,0).x,b.getPoint(0,0).y],[b.getPoint(0,1).x,b.getPoint(0,1).y]]],spatialReference:b.spatialReference}),"meters")):(this.geodesicGrid=!1,a=v.buffer(d,b,9001),b=U.extentToPolygon(a.getExtent()),b=v.distance(b.getPoint(0,
0),b.getPoint(0,1),"meters"));a=new t(a,this._extentSym);this._graphicsLayerGRGTimeExtent.add(a);if(this.setNumberRowsColumnsTime.checked)if(this.grgPointByTimeCellHorizontal.isValid()&&this.grgPointByTimeCellVertical.isValid())a=b/this.grgPointByTimeCellHorizontal.value,c=b/this.grgPointByTimeCellVertical.value;else{new x({message:this.nls.invalidHorizontalVerticalParametersMessage});return}else if(this.grgPointByTimeCellWidth.isValid()&&this.grgPointByTimeCellHeight.isValid())a=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByTimeCellWidth.value,
this._cellUnits),c=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByTimeCellHeight.value,this._cellUnits);else{new x({message:this.nls.invalidWidthHeightParametersMessage});return}var e=Math.round(b/a);b="default"===this._cellShape?Math.round(b/c):Math.round(b/a/Math.cos(30*Math.PI/180))+1;1>e&&(e=1);1>b&&(b=1);if(C.checkGridSize(e,b)){d=C.createGRG(e,b,d,a,c,this.grgPointByTimeRotation.value,this._labelStartPosition,this._labelType,this._labelDirection,this._cellShape,
this._gridOrigin,this.geodesicGrid,this.map);this.GRGArea.applyEdits(d,null,null);this.createGraphicDeleteMenu();this.dt_PointByTime.removeStartGraphic(this._graphicsLayerGRGExtent);b=[];for(a=0;a<d.length;a++)b.push(d[a].geometry);d=v.union(b);this.map.setExtent(d.getExtent().expand(2),!1);this._showPanel("publishPage")}else new x({message:this.nls.tooManyCellsErrorMessage})}else new x({message:this.nls.missingOriginParametersMessage})},_grgPointByRefSystemCreateGRGButtonClicked:function(){var a,
b,c,d,e=[];this._clearLayers(!1);if(C.checkGridSize(this.grgPointByRefCellHorizontal.getValue(),this.grgPointByRefCellVertical.getValue())){if(this.dt_PointByRefSystem.startGraphic&&this.grgPointByRefCellHorizontal.isValid()&&this.grgPointByRefCellVertical.isValid()){b=this.grgPointByRefSystemCoordTool.inputCoordinate.coordinateEsriGeometry;switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":a=0>b.x?b.x-b.x%6-6:b.x-b.x%6;d=0>b.y?b.y-b.y%8-8:b.y-b.y%8;break;case "100000":c=Y.LLtoMGRS(b.y,
b.x,5);c=c.substring(0,c.length-10);c+="0000000000";break;case "10000":c=Y.LLtoMGRS(b.y,b.x,1);break;case "1000":c=Y.LLtoMGRS(b.y,b.x,2);break;case "100":c=Y.LLtoMGRS(b.y,b.x,3);break;case "10":c=Y.LLtoMGRS(b.y,b.x,4)}if("UTM"===this.grgPointByRefSystemGridSize.getValue())c=new G(a,d),a=6*this.grgPointByRefCellHorizontal.getValue(),b=8*this.grgPointByRefCellVertical.getValue(),d=new F({xmin:c.x,ymin:c.y,xmax:c.x+a,ymax:c.y+b,spatialReference:{wkid:4326}});else{c=Y.USNGtoPoint(c);if(isNaN(c.x)||isNaN(c.y)){new x({message:this.nls.grgPolarOriginError});
return}a=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellHorizontal.getValue();b=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),this._cellUnits)*this.grgPointByRefCellVertical.getValue();a=ba.getDestinationPoint(c,90,a);a=ba.getDestinationPoint(a,0,b);b=this.grgPointBySizeCoordTool.inputCoordinate.util.convertToMeters(this.grgPointByRefSystemGridSize.getValue(),
this._cellUnits)/5;c=ba.getDestinationPoint(c,45,b);a=ba.getDestinationPoint(a,225,b);d=new F({xmin:c.x,ymin:c.y,xmax:a.x,ymax:a.y,spatialReference:{wkid:4326}})}C.checkPolarRegion(d)&&new x({message:this.nls.grgPolarRegionError});d=I.geographicToWebMercator(d);a=X.zonesFromExtent(d,this.map);var f;c=[];switch(this.grgPointByRefSystemGridSize.getValue()){case "UTM":for(b=0;b<a.length;b++)d=4326!==this.map.spatialReference.wkid?new t(I.geographicToWebMercator(a[b].gridPolygon.unclippedPolygon)):new t(a[b].gridPolygon.unclippedPolygon),
f=this.grgPointByRefLabelFormat.value,f=f.replace(/Z/,a[b].gridPolygon.text),d.setAttributes({grid:f}),c.push(d),e.push(d.geometry);break;default:a=X.processZonePolygons(a,this.map,d);for(f=1E4;f>=this.grgPointByRefSystemGridSize.getValue();){var g=[];for(b=0;b<a.length;b++)g=g.concat(X.handleGridSquares(a[b],this.map,f,d));a=[];a=g;f/=10}for(b=0;b<a.length;b++)d=4326!==this.map.spatialReference.wkid?new t(a[b].clippedPolyToUTMZone):new t(I.webMercatorToGeographic(a[b].clippedPolyToUTMZone)),"gridReferenceSystem"===
this._labelTypeWithRefSys&&(f=this.grgPointByRefLabelFormat.value,f=f.replace(/Y/,a[b].y),f=f.replace(/X/,a[b].x),f=f.replace(/S/,a[b].GZD),f=f.replace(/Z/,a[b].utmZone+a[b].latitudeZone),d.setAttributes({grid:f}),c.push(d)),e.push(d.geometry)}0<e.length&&(b=v.union(e),this.map.setExtent(b.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&(c=C.labelReferenceGrid(e,this._labelTypeWithRefSys,this._labelStartPosition,this.grgPointByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(c,
null,null);this.createGraphicDeleteMenu();this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}}else new x({message:this.nls.tooManyCellsErrorMessage})},_grgAreaByRefSystemCreateGRGButtonClicked:function(){var a,b;if(this._graphicsLayerGRGExtent.graphics[0]){var c=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getWidth(),10)/this.grgAreaByRefSystemGridSize.getValue(),d=parseInt(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent().getHeight(),10)/this.grgAreaByRefSystemGridSize.getValue();
if(C.checkGridSize(c,d)||"UTM"===this.grgAreaByRefSystemGridSize.getValue()){4326!==this.map.spatialReference.wkid?C.checkPolarRegion(I.webMercatorToGeographic(this._graphicsLayerGRGExtent.graphics[0].geometry))&&new x({message:this.nls.grgPolarRegionError}):C.checkPolarRegion(this._graphicsLayerGRGExtent.graphics[0].geometry)&&new x({message:this.nls.grgPolarRegionError});c=[];this._clearLayers(!1);var e=X.zonesFromExtent(this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent(),this.map),d=
[];switch(this.grgAreaByRefSystemGridSize.getValue()){case "UTM":for(f=0;f<e.length;f++)a=this.grgAreaByRefSystemClipToggle.checked?4326!==this.map.spatialReference.wkid?new t(e[f].gridPolygon.clippedPolygon):new t(I.webMercatorToGeographic(e[f].gridPolygon.clippedPolygon)):4326!==this.map.spatialReference.wkid?new t(I.geographicToWebMercator(e[f].gridPolygon.unclippedPolygon)):new t(e[f].gridPolygon.unclippedPolygon),c.push(a.geometry),b=this.grgAreaByRefLabelFormat.value,b=b.replace(/Z/,e[f].gridPolygon.text),
a.setAttributes({grid:b}),d.push(a);break;default:e=X.processZonePolygons(e,this.map,this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent());for(a=1E4;a>=this.grgAreaByRefSystemGridSize.getValue();){b=[];for(f=0;f<e.length;f++)b=b.concat(X.handleGridSquares(e[f],this.map,a,this._graphicsLayerGRGExtent.graphics[0].geometry.getExtent()));e=[];e=b;a/=10}for(var f=0;f<e.length;f++)a=this.grgAreaByRefSystemClipToggle.checked?4326!==this.map.spatialReference.wkid?new t(e[f].clippedPolygon):new t(I.webMercatorToGeographic(e[f].clippedPolygon)):
4326!==this.map.spatialReference.wkid?new t(e[f].clippedPolyToUTMZone):new t(I.webMercatorToGeographic(e[f].clippedPolyToUTMZone)),c.push(a.geometry),"gridReferenceSystem"===this._labelTypeWithRefSys&&(b=this.grgAreaByRefLabelFormat.value,b=b.replace(/Y/,e[f].y),b=b.replace(/X/,e[f].x),b=b.replace(/S/,e[f].GZD),b=b.replace(/Z/,e[f].utmZone+e[f].latitudeZone),a.setAttributes({grid:b}),d.push(a))}0<c.length&&(f=v.union(c),this.map.setExtent(f.getExtent().expand(2),!1));"gridReferenceSystem"!==this._labelTypeWithRefSys&&
(d=C.labelReferenceGrid(c,this._labelTypeWithRefSys,this._labelStartPosition,this.grgAreaByRefSystemGridSize.getValue()));this.GRGArea.applyEdits(d,null,null);this.createGraphicDeleteMenu();this._graphicsLayerGRGExtent.hide();this._showPanel("publishPage")}else new x({message:this.nls.tooManyCellsErrorMessage})}},createGraphicDeleteMenu:function(){var b,c=new z({});c.addChild(new K({label:"Delete",onClick:a.hitch(this,function(){this.GRGArea.remove(b);this.GRGArea.refresh()})}));c.startup();this.GRGArea.on("mouse-over",
function(a){b=a.graphic;c.bindDomNode(a.graphic.getDojoShape().getNode())});this.GRGArea.on("mouse-out",function(a){c.unBindDomNode(a.graphic.getDojoShape().getNode())})},_removeStyleFile:function(a,b){var c=null,c="js"===b?"src":"css"===b?"href":"none";b=document.getElementsByTagName("js"===b?"script":"css"===b?"link":"none");for(var d=b.length;0<=d;d--)b[d]&&null!==b[d].getAttribute(c)&&-1!==b[d].getAttribute(c).indexOf(a)&&b[d].parentNode.removeChild(b[d])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?
D.loadStyleLink("darkOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?D.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css")},destroy:function(){this.inherited(arguments);this.map.removeLayer(this._graphicsLayerGRGExtent);this.map.removeLayer(this.GRGArea)},
_initSaveToPortal:function(b){E.registerOAuthInfos();E.getCredential(this.appConfig.portalUrl+"/sharing",{oAuthPopupConfirmation:!1}).then(a.hitch(this,function(){(new A.Portal(this.appConfig.portalUrl)).signIn().then(a.hitch(this,function(c){var d=c.credential.token,e=c.orgId,f=c.username;if("org_user"===c.role)this.publishMessage.innerHTML=this.nls.createService.format(this.nls.userRole);else{var g=this.appConfig.portalUrl+"sharing/content/users/"+f+"/createService";C.isNameAvailable(this.appConfig.portalUrl+
"sharing/rest/portals/"+e+"/isServiceNameAvailable",d,b).then(a.hitch(this,function(c){c.available?(this.busyIndicator.show(),C.createFeatureService(g,d,C.getFeatureServiceParams(b,this.map)).then(a.hitch(this,function(c){if(c.success){var e=c.serviceurl.replace(/rest/g,"rest/admin")+"/addToDefinition";C.addDefinitionToService(e,d,C.getLayerParams(b,this.map,this._cellTextSymbol,this._GRGAreaFillSymbol)).then(a.hitch(this,function(e){if(e.success){e=new Q(c.serviceurl+"/0?token\x3d"+d,{id:b,outFields:["*"]});
this.map.addLayers([e]);var f;if(e.loaded)f=J.getInstanceSync().getLayerInfoById(b),f.enablePopup(),this._showLabels&&f.showLabels();else e.on("load",a.hitch(this,function(){f=J.getInstanceSync().getLayerInfoById(b);f.enablePopup();this._showLabels&&f.showLabels()}));var g=[];p.forEach(this.GRGArea.graphics,function(a){g.push(new t(a.geometry,null,{grid:a.attributes.grid}))},this);e.applyEdits(g,null,null).then(a.hitch(this,function(){this._reset()})).otherwise(a.hitch(this,function(){this._reset()}));
this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+c.itemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e"}}),a.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.addToDefinition.format(a.message)}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.unableToCreate.format(b)}),a.hitch(this,function(a){this.busyIndicator.hide();
this.publishMessage.innerHTML=this.nls.createService.format(a.message)}))):(this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.publishingFailedLayerExists.format(b))}),a.hitch(this,function(a){this.busyIndicator.hide();this.publishMessage.innerHTML=this.nls.checkService.format(a.message)}))}}),a.hitch(this,function(a){this.publishMessage.innerHTML=a.message}))}));E.destroyCredentials()}})});